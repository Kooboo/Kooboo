!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=42)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(50),r=n(24),i=n(30),a=n(51),l=n(52),s=n(29),c=n(53),u=n(21);t.default=new class{constructor(){this._editing=!1,this.operationManager=new o.operationManager,this.container=u.createContainer(),this.floatMenuClosing=!1,this.domChangeEvent=new r.SelectedDomEvent,this.editableEvent=new a.EditableEvent,this.tinymceInputEvent=new l.TinymceInputEvent,this.operationEvent=new s.OperationEvent,this.hoverDomEvent=new i.HoverDomEvent,this.closeEditingEvent=new c.CloseEditingEvent}set editing(e){this._editing=e,this.editableEvent.emit(e)}get editing(){return this._editing}}},function(e,t,n){"use strict";function o(e){let{tagName:t,className:n,innerText:o}=e,r=document.createElement(t);return n&&r.classList.add(n),o&&(r.innerText=o),r}Object.defineProperty(t,"__esModule",{value:!0}),t.createButton=e=>o({tagName:"div",className:"kb_web_editor_btn",innerText:e}),t.createDiv=()=>o({tagName:"div",className:"kb_web_editor_div"}),t.createInput=()=>o({tagName:"input",className:"kb_web_editor_input"}),t.createIframe=()=>o({tagName:"iframe",className:"kb_web_editor_iframe"}),t.createImg=()=>o({tagName:"img"}),t.createP=()=>o({tagName:"p"}),t.createPrimaryButton=function(e){let n=t.createButton(e);return n.classList.add("kb_web_editor_btn_primary"),n},t.createLabelInput=function(e,n){let o=t.createDiv();o.classList.add("kb_web_editor_label_input");let r=t.createDiv();r.innerText=e;let i=t.createDiv(),a=t.createInput();return i.appendChild(a),null!=n&&(r.style.width=n+"px"),null!=n&&(i.style.left=n+5+"px"),o.appendChild(r),o.appendChild(i),{input:o,getContent:()=>a.value,setContent:e=>a.value=e,setInputHandler:e=>a.oninput=e}},t.createRadioInput=function(e){let n=t.createDiv();n.classList.add("kb_web_editor_radio_input");let o=t.createInput();o.type="radio",n.appendChild(o);let r=t.createDiv();return r.innerText=e,n.appendChild(r),{radio:n,setChecked:e=>o.checked=e,getContent:()=>e}},t.createCheckboxInput=function(e,n,o){let r=t.createDiv();r.classList.add("kb_web_editor_checkobx_input");let i=t.createInput();i.type="checkbox",i.oninput=()=>o(i.checked),r.appendChild(i);let a=t.createDiv();return a.innerText=e,i.checked=n,r.appendChild(a),{checkbox:r,setChecked:e=>i.checked=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=localStorage.getItem("lang");o||(o="en"),t.lang=o;const r=parent.Kooboo;t.TEXT={MENU:r.text.common.Menu,EDIT:r.text.common.edit,COPY:r.text.inlineEditor.Copy,DELETE:r.text.common.delete,EDIT_IMAGE:r.text.inlineEditor.editImage,EDIT_LINK:r.text.inlineEditor.editLink,EDIT_IMAGES:r.text.inlineEditor.editImages,EDIT_LINKS:r.text.inlineEditor.editLinks,ENTER_LINK:r.text.inlineEditor.enterLink,EDIT_HTML_BLOCK:r.text.inlineEditor.editHtmlblock,OK:r.text.common.OK,CANCEL:r.text.common.cancel,PAGE_LINK:r.text.inlineEditor.pageLink,OUT_LINK:r.text.inlineEditor.outLink,EDIT_REPEAT:r.text.inlineEditor.editRepeaterItem,EDIT_MENU:r.text.inlineEditor.editMenu,EDIT_STYLE:r.text.inlineEditor.editStyle,ALT:"Alt ",TITLE:"Title ",WIDTH:r.text.inlineEditor.width,HEIGHT:r.text.inlineEditor.height,PLEASE_EDIT_AFTER_SAVE:r.text.inlineEditor.editAfter,COPY_REPEAT:r.text.inlineEditor.copyRepeaterItem,DELETE_REPEAR:r.text.inlineEditor.removeRepeaterItem,REPLACE_TO_IMG:r.text.inlineEditor.replacewithImage,REPLACE_TO_TEXT:r.text.inlineEditor.replacewithText,MOVE:r.text.inlineEditor.move,PREVIOUS:r.text.inlineEditor.undo,NEXT:r.text.inlineEditor.redo,SAVE:r.text.common.save,CONTENT_IMAGES:r.text.inlineEditor.contentImages,STYLE_IMAGES:r.text.inlineEditor.styleImages,DOM_IMAGES:r.text.inlineEditor.domImages,CONTENT_LINKS:r.text.inlineEditor.contentLinks,DOM_LINKS:r.text.inlineEditor.domLinks,BACKGROUND_IMAGE:r.text.inlineEditor.backgroundImage,COLOR:r.text.inlineEditor.color,BACKGROUND_COLOR:r.text.inlineEditor.backgroundColor,FONT:r.text.inlineEditor.font,FONT_SIZE:r.text.inlineEditor.fontSize,FONT_WEIGHT:r.text.inlineEditor.fontWeight,FONT_FAMILY:r.text.inlineEditor.fontFamily,SIZE:r.text.common.size,CLICK:r.text.inlineEditor.click,EXPAND_SELECTION:r.text.inlineEditor.expandSelection,GLOBAL_UPDATE:r.text.inlineEditor.globalUpdate,EDIT_COLOR:r.text.inlineEditor.editColor,EDIT_DATA:r.text.inlineEditor.editData,HTML_MODE_TIP:r.text.inlineEditor.htmlModeTip,CLICK_REPLACE:r.text.inlineEditor.clickReplace}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4);t.getScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop},t.getScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft},t.getMaxHeight=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},t.getMaxWidth=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth)},t.getAllElement=function*(e,t=!1){t&&(yield e),yield*function*e(t){if(!(t instanceof HTMLElement&&t.id==o.HOVER_BORDER_SKIP))for(let n=0;n<t.children.length;n++){const o=t.children[n];yield o,yield*e(o)}}(e)},t.getAllNode=function*(e,t=!1){t&&(yield e),yield*function*e(t){if(!(t instanceof HTMLElement&&t.id==o.HOVER_BORDER_SKIP))for(let n=0;n<t.childNodes.length;n++){const o=t.childNodes[n];yield o,yield*e(o)}}(e)},t.isBody=function(e){return"body"==e.tagName.toLowerCase()},t.isImg=function(e){return"img"==e.tagName.toLowerCase()},t.isLink=function(e){return"a"==e.tagName.toLowerCase()},t.isTextArea=function(e){return e instanceof HTMLTextAreaElement},t.isForm=function(e){return e instanceof HTMLFormElement},t.canJump=function(e){const t=["mailto:","tel:","sms:","market","geopoint:"];let n=e.getAttribute("href");if(!n)return!1;n=n.trim().toLowerCase();for(const e of t)if(n.trim().startsWith(e))return!1;return!n.startsWith("#")&&!(n.startsWith("http")&&!n.startsWith(window.location.origin.toLowerCase()))},t.reload=function(){window.top.location.reload()},t.previousNodes=function*(e,t=!1,n=!1){for(t&&(yield e);;){if(e.previousSibling)e=e.previousSibling;else{if(!n||!e.parentNode)break;e=e.parentNode}yield e}},t.nextNodes=function*(e,t=!1,n=!1){for(t&&(yield e);;){if(e.nextSibling)e=e.nextSibling;else{if(!n||!e.parentNode)break;e=e.parentNode}yield e}},t.getParentElements=function(e,t=!0){let n=[];for(t&&n.push(e);e;)(e=e.parentElement)&&n.push(e);return n},t.isInTable=function(e){return/^(thead|tbody|tfoot|th|tr|td)$/i.test(e.tagName)},t.getImportant=function(e,t,n){return n.some(n=>e.matches(n.cssRule.selectorText)&&n.cssRule.style.getPropertyPriority(t))?"important":e.style.getPropertyPriority(t)},t.shareStyle=function(e){let t=["/*! Pickr","/* kb_web_editor */"];for(let n=0;n<document.styleSheets.length;n++){let o=document.styleSheets.item(n);if(!(o.ownerNode instanceof HTMLElement))return;t.some(e=>o.ownerNode.innerHTML.startsWith(e))&&e.appendChild(o.ownerNode.cloneNode(!0))}},t.clearCssImageWarp=function(e){return e?(e=e.trim().toLocaleLowerCase(),o.BACKGROUND_IMAGE_START.test(e)&&(e=e.replace(o.BACKGROUND_IMAGE_START,"")),o.BACKGROUND_IMAGE_END.test(e)&&(e=e.replace(o.BACKGROUND_IMAGE_END,"")),e):""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDITOR_SHADE_COLOR="rgba(0,0,0,0.5)",t.STANDARD_Z_INDEX=1e7,t.HOVER_BORDER_WIDTH=2,t.HOVER_BORDER_COLOR="#1fb5f6a3",t.SELECTED_BORDER_WIDTH=1,t.SELECTED_BORDER_COLOR="red",t.HOVER_BORDER_SKIP="__HOVER_BORDER_SKIP",t.KOOBOO_ID="kooboo-id",t.KOOBOO_DIRTY="kooboo-dirty",t.KOOBOO_GUID="kooboo-guid",t.EMPTY_COMMENT="\x3c!--empty--\x3e",t.BACKGROUND_IMAGE_START=/^\s*url\s*\(\s*[\',\"]?/i,t.BACKGROUND_IMAGE_END=/[\',\"]?\)\s*$/i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(8),i=n(3);class a{constructor(e){let t="";e instanceof Node?t=e.nodeValue:e&&(t=e),e&&(this.infos=t.split("--").map(e=>e.replace(/'/g,"")).filter(e=>-1!=e.indexOf("=")).map(e=>{let t=e.split("=");return new r.kvInfo(t[0],t[1])}))}get source(){return this.getValue("source")}get uid(){return this.getValue("uid")}get id(){return this.getValue("id")}get path(){return this.getValue("path")}get attribute(){return this.getValue("attribute")}get scope(){return this.getValue("scope")}getValue(e){var t=this.infos.find(t=>t.key==e);if(t)return t.value}setValue(e,t){var n=this.infos.find(t=>t.key==e);if(n)return n.value=t}ToComment(){return new Comment(`#kooboo--${this.infos.map(e=>`${e.key}=${e.value}`).join("--")}`)}static isComment(e){return e.nodeType==Node.COMMENT_NODE&&e.nodeValue&&e.nodeValue.startsWith("#kooboo")}static isEndComment(e){return this.isComment(e)&&e.nodeValue.indexOf("--end")>-1}static isGuidComment(e){return this.isComment(e)&&e.nodeValue.indexOf(o.KOOBOO_GUID)>-1}static getComments(e){let t=[];for(;e;)t.push(...this.getAroundComments(e,!1)),e=e.parentElement;return t}static getAroundComments(e,t=!0){let n=[],o=[];for(;e;){if(a.isComment(e)){var r=new a(e);a.isEndComment(e)?o.push(r.uid):o.every(e=>e!=r.uid)&&(t&&(r.scope||r.source.startsWith("repeat"))||n.push(new a(e)))}if(e=e.previousSibling,t&&e instanceof HTMLElement)break}return n}static getAroundScopeComments(e){return a.getAroundComments(e,!1).find(e=>e.scope)}static getInnerComments(e){const t=[];for(const n of e)for(const e of i.getAllNode(n,!0))this.isComment(e)&&!this.isEndComment(e)&&t.push(new a(e));return t}}t.KoobooComment=a},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),a=n(5),l=n(7),s=n(33),c=n(12),u=r(n(0)),d=n(19),p=n(35),f=n(8),h=n(10),g=n(11),m=n(3);function b(e){let t=l.getUnpollutedEl(e),n=null,o=!1,r=null,s=null,c=null,u=null;return t&&!m.isBody(t)&&(l.isDynamicContent(t)||(o=!0),r=t.getAttribute(i.KOOBOO_ID),n=a.KoobooComment.getComments(t),n.find(e=>"menu"==e.source)&&(o=!1),s=function(e){for(const t of e)if(!t.attribute){if(t.scope)return;if("innerform"!=t.source){if(t.source.startsWith("repeat")||"none"==t.source)return;return t}}}(n),c=n.find(e=>e.scope),u=l.getHasKoobooIdEl(t),u&&l.isDynamicContent(u)&&(u=null)),{unpollutedEl:t,comments:n,operability:o,koobooId:r,fieldComment:s,scopeComment:c,kooobooIdEl:u}}t.getRepeatSourceComment=function(e,t=null){var n=e.find(e=>"repeatitem"==e.source);if(n)for(const o of e)if(o.id&&(!t||o.source==t)){let e=o.getValue("fullpath"),t=n.getValue("alias");if(e&&t&&e.indexOf(t)>-1)return o}},t.getEditableComment=function(e){return e.find(e=>"menu"==e.source||"innerform"==e.source)?null:e.find(e=>!e.source.startsWith("repeat")&&"none"!=e.source&&!e.attribute&&"innerform"!=e.source)},t.getScopeComment=function(e){return e.find(e=>e.scope)},t.hasOperation=function(e){return e.previousRecords.length>0},t.updateDomImage=function(e){return o(this,void 0,void 0,(function*(){let{kooobooIdEl:t,fieldComment:n,koobooId:o,scopeComment:r}=b(e),a=e.cloneNode(!0);var p=e.hasAttribute("srcset");e.removeAttribute("srcset");try{if(yield s.createImagePicker(e),a.outerHTML==e.outerHTML)return;let m=l.setGuid(e),b=[new d.AttributeUnit(a.getAttribute("src"),"src"),new d.AttributeUnit(a.getAttribute("style"),"style"),new d.AttributeUnit(a.getAttribute("title"),"title"),new d.AttributeUnit(a.getAttribute("alt"),"alt")];var g=[];if(t!=e||n){o=t?t.getAttribute(i.KOOBOO_ID):o;let a=t?t.innerHTML:l.getWarpContent(e),s=n||r;g.push(new h.Log([...s.infos,f.kvInfo.koobooId(o),f.kvInfo.value(l.clearKoobooInfo(a))]))}else p&&g.push(new h.Log([...r.infos,f.kvInfo.attribute("srcset"),f.kvInfo.value(""),f.kvInfo.koobooId(e.getAttribute(i.KOOBOO_ID))])),g.push(new h.Log([...r.infos,f.kvInfo.attribute("src"),f.kvInfo.value(e.getAttribute("src")),f.kvInfo.koobooId(e.getAttribute(i.KOOBOO_ID))])),g.push(new h.Log([...r.infos,f.kvInfo.attribute("style"),f.kvInfo.value(e.getAttribute("style")),f.kvInfo.koobooId(e.getAttribute(i.KOOBOO_ID))])),g.push(new h.Log([...r.infos,f.kvInfo.attribute("alt"),f.kvInfo.value(e.getAttribute("alt")),f.kvInfo.koobooId(e.getAttribute(i.KOOBOO_ID))])),g.push(new h.Log([...r.infos,f.kvInfo.attribute("title"),f.kvInfo.value(e.getAttribute("title")),f.kvInfo.koobooId(e.getAttribute(i.KOOBOO_ID))]));let y=new c.operationRecord(b,g,m);return u.default.operationManager.add(y),e.getAttribute("src")}catch(t){e.setAttribute("src",a.getAttribute("src")),e.setAttribute("style",a.getAttribute("style")),e.title=a.title,e.alt=a.alt}}))},t.updateAttributeImage=function(e){return o(this,void 0,void 0,(function*(){let t=a.KoobooComment.getAroundComments(e).find(e=>"src"==e.getValue("attribute")),n=e,o=n.getAttribute("src");g.pickImg(e=>{n.src=e;let r=l.setGuid(n),i=n.getAttribute("src"),a=new d.AttributeUnit(o,"src"),s=[...t.infos,f.kvInfo.value(i)],p=new c.operationRecord([a],[new h.Log(s)],r);u.default.operationManager.add(p)})}))},t.updateDomLink=function(e){return o(this,void 0,void 0,(function*(){let{kooobooIdEl:t,fieldComment:n,koobooId:o,scopeComment:r}=b(e),a=e.getAttribute("href");try{let s=yield p.createLinkPicker(a);e.setAttribute("href",s);let g=l.setGuid(e),m=new d.AttributeUnit(a,"href"),b=[];if(t==e)b.push(new h.Log([...r.infos,f.kvInfo.attribute("href"),f.kvInfo.value(s),f.kvInfo.koobooId(e.getAttribute(i.KOOBOO_ID))]));else{o=t?t.getAttribute(i.KOOBOO_ID):o;let a=t?t.innerHTML:l.getWarpContent(e),s=n||r;b.push(new h.Log([...s.infos,f.kvInfo.value(l.clearKoobooInfo(a)),f.kvInfo.koobooId(o)]))}let y=new c.operationRecord([m],b,g);return u.default.operationManager.add(y),s}catch(t){e.setAttribute("href",a)}}))},t.updateAttributeLink=function(e){return o(this,void 0,void 0,(function*(){let t=e.getAttribute("href"),n=a.KoobooComment.getAroundComments(e).find(e=>"href"==e.getValue("attribute"));try{let o=yield p.createLinkPicker(t);e.setAttribute("href",o);let r=l.setGuid(e),i=new d.AttributeUnit(t,"href"),a=[...n.infos,f.kvInfo.value(o)],s=new c.operationRecord([i],[new h.Log(a)],r);return u.default.operationManager.add(s),o}catch(n){e.setAttribute("href",t)}}))},t.clearContent=e=>l.clearKoobooInfo(e).replace(/\s/g,""),t.isEditable=function(e){return!/^(img|button|input|textarea|hr|area|canvas|meter|progress|select|tr|td|tbody|thead|tfoot|th|table)$/i.test(e.tagName)},t.ElementAnalyze=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(5),i=n(4),a=n(11),l=n(1);function s(e,t){let n,i,a,l=[];for(const a of o.previousNodes(e,!0,!0))if(r.KoobooComment.isComment(a)){let e=new r.KoobooComment(a);if((e.source==t||e.uid==t)&&!r.KoobooComment.isEndComment(a)){n=a,i=e.uid;break}}if(n)for(const e of o.nextNodes(n,!0,!1)){if(l.push(e),n.nodeValue.indexOf("attribute")>-1&&e instanceof Element){a=e;break}if(r.KoobooComment.isComment(e)){if(new r.KoobooComment(e).uid==i&&r.KoobooComment.isEndComment(e)){a=e;break}}}return{nodes:l,startNode:n,endNode:a}}t.clearKoobooInfo=function(e){const t=RegExp(`(data-mce-selected=".*?")|(data-mce-href=".*?")|(data-mce-style=".*?")|(${i.KOOBOO_ID}=".*?")|(${i.KOOBOO_DIRTY}(="")?)|(${i.KOOBOO_GUID}=".*?")|(\x3c!--#?kooboo.*?--\x3e)|(\x3c!--empty--\x3e)`,"g");return e.replace(t,"")},t.getCloseElement=function(e){for(;e;){if(e.hasAttribute(i.KOOBOO_ID)||r.KoobooComment.getComments(e).length>0)return e;e=e.parentElement}},t.markDirty=function(e,t=!1){for(const n of o.getAllElement(e,t))n.setAttribute(i.KOOBOO_DIRTY,"")},t.isDirty=function(e){return e.hasAttribute(i.KOOBOO_DIRTY)},t.setGuid=function(e,t=""){let n=e.getAttribute(i.KOOBOO_GUID);return t?n=t:n||(n=a.newGuid()),e.setAttribute(i.KOOBOO_GUID,n),n},t.getGuidComment=function(e){return`\x3c!--${i.KOOBOO_GUID} ${e}--\x3e`},t.isDynamicContent=function(e){return e.innerHTML.trim().indexOf("#kooboo--source")>-1},t.getPageId=function(){for(const e of o.getAllNode(document))if(r.KoobooComment.isComment(e)){let t=new r.KoobooComment(e.nodeValue);if("page"==t.source)return t.getValue("id")}},t.getWarpContent=function(e){for(;e&&!r.KoobooComment.getAroundComments(e).length;)e=e.previousSibling?e.previousSibling:e.parentElement;let t=r.KoobooComment.getAroundComments(e)[0],{nodes:n}=s(e,t.uid);n=n.map(e=>e.cloneNode(!0));let o=l.createDiv();return o.append(...n),o.innerHTML},t.getWrapDom=s,t.getUnpollutedEl=function(e,t=!0){for(!t&&e&&(e=e.parentElement);e;){if(!e.hasAttribute(i.KOOBOO_DIRTY))return e;if(r.KoobooComment.getAroundScopeComments(e))return;e=e.parentElement}},t.getHasKoobooIdEl=function(e,t=!0){for(!t&&e&&(e=e.parentElement);e;){if(e.hasAttribute(i.KOOBOO_ID))return e;e=e.parentElement}},t.previousComment=function(e){for(const t of o.previousNodes(e)){if(t instanceof Comment&&r.KoobooComment.isComment(t)){if(r.KoobooComment.isEndComment(t))break;return t}if(t instanceof HTMLElement)break}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e,t){this.key=e,this.value=t}static koobooId(e){return new o("koobooid",e)}static attribute(e){return new o("attribute",e)}static value(e){return new o("value",e)}static property(e){return new o("property",e)}static important(e){return new o("important",e)}static mediaRuleList(e){return new o("mediarulelist",e)}static source(e){return new o("source",e)}static get delete(){return new o("action","delete")}static get copy(){return new o("action","copy")}}t.kvInfo=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(2);t.default=class{constructor(e){this.parentMenu=e}createItem(e){let t,n=o.createDiv();n.classList.add("kb_web_editor_menu_item"),n.append(e);return{el:n,setVisiable:e=>{n.style.display=e?"block":"none"},setReadonly:e=>{t||(t=this.createWarn()),e?(n.style.color="#ccc",n.style.pointerEvents="none",n.appendChild(t)):(n.style.removeProperty("color"),n.style.removeProperty("pointer-events"),n.contains(t)&&n.removeChild(t))}}}createWarn(){let e=o.createDiv();return e.innerText="!",e.style.display="inline-block",e.style.width="18px",e.style.height="18px",e.style.color="#fff",e.style.backgroundColor="rgba(252, 56, 56, 0.74)",e.style.textAlign="center",e.style.fontSize="15px",e.style.fontWeight="600",e.style.lineHeight="18px",e.style.borderRadius="9px",e.style.cssFloat="right",e.style.pointerEvents="painted",e.title=r.TEXT.PLEASE_EDIT_AFTER_SAVE,e.onclick=e=>{e.stopPropagation()},e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Log=class{constructor(e){this.infos=e,this.source=e.find(e=>"source"==e.key).value}getValue(e){var t=this.infos.find(t=>t.key==e);if(t)return t.value}get koobooId(){return this.getValue("koobooid")}get id(){return this.getValue("id")}get attribute(){return this.getValue("attribute")}get url(){return this.getValue("url")}get selector(){return this.getValue("selector")}get property(){return this.getValue("property")}get action(){return this.getValue("action")}get mediaRuleList(){return this.getValue("mediarulelist")}static simplify(e){let t=[];for(const r of e.reverse())if(r.koobooId){var n=e.indexOf(r),o=e.filter(t=>e.indexOf(t)>n&&t.source==r.source&&t.id==r.id&&t.koobooId&&t.koobooId.startsWith(r.koobooId)&&t.attribute==r.attribute&&t.property==r.property);"copy"==r.action&&(o=[]),"delete"==r.action&&(o=o.filter(e=>e.koobooId.length>r.koobooId.length)),(r.attribute||r.property)&&(o=o.filter(e=>e.koobooId==r.koobooId)),r.url&&(o=o.filter(e=>e.url==r.url)),r.selector&&(o=o.filter(e=>e.selector==r.selector)),r.mediaRuleList&&(o=o.filter(e=>e.mediaRuleList==r.mediaRuleList));for(const e of o)-1==t.indexOf(e)&&t.push(e)}return e.filter(e=>-1==t.indexOf(e)).reverse()}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=n(2),a=n(1),l=document.__gl,s=document.vueInstance;t.Kooboo=document.Kooboo,t.parentBody=document.parentBody,t.pickImg=function(e){t.Kooboo.Media.getList().then((function(t){t.success&&(t.model.show=!0,t.model.onAdd=t=>{e(t.url)}),s.mediaDialogData=t.model}))},t.editHtmlBlock=function(e){return o(this,void 0,void 0,(function*(){let n=t.Kooboo.Route.Get(t.Kooboo.Route.HtmlBlock.DialogPage,{nameOrId:e}),s=a.createIframe();s.src=n,s.style.height="600px";const{modal:c,setOkHandler:u,close:d}=r.createModal(i.TEXT.EDIT_HTML_BLOCK,s.outerHTML);return t.parentBody.appendChild(c),new Promise(e=>{u(()=>o(this,void 0,void 0,(function*(){l.saveHtmlblockFinish=t=>{e(t),d()},l.saveHtmlblock()})))})}))},t.editRepeat=function(e,n){let o=t.Kooboo.Route.Get(t.Kooboo.Route.TextContent.DialogPage,{id:e,folder:n}),s=a.createIframe();s.src=o,s.style.height="600px";const{modal:c,setOkHandler:u,close:d}=r.createModal(i.TEXT.EDIT_REPEAT,s.outerHTML);return t.parentBody.appendChild(c),new Promise(e=>{u(()=>{l.saveContentFinish=t=>{e(t),d()},l.saveContent()})})},t.editMenu=function(e,n){var o=t.Kooboo.Route.Get(t.Kooboo.Route.Menu.DialogPage,{nameOrId:e});let s=a.createIframe();s.src=o,s.style.height="600px";const{modal:c,hideCancel:u}=r.createModal(i.TEXT.EDIT_MENU,s.outerHTML);u(),l.saveMenuFinish=n,t.parentBody.appendChild(c)},t.getPageUrls=function(){return o(this,void 0,void 0,(function*(){return new Promise((e,n)=>{t.Kooboo.Link.SyncAll().then(t=>{e(t.model.pages.map(e=>e.url))})})}))},t.newGuid=function(){return t.Kooboo.Guid.NewGuid()},t.Update=function(e){return new Promise((n,o)=>{t.Kooboo.Editor.Update(e).then(n)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(4);t.operationRecord=class{constructor(e,t,n){this.units=e,this.logs=t,this.guid=n}undo(){let e=this.getOperationNode(this.guid);if(e)for(const t of this.units)t.undo(e)}redo(){let e=this.getOperationNode(this.guid);if(e)for(const t of this.units)t.redo(e)}getOperationNode(e){for(const t of o.getAllNode(document.body,!0)){if(t instanceof HTMLElement){let n=t.getAttribute(r.KOOBOO_GUID);if(n&&n==e)return t}if(t.nodeType==Node.COMMENT_NODE&&t.nodeValue&&t.nodeValue.indexOf(e)>-1)return t}}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(7),a=n(30),l=n(24);t.hover=function(e){e.stopPropagation();let t=r.default.lastHoverDomEventArgs;if(r.default.editing)return;let n=e.target;if(t&&t.element==n)return;let o=i.getCloseElement(n);o&&(t=new a.HoverDomEventArgs(n,o),r.default.lastMouseEventArg=e,r.default.hoverDomEvent.emit(t))},t.emitHoverEvent=function(e){let t=i.getCloseElement(e);null!=t&&r.default.hoverDomEvent.emit(new a.HoverDomEventArgs(e,t))},t.emitSelectedEvent=function(){let e=r.default.lastHoverDomEventArgs.closeElement;var t=new l.SelectedDomEventArgs(e);r.default.domChangeEvent.emit(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(54),r=n(55),i=n(57),a=n(58);t.createModal=function(e,t,n,l){let{shade:s,win:c}=o.createContainer(n);const[u,d]=a.createBody(l),{footer:p,ok:f,cancel:h}=i.createFooter(),{header:g,close:m}=r.createHeader(e,c);d(t);const b=()=>{s.parentElement.removeChild(s)};return f.onclick=b,h.onclick=b,m.onclick=b,c.appendChild(g),c.appendChild(u),c.appendChild(p),{modal:s,setOkHandler:e=>f.onclick=e,setCancelHandler:e=>{h.onclick=e,m.onclick=e},close:b,hideCancel:()=>h.style.display="none"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseEvent=class{constructor(){this.handlers=[]}addEventListener(e){this.handlers.push(e)}emit(e){this.handlers.forEach(t=>t(e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.createButton=function(e,t){let n=o.createDiv();n.classList.add("kb_action_bar_btn"),n.title=t,n.style.backgroundImage=`url(${e})`;let r=n;return r.changeIcon=e=>n.style.backgroundImage=`url(${e})`,r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.innerHtml=0]="innerHtml",e[e.copy=1]="copy"}(t.Type||(t.Type={}));t.Unit=class{constructor(e){this.oldValue=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(17);class r extends o.Unit{undo(e){let t=e;this.newValue=t.innerHTML,t.innerHTML=this.oldValue}redo(e){let t=e;this.oldValue=t.innerHTML,t.innerHTML=this.newValue}}t.InnerHtmlUnit=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(17);class r extends o.Unit{constructor(e,t){super(e),this.oldValue=e,this.attribute=t}undo(e){let t=e;this.newValue=t.getAttribute(this.attribute),this.oldValue?t.setAttribute(this.attribute,this.oldValue):t.removeAttribute(this.attribute)}redo(e){let t=e;this.oldValue=t.getAttribute(this.attribute),this.newValue?t.setAttribute(this.attribute,this.newValue):t.removeAttribute(this.attribute)}}t.AttributeUnit=r},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(2),a=o(n(74)),l=n(3);t.createImagePreview=function(e=!1,t){let n=r.createDiv();n.classList.add("kb_web_editor_image_preview"),n.style.backgroundImage=`url(${a.default})`;let o=r.createImg();n.appendChild(o);let s=r.createButton(i.TEXT.DELETE);return s.style.visibility=e?"visible":"hidden",n.appendChild(s),s.onclick=e=>{o.style.backgroundImage="",t&&t(),e.stopPropagation()},{imagePreview:n,setImage:e=>{e=l.clearCssImageWarp(e),o.src="none"==e?"":e}}},t.createPickShade=function(){let e=r.createDiv();return e.innerText=i.TEXT.CLICK_REPLACE,e.classList.add("kb_web_editor_pick_shade"),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=o(n(0)),a=n(24),l=n(4),s=n(13);function c(e){e.onclick=e=>{if(e.isTrusted&&(e.stopPropagation(),e.preventDefault()),i.default.editing)return;let t=i.default.lastHoverDomEventArgs.closeElement;var n=new a.SelectedDomEventArgs(t);i.default.lastMouseEventArg=e,i.default.domChangeEvent.emit(n)}}t.delay=function(e){return new Promise(t=>{setTimeout(t,e)})},t.initElements=function(){for(const e of r.getAllElement(document.body,!0))e.id!=l.HOVER_BORDER_SKIP&&e instanceof HTMLElement&&(e.addEventListener("mouseover",s.hover),c(e))},t.holdUpClick=c,t.createContainer=function(){let e=document.createElement("div");e.classList.add("kb_web_editor_container"),e.id=l.HOVER_BORDER_SKIP,document.documentElement.appendChild(e);let t=e.attachShadow({mode:"open"}),n=document.createElement("div");return n.classList.add("kb_web_editor_root"),t.appendChild(n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(75),i=n(34),a=n(78),l=n(5),s=n(6),c=["visited","hover","active","focus"];function u(){let e=[];for(const t of document.styleSheets)t&&t instanceof CSSStyleSheet&&(t.media&&t.media.mediaText&&!matchMedia(t.media.mediaText).matches||e.push(t));return e}function d(e,t){let n=[];try{for(const o of e.rules)if(o instanceof CSSStyleRule)n.push({cssRule:o,url:t});else if(o instanceof CSSMediaRule&&matchMedia(o.media.mediaText).matches)for(const e of o.cssRules)n.push({cssRule:e,mediaRuleList:o.media.mediaText,url:t});else o instanceof CSSImportRule&&n.push(...d(o.styleSheet,o.styleSheet.href))}catch(e){}return n}function p(){let e=[],t=0;for(const n of u()){if(!(n.ownerNode instanceof HTMLElement))continue;let r=l.KoobooComment.getComments(n.ownerNode);if(!s.getEditableComment(r))continue;let i=n.ownerNode.getAttribute(o.KOOBOO_ID),a=n.ownerNode.getAttribute("href");if(!(!i&&!a||a&&a.startsWith("http")&&!a.startsWith(location.origin)))for(const{cssRule:o,mediaRuleList:r,url:l}of d(n,a))o&&o instanceof CSSStyleRule&&e.push({styleSequence:++t,koobooId:i,url:l,cssRule:o,mediaRuleList:r})}return e}function f(e){let t=[];return h(e,t),function(e,t){for(const n of p()){let o=y(e,n.cssRule.selectorText);for(const e of o){let o=g(n.cssRule.style);for(const r of o)t.push({prop:r.prop,styleSequence:n.styleSequence,important:r.important,inline:!1,koobooId:n.koobooId,rawSelector:n.cssRule.selectorText,targetSelector:e.selector,url:n.url,value:r.value,pseudo:e.pseudo,cssStyleRule:n.cssRule,mediaRuleList:n.mediaRuleList})}}}(e,t),t}function h(e,t){let n=g(e.style);for(const e of n)t.push({prop:e.prop,styleSequence:Number.MAX_VALUE/2,important:e.important,inline:!0,koobooId:"",rawSelector:"",targetSelector:"",url:"",value:e.value,pseudo:"",cssStyleRule:null,mediaRuleList:null})}function g(e){let t=[];for(const n of r.colorProps){let o=e.getPropertyValue(n.prop);o&&t.push({prop:n,value:o,important:!!e.getPropertyPriority(n.prop)})}return t}function m(e){return e=e.trim().toLowerCase(),!!/^(#|rgb)((?!(#|rgb)).)*$/g.test(e)||!!a.colorEnum.hasOwnProperty(e)}function b(e){for(const t of c){let n=e.match(`:+${t}s*$`);if(n)return{pseudo:n[0],selector:e.replace(n[0],"")}}}function y(e,t){let n=[];var o=t.split(",");for(const t of o){let o=b(t);try{o&&e.matches(o.selector)?n.push({selector:t,pseudo:o.pseudo}):e.matches(t)&&n.push({selector:t,pseudo:""})}catch(e){}}return n}function M(e,t,n){let o=r.colorProps.find(e=>e.prop==t);e.some(e=>e.prop==o.parent&&!e.pseudo)||e.push({pseudo:"",prop:o.parent,cssColors:[{inline:!0,prop:o,cssStyleRule:null,important:!1,koobooId:"",pseudo:"",rawSelector:"",styleSequence:0,targetSelector:"",url:"",value:n,mediaRuleList:null}]})}t.getStyles=u,t.getRules=d,t.getCssRules=p,t.getMatchedColorGroups=function(e){let t=[],n=f(e);for(const e of n){let n=t.find(t=>t.prop==e.prop.parent&&t.pseudo==e.pseudo);n?n.cssColors.push(e):t.push({prop:e.prop.parent,cssColors:[e],pseudo:e.pseudo})}for(const e of t)e.cssColors=i.sortStylePriority(e.cssColors).reverse();for(const e of[...t]){if(m(e.cssColors[0].prop.getColor(e.cssColors[0].value)))continue;let n=t.findIndex(t=>t==e);n<0||(t=t.filter((e,t)=>t!=n))}let o=getComputedStyle(e);return M(t,"color",o.color),M(t,"background-color",o.backgroundColor),t},t.getMatchedColors=f,t.addInlineMatchedColors=h,t.getCssColors=g,t.isOneColor=m,t.splitPseudo=b,t.matchSelector=y,t.addDefaultColor=M},,function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(15),i=o(n(0)),a=n(4);t.SelectedDomEventArgs=class{constructor(e){this.element=e}get koobooId(){return this.element.getAttribute(a.KOOBOO_ID)}};class l extends r.BaseEvent{emit(e){i.default.lastSelectedDomEventArgs=e,super.emit(e)}}t.SelectedDomEvent=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r="2px solid rgb(32, 122, 183)";t.createTabs=function(e){let t=o.createDiv(),n=o.createDiv();n.style.marginBottom="15px",n.style.marginRight="-15px",n.style.marginLeft="-15px";let i=o.createDiv();return e.forEach(t=>{let a=function(e){let t=o.createDiv();return t.style.height="32px",t.style.textAlign="center",t.innerText=e,t.style.display="inline-block",t.style.fontSize="15px",t.style.cursor="pointer",t}(t.title);a.style.width=100/e.length+"%",a.style.borderBottom=t.selected?r:"2px solid #eee",t.panel.style.display=t.selected?"block":"none",a.onclick=()=>{!function(e,t){for(let n=0;n<e.children.length;n++){let o=e.children.item(n);o.style.borderBottom=o==t?r:"2px solid #eee"}}(n,a),function(e,t){for(let n=0;n<e.children.length;n++){let o=e.children.item(n);o.style.display=o==t?"block":"none"}}(i,t.panel),e.forEach(e=>e.selected=e==t)},n.appendChild(a),i.appendChild(t.panel)}),t.appendChild(n),t.appendChild(i),t}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),i=o(n(0));t.setImagePreview=function(e,t){e.style.width="150px",e.style.height="150px",e.style.cssFloat="left",e.style.margin="15px",e.onmouseover=()=>{i.default.lastMouseEventArg=new MouseEvent(""),t.scrollIntoView(),r.emitHoverEvent(t),r.emitSelectedEvent()}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(a=o,l=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),i=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot).concat(e," */")}));return[n].concat(i).concat([r]).join("\n")}var a,l,s;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(o[i]=!0)}for(var a=0;a<e.length;a++){var l=e[a];null!=l[0]&&o[l[0]]||(n&&!l[2]?l[2]=n:n&&(l[2]="(".concat(l[2],") and (").concat(n,")")),t.push(l))}},t}},function(e,t,n){var o,r,i={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),l=function(e,t){return t?t.querySelector(e):document.querySelector(e)},s=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var o=l.call(this,e,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),c=null,u=0,d=[],p=n(45);function f(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(M(o.parts[a],t))}else{var l=[];for(a=0;a<o.parts.length;a++)l.push(M(o.parts[a],t));i[o.id]={id:o.id,refs:1,parts:l}}}}function h(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],a=t.base?i[0]+t.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(l):n.push(o[a]={id:a,parts:[l]})}return n}function g(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=d[d.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(e.insertAt.before,n);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function b(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function(){0;return n.nc}();o&&(e.attrs.nonce=o)}return y(t,e.attrs),g(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function M(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=u++;n=c||(c=b(t)),o=_.bind(null,n,a,!1),r=_.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),g(e,t),t}(t),o=E.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),o=w.bind(null,n),r=function(){m(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return f(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var a=n[r];(l=i[a.id]).refs--,o.push(l)}e&&f(h(e,t),t);for(r=0;r<o.length;r++){var l;if(0===(l=o[r]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete i[l.id]}}}};var v,I=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function _(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=I(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function w(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function E(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=p(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(15);t.OperationEventArgs=class{constructor(e,t){this.operationCount=0,this.backupOperationCount=0,this.operationCount=e,this.backupOperationCount=t}get canSave(){return this.operationCount>0}};class r extends o.BaseEvent{}t.OperationEvent=r},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(15),i=o(n(0));t.HoverDomEventArgs=class{constructor(e,t){this.element=e,this.closeElement=t}};class a extends r.BaseEvent{emit(e){i.default.lastHoverDomEventArgs=e,super.emit(e)}}t.HoverDomEvent=a},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzhhOGE4YSIgZD0iTTc2OCA0NjkuMzMzMzMzVjM0MS4zMzMzMzNsMTcwLjY2NjY2NyAxNzAuNjY2NjY3LTE3MC42NjY2NjcgMTcwLjY2NjY2N3YtMTI4aC0yMTMuMzMzMzMzdjIxMy4zMzMzMzNoMTI4bC0xNzAuNjY2NjY3IDE3MC42NjY2NjctMTcwLjY2NjY2Ny0xNzAuNjY2NjY3aDEyOHYtMjEzLjMzMzMzM0gyNTZ2MTI4bC0xNzAuNjY2NjY3LTE3MC42NjY2NjcgMTcwLjY2NjY2Ny0xNzAuNjY2NjY3djEyOGgyMTMuMzMzMzMzVjI1NkgzNDEuMzMzMzMzbDE3MC42NjY2NjctMTcwLjY2NjY2NyAxNzAuNjY2NjY3IDE3MC42NjY2NjdoLTEyOHYyMTMuMzMzMzMzeiIgLz48L3N2Zz4="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.createNotice=function(){let e=o.createDiv();e.classList.add("kb_web_editor_action_bar_notice");let t=e;return t.setCount=e=>{t.innerHTML=e+"",t.style.visibility=e>0?"visible":"hidden"},t}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=n(2),a=n(11),l=n(1),s=n(20),c=o(n(0)),u=n(22),d=n(3);t.createImagePicker=function(e){let t=l.createDiv(),n=u.getCssRules(),o=d.getImportant(e,"width",n),p=d.getImportant(e,"height",n),{imagePreview:f,setImage:h}=s.createImagePreview();f.appendChild(s.createPickShade()),f.style.margin="8px auto 16px auto";let g=JSON.parse(JSON.stringify(getComputedStyle(e)));g.width="0px"==g.width?"auto":g.width,g.height="0px"==g.height?"auto":g.height,h(e.src),f.onclick=()=>{a.pickImg(t=>{h(t),e.src=t,e.style.setProperty("width",g.width,o),e.style.setProperty("height",g.height,p)})},t.appendChild(f);let m=l.createLabelInput(i.TEXT.ALT);m.setContent(e.alt),t.appendChild(m.input),m.setInputHandler(t=>{t.target instanceof HTMLInputElement&&(e.alt=t.target.value)});let b=l.createLabelInput(i.TEXT.TITLE);b.setContent(e.title),t.appendChild(b.input),b.setInputHandler(t=>{t.target instanceof HTMLInputElement&&(e.title=t.target.value)});let y=l.createLabelInput(i.TEXT.WIDTH);y.input.style.width="50%",y.setInputHandler(t=>{t.target instanceof HTMLInputElement&&(e.style.setProperty("width",t.target.value,o),g.width=t.target.value)}),y.setContent(g.width),t.appendChild(y.input);let M=l.createLabelInput(i.TEXT.HEIGHT);M.input.style.width="50%",M.setInputHandler(t=>{t.target instanceof HTMLInputElement&&(e.style.setProperty("height",t.target.value,p),g.height=t.target.value)}),M.setContent(g.height),t.appendChild(M.input);const{modal:v,setOkHandler:I,setCancelHandler:_,close:w}=r.createModal(i.TEXT.EDIT_IMAGE,t,"450px");return c.default.container.appendChild(v),new Promise((e,t)=>{I(()=>{e(),w()}),_(()=>{t(),w()})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStylePriority=function(e){const t=["first-letter","last-letter","first-line","last-line","first-child","last-child","before","after"];let n=e.important?1:0,o=e.inline?1:0,r=e.styleSequence||0,i=[n,o,0,0,0,e.prop&&e.prop.isChild?1:0,r],a=e.targetSelector;return a=a.replace(/(::?)([\w-]+)/g,(function(e,n,o){return t.indexOf(o)>=0&&":"===n?"::"+o:e})),a=a.replace(/(\[[^[\]]+])/g,"").replace(/(::[\w-]+)/g,"").replace(/(:[\w-]+)/g,"").replace(/(#[\w-]+)/g,"").replace(/(\.[\w-]+)/g,"").replace(/([\w-]+)/g,""),a=a.replace(/[\2\3\4]/g,(function(e){var t=e.charCodeAt(0);return i[t]++,"<"+t+">"})),i},t.compareStylePriority=function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]-t[n];return 0},t.sortStylePriority=function(e){return e.sort((e,n)=>{let o=t.getStylePriority(e),r=t.getStylePriority(n);return t.compareStylePriority(o,r)}),e}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),a=n(2),l=n(25),s=n(79),c=n(80),u=n(1),d=r(n(0)),p=n(4);t.createLinkPicker=function(e){return o(this,void 0,void 0,(function*(){let t=u.createDiv();const{pageLinkPanel:n,getContent:r}=yield c.createPageLinkPanel(e),{outLinkPanel:f,getContent:h,setContent:g}=s.createOutLinkPanel(),m=[{title:a.TEXT.PAGE_LINK,panel:n,selected:!!r(),getContent:r},{title:a.TEXT.OUT_LINK,selected:!r(),panel:f,getContent:h}];g(e),t.appendChild(l.createTabs(m));let{modal:b,setOkHandler:y,close:M}=i.createModal(a.TEXT.EDIT_LINK,t,"400px","500px");return b.style.zIndex=p.STANDARD_Z_INDEX+100+"",d.default.container.appendChild(b),new Promise((t,n)=>{y(()=>o(this,void 0,void 0,(function*(){let o="",r=m.find(e=>e.selected);r&&(o=r.getContent()),o&&o!=e?t(o):n(),M()})))})}))}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(13),a=n(1),l=o(n(0));t.createLinkItem=function(e,t){let n=a.createDiv();n.classList.add("kb_web_editor_global_link_editor_item"),n.onmouseover=()=>{l.default.lastMouseEventArg=new MouseEvent(""),e.scrollIntoView(),i.emitHoverEvent(e),i.emitSelectedEvent()};let o=a.createDiv();o.innerText=e.getAttribute("href");let s=a.createButton(r.TEXT.EDIT);return s.onclick=t,n.appendChild(o),n.appendChild(s),{item:n,setLabel:e=>o.innerText=e}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(94)),a=n(38);t.setInlineEditor=function(e){return o(this,void 0,void 0,(function*(){!function(e){o(this,void 0,void 0,(function*(){let t=e.target;i.default.init(e),t instanceof HTMLElement&&t.focus()}))}(a.createSettings(e))}))}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),a=n(95),l=n(35),s=n(11);function c(e){let t={target:e,inline:!0,hidden_input:!1,skin_url:`${location.origin}\\_Admin\\Styles\\kooboo-web-editor\\tinymce\\ui\\oxide`,menubar:!1,element_format:"html",allow_script_urls:!0,style_formats_merge:!1,style_formats_autohide:!1,allow_conditional_comments:!0,allow_html_in_named_anchor:!0,allow_unsafe_link_target:!0,convert_fonts_to_spans:!1,remove_trailing_brs:!0,browser_spellcheck:!0,forced_root_block:"",visual_anchor_class:"no-anchor",valid_elements:"*[*]",valid_children:"*[*]",plugins:["link","image"],valid_styles:"width,height,color,font-size,font-family,background,background-color,background-image,font-weight,font-style,text-decoration,float,margin,margin-top,margin-right,margin-bottom,margin-left,display,text-align",file_picker_callback(e,t,n){return o(this,void 0,void 0,(function*(){if("image"==n.filetype)s.pickImg(t=>{e(t,{})});else try{let n=yield l.createLinkPicker(t);e(n,{})}catch(e){}}))}};return e._position=e.style.position,a.setLang(t),t}function u(e,t){t.innerHTML=e.innerHTML,a.clearTinymceElements(t)}t.createSettings=function(e){const{selector:t,onSave:n,onCancel:o}=e,r=c(t);return r.toolbar=a.getToolbar(t),r.plugins=["save","link","image"],r.init_instance_callback=a.initInstanceCallback,r.setup=e=>{e.on("Blur",a.onBlur),e.once("SetContent",a.onSetContent),e.on("Change",()=>i.default.tinymceInputEvent.emit()),e.on("KeyUp",()=>i.default.tinymceInputEvent.emit()),e.on("KeyDown",a.onKeyDown),e.on("BeforeSetContent",a.onBeforeSetContent)},r.save_enablewhendirty=!1,r.save_onsavecallback=e=>a.savePluginCallback(e,n),r.save_oncancelcallback=e=>a.savePluginCallback(e,o),r},t.createEditDataSettings=function(e,t){const n=c(e);return n.toolbar="undo redo | bold italic underline | forecolor backcolor | fontselect fontsizeselect | image | link unlink",n.plugins=["link","image"],n.setup=n=>{n.once("SetContent",a.onSetContent),n.on("KeyDown",a.onKeyDown),n.on("BeforeSetContent",a.onBeforeSetContent),n.on("Change",()=>u(e,t)),n.on("Undo",()=>u(e,t)),n.on("Redo",()=>u(e,t))},n}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=o(n(106)),a=n(2),l=n(1),s=o(n(110)),c=o(n(0));t.createColorPicker=function(e,t,n){t=i.default.to.hex(i.default.get(t).value);let o=l.createDiv();o.classList.add("kb_web_editor_color_picker");let u=l.createDiv();u.innerText=e,o.appendChild(u);let d=l.createDiv();return o.appendChild(d),setTimeout(()=>{const e=new s.default({el:d,theme:"nano",default:t,autoReposition:!1,components:{preview:!0,opacity:!0,hue:!0,interaction:{cancel:!0,save:!0}},strings:{save:a.TEXT.OK,cancel:a.TEXT.CANCEL}});e.on("init",e=>{let t=e._root.app,n=e._root.button;t.style.zIndex=r.STANDARD_Z_INDEX+5+"",t.style.fontSize="14px",c.default.container.appendChild(t),n.style.border="1px solid #ccc"}),e.on("save",e=>{n(e.toRGBA().toString(0))})}),o}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTU4Ny43MzI4NDUgNTExLjcwNTI4OGwwLjU2Mzg0MiAwLjU2Mzg0Mi03NS42MDkwMjUgNzUuNTA3NzE4LTAuNTEyNjc2LTAuNTEyNjc2TDE3MS44MzE1MyA5MjcuNjAzNTMzYy0yMC45MDkyMTYgMjAuOTEyMjg1LTU0Ljc3NDUxMSAyMC45NDcwNzgtNzUuNjM4NzAxIDAuMDgyODg4LTIwLjg2NjIzNy0yMC44NjYyMzctMjAuODI5Mzk4LTU0LjczMjU1NSAwLjA3OTgxOC03NS42NDE3NzFsMzQwLjMzOTM2Mi0zNDAuMzM5MzYyTDk2Ljg2MzA5NSAxNzEuOTUzMzA0Yy0yMC45MDkyMTYtMjAuOTA5MjE2LTIwLjk0NzA3OC01NC43NzQ1MTEtMC4wNzk4MTgtNzUuNjM4NzAxIDIwLjg2NDE5LTIwLjg2NjIzNyA1NC43Mjk0ODUtMjAuODI5Mzk4IDc1LjYzODcwMSAwLjA3OTgxOEw1MTIuMTczOTYyIDQzNi4xNDY0MDUgODUxLjU3NTk3NSA5Ni43NDIzNDVjMjAuOTEyMjg1LTIwLjkwOTIxNiA1NC43NzQ1MTEtMjAuOTQ3MDc4IDc1LjY0MTc3MS0wLjA3OTgxOCAyMC44NjQxOSAyMC44NjQxOSAyMC44MjkzOTggNTQuNzI5NDg1LTAuMDc5ODE4IDc1LjYzODcwMUw1ODcuNzMyODQ1IDUxMS43MDUyODh6TTY1OC45NTQ5NTcgNjAwLjY2OTQ4MmMxMi4yMjc0ODYgMS4xMTk0OTcgMjIuOTU3ODc1IDYuNDI0MzE2IDMxLjMwNjAwNyAxNC4xNzk5NTRsMC4zMTAwNjItMC4zMDY5OTIgMjM3LjE1NTMwNSAyMzcuMTU2MzI4YzIwLjkwOTIxNiAyMC45MTIyODUgMjAuOTQ0MDA4IDU0Ljc3NDUxMSAwLjA3OTgxOCA3NS42NDE3NzEtMjAuODY2MjM3IDIwLjg2NDE5LTU0LjcyOTQ4NSAyMC44MjkzOTgtNzUuNjQxNzcxLTAuMDc5ODE4TDYxNC45NTk5NTMgNjkwLjA1MDE2MmwwLjAzNDc5Mi0wLjAzNDc5MmMtOS45MTA3MjEtMTAuNzI4MzQyLTE1LjU1MzIzMS0yNS4zMTk2NjUtMTQuMTE1NDg2LTQxLjAxMjA2NkM2MDMuNTY4NTA5IDYxOS42MjAwOSA2MjkuNTY5Njk2IDU5Ny45NzkyMSA2NTguOTU0OTU3IDYwMC42Njk0ODJ6IiAvPjwvc3ZnPg=="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePositon=(e,t)=>{const{top:n,left:o,height:r,width:i,bottom:a,right:l}=e;null!=n&&(t.style.top=n+"px"),null!=o&&(t.style.left=o+"px"),null!=a&&(t.style.bottom=a+"px"),null!=l&&(t.style.right=l+"px"),null!=i&&(t.style.width=i+"px"),null!=r&&(t.style.height=r+"px")}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(43),n(46);const r=n(48),i=n(89),a=n(132),l=n(135),s=n(13),c=n(21),u=n(11),d=n(138),p=o(n(0)),f=n(3);f.shareStyle(u.parentBody),f.shareStyle(p.default.container),c.initElements(),p.default.container.appendChild(a.createHoverBorder()),p.default.container.appendChild(a.createSelectedBorder()),p.default.container.appendChild(i.createFloatMenu()),p.default.container.appendChild(l.createEditorShade()),p.default.container.appendChild(r.createActionBar()),p.default.container.appendChild(d.createElementNav()),document.body&&s.emitHoverEvent(document.body)},function(e,t,n){var o=n(44);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(27)(!1)).push([e.i,'/* kb_web_editor */\r\n.kb_web_editor_div {\r\n  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;\r\n  font-size: 14px;\r\n  color: #5f5f5f;\r\n  border: none;\r\n  outline: none;\r\n  display: block;\r\n  position: static;\r\n  background-color: rgba(255, 255, 255, 0);\r\n  font-weight: 400;\r\n  line-height: 1.2;\r\n}\r\n\r\n.kb_web_editor_input {\r\n  border-radius: 3px;\r\n  line-height: 24px;\r\n  padding: 5px 4.75px;\r\n  color: #5f5f5f;\r\n  border: 1px solid #ccc;\r\n  font-size: 16px;\r\n  box-sizing: border-box;\r\n  height: 36px;\r\n  box-shadow: none;\r\n  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.kb_web_editor_label_input {\r\n  display: inline-block;\r\n  width: 100%;\r\n  height: 36px;\r\n  position: relative;\r\n  margin: 3px 0;\r\n}\r\n\r\n.kb_web_editor_label_input > .kb_web_editor_div:nth-child(1) {\r\n  display: inline-block;\r\n  position: absolute;\r\n  left: 0;\r\n  line-height: 36px;\r\n  text-align: right;\r\n  padding-right: 5px;\r\n  width: 80px;\r\n}\r\n\r\n.kb_web_editor_label_input > .kb_web_editor_div:nth-child(2) {\r\n  display: inline-block;\r\n  position: absolute;\r\n  left: 85px;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.kb_web_editor_label_input > .kb_web_editor_div:nth-child(2) > input {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.kb_web_editor_btn {\r\n  font-weight: 700;\r\n  border-radius: 3px;\r\n  font-size: 14px;\r\n  line-height: 24px;\r\n  margin: 4px;\r\n  padding: 4px 16px;\r\n  outline: none;\r\n  background-color: #f0f0f0;\r\n  border: none;\r\n  display: inline-flex;\r\n  cursor: pointer;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.kb_web_editor_radio_input {\r\n  width: 100%;\r\n  line-height: 24px;\r\n  padding: 5px 4.75px;\r\n  font-size: 16px;\r\n  word-wrap: break-word;\r\n  display: flex;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  border-bottom: 1px rgb(238, 238, 238) solid;\r\n}\r\n\r\n.kb_web_editor_radio_input:hover {\r\n  background-color: #e3e3e3;\r\n}\r\n\r\n.kb_web_editor_radio_input > .kb_web_editor_div {\r\n  line-height: 36px;\r\n  font-size: 16px;\r\n  display: inline-block;\r\n}\r\n\r\n.kb_web_editor_radio_input > input {\r\n  margin: 0 5px;\r\n  pointer-events: none;\r\n  position: static;\r\n  opacity: 1;\r\n}\r\n\r\n.kb_web_editor_btn:hover {\r\n  background-color: #e3e3e3;\r\n}\r\n\r\n.kb_web_editor_btn_primary,\r\n.pcr-save {\r\n  background-color: #207ab7;\r\n  color: #fff;\r\n}\r\n\r\n.kb_web_editor_btn_primary:hover,\r\n.pcr-save:hover {\r\n  background-color: #1c6ca1;\r\n}\r\n\r\n.kb_action_bar_btn {\r\n  height: 60px;\r\n  width: 60px;\r\n  border-radius: 50%;\r\n  background-color: #fff;\r\n  opacity: 0.9;\r\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\r\n  position: relative;\r\n  margin-bottom: 10px;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: 30px 30px;\r\n}\r\n\r\n.kb_action_bar_btn:hover {\r\n  background-color: #eee;\r\n}\r\n\r\n.kb_web_editor_menu {\r\n  position: absolute;\r\n  width: 150px;\r\n  min-height: 50px;\r\n  border-radius: 3px;\r\n  font-size: 12px;\r\n  opacity: 0.9;\r\n  overflow: hidden;\r\n  box-shadow: 0 0 3px #ddd;\r\n  background-color: #fff;\r\n  display: none;\r\n}\r\n\r\n.kb_web_editor_menu_title {\r\n  padding: 5px 10px;\r\n  color: #fff;\r\n  background-color: rgb(2, 154, 214);\r\n  line-height: 18px;\r\n}\r\n\r\n.kb_web_editor_menu_title > .kb_web_editor_div {\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n  height: 18px;\r\n  width: 18px;\r\n  float: right;\r\n  margin-left: 8px;\r\n}\r\n\r\n.kb_web_editor_menu_item {\r\n  padding: 5px 10px;\r\n  border-bottom: 1px solid #eee;\r\n  cursor: default;\r\n  font-size: 12px;\r\n}\r\n\r\n.kb_web_editor_menu_item:hover {\r\n  background-color: #eee;\r\n}\r\n\r\n.kb_web_editor_iframe {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n}\r\n\r\n.kb_web_editor_image_preview {\r\n  outline: 5px solid #eee;\r\n  margin: 5px;\r\n  height: 300px;\r\n  width: 400px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.kb_web_editor_image_preview > :nth-child(1) {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  cursor: pointer;\r\n}\r\n\r\n.kb_web_editor_image_preview > .kb_web_editor_btn {\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  opacity: 0.8;\r\n  background-color: #eee;\r\n  border-radius: 24px;\r\n  z-index: 10;\r\n}\r\n\r\n.kb_web_editor_image_preview > .kb_web_editor_btn :hover {\r\n  background-color: #fff;\r\n}\r\n\r\n.kb_web_editor_pick_shade {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(0, 0, 0, 0.384);\r\n  opacity: 0;\r\n  transition: 0.3s;\r\n  font-size: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: white;\r\n}\r\n.kb_web_editor_pick_shade:hover {\r\n  opacity: 1;\r\n  cursor: pointer;\r\n}\r\n\r\n.kb_web_editor_modal {\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  overflow-y: auto;\r\n}\r\n\r\n.kb_web_editor_modal_window {\r\n  background-color: #fff;\r\n  border: 1px solid #eee;\r\n  border-radius: 3px;\r\n  box-shadow: 0 0 10px 1px rgba(34, 47, 62, 0.15);\r\n  width: 60%;\r\n  position: relative;\r\n  margin: 40px auto;\r\n}\r\n\r\n.kb_web_editor_modal_body {\r\n  padding: 3px 16px;\r\n  max-height: 80%;\r\n  overflow: auto;\r\n}\r\n\r\n.kb_web_editor_modal_footer {\r\n  border-top: 1px solid #eee;\r\n  text-align: right;\r\n  padding: 10px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.kb_web_editor_modal_header {\r\n  font-size: 20px;\r\n  font-weight: 400;\r\n  line-height: 1.3;\r\n  font-style: normal;\r\n  padding: 16px;\r\n  cursor: move;\r\n  position: relative;\r\n}\r\n.kb_web_editor_modal_header > .kb_web_editor_div {\r\n  position: absolute;\r\n  background-repeat: no-repeat;\r\n  right: 15px;\r\n  top: 15px;\r\n  height: 20px;\r\n  width: 20px;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.kb_web_editor_global_link_editor_item {\r\n  border-bottom: 1px solid #eee;\r\n  position: relative;\r\n}\r\n\r\n.kb_web_editor_global_link_editor_item > .kb_web_editor_div {\r\n  word-break: break-all;\r\n  font-size: 16px;\r\n  line-height: 40px;\r\n  min-height: 40px;\r\n  padding-right: 80px;\r\n}\r\n\r\n.kb_web_editor_global_link_editor_item > .kb_web_editor_btn {\r\n  border-radius: 24px;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n\r\n.kb_web_editor_element_nav_bar {\r\n  position: fixed;\r\n  display: inline;\r\n  top: 10px;\r\n  right: 25px;\r\n  background-color: #5f5f5f;\r\n  color: #fff;\r\n  opacity: 0.7;\r\n  padding: 5px;\r\n  border-radius: 5px;\r\n  display: none;\r\n  cursor: move;\r\n}\r\n\r\n.kb_web_editor_element_nav_bar > .kb_web_editor_div {\r\n  color: #fff;\r\n  display: inline-block;\r\n  padding: 0 5px;\r\n  cursor: pointer;\r\n  border-radius: 5px;\r\n}\r\n\r\n.kb_web_editor_action_bar_notice {\r\n  background-color: red;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 10px;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  color: #fff;\r\n  font-size: 15px;\r\n  text-align: center;\r\n  line-height: 20px;\r\n  opacity: 0.8;\r\n  visibility: hidden;\r\n}\r\n\r\n.kb_web_editor_shade_close_btn {\r\n  position: fixed;\r\n  top: 25px;\r\n  right: 25px;\r\n  height: 30px;\r\n  width: 30px;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n  display: none;\r\n}\r\n\r\n.kb_web_editor_checkobx_input {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.kb_web_editor_color_picker {\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n.kb_web_editor_color_picker > * {\r\n  padding-right: 5px;\r\n}\r\n\r\n.kb_web_editor_coloreditor_item {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 10px 20px;\r\n}\r\n\r\n.kb_web_editor_coloreditor_item_check {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 25%;\r\n}\r\n\r\n.kb_web_editor_coloreditor_item_check > * {\r\n  margin: 0px;\r\n}\r\n\r\n.kb_web_editor_edit_data_item {\r\n  border-top: 1px solid #eee;\r\n  min-height: 50px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 30px;\r\n  position: relative;\r\n}\r\n\r\n.kb_web_editor_edit_data_item > .kb_web_editor_div {\r\n  width: 100%;\r\n  padding-right: 30px;\r\n  overflow-x: auto;\r\n  overflow-y: hidden;\r\n}\r\n\r\n.kb_web_editor_edit_data_item > .kb_web_editor_btn {\r\n  width: 15px;\r\n}\r\n\r\n.kb_web_editor_container {\r\n  all: unset !important;\r\n}\r\n\r\n.kb_web_editor_root {\r\n  word-break: break-all;\r\n  font-family: "Times New Roman", Times, serif;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  line-height: 16px;\r\n}\r\n\r\n.pcr-palette:before,\r\n.pcr-current-color:before {\r\n  opacity: 0.3;\r\n}\r\n\r\n.pcr-app .pcr-interaction .pcr-save {\r\n  background-color: #207ab7 !important;\r\n  color: #fff !important;\r\n}\r\n.pcr-app .pcr-interaction .pcr-cancel {\r\n  background-color: #e3e3e3 !important;\r\n  color: #5f5f5f !important;\r\n}\r\n',""])},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){var o=n(47);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(27)(!1)).push([e.i,'/*! Pickr 1.2.7 MIT | https://github.com/Simonwep/pickr */.pickr{position:relative;overflow:visible;transform:translateY(0)}.pickr *{box-sizing:border-box}.pickr .pcr-button{position:relative;height:2em;width:2em;padding:.5em;cursor:pointer;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;border-radius:.15em;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" stroke="%2342445A" stroke-width="5px" stroke-linecap="round"><path d="M45,45L5,5"></path><path d="M45,5L5,45"></path></svg>\') no-repeat 50%;background-size:0;transition:all .3s}.pickr .pcr-button:before{background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;z-index:-1;z-index:auto}.pickr .pcr-button:after,.pickr .pcr-button:before{position:absolute;content:"";top:0;left:0;width:100%;height:100%;border-radius:.15em}.pickr .pcr-button:after{transition:background .3s;background:currentColor}.pickr .pcr-button.clear{background-size:70%}.pickr .pcr-button.clear:before{opacity:0}.pickr .pcr-button.clear:focus{box-shadow:0 0 0 1px #f1f3f4,0 0 0 3px currentColor}.pickr .pcr-button.disabled{cursor:not-allowed}.pcr-app button,.pcr-app input,.pickr button,.pickr input{outline:none;border:none;-webkit-appearance:none}.pcr-app button:focus,.pcr-app input:focus,.pickr button:focus,.pickr input:focus{box-shadow:0 0 0 1px #f1f3f4,0 0 0 3px currentColor}.pcr-app[data-theme=nano]{position:fixed;display:flex;flex-direction:column;z-index:10000;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;box-shadow:0 .15em 1.5em 0 rgba(0,0,0,.1),0 0 1em 0 rgba(0,0,0,.03);width:14.25em;max-width:95vw;border-radius:.1em;background:#fff;opacity:0;visibility:hidden;transition:opacity .3s,visibility 0s .3s;left:0;top:0}.pcr-app[data-theme=nano].visible{transition:opacity .3s;visibility:visible;opacity:1}.pcr-app[data-theme=nano] .pcr-swatches{display:grid;align-items:center;grid-template-columns:repeat(auto-fit,1.75em);margin-top:.6em;padding:0 .6em}.pcr-app[data-theme=nano] .pcr-swatches.pcr-last{margin:0}.pcr-app[data-theme=nano] .pcr-swatches>button{font-size:1em;position:relative;width:calc(1.75em - 5px);height:calc(1.75em - 5px);border-radius:.15em;cursor:pointer;margin:2.5px;transition:all .15s;overflow:hidden;background:transparent;z-index:1}.pcr-app[data-theme=nano] .pcr-swatches>button:before{position:absolute;content:"";top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:6px;border-radius:.15em;z-index:-1}.pcr-app[data-theme=nano] .pcr-swatches>button:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:currentColor;border:1px solid rgba(0,0,0,.05);border-radius:.15em;box-sizing:border-box}.pcr-app[data-theme=nano] .pcr-swatches>button:hover{filter:brightness(1.05)}.pcr-app[data-theme=nano] .pcr-interaction{display:flex;flex-wrap:wrap;align-items:center;margin:0 -.2em;padding:0 .6em .6em}.pcr-app[data-theme=nano] .pcr-interaction>*{margin:0 .2em}.pcr-app[data-theme=nano] .pcr-interaction input{letter-spacing:.07em;font-size:.75em;text-align:center;cursor:pointer;color:#75797e;background:#f1f3f4;border-radius:.15em;transition:all .15s;padding:.45em .5em;margin-top:.6em}.pcr-app[data-theme=nano] .pcr-interaction input:hover{filter:brightness(.975)}.pcr-app[data-theme=nano] .pcr-interaction input:focus{box-shadow:0 0 0 1px #f1f3f4,0 0 0 3px rgba(66,133,244,.75)}.pcr-app[data-theme=nano] .pcr-interaction .pcr-result{color:#75797e;text-align:left;flex:1 1 8em;min-width:8em;transition:all .2s;border-radius:.15em;background:#f1f3f4;cursor:text}.pcr-app[data-theme=nano] .pcr-interaction .pcr-result::selection{background:#4285f4;color:#fff}.pcr-app[data-theme=nano] .pcr-interaction .pcr-type.active{color:#fff;background:#4285f4}.pcr-app[data-theme=nano] .pcr-interaction .pcr-clear,.pcr-app[data-theme=nano] .pcr-interaction .pcr-save{width:auto;color:#fff}.pcr-app[data-theme=nano] .pcr-interaction .pcr-clear:hover,.pcr-app[data-theme=nano] .pcr-interaction .pcr-save:hover{filter:brightness(.925)}.pcr-app[data-theme=nano] .pcr-interaction .pcr-save{background:#4285f4}.pcr-app[data-theme=nano] .pcr-interaction .pcr-clear{background:#f44250}.pcr-app[data-theme=nano] .pcr-interaction .pcr-clear:focus{box-shadow:0 0 0 1px #f1f3f4,0 0 0 3px rgba(244,66,80,.75)}.pcr-app[data-theme=nano] .pcr-selection{display:grid;grid-gap:.6em;grid-template-columns:1fr 4fr;grid-template-rows:5fr auto auto;align-items:center;height:10.5em;width:100%;align-self:flex-start}.pcr-app[data-theme=nano] .pcr-selection .pcr-picker{position:absolute;height:18px;width:18px;border:2px solid #fff;border-radius:100%;user-select:none}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-preview{grid-area:2/1/4/1;height:100%;width:100%;display:flex;flex-direction:row;justify-content:center;margin-left:.6em}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-preview .pcr-last-color{display:none}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-preview .pcr-current-color{position:relative;background:currentColor;width:2em;height:2em;border-radius:50em;overflow:hidden}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-preview .pcr-current-color:before{position:absolute;content:"";top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;border-radius:.15em;z-index:-1}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette{position:relative;user-select:none;display:flex;flex-direction:column;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser:active,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity:active,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette{grid-area:1/1/2/3;width:100%;height:100%;z-index:1}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette .pcr-palette{border-radius:.15em;width:100%;height:100%}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette .pcr-palette:before{position:absolute;content:"";top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;border-radius:.15em;z-index:-1}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser{grid-area:2/2/2/2}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity{grid-area:3/2/3/2}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity{height:.5em;margin:0 .6em}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser .pcr-picker,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity .pcr-picker{top:50%;transform:translateY(-50%)}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser .pcr-slider,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity .pcr-slider{flex-grow:1;border-radius:50em}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser .pcr-slider{background:linear-gradient(90deg,red,#ff0,#0f0,#0ff,#00f,#f0f,red)}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity .pcr-slider{background:linear-gradient(90deg,transparent,#000),url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:100%,.25em}',""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(49),r=n(59),i=n(60),a=n(63),l=n(66),s=n(70),c=n(84);t.createActionBar=function(){let e=o.createContainer();return e.appendChild(r.createMoveButton(e)),e.appendChild(s.createImageButton()),e.appendChild(c.createLinkButton()),e.appendChild(i.createPreviousButton()),e.appendChild(a.createNextButton()),e.appendChild(l.createSaveButton()),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(4),a=o(n(0));t.createContainer=function(){let e=r.createDiv();return e.style.position="fixed",e.style.width="60px",e.style.top="60px",e.style.right="60px",e.style.zIndex=i.STANDARD_Z_INDEX+"",a.default.editableEvent.addEventListener(t=>{e.style.display=t?"none":"block"}),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(29),i=o(n(0));t.operationManager=class{constructor(){this.previousRecords=[],this.nextRecords=[],this.idCounter=0}previous(){let e=this.previousRecords.pop();e&&(e.undo(),this.nextRecords.push(e),this.emit())}next(){let e=this.nextRecords.pop();e&&(e.redo(),this.previousRecords.push(e),this.emit())}add(e){return e.id=++this.idCounter,this.previousRecords.push(e),console.log(this.previousRecords),this.nextRecords.splice(0,this.nextRecords.length),this.emit(),e.id}remove(e){let t=this.previousRecords.find(t=>t.id==e);if(!t)return;t.undo();let n=this.previousRecords.indexOf(t);this.previousRecords.splice(n,1),this.emit()}emit(){let e=new r.OperationEventArgs(this.previousRecords.length,this.nextRecords.length);i.default.operationEvent.emit(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(15);class r extends o.BaseEvent{}t.EditableEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(15);class r extends o.BaseEvent{}t.TinymceInputEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(15);class r extends o.BaseEvent{}t.CloseEditingEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(1);t.createContainer=function(e){let t=r.createDiv();t.classList.add("kb_web_editor_modal"),t.style.zIndex=o.STANDARD_Z_INDEX+5+"";let n=r.createDiv();return n.classList.add("kb_web_editor_modal_window"),null!=e&&(n.style.width=e),t.appendChild(n),{shade:t,win:n}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(56));t.createHeader=function(e,t){var n=r.createDiv();n.classList.add("kb_web_editor_modal_header"),n.appendChild(document.createTextNode(e));let o,a=r.createDiv();return a.style.backgroundImage=`url(${i.default})`,n.appendChild(a),n.draggable=!0,n.ondragstart=e=>{let n=t.getBoundingClientRect();o={x:e.x-n.left,y:e.y-n.top}},n.ondrag=e=>{0!=e.x&&0!=e.y&&(t.style.marginLeft=e.x-o.x+"px",t.style.marginTop=e.y-o.y+"px")},{header:n,close:a}}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjAuMDBweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGZpbGw9IiNjY2MiIGQ9Ik01ODcuNzMyODQ1IDUxMS43MDUyODhsMC41NjM4NDIgMC41NjM4NDItNzUuNjA5MDI1IDc1LjUwNzcxOC0wLjUxMjY3Ni0wLjUxMjY3NkwxNzEuODMxNTMgOTI3LjYwMzUzM2MtMjAuOTA5MjE2IDIwLjkxMjI4NS01NC43NzQ1MTEgMjAuOTQ3MDc4LTc1LjYzODcwMSAwLjA4Mjg4OC0yMC44NjYyMzctMjAuODY2MjM3LTIwLjgyOTM5OC01NC43MzI1NTUgMC4wNzk4MTgtNzUuNjQxNzcxbDM0MC4zMzkzNjItMzQwLjMzOTM2Mkw5Ni44NjMwOTUgMTcxLjk1MzMwNGMtMjAuOTA5MjE2LTIwLjkwOTIxNi0yMC45NDcwNzgtNTQuNzc0NTExLTAuMDc5ODE4LTc1LjYzODcwMSAyMC44NjQxOS0yMC44NjYyMzcgNTQuNzI5NDg1LTIwLjgyOTM5OCA3NS42Mzg3MDEgMC4wNzk4MThMNTEyLjE3Mzk2MiA0MzYuMTQ2NDA1IDg1MS41NzU5NzUgOTYuNzQyMzQ1YzIwLjkxMjI4NS0yMC45MDkyMTYgNTQuNzc0NTExLTIwLjk0NzA3OCA3NS42NDE3NzEtMC4wNzk4MTggMjAuODY0MTkgMjAuODY0MTkgMjAuODI5Mzk4IDU0LjcyOTQ4NS0wLjA3OTgxOCA3NS42Mzg3MDFMNTg3LjczMjg0NSA1MTEuNzA1Mjg4ek02NTguOTU0OTU3IDYwMC42Njk0ODJjMTIuMjI3NDg2IDEuMTE5NDk3IDIyLjk1Nzg3NSA2LjQyNDMxNiAzMS4zMDYwMDcgMTQuMTc5OTU0bDAuMzEwMDYyLTAuMzA2OTkyIDIzNy4xNTUzMDUgMjM3LjE1NjMyOGMyMC45MDkyMTYgMjAuOTEyMjg1IDIwLjk0NDAwOCA1NC43NzQ1MTEgMC4wNzk4MTggNzUuNjQxNzcxLTIwLjg2NjIzNyAyMC44NjQxOS01NC43Mjk0ODUgMjAuODI5Mzk4LTc1LjY0MTc3MS0wLjA3OTgxOEw2MTQuOTU5OTUzIDY5MC4wNTAxNjJsMC4wMzQ3OTItMC4wMzQ3OTJjLTkuOTEwNzIxLTEwLjcyODM0Mi0xNS41NTMyMzEtMjUuMzE5NjY1LTE0LjExNTQ4Ni00MS4wMTIwNjZDNjAzLjU2ODUwOSA2MTkuNjIwMDkgNjI5LjU2OTY5NiA1OTcuOTc5MjEgNjU4Ljk1NDk1NyA2MDAuNjY5NDgyeiIgLz48L3N2Zz4="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(1);t.createFooter=function(){let e=r.createDiv();e.classList.add("kb_web_editor_modal_footer");let t=r.createPrimaryButton(o.TEXT.OK),n=r.createButton(o.TEXT.CANCEL);return e.appendChild(t),e.appendChild(n),{footer:e,ok:t,cancel:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.createBody=function(e){let t=o.createDiv();return t.classList.add("kb_web_editor_modal_body"),null!=e&&(t.style.maxHeight=e),[t,e=>{e instanceof HTMLElement?t.appendChild(e):t.innerHTML=e}]}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),i=o(n(31)),a=n(2);t.createMoveButton=function(e){var t=r.createButton(i.default,a.TEXT.MOVE);return t.draggable=!0,t.style.cursor="move",t.ondrag=t=>{0!=t.x&&0!=t.y&&(e.style.top=t.y-25+"px",e.style.left=t.x-25+"px")},t}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),i=o(n(61)),a=o(n(62)),l=n(32),s=o(n(0)),c=n(2);t.createPreviousButton=function(){var e=r.createButton(i.default,c.TEXT.PREVIOUS);e.onclick=()=>s.default.operationManager.previous();var t=l.createNotice();return e.appendChild(t),s.default.operationEvent.addEventListener(n=>{t.setCount(n.operationCount),e.changeIcon(n.operationCount>0?a.default:i.default)}),e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzhhOGE4YSIgZD0iTTk5NS42NDggNDU5LjI5NkM2ODQuNDQ4IDI4MS41NjggNDA2LjA4IDMxOC42NTYgMTcxLjIzMiA1NjcuOTA0TDMyIDQxNnYzODRoMzUybC0xNjAuNzM2LTE3NS4zMjhjMjExLjE2OC0yMjcuMDcyIDQ1Mi4xOTItMjU5Ljc3NiA3MzQuMzA0LTk4LjY4OGEzOC40IDM4LjQgMCAwIDAgMzguMDgtNjYuNjg4eiIgLz48L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTk5NS42NDggNDU5LjI5NkM2ODQuNDQ4IDI4MS41NjggNDA2LjA4IDMxOC42NTYgMTcxLjIzMiA1NjcuOTA0TDMyIDQxNnYzODRoMzUybC0xNjAuNzM2LTE3NS4zMjhjMjExLjE2OC0yMjcuMDcyIDQ1Mi4xOTItMjU5Ljc3NiA3MzQuMzA0LTk4LjY4OGEzOC40IDM4LjQgMCAwIDAgMzguMDgtNjYuNjg4eiIgLz48L3N2Zz4="},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),i=o(n(64)),a=o(n(65)),l=n(32),s=o(n(0)),c=n(2);t.createNextButton=function(){var e=r.createButton(i.default,c.TEXT.NEXT);e.onclick=()=>s.default.operationManager.next();var t=l.createNotice();return e.appendChild(t),s.default.operationEvent.addEventListener(n=>{t.setCount(n.backupOperationCount),e.changeIcon(n.backupOperationCount>0?a.default:i.default)}),e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzhhOGE4YSIgZD0iTTg2MC45OTIgNTU4LjkxMkM2MjcuOTA0IDMxNy41MzYgMzUyLjM4NCAyODMuNjQ4IDQ0LjggNDU5LjI5NmEzOC40IDM4LjQgMCAxIDAgMzguMDggNjYuNjg4YzI3OC40MzItMTU5LjAwOCA1MTYuODk2LTEyOS40MDggNzI2LjA4IDg5LjY5Nkw2NDAgODAwaDM1MlY0MTZsLTEzMS4wMDggMTQyLjkxMnoiIC8+PC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTg2MC45OTIgNTU4LjkxMkM2MjcuOTA0IDMxNy41MzYgMzUyLjM4NCAyODMuNjQ4IDQ0LjggNDU5LjI5NmEzOC40IDM4LjQgMCAxIDAgMzguMDggNjYuNjg4YzI3OC40MzItMTU5LjAwOCA1MTYuODk2LTEyOS40MDggNzI2LjA4IDg5LjY5Nkw2NDAgODAwaDM1MlY0MTZsLTEzMS4wMDggMTQyLjkxMnoiIC8+PC9zdmc+"},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67)),a=r(n(68)),l=n(16),s=r(n(0)),c=r(n(69)),u=n(3),d=n(2);t.createSaveButton=function(){var e=l.createButton(i.default,d.TEXT.SAVE);return s.default.operationEvent.addEventListener(t=>{e.changeIcon(t.operationCount>0?a.default:i.default)}),e.onclick=()=>o(this,void 0,void 0,(function*(){try{var e=[];for(const t of s.default.operationManager.previousRecords)e.push(...t.logs);yield c.default(e),u.reload()}catch(e){alert("save error!")}})),e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzhhOGE4YSIgZD0iTTkyNS4yNDggMzU2LjkyOGwtMjU4LjE3Ni0yNTguMTc2YTY0IDY0IDAgMCAwLTQ1LjI0OC0xOC43NTJIMTQ0YTY0IDY0IDAgMCAwLTY0IDY0djczNmE2NCA2NCAwIDAgMCA2NCA2NGg3MzZhNjQgNjQgMCAwIDAgNjQtNjRWNDAyLjE3NmE2NCA2NCAwIDAgMC0xOC43NTItNDUuMjQ4ek0yODggMTQ0aDE5MlYyNTZIMjg4VjE0NHogbTQ0OCA3MzZIMjg4VjczNmg0NDh2MTQ0eiBtMTQ0IDBIODAwVjcwNGEzMiAzMiAwIDAgMC0zMi0zMkgyNTZhMzIgMzIgMCAwIDAtMzIgMzJ2MTc2SDE0NHYtNzM2SDIyNFYyODhhMzIgMzIgMCAwIDAgMzIgMzJoMjU2YTMyIDMyIDAgMCAwIDMyLTMyVjE0NGg3Ny44MjRsMjU4LjE3NiAyNTguMTc2Vjg4MHoiIC8+PC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTkyNS4yNDggMzU2LjkyOGwtMjU4LjE3Ni0yNTguMTc2YTY0IDY0IDAgMCAwLTQ1LjI0OC0xOC43NTJIMTQ0YTY0IDY0IDAgMCAwLTY0IDY0djczNmE2NCA2NCAwIDAgMCA2NCA2NGg3MzZhNjQgNjQgMCAwIDAgNjQtNjRWNDAyLjE3NmE2NCA2NCAwIDAgMC0xOC43NTItNDUuMjQ4ek0yODggMTQ0aDE5MlYyNTZIMjg4VjE0NHogbTQ0OCA3MzZIMjg4VjczNmg0NDh2MTQ0eiBtMTQ0IDBIODAwVjcwNGEzMiAzMiAwIDAgMC0zMi0zMkgyNTZhMzIgMzIgMCAwIDAtMzIgMzJ2MTc2SDE0NHYtNzM2SDIyNFYyODhhMzIgMzIgMCAwIDAgMzIgMzJoMjU2YTMyIDMyIDAgMCAwIDMyLTMyVjE0NGg3Ny44MjRsMjU4LjE3NiAyNTguMTc2Vjg4MHoiIC8+PC9zdmc+"},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(11),a=n(10);t.default=e=>o(this,void 0,void 0,(function*(){let t=r.getPageId(),n=a.Log.simplify(e);console.log(n),yield i.Update(JSON.stringify({pageId:t,updates:n}))}))},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),i=o(n(71)),a=n(2),l=n(72);t.createImageButton=function(){var e=r.createButton(i.default,a.TEXT.EDIT_IMAGES);return e.onclick=l.createGlobalImageEditor,e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTkyOCA4OTZIOTZhMzIgMzIgMCAwIDEtMzItMzJWMTYwYTMyIDMyIDAgMCAxIDMyLTMyaDgzMmEzMiAzMiAwIDAgMSAzMiAzMnYxMTYuODY0YTMyIDMyIDAgMSAxLTY0IDBWMTkySDEyOHY2NDBoNzY4VjQ2OC41NDRsLTIwNi4zMzYgMjQ0LjczNmEzMS45NjggMzEuOTY4IDAgMCAxLTQ0Ljg5NiA0bC0xOTYuMDY0LTE2Mi43NTItMTk0LjY1NiAxODAuMjI0YTMxLjkzNiAzMS45MzYgMCAxIDEtNDMuNDU2LTQ2Ljk0NGwyMTUuMjMyLTE5OS4yOTZhMzIuMDMyIDMyLjAzMiAwIDAgMSA0Mi4xNzYtMS4xNTJsMTkzLjIxNiAxNjAuMzg0IDI0Mi4zMzYtMjg3LjQ1NmEzMi4xMjggMzIuMTI4IDAgMCAxIDM1LjQyNC05LjQ0YzEyLjYwOCA0LjYwOCAyMS4wMjQgMTYuNjQgMjEuMDI0IDMwLjA4Vjg2NGEzMiAzMiAwIDAgMS0zMiAzMnpNMzA0IDQ4MEMyNDIuMjQgNDgwIDE5MiA0MjkuNzYgMTkyIDM2OFMyNDIuMjQgMjU2IDMwNCAyNTYgNDE2IDMwNi4yNCA0MTYgMzY4IDM2NS43NiA0ODAgMzA0IDQ4MHogbTAtMTYwYy0yNi40NjQgMC00OCAyMS41MzYtNDggNDhTMjc3LjUzNiA0MTYgMzA0IDQxNnM0OC0yMS41MzYgNDgtNDgtMjEuNTM2LTQ4LTQ4LTQ4eiIgLz48L3N2Zz4="},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=n(2),a=n(25),l=n(73),s=n(81),c=n(83),u=o(n(0));t.createGlobalImageEditor=function(){const e=[{title:i.TEXT.DOM_IMAGES,selected:!0,panel:c.createDomImagePanel()},{title:i.TEXT.CONTENT_IMAGES,panel:l.createContentImagePanel()},{title:i.TEXT.STYLE_IMAGES,panel:s.createStyleImagePanel()}];let t=a.createTabs(e);const{modal:n,hideCancel:o}=r.createModal(i.TEXT.EDIT_IMAGES,t,"600px","500px");o(),u.default.container.appendChild(n)}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(7),a=n(26),l=n(11),s=n(19),c=o(n(0)),u=n(12),d=n(5),p=n(1),f=n(20),h=n(8),g=n(10),m=n(6);t.createContentImagePanel=function(){let e=p.createDiv();for(const t of r.getAllElement(document.body))if(t instanceof HTMLImageElement){let{kooobooIdEl:n,fieldComment:o,operability:r}=m.ElementAnalyze(t);if(!d.KoobooComment.getAroundComments(t).find(e=>"src"==e.getValue("attribute")&&"none"!=e.source))continue;if(!r||!n&&!o)continue;let{imagePreview:p,setImage:b}=f.createImagePreview(!1,()=>t.src="");a.setImagePreview(p,t),b(t.src),p.onclick=()=>{let e=d.KoobooComment.getAroundComments(t).find(e=>"src"==e.getValue("attribute")),n=t,o=n.getAttribute("src");l.pickImg(t=>{n.src=t,b(t);let r=i.setGuid(n),a=n.getAttribute("src"),l=new s.AttributeUnit(o,"src"),d=[...e.infos,h.kvInfo.value(a)],p=new u.operationRecord([l],[new g.Log(d)],r);c.default.operationManager.add(p)})},e.appendChild(p)}return e}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAvSURBVChTY3zy5AkDKpCWloayYIAJSuMFg1ER4////6FMGHj69CmUBQND1HcMDADo1wjAUQl9dwAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(76),r=n(77);t.colorProps=[{prop:"color",isChild:!1,parent:"color",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"background-color",isChild:!0,parent:"background",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"box-shadow",isChild:!1,parent:"box-shadow",replaceColor:(e,t)=>{let n=new o.BoxShadow(e);return n.color=t,n.toString()},getColor:e=>new o.BoxShadow(e).color},{prop:"text-shadow",isChild:!1,parent:"text-shadow",replaceColor:(e,t)=>{let n=new r.TextShadow(e);return n.color=t,n.toString()},getColor:e=>new r.TextShadow(e).color},{prop:"border-color",isChild:!0,parent:"border",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"border-left-color",isChild:!0,parent:"border-left",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"border-top-color",isChild:!0,parent:"border-top",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"border-right-color",isChild:!0,parent:"border-right",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"border-bottom-color",isChild:!0,parent:"border-bottom",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"outline-color",isChild:!1,parent:"outline",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"column-rule-color",isChild:!1,parent:"column-rule",replaceColor:(e,t)=>t,getColor:e=>e}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BoxShadow=class{constructor(e){this.value=e,this.hShadow="0px",this.vShadow="0px",this.blur="0px",this.spread="0px",this.color="#fff0",this.inset=null,(e=e.replace(";","")).indexOf("inset")>-1&&(e=e.replace("inset",""),this.inset="inset");let t,n,o,r,i,a=(e=(e=e.replace(/\s+/g," ")).replace(/,\s+/g,",")).trim().split(" ");a.length<3||a.length>5||(/^([a-zA-Z#]|rgb)/.test(a[0])?(t=0,n=1,o=2,r=3,i=4):(n=0,o=1,r=2,i=3,t=a.length-1),3==a.length&&(this.hShadow=a[n],this.vShadow=a[o],this.color=a[t]),4==a.length&&(this.hShadow=a[n],this.vShadow=a[o],this.blur=a[r],this.color=a[t]),5==a.length&&(this.hShadow=a[n],this.vShadow=a[o],this.blur=a[r],this.spread=a[i],this.color=a[t]))}toString(){return`${this.hShadow} ${this.vShadow} ${this.blur} ${this.spread} ${this.color} ${this.inset||""}`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextShadow=class{constructor(e){this.value=e,this.hShadow="0px",this.vShadow="0px",this.blur="0px",this.color="#fff0";let t,n,o,r,i=(e=(e=(e=e.replace(";","")).replace(/\s+/g," ")).replace(/,\s+/g,",")).trim().split(" ");i.length<3||i.length>4||(/^([a-zA-Z#]|rgb)/.test(i[0])?(t=0,n=1,o=2,r=3):(t=i.length-1,n=0,o=1,r=2),3==i.length&&(this.hShadow=i[n],this.vShadow=i[o],this.color=i[t]),4==i.length&&(this.hShadow=i[n],this.vShadow=i[o],this.blur=i[r],this.color=i[t]))}toString(){return`${this.hShadow} ${this.vShadow} ${this.blur} ${this.color}`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorEnum={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.createOutLinkPanel=function(){let e=o.createInput();return e.style.width="100%",e.placeholder="http://",{outLinkPanel:e,setContent:t=>e.value=t,getContent:()=>e.value}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1);t.createPageLinkPanel=function(e){return o(this,void 0,void 0,(function*(){let t,n=yield r.getPageUrls(),o=i.createDiv(),a=n.map(e=>i.createRadioInput(e));return a.forEach(n=>{n.radio.onclick=()=>{a.filter(e=>e!=n).forEach(e=>e.setChecked(!1)),n.setChecked(!0),t=n.getContent()},n.getContent()==e&&(n.setChecked(!0),t=e),o.appendChild(n.radio)}),a.length>0&&(a[a.length-1].radio.style.borderBottom="none"),{pageLinkPanel:o,getContent:()=>t}}))}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(7),a=n(4),l=n(26),s=n(11),c=n(12),u=o(n(0)),d=n(19),p=n(5),f=n(1),h=n(20),g=n(22),m=n(82),b=n(6),y=n(8),M=n(10),v=n(34);function I(e,t){let n=[];for(const o of t)for(const t of g.matchSelector(e,o.cssRule.selectorText))n.push({selector:t.selector,pseudo:t.pseudo,rule:o});return n}function _(e,t,n){let o=e.getAttribute(a.KOOBOO_ID),f=p.KoobooComment.getComments(e),g=b.getScopeComment(f);if(!g||!o)return;let{imagePreview:m,setImage:v}=h.createImagePreview();l.setImagePreview(m,e);let I=r.clearCssImageWarp(t.backgroundImage);return I?(v(I),m.onclick=()=>{let t=e.getAttribute("style");s.pickImg(a=>{a="none"==a?"none":` url('${a}')`;let l=r.getImportant(e,"background-image",n);e.style.setProperty("background-image",a,l),v(a);let s=i.setGuid(e),p=new d.AttributeUnit(t,"style"),f=e.style.backgroundImage.replace(/"/g,"'"),h=[...g.infos,y.kvInfo.value(f),y.kvInfo.property("background-image"),y.kvInfo.koobooId(o),y.kvInfo.important(l)],m=new c.operationRecord([p],[new M.Log(h)],s);u.default.operationManager.add(m)})},m):void 0}function w(e,t,n){if(e.some(e=>e.pseudo==n.pseudo&&e.selector==n.selector&&e.rule==n.rule))return;e.push(n);let o=n.rule,{imagePreview:a,setImage:d}=h.createImagePreview();l.setImagePreview(a,t);var f=p.KoobooComment.getComments(t);let g=r.clearCssImageWarp(o.cssRule.style.backgroundImage);return g?(d(g),a.onclick=()=>{let e=o.cssRule.style.backgroundImage;s.pickImg(n=>{n="none"==n?"none":` url('${n}')`;let r=o.cssRule.style.getPropertyPriority("background-image");o.cssRule.style.setProperty("background-image",n,r),d(n);let a=i.setGuid(t),l=new m.BgImageUnit(e,o.cssRule.style),s=o.cssRule.style.backgroundImage.replace(/"/g,"'"),p=[...f.find(e=>e.scope).infos,y.kvInfo.value(s),y.kvInfo.property("background-image"),new y.kvInfo("url",o.url),new y.kvInfo("selector",o.cssRule.selectorText),y.kvInfo.koobooId(o.koobooId),y.kvInfo.important(r),y.kvInfo.mediaRuleList(o.mediaRuleList)],h=new c.operationRecord([l],[new M.Log(p)],a);u.default.operationManager.add(h)})},a):void 0}t.createStyleImagePanel=function(){let e=f.createDiv(),t=g.getCssRules().filter(e=>e.cssRule.style.backgroundImage&&a.BACKGROUND_IMAGE_START.test(e.cssRule.style.backgroundImage)),n=[];for(const o of r.getAllElement(document.body)){if(!(o instanceof HTMLElement))continue;let r=getComputedStyle(o);if(!r.backgroundImage||"none"==r.backgroundImage)continue;let i=I(o,t),a=o.style.getPropertyPriority("background-image"),l=i.find(e=>e.rule.cssRule.style.getPropertyPriority("background-image"));if(!o.style.backgroundImage||!a&&l){if(i.length>0){let t=i.map(e=>({cssStyleRule:e.rule.cssRule,inline:!1,styleSequence:e.rule.styleSequence,rawSelector:e.rule.cssRule.selectorText,targetSelector:e.selector,important:!!e.rule.cssRule.style.getPropertyPriority("background-image"),koobooId:e.rule.koobooId,mediaRuleList:e.rule.mediaRuleList,pseudo:e.pseudo})),r=v.sortStylePriority(t).pop().cssStyleRule;l=i.find(e=>e.rule.cssRule==r);let a=w(n,o,l);a&&e.appendChild(a)}}else{let n=_(o,r,t);n&&e.appendChild(n)}}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(17);class r extends o.Unit{constructor(e,t){super(e),this.oldValue=e,this.style=t}undo(e){this.newValue=this.style.backgroundImage,this.style.setProperty("background-image",this.oldValue,this.style.getPropertyPriority("background-image"))}redo(e){this.oldValue=this.style.backgroundImage,this.style.setProperty("background-image",this.newValue,this.style.getPropertyPriority("background-image"))}}t.BgImageUnit=r},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(6),a=n(26),l=n(5),s=n(1),c=n(20);t.createDomImagePanel=function(){let e=s.createDiv();for(const t of r.getAllElement(document.body))if(t instanceof HTMLImageElement){let{kooobooIdEl:n,fieldComment:r,operability:s}=i.ElementAnalyze(t);if(l.KoobooComment.getAroundComments(t).find(e=>"src"==e.getValue("attribute")))continue;if(!s||!n&&!r)continue;let{imagePreview:u,setImage:d}=c.createImagePreview(!1,()=>t.src="");a.setImagePreview(u,t),d(t.src),u.onclick=()=>o(this,void 0,void 0,(function*(){let e=yield i.updateDomImage(t);e&&d(e)})),e.appendChild(u)}return e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),i=o(n(85)),a=n(2),l=n(86);t.createLinkButton=function(){var e=r.createButton(i.default,a.TEXT.EDIT_LINKS);return e.onclick=l.createGlobalLinkEditor,e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTkxMC40OTYgMjEzLjUzNkM4MDQuMTYgODIuMjA4IDYxMS40ODggNjEuOTUyIDQ4MC4xMjggMTY4LjMybC0xMDAuNzY4IDgxLjYgNTAuMzM2IDYyLjE3NiAxMDAuNzY4LTgxLjZhMjI1Ljk4NCAyMjUuOTg0IDAgMSAxIDI4NC40NDggMzUxLjI2NGwtMTA3Ljk2OCA4Ny40MjQgNTAuMzM2IDYyLjE3NiAxMDcuOTY4LTg3LjQyNGEzMDUuOTg0IDMwNS45ODQgMCAwIDAgNDUuMjQ4LTQzMC40ek01MTYuMzUyIDgyMy41NTJhMjI1Ljk4NCAyMjUuOTg0IDAgMSAxLTI4NC40NDgtMzUxLjI2NGwxMTAuOTc2LTg5Ljg1Ni01MC4zMzYtNjIuMTc2LTExMC45NzYgODkuODU2QzUwLjI0IDUxNi40NDggMjkuOTg0IDcwOS4xNTIgMTM2LjMyIDg0MC40OGMxMDYuMzM2IDEzMS4zMjggMjk5LjA0IDE1MS41ODQgNDMwLjM2OCA0NS4yNDhsMTA1LjEyLTg1LjEyLTUwLjMzNi02Mi4xNzYtMTA1LjEyIDg1LjEyek02NzYuMTYgMzUzLjI4bDUxLjIzMiA2MS40NC0zNDMuNTUyIDI4Ni4zMDQtNTEuMi02MS40NHoiIC8+PC9zdmc+"},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=n(2),a=n(25),l=n(87),s=n(88),c=o(n(0));t.createGlobalLinkEditor=function(){const e=[{title:i.TEXT.DOM_LINKS,selected:!0,panel:l.createDomLinkPanel()},{title:i.TEXT.CONTENT_LINKS,panel:s.createContentLinkPanel()}];let t=a.createTabs(e);const{modal:n,hideCancel:o}=r.createModal(i.TEXT.EDIT_LINKS,t,"500px","500px");o(),c.default.container.appendChild(n)}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(36),a=n(6),l=n(5),s=n(1);t.createDomLinkPanel=function(){let e=s.createDiv();for(const t of r.getAllElement(document.body))if(t instanceof HTMLElement&&r.isLink(t)){let{kooobooIdEl:n,fieldComment:r,operability:s}=a.ElementAnalyze(t);if(l.KoobooComment.getAroundComments(t).find(e=>"href"==e.getValue("attribute")))continue;if(!s||!n&&!r)continue;let{item:c,setLabel:u}=i.createLinkItem(t,()=>o(this,void 0,void 0,(function*(){var e=yield a.updateDomLink(t);e&&u(e)})));e.appendChild(c)}if(e.children.length>0){e.children.item(e.children.length-1).style.borderBottom="none"}return e}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(36),a=n(5),l=n(1),s=n(6);t.createContentLinkPanel=function(){let e=l.createDiv();for(const t of r.getAllElement(document.body))if(t instanceof HTMLElement&&r.isLink(t)){if(!a.KoobooComment.getAroundComments(t).find(e=>"href"==e.getValue("attribute")&&"none"!=e.source))continue;let{item:n,setLabel:r}=i.createLinkItem(t,()=>o(this,void 0,void 0,(function*(){let e=yield s.updateAttributeLink(t);e&&r(e)})));e.appendChild(n)}if(e.children.length>0){e.children.item(e.children.length-1).style.borderBottom="none"}return e}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),a=n(21),l=n(90);t.createFloatMenu=function(){const{container:e,hidden:t,update:n}=l.createMenu();return e.onmouseenter=()=>i.default.floatMenuClosing=!1,i.default.domChangeEvent.addEventListener(e=>{i.default.lastMouseEventArg.isTrusted&&(i.default.floatMenuClosing=!1,n(i.default.lastMouseEventArg.pageX,i.default.lastMouseEventArg.pageY))}),i.default.hoverDomEvent.addEventListener(()=>o(this,void 0,void 0,(function*(){i.default.floatMenuClosing=!0,yield a.delay(200),i.default.floatMenuClosing&&t()}))),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(91)),i=o(n(92)),a=o(n(93)),l=o(n(96)),s=o(n(97)),c=o(n(98)),u=o(n(99)),d=o(n(100)),p=o(n(101)),f=o(n(102)),h=o(n(113)),g=o(n(116)),m=o(n(118)),b=o(n(119)),y=o(n(120)),M=o(n(121)),v=n(3),I=o(n(122)),_=n(5),w=o(n(0)),E=n(1),k=n(4),D=n(2),C=n(13),T=o(n(40)),N=o(n(123)),A=o(n(124)),x=o(n(128));t.createMenu=function(){let e=new L;return e.addItem(new a.default(e)),e.addItem(new r.default(e)),e.addItem(new i.default(e)),e.addItem(new l.default(e)),e.addItem(new s.default(e)),e.addItem(new c.default(e)),e.addItem(new u.default(e)),e.addItem(new d.default(e)),e.addItem(new h.default(e)),e.addItem(new g.default(e)),e.addItem(new p.default(e)),e.addItem(new f.default(e)),e.addItem(new m.default(e)),e.addItem(new b.default(e)),e.addItem(new y.default(e)),e.addItem(new M.default(e)),e.addItem(new I.default(e)),e.addItem(new A.default(e)),e.addItem(new x.default(e)),e};class L{constructor(){this.items=[],this.update=(e,t)=>{let n=v.getMaxHeight(),o=v.getMaxWidth();this.container.style.display="block",this.container.style.overflow="visible";let r=w.default.lastSelectedDomEventArgs,i=_.KoobooComment.getComments(r.element),a=0!=v.getParentElements(r.element).findIndex(e=>e instanceof HTMLBodyElement);this.setExpandBtnVisiable(a);for(const e of this.items)e.update(i);this.updatePosition(e,t,n,o)},this.hidden=()=>{this.container.style.display="none"};const{container:e,setExpandBtnVisiable:t,updatePosition:n}=this.createContainer();for(const t of this.items)e.appendChild(t.el);this.container=e,this.setExpandBtnVisiable=t,this.updatePosition=n}addItem(e){this.container.appendChild(e.el),this.items.push(e)}createContainer(){let e=E.createDiv();e.classList.add("kb_web_editor_menu"),e.style.zIndex=k.STANDARD_Z_INDEX+1+"";let{setExpandBtnVisiable:t,title:n}=this.createTitle();e.append(n);return{container:e,updatePosition:(t,n,o,r)=>{let i=e.getBoundingClientRect(),a=v.getScrollLeft(),l=v.getScrollTop(),s=window.innerWidth+a,c=window.innerHeight+l;t+i.width>s&&(t=t-i.width+3),n+i.height>c&&(n=n-i.height+3,w.default.lastMouseEventArg={isTrusted:!0,pageX:t,pageY:n}),e.style.top=n+"px",e.style.left=t+"px"},setExpandBtnVisiable:t}}createTitle(){const e=E.createDiv();e.classList.add("kb_web_editor_menu_title"),e.appendChild(document.createTextNode(D.TEXT.MENU)),e.appendChild(this.createCloseButton());let t=this.createExpandButton();e.appendChild(t);return{title:e,setExpandBtnVisiable:e=>{t.style.display=e?"block":"none"}}}createCloseButton(){const e=E.createDiv();return e.style.backgroundImage=`url(${T.default})`,e.onclick=()=>this.hidden(),e}createExpandButton(){const e=E.createDiv();return e.style.backgroundImage=`url(${N.default})`,e.title=D.TEXT.EXPAND_SELECTION,e.onclick=()=>{if(w.default.editing)return;let e=w.default.lastHoverDomEventArgs.closeElement;e&&e.parentElement&&(C.emitHoverEvent(e.parentElement),C.emitSelectedEvent())},e}}t.Menu=L},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(7),a=n(2),l=n(6),s=n(12),c=n(5),u=o(n(9)),d=n(18),p=n(8),f=n(4),h=n(10);class g extends u.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(a.TEXT.COPY);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=r.default.lastSelectedDomEventArgs,{operability:t,comments:n,kooobooIdEl:o,fieldComment:i}=l.ElementAnalyze(e);return t&&n&&(o||i)?l.getRepeatSourceComment(n)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){let{element:e}=r.default.lastSelectedDomEventArgs,{unpollutedEl:t,koobooId:n,kooobooIdEl:o,scopeComment:a,fieldComment:u}=l.ElementAnalyze(e);this.parentMenu.hidden();var g=[];let m=e.cloneNode(!0),b=i.setGuid(e.parentElement),y=e.parentElement.innerHTML,M=c.KoobooComment.getAroundComments(e);if(M.length>0){let{nodes:t,endNode:n}=i.getWrapDom(e,M[M.length-1].uid);for(const o of t.reverse()){let t=o.cloneNode(!0);if(c.KoobooComment.isComment(t)){let e=new c.KoobooComment(t);e.setValue("uid",e.uid+"_copy"),t=e.ToComment()}e.parentElement.insertBefore(t,n.nextSibling)}}else e.parentElement.insertBefore(m,e.nextSibling);if(e==o)g.push(...a.infos,p.kvInfo.copy,p.kvInfo.koobooId(n));else{let e=o?o.innerHTML:i.getWarpContent(t),r=u||a;n=o?o.getAttribute(f.KOOBOO_ID):n,g.push(...r.infos,p.kvInfo.value(i.clearKoobooInfo(e)),p.kvInfo.koobooId(n))}let v=c.KoobooComment.getAroundScopeComments(e);if(v){let{nodes:t}=i.getWrapDom(e,v.source);for(const e of t)e instanceof HTMLElement&&i.markDirty(e,!0)}else i.markDirty(e.parentElement);let I=new s.operationRecord([new d.InnerHtmlUnit(y)],[new h.Log(g)],b);r.default.operationManager.add(I)}}t.default=g},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(7),l=n(12),s=n(6),c=n(5),u=o(n(9)),d=n(18),p=n(4),f=n(8),h=n(10),g=n(13);class m extends u.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.DELETE);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=i.default.lastSelectedDomEventArgs,{operability:t,comments:n,kooobooIdEl:o,fieldComment:r}=s.ElementAnalyze(e);return t&&n&&(o||r)?s.getRepeatSourceComment(n)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){let{element:e,koobooId:t}=i.default.lastSelectedDomEventArgs,{kooobooIdEl:n,fieldComment:o,scopeComment:r}=s.ElementAnalyze(e);this.parentMenu.hidden();var u=[];let m=e.parentElement.innerHTML,b=a.setGuid(e.parentElement),y=c.KoobooComment.getAroundScopeComments(e);if(y){let{nodes:t}=a.getWrapDom(e,y.source);for(const e of t)e instanceof HTMLElement&&a.markDirty(e,!0)}else a.markDirty(e.parentElement);let M=new Text(""),v=c.KoobooComment.getAroundComments(e);if(v.length>0){let{nodes:t}=a.getWrapDom(e,v[v.length-1].uid);t[0].parentNode.insertBefore(M,t[0]),t.forEach(e=>e.parentElement.removeChild(e))}else e.parentElement.insertBefore(M,e),e.parentElement.removeChild(e);if(e==n)u.push(...r.infos,f.kvInfo.delete,f.kvInfo.koobooId(t));else{let e=n?n.innerHTML:a.getWarpContent(M),i=o||r;t=n?n.getAttribute(p.KOOBOO_ID):t,u.push(...i.infos,f.kvInfo.value(a.clearKoobooInfo(e)),f.kvInfo.koobooId(t))}let I=new l.operationRecord([new d.InnerHtmlUnit(m)],[new h.Log(u)],b);i.default.operationManager.add(I),g.emitHoverEvent(document.body),g.emitSelectedEvent()}}t.default=m},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(7),l=n(37),s=n(6),c=n(18),u=n(12),d=o(n(9)),p=n(8),f=n(4),h=n(10);class g extends d.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=i.default.lastSelectedDomEventArgs,{operability:t,comments:n,kooobooIdEl:o,fieldComment:r}=s.ElementAnalyze(e);return t&&n&&s.isEditable(e)&&(o||r)?void 0:this.setVisiable(!1)}click(){let{element:e}=i.default.lastSelectedDomEventArgs,{kooobooIdEl:t,fieldComment:n,koobooId:o,scopeComment:r}=s.ElementAnalyze(e);this.parentMenu.hidden();let d=e.innerHTML;l.setInlineEditor({selector:e,onSave:()=>{if(s.clearContent(d)==s.clearContent(e.innerHTML))return;t&&a.markDirty(t);let l=a.setGuid(e),g=[new c.InnerHtmlUnit(d)];o=t?t.getAttribute(f.KOOBOO_ID):o;let m=t?t.innerHTML:a.getWarpContent(e),b=[...(n||r).infos,p.kvInfo.koobooId(o),p.kvInfo.value(a.clearKoobooInfo(m))],y=new u.operationRecord(g,[new h.Log(b)],l);i.default.operationManager.add(y)},onCancel:()=>{e.innerHTML=d}})}}t.default=g},function(e,t){e.exports=tinymce},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),a=n(2),l=r(n(0)),s=n(3),c=n(21),u=r(n(31)),d=n(1),p=n(5);function f(e){return o(this,void 0,void 0,(function*(){e.focus(!1);let t=e.getContainer();if(t instanceof HTMLElement){t.style.zIndex=i.STANDARD_Z_INDEX+1+"",t.style.width="auto",yield c.delay(100),t.nextElementSibling instanceof HTMLElement&&(t.nextElementSibling.style.zIndex=i.STANDARD_Z_INDEX+2+"");let o=t.getElementsByClassName("tox-toolbar").item(0);var n=d.createDiv();n.draggable=!0,n.style.cursor="move",n.style.backgroundImage=`url(${u.default})`,n.style.backgroundPosition="center",n.style.backgroundRepeat="no-repeat",n.style.backgroundSize="contain",n.style.height="26px",n.style.width="26px",n.style.margin="6px 0 6px 6px",o.insertBefore(n,o.children.item(0)),t.draggable=!0;const r=()=>{let e=t.getBoundingClientRect();e.left<0&&(t.style.left="0px"),e.top<0&&(t.style.top="0px")};r(),e.on("MouseDown",r),e.on("MouseUp",r),e.on("KeyUp",r),t.ondrag=e=>{t instanceof HTMLElement&&(t.style.position="fixed",0!=e.x&&0!=e.y&&(t.style.top=e.y-15+"px",t.style.left=e.x-15+"px"))}}}))}function h(e){let t=[];for(const n of s.getAllElement(e))n.classList.contains("mce-item-table")&&n.classList.remove("mce-item-table"),n.hasAttribute("data-mce-src")&&n.removeAttribute("data-mce-src"),n.hasAttribute("data-mce-bogus")&&t.push(n);t.forEach(e=>e.parentElement&&e.parentElement.removeChild(e))}t.impoveEditorUI=f,t.setLang=function(e){"zh"==a.lang&&(e.language="zh_CN",e.language_url=`${location.origin}\\_Admin\\Scripts\\kooboo-web-editor\\${e.language}.js`)},t.onBlur=function(){return!1},t.onSetContent=function(e){var t=e.target.targetElm;t.style.position=t._position;for(const e of s.getAllElement(t,!0))-1!=e.innerHTML.indexOf(i.EMPTY_COMMENT)||s.isTextArea(e)||(e.innerHTML+=i.EMPTY_COMMENT)},t.onKeyDown=function(e){var t=e.target;if("Backspace"==e.code){-1!=t.innerHTML.indexOf(i.EMPTY_COMMENT)||s.isTextArea(t)||(t.innerHTML+=i.EMPTY_COMMENT)}if("Backspace"==e.code&&t.innerHTML==i.EMPTY_COMMENT)return!1},t.onBeforeSetContent=function(e){var t=e.target.targetElm;"li"==t.tagName.toLowerCase()&&(0==t.children.length?e.content=t.textContent:0===e.content&&(e.content=t.innerHTML)),e.format="raw";for(let e=0;e<t.childNodes.length;e++){const n=t.childNodes[e];if(p.KoobooComment.isComment(n)){t.kbComment=new p.KoobooComment(n);break}}},t.getToolbar=function(e){let t="save cancel | undo redo | bold italic underline | forecolor backcolor | fontselect fontsizeselect | image ";return"a"!=e.tagName.toLowerCase()&&(t+="| link unlink"),t},t.initInstanceCallback=function(e){l.default.editing=!0,f(e),l.default.closeEditingEvent.addEventListener(()=>{e.execCommand("mcecancel"),l.default.closeEditingEvent.handlers=[]})},t.savePluginCallback=function(e,t){e.save=()=>"",e.remove();let n=e.getElement();n instanceof HTMLElement&&(n.id.startsWith("mce_")&&n.removeAttribute("id"),""==n.getAttribute("style")&&n.removeAttribute("style")),h(document.body),l.default.editing=!1,t();let o=n.kbComment;o&&!n.innerHTML.trim().startsWith("\x3c!--#kooboo")&&n.insertBefore(o.ToComment(),n.firstChild)},t.clearTinymceElements=h},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(3),l=n(6),s=n(5),c=o(n(9));class u extends c.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT_IMAGE);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=i.default.lastSelectedDomEventArgs,{operability:t,kooobooIdEl:n,fieldComment:o}=l.ElementAnalyze(e);return a.isImg(e)&&t?s.KoobooComment.getAroundComments(e).find(e=>"src"==e.getValue("attribute"))?this.setVisiable(!1):n||o?void 0:this.setVisiable(!1):this.setVisiable(!1)}click(){let{element:e}=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden(),l.updateDomImage(e)}}t.default=u},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(3),l=n(6),s=n(5),c=o(n(9));class u extends c.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT_LINK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=i.default.lastSelectedDomEventArgs,{operability:t,kooobooIdEl:n,fieldComment:o}=l.ElementAnalyze(e);return s.KoobooComment.getAroundComments(e).find(e=>"href"==e.getValue("attribute"))?this.setVisiable(!1):a.isLink(e)&&t&&(n||o)?void 0:this.setVisiable(!1)}click(){let{element:e}=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden(),l.updateDomLink(e)}}t.default=u},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(3),a=o(n(0)),l=n(7),s=o(n(9));class c extends s.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.ENTER_LINK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=a.default.lastHoverDomEventArgs;if(!i.canJump(e))return this.setVisiable(!1)}click(){let e=a.default.lastHoverDomEventArgs.element.getAttribute("href").trim();e.startsWith("/")||(e="/"+e),this.parentMenu.hidden();let t=l.getPageId(),n=`?siteId=${u("SiteId")}&accessToken=${u("accessToken")}&pageId=${t}&pageUrl=${e}`;parent.location.href=parent.location.origin+parent.location.pathname+n}}function u(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=parent.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}t.default=c},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),a=r(n(0)),l=n(6),s=n(11),c=n(5),u=r(n(9)),d=n(3);class p extends u.default{constructor(e){super(e);const{el:t,setVisiable:n,setReadonly:o}=this.createItem(i.TEXT.EDIT_HTML_BLOCK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n,this.setReadonly=o}update(e){if(this.setVisiable(!0),!e.find(e=>"htmlblock"==e.source))return this.setVisiable(!1);this.setReadonly(l.hasOperation(a.default.operationManager))}click(){return o(this,void 0,void 0,(function*(){let{element:e}=a.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=c.KoobooComment.getComments(e).find(e=>"htmlblock"==e.source);yield s.editHtmlBlock(t.getValue("id")),d.reload()}))}}t.default=p},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),a=r(n(0)),l=n(6),s=n(3),c=n(11),u=n(5),d=r(n(9)),p=n(7);class f extends d.default{constructor(e){super(e);const{el:t,setVisiable:n,setReadonly:o}=this.createItem(i.TEXT.EDIT_REPEAT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n,this.setReadonly=o}update(){this.setVisiable(!0);let{element:e}=a.default.lastSelectedDomEventArgs,{nodes:t}=p.getWrapDom(e,"repeatitem"),n=u.KoobooComment.getInnerComments(t);if(!l.getRepeatSourceComment(n,"textcontent"))return this.setVisiable(!1);this.setReadonly(l.hasOperation(a.default.operationManager))}click(){return o(this,void 0,void 0,(function*(){let{element:e}=a.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let{nodes:t}=p.getWrapDom(e,"repeatitem"),n=u.KoobooComment.getInnerComments(t),o=l.getRepeatSourceComment(n,"textcontent");yield c.editRepeat(o.id,""),s.reload()}))}}t.default=f},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(7),l=n(11),s=n(5),c=n(1),u=o(n(9));class d extends u.default{constructor(e){super(e);const{el:t,setVisiable:n,setReadonly:o}=this.createItem(r.TEXT.EDIT_MENU);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){if(this.setVisiable(!0),!e.find(e=>"menu"==e.source))return this.setVisiable(!1)}click(){let{element:e}=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=s.KoobooComment.getComments(e).find(e=>"menu"==e.source);var{startNode:n,endNode:o}=a.getWrapDom(e,"menu");n&&o&&l.editMenu(t.getValue("id"),e=>{let t=c.createDiv();for(;;){if(n.nextSibling==o){n.parentElement.insertBefore(t,o);break}n.parentElement.removeChild(n.nextSibling)}t.outerHTML=e})}}t.default=d},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),a=r(n(0)),l=n(103),s=n(7),c=n(19),u=n(12),d=n(6),p=n(3),f=r(n(9)),h=n(10),g=n(8),m=n(4);class b extends f.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(i.TEXT.EDIT_STYLE);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=a.default.lastSelectedDomEventArgs,{operability:t,kooobooIdEl:n,fieldComment:o}=d.ElementAnalyze(e);return p.isImg(e)||!t?this.setVisiable(!1):n||o?void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,(function*(){let{element:e}=a.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let{kooobooIdEl:t,fieldComment:n,koobooId:o,scopeComment:r}=d.ElementAnalyze(e);const i=e.getAttribute("style");try{let d=yield l.createStyleEditor(e),p=s.setGuid(e),f=new c.AttributeUnit(i,"style");if(0==d.length)return;if(e!=t||!t&&n){o=t?t.getAttribute(m.KOOBOO_ID):o;let i=t?t.innerHTML:s.getWarpContent(e),a=[...(n||r).infos,g.kvInfo.value(s.clearKoobooInfo(i)),g.kvInfo.koobooId(o)];d=[new h.Log(a)]}let b=new u.operationRecord([f],d,p);a.default.operationManager.add(b)}catch(t){e.setAttribute("style",i)}}))}}t.default=b},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=n(2),a=n(1),l=o(n(0)),s=n(104),c=n(105),u=n(111),d=n(112),p=n(22),f=n(10),h=n(5),g=n(6),m=n(4),b=n(8);function y(e){let t=a.createDiv();return t.innerText=e,t.style.padding="3px 5px",t.style.margin="5px 0",t.style.borderBottom="1px solid #eee",t}t.createStyleEditor=function(e){const t=a.createDiv();let n=p.getCssRules(),o=h.KoobooComment.getComments(e),M=g.getScopeComment(o);const v=y(i.TEXT.BACKGROUND_IMAGE);v.style.margin="0 0 15px 0",t.appendChild(v);const I=s.createImg(e,n);t.appendChild(I.el),t.appendChild(y(i.TEXT.COLOR));const _=c.createColor(e,n);t.appendChild(_.el),t.appendChild(y(i.TEXT.FONT));const w=u.createFont(e,n);t.appendChild(w.el),t.appendChild(y(i.TEXT.SIZE));const E=d.createSize(e,n);t.appendChild(E.el);const{modal:k,setOkHandler:D,setCancelHandler:C,close:T}=r.createModal(i.TEXT.EDIT_STYLE,t,"450px");return l.default.container.appendChild(k),new Promise((t,n)=>{D(()=>{let n=[...I.getLogs(),..._.getLogs(),...w.getLogs(),...E.getLogs()].filter(e=>e).map(t=>new f.Log([...t,...M.infos,b.kvInfo.koobooId(e.getAttribute(m.KOOBOO_ID))]));t(n),T()}),C(()=>{n(),T()})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(20),r=n(11),i=n(3),a=n(8);t.createImg=function(e,t){let n;const l=getComputedStyle(e);let s=i.getImportant(e,"background-image",t);const c=t=>{let o="none"==t?t:`url('${t}')`;e.style.setProperty("background-image",o,s),n=[a.kvInfo.property("background-image"),a.kvInfo.value(o),a.kvInfo.important(s)],d(t)},{imagePreview:u,setImage:d}=o.createImagePreview(!0,()=>c("none"));u.appendChild(o.createPickShade()),u.style.marginLeft="auto",u.style.marginRight="auto",u.style.marginBottom="15px";let p=i.clearCssImageWarp(l.backgroundImage);return p&&d(p),u.onclick=()=>r.pickImg(c),{el:u,getLogs:()=>[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(2),i=n(39),a=n(3),l=n(8);t.createColor=function(e,t){const n=o.createDiv(),s=getComputedStyle(e);let c,u,d=a.getImportant(e,"background-color",t),p=a.getImportant(e,"color",t),f=i.createColorPicker(r.TEXT.BACKGROUND_COLOR,s.backgroundColor,t=>{e.style.setProperty("background-color",t,d),c=[l.kvInfo.property("background-color"),l.kvInfo.value(t),l.kvInfo.important(d)]});n.appendChild(f);let h=i.createColorPicker(r.TEXT.COLOR,s.color,t=>{e.style.setProperty("color",t,p),u=[l.kvInfo.property("color"),l.kvInfo.value(t),l.kvInfo.important(p)]});return n.appendChild(h),{el:n,getLogs:()=>[c,u]}}},function(e,t,n){"use strict";var o=n(107),r=n(108),i={};for(var a in o)o.hasOwnProperty(a)&&(i[o[a]]=a);var l=e.exports={to:{},get:{}};function s(e,t,n){return Math.min(Math.max(t,e),n)}function c(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}l.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=l.get.hsl(e),n="hsl";break;case"hwb":t=l.get.hwb(e),n="hwb";break;default:t=l.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},l.get.rgb=function(e){if(!e)return null;var t,n,r,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var a=2*n;i[n]=parseInt(t.slice(a,a+2),16)}r&&(i[3]=Math.round(parseInt(r,16)/255*100)/100)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)i[n]=parseInt(t[n]+t[n],16);r&&(i[3]=Math.round(parseInt(r+r,16)/255*100)/100)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)i[n]=parseInt(t[n+1],0);t[4]&&(i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(i=o[t[1]])?(i[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(i[3]=parseFloat(t[4]))}for(n=0;n<3;n++)i[n]=s(i[n],0,255);return i[3]=s(i[3],0,1),i},l.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,s(parseFloat(t[2]),0,100),s(parseFloat(t[3]),0,100),s(isNaN(n)?1:n,0,1)]}return null},l.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,s(parseFloat(t[2]),0,100),s(parseFloat(t[3]),0,100),s(isNaN(n)?1:n,0,1)]}return null},l.to.hex=function(){var e=r(arguments);return"#"+c(e[0])+c(e[1])+c(e[2])+(e[3]<1?c(Math.round(255*e[3])):"")},l.to.rgb=function(){var e=r(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},l.to.rgb.percent=function(){var e=r(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),o=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+o+"%)":"rgba("+t+"%, "+n+"%, "+o+"%, "+e[3]+")"},l.to.hsl=function(){var e=r(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},l.to.hwb=function(){var e=r(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},l.to.keyword=function(e){return i[e.slice(0,3)]}},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){"use strict";var o=n(109),r=Array.prototype.concat,i=Array.prototype.slice,a=e.exports=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var l=e[n];o(l)?t=r.call(t,i.call(l)):t.push(l)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},function(e,t,n){"use strict";window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n.r(t);var o={};function r(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(o),n.d(o,"on",(function(){return l})),n.d(o,"off",(function(){return s})),n.d(o,"createElementFromString",(function(){return u})),n.d(o,"removeAttribute",(function(){return d})),n.d(o,"createFromTemplate",(function(){return p})),n.d(o,"eventPath",(function(){return f})),n.d(o,"adjustableInputNumbers",(function(){return h}));const l=c.bind(null,"addEventListener"),s=c.bind(null,"removeEventListener");function c(e,t,n,o,r={}){t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);for(const a of t)for(const t of n)a[e](t,o,i({capture:!1},r));return Array.prototype.slice.call(arguments,1)}function u(e){const t=document.createElement("div");return t.innerHTML=e.trim(),t.firstElementChild}function d(e,t){const n=e.getAttribute(t);return e.removeAttribute(t),n}function p(e){return function e(t,n={}){const o=d(t,":obj"),r=d(t,":ref"),i=o?n[o]={}:n;r&&(n[r]=t);for(const n of Array.from(t.children)){const t=d(n,":arr"),o=e(n,t?{}:i);t&&(i[t]||(i[t]=[])).push(Object.keys(o).length?o:n)}return n}(u(e))}function f(e){let t=e.path||e.composedPath&&e.composedPath();if(t)return t;let n=e.target.parentElement;for(t=[e.target,n];n=n.parentElement;)t.push(n);return t.push(document,window),t}function h(e,t=(e=>e)){function n(n){const o=[.001,.01,.1][Number(n.shiftKey||2*n.ctrlKey)]*(n.deltaY<0?1:-1);let r=0,i=e.selectionStart;e.value=e.value.replace(/[\d.]+/g,(e,n)=>n<=i&&n+e.length>=i?(i=n,t(Number(e),o,r)):(r++,e)),e.focus(),e.setSelectionRange(i,i),n.preventDefault(),e.dispatchEvent(new Event("input"))}l(e,"focus",()=>l(window,"wheel",n,{passive:!1})),l(e,"blur",()=>s(window,"wheel",n))}const{min:g,max:m,floor:b,round:y}=Math;function M(e,t,n){t/=100,n/=100;let o=b(e=e/360*6),r=e-o,i=n*(1-t),a=n*(1-r*t),l=n*(1-(1-r)*t),s=o%6;return[255*[n,a,i,i,l,n][s],255*[l,n,n,a,i,i][s],255*[i,i,l,n,n,a][s]]}function v(e,t,n){let o=(2-(t/=100))*(n/=100)/2;return 0!==o&&(t=1===o?0:o<.5?t*n/(2*o):t*n/(2-2*o)),[e,100*t,100*o]}function I(e,t,n){let o,r,i;const a=g(e/=255,t/=255,n/=255),l=m(e,t,n),s=l-a;if(0===s)o=r=0;else{r=s/l;let i=((l-e)/6+s/2)/s,a=((l-t)/6+s/2)/s,c=((l-n)/6+s/2)/s;e===l?o=c-a:t===l?o=1/3+i-c:n===l&&(o=2/3+a-i),o<0?o+=1:o>1&&(o-=1)}return[360*o,100*r,100*(i=l)]}function _(e,t,n,o){return t/=100,n/=100,[...I(255*(1-g(1,(e/=100)*(1-(o/=100))+o)),255*(1-g(1,t*(1-o)+o)),255*(1-g(1,n*(1-o)+o)))]}function w(e,t,n){return t/=100,[e,2*(t*=(n/=100)<.5?n:1-n)/(n+t)*100,100*(n+t)]}function E(e){return I(...e.match(/.{2}/g).map(e=>parseInt(e,16)))}function k(e=0,t=0,n=0,o=1){const r=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),i={h:e,s:t,v:n,a:o,toHSVA(){const e=[i.h,i.s,i.v,i.a];return e.toString=r(e,e=>"hsva(".concat(e[0],", ").concat(e[1],"%, ").concat(e[2],"%, ").concat(i.a,")")),e},toHSLA(){const e=[...v(i.h,i.s,i.v),i.a];return e.toString=r(e,e=>"hsla(".concat(e[0],", ").concat(e[1],"%, ").concat(e[2],"%, ").concat(i.a,")")),e},toRGBA(){const e=[...M(i.h,i.s,i.v),i.a];return e.toString=r(e,e=>"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(i.a,")")),e},toCMYK(){const e=function(e,t,n){const o=M(e,t,n),r=o[0]/255,i=o[1]/255,a=o[2]/255;let l,s,c,u;return[100*(s=1===(l=g(1-r,1-i,1-a))?0:(1-r-l)/(1-l)),100*(c=1===l?0:(1-i-l)/(1-l)),100*(u=1===l?0:(1-a-l)/(1-l)),100*l]}(i.h,i.s,i.v);return e.toString=r(e,e=>"cmyk(".concat(e[0],"%, ").concat(e[1],"%, ").concat(e[2],"%, ").concat(e[3],"%)")),e},toHEXA(){const e=function(e,t,n){return M(e,t,n).map(e=>y(e).toString(16).padStart(2,"0"))}(i.h,i.s,i.v),t=i.a>=1?"":Number((255*i.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return t&&e.push(t),e.toString=()=>"#".concat(e.join("").toUpperCase()),e},clone:()=>k(i.h,i.s,i.v,i.a)};return i}const D=e=>Math.max(Math.min(e,1),0);function C(e){const t={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},e),_tapstart(e){l(document,["mouseup","touchend","touchcancel"],t._tapstop),l(document,["mousemove","touchmove"],t._tapmove),e.preventDefault(),t._tapmove(e)},_tapmove(e){const{options:{lock:o},cache:r}=t,{element:i,wrapper:a}=n,l=a.getBoundingClientRect();let s=0,c=0;if(e){const t=e&&e.touches&&e.touches[0];s=e?(t||e).clientX:0,c=e?(t||e).clientY:0,s<l.left?s=l.left:s>l.left+l.width&&(s=l.left+l.width),c<l.top?c=l.top:c>l.top+l.height&&(c=l.top+l.height),s-=l.left,c-=l.top}else r&&(s=r.x*l.width,c=r.y*l.height);"h"!==o&&(i.style.left="calc(".concat(s/l.width*100,"% - ").concat(i.offsetWidth/2,"px)")),"v"!==o&&(i.style.top="calc(".concat(c/l.height*100,"% - ").concat(i.offsetHeight/2,"px)")),t.cache={x:s/l.width,y:c/l.height};const u=D(s/a.offsetWidth),d=D(c/a.offsetHeight);switch(o){case"v":return n.onchange(u);case"h":return n.onchange(d);default:return n.onchange(u,d)}},_tapstop(){t.options.onstop(),s(document,["mouseup","touchend","touchcancel"],t._tapstop),s(document,["mousemove","touchmove"],t._tapmove)},trigger(){t._tapmove()},update(e=0,n=0){const{left:o,top:r,width:i,height:a}=t.options.wrapper.getBoundingClientRect();"h"===t.options.lock&&(n=e),t._tapmove({clientX:o+i*e,clientY:r+a*n})},destroy(){const{options:e,_tapstart:n}=t;s([e.wrapper,e.element],"mousedown",n),s([e.wrapper,e.element],"touchstart",n,{passive:!1})}},{options:n,_tapstart:o}=t;return l([n.wrapper,n.element],"mousedown",o),l([n.wrapper,n.element],"touchstart",o,{passive:!1}),t}function T(e={}){e=Object.assign({onchange:()=>0,className:"",elements:[]},e);const t=l(e.elements,"click",t=>{e.elements.forEach(n=>n.classList[t.target===n?"add":"remove"](e.className)),e.onchange(t)});return{destroy:()=>s(...t)}}function N({el:e,reference:t,padding:n=8}){const o={start:"sme",middle:"mse",end:"ems"},r={top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},i=((e={})=>(t,n=e[t])=>{if(n)return n;const[o,r="middle"]=t.split("-"),i="top"===o||"bottom"===o;return e[t]={position:o,variant:r,isVertical:i}})();return{update(a){const{position:l,variant:s,isVertical:c}=i(a),u=t.getBoundingClientRect(),d=e.getBoundingClientRect(),p=e=>e?{t:u.top-d.height-n,b:u.bottom+n}:{r:u.right+n,l:u.left-d.width-n},f=e=>e?{s:u.left+u.width-d.width,m:-d.width/2+(u.left+u.width/2),e:u.left}:{s:u.bottom-d.height,m:u.bottom-u.height/2-d.height/2,e:u.bottom-u.height},h={};function g(t,n,o){const r="top"===o,i=r?d.height:d.width,a=window[r?"innerHeight":"innerWidth"];for(const r of t){const t=n[r],l=h[o]="".concat(t,"px");if(t>0&&t+i<a)return e.style[o]=l,!0}return!1}for(const e of[c,!c]){const t=g(r[l],p(e),e?"top":"left"),n=g(o[s],f(e),e?"left":"top");if(t&&n)return}e.style.left=h.left,e.style.top=h.top}}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x{constructor(e){A(this,"_initializingActive",!0),A(this,"_recalc",!0),A(this,"_color",k()),A(this,"_lastColor",k()),A(this,"_swatchColors",[]),A(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]}),this.options=e=Object.assign({appClass:null,theme:"classic",useAsButton:!1,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,components:{interaction:{}},strings:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"},e);const{swatches:t,inline:n,components:o,theme:r,sliders:i,lockOpacity:a}=e;["nano","monolith"].includes(r)&&!i&&(e.sliders="h"),o.interaction||(o.interaction={});const{preview:l,opacity:s,hue:c,palette:u}=o;o.opacity=!a&&s,o.palette=u||l||s||c,n&&(e.showAlways=!0),this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),t&&t.length&&t.forEach(e=>this.addSwatch(e)),this._nanopop=N({reference:this._root.button,el:this._root.app});const{app:d}=this._root,p=this;requestAnimationFrame((function t(){if(!d.offsetWidth&&d.parentElement!==document.body)return requestAnimationFrame(t);p.setColor(e.default),p._rePositioningPicker(),e.defaultRepresentation&&(p._representation=e.defaultRepresentation,p.setColorRepresentation(p._representation)),e.showAlways&&p.show(),p._initializingActive=!1,p._emit("init")}))}_preBuild(){const e=this.options;"string"==typeof e.el&&(e.el=e.el.split(/>>/g).reduce((e,t,n,o)=>(e=e.querySelector(t),n<o.length-1?e.shadowRoot:e),document)),this._root=(({components:e,strings:t,useAsButton:n,inline:o,appClass:r,theme:i,lockOpacity:a})=>{const l=e=>e?"":'style="display:none" hidden',s=p('\n      <div :ref="root" class="pickr">\n\n        '.concat(n?"":'<button type="button" :ref="button" class="pcr-button"></button>','\n\n        <div :ref="app" class="pcr-app ').concat(r||"",'" data-theme="').concat(i,'" ').concat(o?'style="position: unset"':"",'>\n          <div class="pcr-selection" ').concat(l(e.palette),'>\n            <div :obj="preview" class="pcr-color-preview" ').concat(l(e.preview),'>\n              <button type="button" :ref="lastColor" class="pcr-last-color"></button>\n              <div :ref="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div :obj="palette" class="pcr-color-palette">\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="palette" class="pcr-palette"></div>\n            </div>\n\n            <div :obj="hue" class="pcr-color-chooser" ').concat(l(e.hue),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-hue pcr-slider"></div>\n            </div>\n\n            <div :obj="opacity" class="pcr-color-opacity" ').concat(l(e.opacity),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-opacity pcr-slider"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ').concat(e.palette?"":" pcr-last",'" :ref="swatches"></div> \n\n          <div :obj="interaction" class="pcr-interaction" ').concat(l(Object.keys(e.interaction).length),'>\n            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ').concat(l(e.interaction.input),'>\n\n            <input :arr="options" class="pcr-type" data-type="HEXA" value="').concat(a?"HEX":"HEXA",'" type="button" ').concat(l(e.interaction.hex),'>\n            <input :arr="options" class="pcr-type" data-type="RGBA" value="').concat(a?"RGB":"RGBA",'" type="button" ').concat(l(e.interaction.rgba),'>\n            <input :arr="options" class="pcr-type" data-type="HSLA" value="').concat(a?"HSL":"HSLA",'" type="button" ').concat(l(e.interaction.hsla),'>\n            <input :arr="options" class="pcr-type" data-type="HSVA" value="').concat(a?"HSV":"HSVA",'" type="button" ').concat(l(e.interaction.hsva),'>\n            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ').concat(l(e.interaction.cmyk),'>\n\n            <input :ref="save" class="pcr-save" value="').concat(t.save||"Save",'" type="button" ').concat(l(e.interaction.save),'>\n            <input :ref="cancel" class="pcr-clear" value="').concat(t.cancel||"Cancel",'" type="button" ').concat(l(e.interaction.cancel),'>\n            <input :ref="clear" class="pcr-clear" value="').concat(t.clear||"Clear",'" type="button" ').concat(l(e.interaction.clear),">\n          </div>\n        </div>\n      </div>\n    ")),c=s.interaction;return c.options.find(e=>!e.hidden&&!e.classList.add("active")),c.type=()=>c.options.find(e=>e.classList.contains("active")),s})(e),e.useAsButton&&(this._root.button=e.el),document.body.appendChild(this._root.root)}_finalBuild(){const e=this.options,t=this._root;if(document.body.removeChild(t.root),e.inline){const n=e.el.parentElement;e.el.nextSibling?n.insertBefore(t.app,e.el.nextSibling):n.appendChild(t.app)}else document.body.appendChild(t.app);e.useAsButton?e.inline&&e.el.remove():e.el.parentNode.replaceChild(t.root,e.el),e.disabled&&this.disable(),e.comparison||(t.button.style.transition="none",e.useAsButton||(t.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const e=this,t=this.options.components,n=(e.options.sliders||"v").repeat(2),[o,r]=n.match(/^[vh]+$/g)?n:[],i={palette:C({element:e._root.palette.picker,wrapper:e._root.palette.palette,onstop:()=>e._emit("changestop",e),onchange(n,o){if(!t.palette)return;const{_color:r,_root:i,options:a}=e;e._recalc&&(r.s=100*n,r.v=100-100*o,r.v<0&&(r.v=0),e._updateOutput());let l=r.toRGBA().toString(0);this.element.style.background=l,this.wrapper.style.background="\n                        linear-gradient(to top, rgba(0, 0, 0, ".concat(r.a,"), transparent),\n                        linear-gradient(to left, hsla(").concat(r.h,", 100%, 50%, ").concat(r.a,"), rgba(255, 255, 255, ").concat(r.a,"))\n                    "),a.comparison||(i.button.style.color=l,a.useAsButton||(i.preview.lastColor.style.color=l)),i.preview.currentColor.style.color=l,e.options.comparison||i.button.classList.remove("clear")}}),hue:C({lock:"v"===r?"h":"v",element:e._root.hue.picker,wrapper:e._root.hue.slider,onstop:()=>e._emit("changestop",e),onchange(n){t.hue&&t.palette&&(e._recalc&&(e._color.h=360*n),this.element.style.backgroundColor="hsl(".concat(e._color.h,", 100%, 50%)"),i.palette.trigger())}}),opacity:C({lock:"v"===o?"h":"v",element:e._root.opacity.picker,wrapper:e._root.opacity.slider,onstop:()=>e._emit("changestop",e),onchange(n){t.opacity&&t.palette&&(e._recalc&&(e._color.a=Math.round(100*n)/100),this.element.style.background="rgba(0, 0, 0, ".concat(e._color.a,")"),i.palette.trigger())}}),selectable:T({elements:e._root.interaction.options,className:"active",onchange(t){e._representation=t.target.getAttribute("data-type").toUpperCase(),e._recalc&&e._updateOutput()}})};this._components=i}_bindEvents(){const{_root:e,options:t}=this,n=[l(e.interaction.clear,"click",()=>this._clearColor()),l([e.interaction.cancel,e.preview.lastColor],"click",()=>{this._emit("cancel",this),this.setHSVA(...this._lastColor.toHSVA(),!0)}),l(e.interaction.save,"click",()=>{!this.applyColor()&&!t.showAlways&&this.hide()}),l(e.interaction.result,["keyup","input"],e=>{this.setColor(e.target.value,!0)&&!this._initializingActive&&this._emit("change",this._color),e.stopImmediatePropagation()}),l(e.interaction.result,["focus","blur"],e=>{this._recalc="blur"===e.type,this._recalc&&this._updateOutput()}),l([e.palette.palette,e.palette.picker,e.hue.slider,e.hue.picker,e.opacity.slider,e.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0)];if(!t.showAlways){const o=t.closeWithKey;n.push(l(e.button,"click",()=>this.isOpen()?this.hide():this.show()),l(document,"keyup",e=>this.isOpen()&&(e.key===o||e.code===o)&&this.hide()),l(document,["touchstart","mousedown"],t=>{this.isOpen()&&!f(t).some(t=>t===e.app||t===e.button)&&this.hide()},{capture:!0}))}if(t.adjustableNumbers){const t={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};h(e.interaction.result,(e,n,o)=>{const r=t[this.getColorRepresentation().toLowerCase()];if(r){const t=r[o],i=e+(t>=100?1e3*n:n);return i<=0?0:Number((i<t?i:t).toPrecision(3))}return e})}if(t.autoReposition&&!t.inline){let e=null;const o=this;n.push(l(window,["scroll","resize"],()=>{o.isOpen()&&(t.closeOnScroll&&o.hide(),null===e?(e=setTimeout(()=>e=null,100),requestAnimationFrame((function t(){o._rePositioningPicker(),null!==e&&requestAnimationFrame(t)}))):(clearTimeout(e),e=setTimeout(()=>e=null,100)))},{capture:!0}))}this._eventBindings=n}_rePositioningPicker(){const{options:e}=this;if(!e.inline){const{app:t}=this._root;matchMedia("(max-width: 576px)").matches?Object.assign(t.style,{margin:"auto",height:"".concat(t.getBoundingClientRect().height,"px"),top:0,bottom:0,left:0,right:0}):(Object.assign(t.style,{margin:null,right:null,top:null,bottom:null,left:null,height:null}),this._nanopop.update(e.position))}}_updateOutput(){const{_root:e,_color:t,options:n}=this;if(e.interaction.type()){const o="to".concat(e.interaction.type().getAttribute("data-type"));e.interaction.result.value="function"==typeof t[o]?t[o]().toString(n.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",t)}_clearColor(e=!1){const{_root:t,options:n}=this;n.useAsButton||(t.button.style.color="rgba(0, 0, 0, 0.15)"),t.button.classList.add("clear"),n.showAlways||this.hide(),this._initializingActive||e||(this._emit("save",null),this._emit("clear",this))}_parseLocalColor(e){const{values:t,type:n,a:o}=function(e){e=e.match(/^[a-zA-Z]+$/)?function(e){if("black"===e.toLowerCase())return"#000000";const t=document.createElement("canvas").getContext("2d");return t.fillStyle=e,"#000000"===t.fillStyle?null:t.fillStyle}(e):e;const t={cmyk:/^cmyk[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)/i,rgba:/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsla:/^((hsla)|hsl)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsva:/^((hsva)|hsv)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},n=e=>e.map(e=>/^(|\d+)\.\d+|\d+$/.test(e)?Number(e):void 0);let o;e:for(const r in t){if(!(o=t[r].exec(e)))continue;const i=!!o[2];switch(r){case"cmyk":{let[,e,t,i,a]=n(o);if(e>100||t>100||i>100||a>100)break e;return{values:_(e,t,i,a),type:r}}case"rgba":{let[,,,e,t,a,l]=n(o);if(e>255||t>255||a>255||l<0||l>1||i===!l)break e;return{values:[...I(e,t,a),l],a:l,type:r}}case"hexa":{let[,e]=o;4!==e.length&&3!==e.length||(e=e.split("").map(e=>e+e).join(""));const t=e.substring(0,6);let n=e.substring(6);return n=n?parseInt(n,16)/255:void 0,{values:[...E(t),n],a:n,type:r}}case"hsla":{let[,,,e,t,a,l]=n(o);if(e>360||t>100||a>100||l<0||l>1||i===!l)break e;return{values:[...w(e,t,a),l],a:l,type:r}}case"hsva":{let[,,,e,t,a,l]=n(o);if(e>360||t>100||a>100||l<0||l>1||i===!l)break e;return{values:[e,t,a,l],a:l,type:r}}}}return{values:null,type:null}}(e),{lockOpacity:r}=this.options,i=void 0!==o&&1!==o;return t&&3===t.length&&(t[3]=void 0),{values:!t||r&&i?null:t,type:n}}_emit(e,...t){this._eventListener[e].forEach(e=>e(...t,this))}on(e,t){return"function"==typeof t&&"string"==typeof e&&e in this._eventListener&&this._eventListener[e].push(t),this}off(e,t){const n=this._eventListener[e];if(n){const e=n.indexOf(t);~e&&n.splice(e,1)}return this}addSwatch(e){const{values:t}=this._parseLocalColor(e);if(t){const{_swatchColors:e,_root:n}=this,o=k(...t),r=u('<button type="button" style="color: '.concat(o.toRGBA().toString(0),'"/>'));return n.swatches.appendChild(r),e.push({element:r,hsvaColorObject:o}),this._eventBindings.push(l(r,"click",()=>{this.setHSVA(...o.toHSVA(),!0),this._emit("swatchselect",o),this._emit("change",o)})),!0}return!1}removeSwatch(e){const t=this._swatchColors[e];if(t){const{element:n}=t;return this._root.swatches.removeChild(n),this._swatchColors.splice(e,1),!0}return!1}applyColor(e=!1){const{preview:t,button:n}=this._root,o=this._color.toRGBA().toString();t.lastColor.style.color=o,this.options.useAsButton||(n.style.color=o),n.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||e||this._emit("save",this._color)}destroy(){this._eventBindings.forEach(e=>s(...e)),Object.keys(this._components).forEach(e=>this._components[e].destroy())}destroyAndRemove(){this.destroy();const{root:e,app:t}=this._root;e.parentElement&&e.parentElement.removeChild(e),t.parentElement.removeChild(t),Object.keys(this).forEach(e=>this[e]=null)}hide(){return this.options.inline||(this._root.app.classList.remove("visible"),this._emit("hide",this)),this}show(){return this.options.disabled||(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this)),this}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(e=360,t=0,n=0,o=1,r=!1){const i=this._recalc;if(this._recalc=!1,e<0||e>360||t<0||t>100||n<0||n>100||o<0||o>1)return!1;this._color=k(e,t,n,o);const{hue:a,opacity:l,palette:s}=this._components;return a.update(e/360),l.update(o),s.update(t/100,1-n/100),r||this.applyColor(),i&&this._updateOutput(),this._recalc=i,!0}setColor(e,t=!1){if(null===e)return this._clearColor(t),!0;const{values:n,type:o}=this._parseLocalColor(e);if(n){const e=o.toUpperCase(),{options:r}=this._root.interaction,i=r.find(t=>t.getAttribute("data-type")===e);if(i&&!i.hidden)for(const e of r)e.classList[e===i?"add":"remove"]("active");return this.setColorRepresentation(e),this.setHSVA(...n,t)}return!1}setColorRepresentation(e){return e=e.toUpperCase(),!!this._root.interaction.options.find(t=>t.getAttribute("data-type").startsWith(e)&&!t.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}x.utils=o,x.libs={HSVaColor:k,Moveable:C,Nanopop:N,Selectable:T},x.create=e=>new x(e),x.version="1.2.7",t.default=x}]).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(2),i=n(3),a=n(8);t.createFont=function(e,t){const n=o.createDiv();let l,s,c,u=getComputedStyle(e),d=i.getImportant(e,"font-size",t),p=i.getImportant(e,"font-weight",t),f=i.getImportant(e,"font-family",t),h=o.createLabelInput(r.TEXT.FONT_SIZE,90);h.input.style.width="50%",h.setContent(u.fontSize),h.setInputHandler(t=>{e.style.setProperty("font-size",t.target.value,d),l=[a.kvInfo.property("font-size"),a.kvInfo.value(e.style.fontSize),a.kvInfo.important(d)]}),n.appendChild(h.input);let g=o.createLabelInput(r.TEXT.FONT_WEIGHT,90);g.input.style.width="50%",g.setContent(u.fontWeight),g.setInputHandler(t=>{e.style.setProperty("font-weight",t.target.value,p),s=[a.kvInfo.property("font-weight"),a.kvInfo.value(e.style.fontWeight),a.kvInfo.important(p)]}),n.appendChild(g.input);let m=o.createLabelInput(r.TEXT.FONT_FAMILY,90);return m.setContent(u.fontFamily),m.setInputHandler(t=>{e.style.setProperty("font-family",t.target.value,f),c=[a.kvInfo.property("font-family"),a.kvInfo.value(e.style.fontFamily),a.kvInfo.important(f)]}),n.appendChild(m.input),{el:n,getLogs:()=>[l,s,c]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(2),i=n(3),a=n(8);t.createSize=function(e,t){const n=o.createDiv();let l,s,c=getComputedStyle(e),u=i.getImportant(e,"width",t),d=i.getImportant(e,"height",t),p=o.createLabelInput(r.TEXT.WIDTH,90);p.input.style.width="50%",p.setContent(c.width),p.setInputHandler(t=>{e.style.setProperty("width",t.target.value,u),l=[a.kvInfo.property("width"),a.kvInfo.value(e.style.width),a.kvInfo.important(u)]}),n.appendChild(p.input);let f=o.createLabelInput(r.TEXT.HEIGHT,90);return f.input.style.width="50%",f.setContent(c.height),f.setInputHandler(t=>{e.style.setProperty("height",t.target.value,d),s=[a.kvInfo.property("height"),a.kvInfo.value(e.style.height),a.kvInfo.important(d)]}),n.appendChild(f.input),{el:n,getLogs:()=>[l,s]}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(3),l=n(6),s=n(7),c=n(11),u=n(114),d=n(12),p=n(5),f=o(n(9)),h=n(8),g=n(10),m=n(115);class b extends f.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.COPY_REPEAT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=i.default.lastSelectedDomEventArgs;if(a.isBody(e))return this.setVisiable(!1);let{nodes:t,endNode:n}=s.getWrapDom(e,"repeatitem"),o=p.KoobooComment.getInnerComments(t);return n&&l.getRepeatSourceComment(o)?void 0:this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let{nodes:t,endNode:n}=s.getWrapDom(e.element,"repeatitem"),o=p.KoobooComment.getInnerComments(t),r=l.getRepeatSourceComment(o),f=c.newGuid()+"_name";"mongo"==r.source&&(f=m.objectId());let b=t.reverse().map(e=>e.cloneNode(!0));for(const e of b){for(const t of a.getAllNode(e,!0))if(p.KoobooComment.isComment(t)){let e=new p.KoobooComment(t);e.setValue("uid",e.uid+"_copy"),e.id==r.id&&e.setValue("id",f),t.nodeValue=e.ToComment().nodeValue}n.parentElement.insertBefore(e,n.nextSibling)}let y=[new u.CopyRepeatUnit(s.getGuidComment(f))],M=new g.Log([...r.infos,new h.kvInfo("new",f),h.kvInfo.copy]),v=new d.operationRecord(y,[M],f);i.default.operationManager.add(v)}}t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(17),r=n(7),i=n(1);class a extends o.Unit{undo(e){let t=i.createDiv(),{nodes:n,startNode:o}=r.getWrapDom(e,"repeatitem");o.parentNode.insertBefore(t,o),n.forEach(e=>t.appendChild(e)),this.newValue=t.innerHTML,t.outerHTML=this.oldValue}redo(e){let t=i.createDiv();e.parentNode.replaceChild(t,e),t.outerHTML=this.newValue}}t.CopyRepeatUnit=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectId=function(){return((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)})).toLowerCase()}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(3),l=n(6),s=n(7),c=n(5),u=n(12),d=n(117),p=n(1),f=o(n(9)),h=n(8),g=n(10),m=n(13);class b extends f.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.DELETE_REPEAR);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=i.default.lastSelectedDomEventArgs;if(a.isBody(e))return this.setVisiable(!1);let{nodes:t,startNode:n}=s.getWrapDom(e,"repeatitem"),o=c.KoobooComment.getInnerComments(t);return n&&l.getRepeatSourceComment(o)?void 0:this.setVisiable(!1)}click(){let{element:e}=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let{nodes:t,startNode:n}=s.getWrapDom(e,"repeatitem"),o=c.KoobooComment.getInnerComments(t),r=l.getRepeatSourceComment(o),a=s.getGuidComment(r.id),f=p.createDiv();n.parentNode.insertBefore(f,n),t.forEach(e=>f.appendChild(e));let b=f.innerHTML;f.outerHTML=a;let y=[new d.DeleteRepeatUnit(b)],M=new g.Log([...r.infos,h.kvInfo.delete]),v=new u.operationRecord(y,[M],r.id);i.default.operationManager.add(v),m.emitHoverEvent(document.body),m.emitSelectedEvent()}}t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(17),r=n(7),i=n(1);class a extends o.Unit{undo(e){this.newValue=`\x3c!--${e.nodeValue}--\x3e`;let t=i.createDiv();e.parentNode.replaceChild(t,e),t.outerHTML=this.oldValue}redo(e){let t=i.createDiv(),{nodes:n,startNode:o}=r.getWrapDom(e,"repeatitem");o.parentNode.insertBefore(t,o),n.forEach(e=>t.appendChild(e)),this.oldValue=t.innerHTML,t.outerHTML=this.newValue}}t.DeleteRepeatUnit=a},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),a=r(n(0)),l=n(3),s=n(7),c=n(33),u=n(18),d=n(12),p=n(4),f=n(5),h=n(1),g=r(n(9)),m=n(6),b=n(10),y=n(8);class M extends g.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(i.TEXT.REPLACE_TO_IMG);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=a.default.lastSelectedDomEventArgs,{operability:t,kooobooIdEl:n,fieldComment:o}=m.ElementAnalyze(e);if(l.isImg(e)||!t)return this.setVisiable(!1);if(n==e){var r=m.ElementAnalyze(e.parentElement);if(!r.operability||!r.kooobooIdEl)return this.setVisiable(!1)}return n||o?l.isInTable(e)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,(function*(){let{element:e}=a.default.lastSelectedDomEventArgs,{scopeComment:t,kooobooIdEl:n,fieldComment:o,koobooId:r}=m.ElementAnalyze(e);if(n==e){var i=m.ElementAnalyze(e.parentElement);n=i.kooobooIdEl,i.koobooId}this.parentMenu.hidden();var l=e.parentElement;let g=s.setGuid(l),M=l.innerHTML;try{let i=getComputedStyle(e),m=i.width,v=e.style.getPropertyPriority("width"),I=i.height,_=e.style.getPropertyPriority("height"),w=i.display,E=h.createImg();E.setAttribute(p.KOOBOO_ID,e.getAttribute(p.KOOBOO_ID)),e.parentElement.replaceChild(E,e),E.style.setProperty("width",m,v),E.style.setProperty("height",I,_),E.style.display=w,yield c.createImagePicker(E);let k=f.KoobooComment.getAroundScopeComments(e);if(k){let{nodes:e}=s.getWrapDom(E,k.source);for(const t of e)t instanceof HTMLElement&&s.markDirty(t,!0)}else s.markDirty(l);let D=n?n.innerHTML:s.getWarpContent(E),C=o||t;r=n?n.getAttribute(p.KOOBOO_ID):r;let T=new b.Log([...C.infos,y.kvInfo.value(s.clearKoobooInfo(D)),y.kvInfo.koobooId(r)]),N=new u.InnerHtmlUnit(M),A=new d.operationRecord([N],[T],g);a.default.operationManager.add(A)}catch(e){l.innerHTML=M}}))}}t.default=M},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),a=r(n(0)),l=n(3),s=n(6),c=n(7),u=n(37),d=n(4),p=n(13),f=n(5),h=n(1),g=n(18),m=n(12),b=r(n(9)),y=n(10),M=n(8);class v extends b.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(i.TEXT.REPLACE_TO_TEXT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=a.default.lastSelectedDomEventArgs,{operability:t,kooobooIdEl:n,fieldComment:o}=s.ElementAnalyze(e);if(!l.isImg(e)||!t)return this.setVisiable(!1);if(n==e){var r=s.ElementAnalyze(e.parentElement);if(!r.operability||!r.kooobooIdEl)return this.setVisiable(!1)}return n||o?l.isInTable(e)||l.getParentElements(e).find(e=>"p"==e.tagName.toLowerCase())||l.isInTable(e)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,(function*(){let{element:e}=a.default.lastSelectedDomEventArgs,{scopeComment:t,kooobooIdEl:n,fieldComment:o,koobooId:r}=s.ElementAnalyze(e);if(n==e){var i=s.ElementAnalyze(e.parentElement);n=i.kooobooIdEl,i.koobooId}let l=e.parentElement,b=l.innerHTML,v=h.createP(),I=getComputedStyle(e),_=I.width,w=e.style.getPropertyPriority("width"),E=I.height,k=I.display,D=e.style.getPropertyPriority("height"),C=c.setGuid(l);e.parentElement.replaceChild(v,e),v.setAttribute(d.KOOBOO_ID,e.getAttribute(d.KOOBOO_ID)),v.style.setProperty("width",_,w),v.style.setProperty("height",E,D),v.style.display=k.startsWith("inline")?"inline-block":"block",p.emitHoverEvent(v),p.emitSelectedEvent();let T=f.KoobooComment.getAroundScopeComments(v);if(T){let{nodes:e}=c.getWrapDom(v,T.source);for(const t of e)t instanceof HTMLElement&&c.markDirty(t,!0)}else c.markDirty(l);yield u.setInlineEditor({selector:v,onSave:()=>{let e=new g.InnerHtmlUnit(b),i=n?n.innerHTML:c.getWarpContent(v),l=o||t;r=n?n.getAttribute(d.KOOBOO_ID):r;let s=new y.Log([...l.infos,M.kvInfo.value(c.clearKoobooInfo(i)),M.kvInfo.koobooId(r)]),u=new m.operationRecord([e],[s],C);a.default.operationManager.add(u)},onCancel:()=>{l.innerHTML=b}}),this.parentMenu.hidden()}))}}t.default=v},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(3),l=n(6),s=n(5),c=o(n(9));class u extends c.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT_IMAGE);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=i.default.lastSelectedDomEventArgs,t=s.KoobooComment.getAroundComments(e);return a.isImg(e)&&t.find(e=>"src"==e.attribute&&"none"!=e.source)?void 0:this.setVisiable(!1)}click(){let{element:e}=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden(),l.updateAttributeImage(e)}}t.default=u},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=n(3),l=n(6),s=n(5),c=o(n(9));class u extends c.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT_LINK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=i.default.lastSelectedDomEventArgs,t=s.KoobooComment.getAroundComments(e);return a.isLink(e)&&t.find(e=>"href"==e.attribute&&"none"!=e.source)?void 0:this.setVisiable(!1)}click(){let{element:e}=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden(),l.updateAttributeLink(e)}}t.default=u},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(0)),a=o(n(9));class l extends a.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.CLICK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0)}click(){let e=i.default.lastHoverDomEventArgs.element;this.parentMenu.hidden(),e._a?e._a.click():e.click()}}t.default=l},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTk1MS44OTg4NjkgMTgyLjI3OTQ4N2MwIDAuNzk4MTc5LTAuMTk1NDUxIDEuNTQ0MTY5LTAuMjM3NDA3IDIuMzMzMTM4bDAgMzA0LjkwMDIyMmMwIDI0LjcxNjkzOC0xOS43NTc5OTYgNDQuNzUxMjI3LTQ0LjEzMTEwMyA0NC43NTEyMjctMjQuMzczMTA3IDAtNDQuMTMxMTAzLTIwLjAzNTMxMi00NC4xMzExMDMtNDQuNzQ5MThMODYzLjM5OTI1NSAyODguOTYxMjA0IDQ1NS43MjYzNDYgNjk3LjEyOTM5NGMtMTcuNDI2OTA1IDE3LjQ0OTQxNy00NS42ODE0MTIgMTcuNDQ5NDE3LTYzLjEwNjI3IDAtMTcuNDI2OTA1LTE3LjQ0NjM0Ny0xNy40MjY5MDUtNDUuNzM2NjcxIDAtNjMuMTgzMDE4bDQwNy4xMDkwNjgtNDA3LjYwNTM3Mkw2MDAuNDIxODQyIDIyNi4zNDEwMDVjLTI0Ljc1Mzc3NyAwLTQ0LjgxOTc4OC0xOS43MjUyNS00NC44MTk3ODgtNDQuMDYxNTE4IDAtMjQuMzMyMTc1IDIwLjA2ODA1OC00NC4wNTg0NDggNDQuODE5Nzg4LTQ0LjA1ODQ0OGwzMDEuMTY4MjI0IDBjMTAuNTAyMTkyLTEuMjEzNjQxIDIxLjI5OTA5NSAxLjE3ODg0OSAzMC4zNTk0NDggNy40MjQwODZDOTQzLjk3MTMxNSAxNTMuNTQ4MTE4IDk1MS44OTg4NjkgMTY2Ljk5NjQwOCA5NTEuODk4ODY5IDE4Mi4yNzk0ODd6TTQyMy45MzgzNjIgMjI2LjM4NTAwN2wwIDAuMDAyMDQ3LTIxOS44OTgyNjkgMGMtMjQuMjkwMjE5IDAtNDMuOTc5NjU0IDIwLjM3ODEyLTQzLjk3OTY1NCA0NC42NjgzMzlsMCA0ODMuMDg3NTA3YzAgMjQuMjkwMjE5IDE5LjY4OTQzNSA0My45Nzc2MDcgNDMuOTc5NjU0IDQzLjk3NzYwN2w2MTUuNzEzMTA3IDBjMjQuMjkwMjE5IDAgNDMuOTc5NjU0LTE5LjY4NzM4OCA0My45Nzk2NTQtNDMuOTc3NjA3bDAtODcuOTYxMzU0IDAuMDA0MDkzIDBjMC0yNC4yODgxNzMgMTkuNjg3Mzg4LTQzLjk3NzYwNyA0My45Nzc2MDctNDMuOTc3NjA3czQzLjk4MTcgMTkuNjg5NDM1IDQzLjk4MTcgNDMuOTc3NjA3YzAgMC4wMTEyNTYtMC4wMDQwOTMgMC4wMjE0ODktMC4wMDQwOTMgMC4wMzA2OTlsMCAxMDkuOTE4NDM1YzAgNjAuNzI3MDgzLTQ5LjIyNDA5OCAxMDkuOTUzMjI4LTEwOS45NDkxMzQgMTA5Ljk1MzIyOGwtNjU5LjY5NDgwNyAwYy02MC43MjI5OSAwLTEwOS45NDcwODgtNDkuMjI2MTQ1LTEwOS45NDcwODgtMTA5Ljk1MzIyOEw3Mi4xMDExMzEgMjQ4LjM3ODkyN2MwLTYwLjcyNTAzNiA0OS4yMjQwOTgtMTA5Ljk1MTE4MSAxMDkuOTQ3MDg4LTEwOS45NTExODFsMjQxLjg3NDc5MyAwYzAuMDA0MDkzIDAgMC4wMTEyNTYtMC4wMDIwNDcgMC4wMTUzNS0wLjAwMjA0NyAyNC4yOTAyMTkgMCA0My45Nzk2NTQgMTkuNjg5NDM1IDQzLjk3OTY1NCA0My45Nzk2NTRTNDQ4LjIyODU4MSAyMjYuMzg1MDA3IDQyMy45MzgzNjIgMjI2LjM4NTAwN3oiIC8+PC9zdmc+"},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),a=r(n(0)),l=r(n(9)),s=n(5),c=n(6),u=n(125),d=n(7);class p extends l.default{constructor(e){super(e);const{el:t,setVisiable:n,setReadonly:o}=this.createItem(i.TEXT.EDIT_COLOR);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n,this.setReadonly=o}update(e){this.setVisiable(!0);let{element:t,koobooId:n}=a.default.lastSelectedDomEventArgs;return this.setVisiable(!d.isDirty(t)),c.getEditableComment(e)&&n?void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,(function*(){let e=a.default.lastSelectedDomEventArgs,t=s.KoobooComment.getComments(e.element);u.createColorEditor(e.element,t.find(e=>e.scope),e.koobooId),this.parentMenu.hidden()}))}}t.default=p},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=n(2),a=n(22),l=n(1),s=n(19),c=n(126),u=n(12),d=o(n(0)),p=n(7),f=n(127),h=n(10);t.createColorEditor=function(e,t,n){var o=e.getAttribute("style"),g=a.getMatchedColorGroups(e);let m=l.createDiv(),b=[];for(const o of g){let{item:r,getLogs:i}=f.createColorEditItem(o,e,t,n);b.push(i),m.appendChild(r)}const y=()=>[new s.AttributeUnit(o||"","style"),new c.CssUnit("",g)];let{modal:M,close:v,setCancelHandler:I,setOkHandler:_}=r.createModal(i.TEXT.EDIT_COLOR,m,"600px");I(()=>{y().map(t=>t.undo(e)),v()}),_(()=>{let n=p.setGuid(e),o=[];for(const e of b)for(const n of e())o.push(new h.Log([...n,...t.infos]));if(0!=o.length){let e=new u.operationRecord(y(),o,n);d.default.operationManager.add(e)}v()}),d.default.container.appendChild(M)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(17);class r extends o.Unit{constructor(e,t){super(e),this.oldValue=e,this.groups=t}undo(e){for(const e of this.groups)for(const t of e.cssColors)t.inline||t.cssStyleRule.style.setProperty(t.prop.prop,t.value,t.important?"important":"")}redo(e){for(const e of this.groups)for(const t of e.cssColors)!t.inline&&t.newValue&&void 0!==t.newImportant&&t.cssStyleRule.style.setProperty(t.prop.prop,t.newValue,t.newImportant?"important":"")}}t.CssUnit=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(39),i=n(2),a=n(8);function l(e,t){let n=e.cssStyleRule.style.getPropertyPriority(e.prop.prop),o=e.prop.replaceColor(e.value,t);return e.cssStyleRule.style.setProperty(e.prop.prop,o,n),e.newValue=o,e.newImportant=n,o}t.createColorEditItem=function(e,t,n,s){let c=o.createDiv();c.style.display="flex",c.style.alignItems="center",c.style.height="38px";let u,d,p=document.createElement("span");p.style.width="160px";let f=e.cssColors[0],h=!f.inline,g=e.cssColors.find(e=>e.inline),m=e.cssColors.find(e=>!e.inline),b=g||f;p.innerText=f.prop.getColor(f.value);let y=r.createColorPicker(e.prop+e.pseudo,f.prop.getColor(f.value),e=>{if(p.innerText=e,h){if(!m)return;let t=l(m,e);d=[a.kvInfo.value(t),a.kvInfo.property(m.prop.prop),new a.kvInfo("selector",m.rawSelector),a.kvInfo.koobooId(m.url?"":m.koobooId),new a.kvInfo("url",m.url),a.kvInfo.important(m.newImportant),a.kvInfo.mediaRuleList(m.mediaRuleList)]}else{let{important:n,value:o}=function(e,t,n){let o=n.style.getPropertyValue(e.prop.prop),r=n.style.getPropertyPriority(e.prop.prop);return o=e.prop.replaceColor(o,t),n.style.setProperty(e.prop.prop,o,r),{value:o,important:r}}(b,e,t);u=[a.kvInfo.value(o),a.kvInfo.property(b.prop.prop),a.kvInfo.koobooId(s),a.kvInfo.important(n)]}});y.style.width="200px",y.style.justifyContent="flex-end",c.appendChild(y),c.appendChild(p);let{checkbox:M}=o.createCheckboxInput(i.TEXT.GLOBAL_UPDATE,!f.inline,e=>{if(m)if(e){let e=t.style.getPropertyValue(b.prop.prop);e=b.prop.getColor(e),e=l(m,e),t.style.removeProperty(b.prop.prop),u=[a.kvInfo.value(""),a.kvInfo.property(b.prop.prop),a.kvInfo.koobooId(s)],d=[a.kvInfo.value(e),a.kvInfo.property(m.prop.prop),new a.kvInfo("selector",m.rawSelector),a.kvInfo.koobooId(m.url?"":m.koobooId),new a.kvInfo("url",m.url),a.kvInfo.important(m.newImportant),a.kvInfo.mediaRuleList(m.mediaRuleList)],h=!0}else{let e=m.cssStyleRule.style.getPropertyPriority(m.prop.prop),n=m.cssStyleRule.style.getPropertyValue(m.prop.prop);n=m.prop.getColor(n),n=b.prop.replaceColor(b.value,n),t.style.setProperty(b.prop.prop,n,e),m.cssStyleRule.style.setProperty(m.prop.prop,m.value,m.important?"important":""),m.newValue=void 0,m.newImportant=void 0,d=void 0,u=[a.kvInfo.value(n),a.kvInfo.property(b.prop.prop),a.kvInfo.koobooId(s),a.kvInfo.important(e)],h=!1}});return h&&!e.pseudo||(M.style.display="none"),c.appendChild(M),{item:c,getLogs:()=>{let e=[];return u&&e.push(u),d&&e.push(d),e}}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,l)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),a=r(n(0)),l=r(n(9)),s=n(129),c=n(131),u=n(18),d=n(7),p=n(5),f=n(6),h=n(12),g=n(8),m=n(10);class b extends l.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(i.TEXT.EDIT_DATA);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let{element:t}=a.default.lastSelectedDomEventArgs,n=c.getEditableData(t);if(!n)return this.setVisiable(!1);let o=p.KoobooComment.getComments(n.parent);return e.find(e=>e.source.startsWith("repeat"))?this.setVisiable(!1):f.getEditableComment(o)?void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,(function*(){this.parentMenu.hidden();let{element:e}=a.default.lastSelectedDomEventArgs,{parent:t,koobooId:n,list:o}=c.getEditableData(e),r=p.KoobooComment.getComments(t),i=f.getEditableComment(r),l=t.innerHTML;try{yield s.createDataEdtor(o);let e=d.clearKoobooInfo(t.innerHTML);if(e==d.clearKoobooInfo(l))return;let r=d.setGuid(t);d.markDirty(t);let c=[new u.InnerHtmlUnit(l)],p=[...i.infos,g.kvInfo.value(e),g.kvInfo.koobooId(n)],f=new h.operationRecord(c,[new m.Log(p)],r);a.default.operationManager.add(f)}catch(e){t.innerHTML=l}}))}}t.default=b},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=n(2),a=o(n(0)),l=n(1),s=n(130),c=n(3),u=n(38);t.createDataEdtor=function(e){const t=l.createIframe();t.style.height="600px";let n=function(e){const{modal:t,setCancelHandler:n,setOkHandler:o,close:l}=r.createModal(i.TEXT.EDIT_DATA,e);let s=new Promise((e,t)=>{n(()=>{l(),t()}),o(()=>{l(),e()})});return a.default.container.appendChild(t),s}(t),o=t.contentDocument,d=t.contentWindow;return function(e){e.open("text/htmlreplace"),e.write("<!DOCTYPE html><html><head></head><body></body></html>"),e.close(),c.shareStyle(e.body)}(o),o.head.appendChild(function(e,t){let n=e.document.body,o=document.createElement("script");return o.src="\\_Admin\\Scripts\\kooboo-web-editor\\richEditor.min.js",o.onload=()=>{for(const o of t){const t=e=>{n.removeChild(e.item),e.el.parentElement.removeChild(e.el)},r=o=>{let i=o.el.cloneNode(!0);o.el.parentElement.insertBefore(i,o.el.nextElementSibling);let{item:a,content:l}=s.createItem(i,t,r);n.insertBefore(a,o.item.nextElementSibling),e.tinymce.init(u.createEditDataSettings(l,i))};let{item:i,content:a}=s.createItem(o,t,r);n.appendChild(i),e.tinymce.init(u.createEditDataSettings(a,o))}},o}(d,e)),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.createItem=function(e,t,n){let r=o.createDiv();r.classList.add("kb_web_editor_edit_data_item");let i=o.createDiv(),a=o.createButton("-");a.onclick=()=>t({item:r,el:e});let l=o.createButton("+");return l.onclick=()=>n({item:r,el:e}),i.innerHTML=e.innerHTML,r.appendChild(i),r.appendChild(a),r.appendChild(l),{item:r,content:i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(7),i=n(6),a=n(4);t.getEditableData=function(e){let t=o.getParentElements(e,!0);t.length>5&&(t=t.splice(0,5));for(const e of t){let t=r.getUnpollutedEl(e);if(!t)return;let n=e==t?t.parentElement:t;if(!n||!i.isEditable(e)||r.isDynamicContent(n))continue;let o=n.getAttribute(a.KOOBOO_ID);if(!o)return;let l=[];for(const t of n.children){let n=t;n.id!=a.HOVER_BORDER_SKIP&&(e.tagName==n.tagName&&l.push(n))}if(l.length>1)return{list:l,parent:n,koobooId:o}}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(133),a=n(4);t.createHoverBorder=function(){const e=i.createRect(a.HOVER_BORDER_WIDTH,a.HOVER_BORDER_COLOR);return r.default.hoverDomEvent.addEventListener(t=>{t.closeElement&&!r.default.editing?e.updatePosition(t.closeElement):e.hidden()}),r.default.editableEvent.addEventListener(t=>{t&&e.hidden()}),e.el},t.createSelectedBorder=function(){const e=i.createRect(a.SELECTED_BORDER_WIDTH,a.SELECTED_BORDER_COLOR);return r.default.domChangeEvent.addEventListener(t=>{t.element&&!r.default.editing?e.updatePosition(t.element):e.hidden()}),r.default.editableEvent.addEventListener(t=>{t&&e.hidden()}),e.el}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(134),r=n(1);t.createRect=(e,t)=>{const n=[o.createLine(e,t),o.createLine(e,t),o.createLine(e,t),o.createLine(e,t)],i=r.createDiv();n.forEach(e=>i.appendChild(e.el));return{el:i,updatePosition:t=>{i.style.display="block";let[o,r,a,l]=n,s=t.getBoundingClientRect(),c=document.documentElement.getBoundingClientRect();o.update({top:s.top-c.top,left:s.left-c.left+e,width:t.offsetWidth-2*e}),r.update({top:s.top-c.top,left:s.left-c.left-e+t.offsetWidth,height:t.offsetHeight}),a.update({top:s.top-c.top+t.offsetHeight-e,left:s.left-c.left+e,width:t.offsetWidth-2*e}),l.update({top:s.top-c.top,left:s.left-c.left,height:t.offsetHeight})},hidden:()=>{i.style.display="none"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(41),i=n(1);t.createLine=(e,t)=>{let n=i.createDiv();n.style.position="absolute",n.style.display="block",n.style.pointerEvents="none",n.style.backgroundColor=t,n.style.width=e+"px",n.style.height=e+"px",n.style.zIndex=o.STANDARD_Z_INDEX-2+"";return{el:n,update:e=>r.updatePositon(e,n)}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(136);t.createEditorShade=function(){let{el:e,hidden:t,updatePosition:n}=i.createShade();return r.default.editableEvent.addEventListener(e=>{r.default.lastSelectedDomEventArgs&&(e?n(r.default.lastSelectedDomEventArgs.element):t())}),r.default.tinymceInputEvent.addEventListener(()=>{r.default.lastSelectedDomEventArgs&&n(r.default.lastSelectedDomEventArgs.element)}),document.addEventListener("scroll",()=>{r.default.editing&&n(r.default.lastSelectedDomEventArgs.element)}),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(137),i=n(1),a=o(n(40)),l=n(4),s=o(n(0));t.createShade=()=>{const e=[r.createBlock(),r.createBlock(),r.createBlock(),r.createBlock()],t=i.createDiv();e.forEach(e=>t.appendChild(e.el));let n=function(){let e=i.createDiv();return e.classList.add("kb_web_editor_shade_close_btn"),e.style.backgroundImage=`url(${a.default})`,e.style.zIndex=l.STANDARD_Z_INDEX+"",e.onclick=()=>s.default.closeEditingEvent.emit(),e}();t.appendChild(n);return{el:t,updatePosition:o=>{t.style.display="block",n.style.display="block";let[r,i,a,l]=e,s=o.getBoundingClientRect();r.update({top:0,left:s.left,width:s.width,height:s.top<0?0:s.top}),i.update({top:0,right:0,left:s.left+s.width,bottom:0}),a.update({top:s.bottom<0?0:s.bottom,left:s.left,width:s.width,bottom:0}),l.update({top:0,left:0,width:s.left,bottom:0})},hidden:()=>{t.style.display="none",n.style.display="none"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(41),i=n(1);t.createBlock=()=>{const e=i.createDiv();a(e.style),e.onclick=e=>e.stopPropagation();return{el:e,update:t=>r.updatePositon(t,e)}};const a=e=>{e.position="fixed",e.display="block",e.backgroundColor=o.EDITOR_SHADE_COLOR,e.zIndex=o.STANDARD_Z_INDEX+"",e.cursor="not-allowed"}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(139),a=n(3);t.createElementNav=function(){const{el:e,update:t}=i.createNavBar();return r.default.domChangeEvent.addEventListener(e=>{let n=a.getParentElements(e.element);t(n)}),r.default.editableEvent.addEventListener(t=>{t&&(e.style.display="none")}),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(13),a=o(n(0)),l=n(4);t.createNavBar=function(){const e=r.createDiv();let t;return e.classList.add("kb_web_editor_element_nav_bar"),e.style.zIndex=l.STANDARD_Z_INDEX+"",e.draggable=!0,e.ondragstart=n=>{let o=e.getBoundingClientRect();t={x:o.left+o.width-n.x,y:n.y-o.top}},e.ondrag=n=>{0!=n.x&&0!=n.y&&(e.style.right=document.documentElement.clientWidth-n.x-t.x+"px",e.style.top=n.y-t.y+"px")},{el:e,update:t=>{e.innerHTML="",e.style.display="inline-block";for(const n of t){let o=r.createDiv();"HTML"!=n.tagName&&(o.onclick=e=>{a.default.lastMouseEventArg=e,i.emitSelectedEvent(),e.stopPropagation()},o.onmouseover=e=>{i.emitHoverEvent(n),e.stopPropagation()}),o.innerText=n.tagName,e.appendChild(o),n!=t[t.length-1]&&e.appendChild(document.createTextNode("<"))}}}}}]);