<!DOCTYPE html>
<html lang="en" style="height: 100%;overflow: hidden;">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Verify dev password</title>
    <style>
        input[type="password"]:focus {
            border: 1px solid #409eff;
        }

        input[type="password"] {
            border: 1px solid #dcdfe6;
            outline: none;
        }
    </style>
</head>

<body style="
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      flex-direction: column;
      color:#212b36;
      font-family: PingFang SC-Regular, PingFang SC, Arial, Arial-Regular;

    ">
    <div>
        <div style="display: flex; align-items: center;margin-bottom: 32px;">

            <?xml version="1.0" encoding="UTF-8"?>
            <svg width="200px" height="60px" style="margin-left: -10px;" viewBox="0 0 122 30" version="1.1"
                xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <defs>
                    <rect id="path-1" x="0" y="0" width="1440" height="80"></rect>
                </defs>
                <g id="页面排布" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="nav/kooboo_white" transform="translate(-40.000000, -25.000000)">
                        <g id="头部">
                            <g id="头部/毛玻璃/蒙版">
                                <mask id="mask-2" fill="white">
                                    <use xlink:href="#path-1"></use>
                                </mask>
                                <use id="蒙版" fill="#FFFFFF" xlink:href="#path-1"></use>
                            </g>
                            <g id="logo与品牌" transform="translate(40.000000, 22.000000)"></g>
                        </g>
                        <g id="kooboo/主logo_white" transform="translate(40.000000, 25.000000)">
                            <path
                                d="M25.2467059,24.7872093 L14.6587571,17.8189876 L14.6587571,5.12607273 C14.6587571,4.50481571 14.1526349,4 13.5281258,4 C12.9044311,4 12.3966802,4.50481571 12.3966802,5.12607273 L12.3966802,25.8399483 C12.3966802,26.4623211 12.9044311,26.9668325 13.5281258,26.9668325 C14.1526349,26.9668325 14.6587571,26.4623211 14.6587571,25.8399483 L14.6587571,20.5180324 L23.918288,26.6125385 C24.4239011,26.9770769 25.1317799,26.8644899 25.4988508,26.3621085 C25.8659217,25.8576985 25.752319,25.1531677 25.2467059,24.7872093 M114.154306,23.1679853 C112.833116,24.481703 111.018426,25.2926336 109.005338,25.2926336 C106.990622,25.2926336 105.175932,24.481703 103.854843,23.1679853 C102.536198,21.8518332 101.723369,20.0434428 101.723369,18.0363515 C101.723369,16.0301731 102.536198,14.2215798 103.854843,12.9048192 C105.175932,11.5910001 106.990622,10.7811852 109.005338,10.7807795 C111.018426,10.7811852 112.833116,11.5910001 114.154306,12.9048192 C115.472647,14.2215798 116.28629,16.0301731 116.287308,18.0363515 C116.28629,20.0434428 115.472647,21.8518332 114.154306,23.1679853 M109.005338,9.07280449 C104.035528,9.07392021 100.009964,13.0859727 100.008844,18.0363515 C100.009964,22.9878461 104.035528,26.9993914 109.005338,27 C113.973214,26.9993914 118,22.9878461 118,18.0363515 C118,13.0859727 113.973214,9.07392021 109.005338,9.07280449 M95.449368,23.1679853 C94.1282793,24.481703 92.3135891,25.2926336 90.2998908,25.2926336 C88.287414,25.2926336 86.4716042,24.481703 85.1493957,23.1679853 C83.8304447,21.8518332 83.018532,20.0434428 83.018532,18.0363515 C83.018532,16.0301731 83.8304447,14.2215798 85.1493957,12.9048192 C86.4716042,11.5910001 88.287414,10.7811852 90.2998908,10.7807795 C92.3135891,10.7811852 94.1282793,11.5910001 95.449368,12.9048192 C96.7680136,14.2215798 97.5808425,16.0301731 97.5824712,18.0363515 C97.5808425,20.0434428 96.7680136,21.8518332 95.449368,23.1679853 M90.2998908,9.07280449 C85.3305899,9.07392021 81.3050255,13.0859727 81.3050255,18.0363515 C81.3050255,22.9878461 85.3305899,26.9993914 90.2998908,27 C95.2686828,26.9993914 99.2948579,22.9878461 99.2948579,18.0363515 C99.2948579,13.0859727 95.2686828,9.07392021 90.2998908,9.07280449 M59.7292792,23.1679853 C58.4078851,24.481703 56.593195,25.2926336 54.5795985,25.2926336 C52.5659001,25.2926336 50.75121,24.481703 49.4295105,23.1679853 C48.1114757,21.8518332 47.2983414,20.0434428 47.2983414,18.0363515 C47.2983414,16.0301731 48.1114757,14.2215798 49.4295105,12.9048192 C50.75121,11.5910001 52.5659001,10.7811852 54.5795985,10.7807795 C56.593195,10.7811852 58.4078851,11.5910001 59.7292792,12.9048192 C61.0479248,14.2215798 61.8617717,16.0301731 61.8626878,18.0363515 C61.8617717,20.0434428 61.0479248,21.8518332 59.7292792,23.1679853 M54.5795985,9.07280449 C49.6108065,9.07392021 45.5852422,13.0859727 45.5841224,18.0363515 C45.5852422,22.9878461 49.6108065,26.9993914 54.5795985,27 C59.5488994,26.9993914 63.5749727,22.9878461 63.5749727,18.0363515 C63.5749727,13.0859727 59.5488994,9.07392021 54.5795985,9.07280449 M41.0241371,23.1679853 C39.7030484,24.481703 37.8888672,25.2926336 35.8763904,25.2926336 C33.8627939,25.2926336 32.0463733,24.481703 30.7257935,23.1679853 C29.4060282,21.8518332 28.5931993,20.0434428 28.5931993,18.0363515 C28.5931993,16.0301731 29.4060282,14.2215798 30.7257935,12.9048192 C32.0463733,11.5910001 33.8627939,10.7811852 35.8763904,10.7807795 C37.8888672,10.7811852 39.7030484,11.5910001 41.0241371,12.9048192 C42.3430881,14.2215798 43.1567313,16.0301731 43.1575457,18.0363515 C43.1567313,20.0434428 42.3430881,21.8518332 41.0241371,23.1679853 M35.8763904,9.07280449 C30.9065805,9.07392021 26.8809144,13.0859727 26.8792857,18.0363515 C26.8809144,22.9878461 30.9065805,26.9993914 35.8763904,27 C40.8437573,26.9993914 44.870136,22.9878461 44.870136,18.0363515 C44.870136,13.0859727 40.8437573,9.07392021 35.8763904,9.07280449 M71.328149,25.0995114 C69.7349636,25.0995114 68.2690214,24.5693382 67.0912593,23.6790896 L67.0912593,12.5137062 C68.2690214,11.6229505 69.7349636,11.0932845 71.328149,11.0932845 C75.2107939,11.0932845 78.3574647,14.2284771 78.3574647,18.0968036 C78.3574647,21.9645216 75.2107939,25.0995114 71.328149,25.0995114 M71.328149,9.22494906 C69.7915613,9.22494906 68.3506605,9.61829351 67.0912593,10.3034513 L67.0912593,5.12607273 C67.0912593,4.50481571 66.5838138,4 65.9602209,4 C65.3357118,4 64.8275537,4.50481571 64.8275537,5.12607273 L64.8275537,25.8399483 C64.8275537,26.4623211 65.3357118,26.9668325 65.9602209,26.9668325 C66.5678321,26.9668325 67.0637748,26.4874756 67.088918,25.8872146 C68.3488282,26.572778 69.7905434,26.9668325 71.328149,26.9668325 C76.2445168,26.9668325 80.2290579,22.9962647 80.2290579,18.0968036 C80.2290579,13.196734 76.2445168,9.22494906 71.328149,9.22494906"
                                id="Fill-1" fill="#192845"></path>
                            <path
                                d="M13.3779077,15.2844618 C8.25357379,19.2552325 4.56596711,23.4440769 3.99998982,25.7150883 C4.89751171,23.5807028 7.94859754,20.2189162 12.0615015,17.0324002 C17.6681377,12.6865425 23.1189265,10.3197814 24.233067,11.7496362 C25.2940708,13.108693 22.044893,17.4141816 16.8973499,21.5728001 C17.1874642,21.3564505 17.4770695,21.136348 17.7699322,20.910464 C24.0863812,16.0143501 28.2248356,10.7849381 27.0129724,9.232252 C25.7998876,7.67845015 19.6954765,10.3875365 13.3779077,15.2844618"
                                id="Fill-3" fill="#192845"></path>
                            <rect id="矩形" opacity="0.200000003" x="0" y="0" width="122" height="30"></rect>
                        </g>
                    </g>
                </g>
            </svg>

        </div>
        <div id="message" style="margin-bottom:32px;color: #6c6c6c;"></div>
        <div style="margin: 8px 0;" id="enterSitePassword"></div>
        <input id="password" type="password"
            style="border-width:1px;border-radius:4px;width: 100px; font-size: 18px; padding: 12px;" />
        <div style="margin: 16px 0">
            <button id="enter"
                style="font-weight:700;cursor: pointer;border-width:0px;background:#409eff;border-radius:8px;color:white;padding:12px 28px;">Enter</button>
        </div>
        <!-- <span id="areYouTheSiteOwner"></span>
        <span onclick="goNextRoute('/_Admin/login')" id="login"
            style="color:#409eff;text-decoration-line: underline;"></span> -->
    </div>

    <p style="font-size: 18px; color: #666666"></p>
    <script>
        const messages = {
            en: "Web site requires development password to access site, find it under Site-System-Settings",
            "zh-CN": "站点需要开发预览密码访问站点， 密码在：站点-系统-设置<br />Web site requires development password to access site, find it under Site-System-Settings",
        };
        const enterSitePassword = {
            en: "Enter development preview password",
            "zh-CN": "输入开发预览密码 | Enter development preview password",
        };
        // const areYouTheSiteOwner = {
        //     en: "Are you the site owner?",
        //     "zh-CN": "是否是站点的拥有者？",
        // };
        // const login = {
        //     en: "Login",
        //     "zh-CN": "登录",
        // };
        const enter = {
            en: "Enter",
            "zh-CN": "进入 | Enter",
        };

        const ErrorMsg = {
            en: "Wrong Password",
            "zh-CN": "密码错误 Wrong Password",
        };


        var lang = getLang();
        var password = document.getElementById("password");
        var enterButton = document.getElementById("enter")
        document.getElementById("message").innerHTML = messages[lang];
        document.getElementById("enterSitePassword").innerHTML = enterSitePassword[lang];
        // document.getElementById("areYouTheSiteOwner").innerText = areYouTheSiteOwner[lang];
        // document.getElementById("login").innerText = login[lang];
        document.getElementById("enter").innerHTML = enter[lang];

        var WrongPassMsg = ErrorMsg[lang]; 



        enterButton.addEventListener("click", async () => {
            var value = password.value;
            var response = await fetch("/_api/v2/session/ValidDevPassword", {
                method: "post",
                body: value
            })

            if (response.ok) {
                location.reload();
            } else {
                password.value = "";
                alert(WrongPassMsg)
            }
        })


        function getLang() {
            if (window.navigator && window.navigator.language) {
                const lang = window.navigator.language;
                if (Object.keys(messages).find((f) => f == lang)) {
                    return lang;
                }
            }

            return "en";
        }

        function goNextRoute(router) {
            window.location.href = router
        }


        if (password) {
            password.focus()
            password.addEventListener("keydown", async (e) => {
                if (e.key == "Enter") {
                    var value = e.target.value;
                    var response = await fetch("/_api/v2/session/ValidDevPassword", {
                        method: "post",
                        body: value
                    })

                    if (response.ok) {
                        location.reload();
                    } else {
                        password.value = "";
                        alert(WrongPassMsg)
                    }
                }
            })
        }
    </script>
</body>

</html>