var w=(e,L,r)=>new Promise((l,m)=>{var S=u=>{try{o(r.next(u))}catch(b){m(b)}},v=u=>{try{o(r.throw(u))}catch(b){m(b)}},o=u=>u.done?l(u.value):Promise.resolve(u.value).then(S,v);o((r=r.apply(e,L)).next())});import{_ as A}from"./index.66d5d547.js";import{_ as B}from"./alert.583ccfe6.js";import{d as $,g as j,w as z}from"./i18n.48bd28ac.js";import{a as t}from"./replace-all.7cf5f327.js";import{d as n,e as D,g as J}from"./main.ea42d807.js";import{d as O}from"./style.19d0c187.js";import{_ as T}from"./index.a731e53b.js";import{a as q,E as R}from"./index.6855d037.js";import{E as G}from"./index.fc90f5ad.js";import{E as H}from"./index.a439b087.js";import{E as K}from"./index.c4e9b529.js";import{d as P,g as k,c as Q,o as f,j as _,w as d,b as i,u as c,k as W,f as C,a as X,b6 as Y,F as Z}from"./url.2e6a77c4.js";const p=$.global.t,ge=()=>n.get(t("Label/list")),_e=e=>n.post(t("Label/Deletes"),e,void 0,{successMessage:p("common.deleteSuccess")}),ee=e=>n.post(t("Label/Update"),e,void 0,{successMessage:p("common.saveSuccess")}),Le=e=>n.get(t("Label/get"),{name:e}),Se=()=>n.get(t("Label/scan")),Ve=e=>n.post(t("Label/confirmAdd"),e,void 0,{successMessage:p("common.saveSuccess")}),ye=()=>n.get(t("Label/ScanI18n")),ke=e=>n.post(t("Label/ConfirmI18NAdd"),e,void 0,{successMessage:p("common.saveSuccess")}),oe=e=>n.post(t("Label/create"),e,void 0,{successMessage:p("common.createSuccess")}),Ee=()=>{D.get(t("/Label/export"),{responseType:"blob",timeout:1e3*60*30}).then(e=>{O(e)})},we=e=>n.post(t("/Label/Import"),e,void 0,{timeout:1e3*60*30,hiddenLoading:!0,hiddenError:!0,successMessage:p("common.importSuccess"),errorMessage:p("common.importFailed"),keepShowErrorMessage:!0}),ae={class:"px-32 py-24"},le={class:"flex justify-end"},Ce=P({props:{modelValue:{type:Boolean},current:null,alert:null},emits:["update:modelValue","success"],setup(e,{emit:L}){const r=e,{t:l}=j(),m=k(!0),S=k(!1),v=J(),o=k();(()=>{o.value=JSON.parse(JSON.stringify(r.current))})();const b=g=>g.key===v.default?E.value.length>1?l("common.value")+" - "+g.key+" ("+l("common.default")+")":l("common.value"):l("common.value")+" - "+g.key;function M(){return w(this,null,function*(){r.current.id?yield ee({id:o.value.id,values:o.value.values}):yield oe({key:o.value.id,values:o.value.values}),S.value=!0,m.value=!1})}const E=Q(()=>v.selected.map(a=>({key:a,value:v.cultures[a]}))),x=()=>{L("update:modelValue",!1),L("success",S.value)};return(g,a)=>{const I=B,N=A,V=G,y=R,U=H,h=K;return f(),_(h,{modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=s=>m.value=s),width:"600px","close-on-click-modal":!1,title:e.current.id?c(l)("common.editLabel"):c(l)("common.newLabel"),"custom-class":"el-dialog--zero-padding",onClosed:x},{footer:d(()=>[i(T,{permission:{feature:"label",action:"edit"},"confirm-label":e.current.id?c(l)("common.save"):c(l)("common.create"),onConfirm:M,onCancel:a[3]||(a[3]=s=>m.value=!1)},null,8,["confirm-label"])]),default:d(()=>[e.alert?(f(),_(I,{key:0,content:e.alert},null,8,["content"])):W("",!0),C("div",ae,[C("div",le,[i(N)]),i(U,{"max-height":"50vh"},{default:d(()=>[i(c(q),{"label-position":"top",onSubmit:a[2]||(a[2]=z(()=>{},["prevent"]))},{default:d(()=>[e.current.id?(f(),_(y,{key:1,label:c(l)("common.name")},{default:d(()=>[i(V,{modelValue:o.value.name,"onUpdate:modelValue":a[1]||(a[1]=s=>o.value.name=s),disabled:""},null,8,["modelValue"])]),_:1},8,["label"])):(f(),_(y,{key:0,label:c(l)("common.name")},{default:d(()=>[i(V,{modelValue:o.value.id,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value.id=s)},null,8,["modelValue"])]),_:1},8,["label"])),(f(!0),X(Z,null,Y(c(E),s=>(f(),_(y,{key:s.key,label:b(s)},{default:d(()=>[i(V,{modelValue:o.value.values[s.key],"onUpdate:modelValue":F=>o.value.values[s.key]=F,type:"textarea",autosize:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])}}});export{Ve as C,Se as S,Ce as _,ke as a,ye as b,Le as c,_e as d,Ee as e,ge as g,we as i};
