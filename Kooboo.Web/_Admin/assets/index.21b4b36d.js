var $=(e,t,n)=>new Promise((o,l)=>{var s=i=>{try{u(n.next(i))}catch(d){l(d)}},a=i=>{try{u(n.throw(i))}catch(d){l(d)}},u=i=>i.done?o(i.value):Promise.resolve(i.value).then(s,a);u((n=n.apply(e,t)).next())});import{d as D,o as g,a as S,f as b,g as p,c as K,j as E,w as f,b as c,K as ho,h as Jt,aV as Tl,k as F,m as ce,u as r,t as A,F as Z,b6 as se,aT as yo,B as kn,G as U,b2 as wn,aH as R,i as he,l as kt,n as Ge,at as Ce,r as Vl,ce as ct,e as Ll,x as Re,aF as Qt,ct as Dl,I as Ml,bz as bo}from"./url.2e6a77c4.js";import{d as xo,u as Il,E as $n,i as Bl,a3 as Pl,b as jl,e as zl}from"./main.ea42d807.js";import{a as Cn,C as q}from"./replace-all.7cf5f327.js";import{K as wt,w as En,x as _e,y as ko,z as fn,A as wo,B as pn,C as $t,D as vn,E as gn,F as ze,G as $o,H as Ol,I as _n,J as Nl,L as le,M as Hl,N as Ul,O as Rl,f as Wl,e as te,P as Co,Q as Ct,R as Eo,S as Et,T as De,U as ao,V as So,m as me,k as we,W as io,c as ql,n as Kl,X as Gl}from"./style.19d0c187.js";import{n as Oe,e as Jl}from"./guid.c1a40312.js";import{d as z,g as H,w as at,e as Ql}from"./i18n.48bd28ac.js";import{_ as Sn}from"./color-picker.770bc088.js";import{E as Ne,al as Zl}from"./windi.a5b0b048.js";import{E as Xl,a as Yl,b as er}from"./index.f5a869bb.js";import{s as Xe}from"./confirm.e2c924ff.js";import{h as tr}from"./index.288ad073.js";import{_ as nr,a as or}from"./edit-dialog.1594bc57.js";import"./textContent.585a78c7.js";import"./dark.ddf8665a.js";import{_ as lr}from"./index.0810e95d.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.118b18f5.js";/* empty css                                                          */import"./file.b0d4cc6e.js";import"./validate.efc4a5c0.js";import"./use-date.01b82ce0.js";import"./use-copy-text.a346ed23.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.82732353.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.f6d26366.js";import"./index.453b96b0.js";import"./index.dd130c96.js";import"./vuedraggable.umd.5840ebc7.js";import"./index.232e741a.js";import"./sortable.esm.a99254e8.js";import"./k-table.d4486972.js";import"./index.0f940e7f.js";import{E as rr}from"./edit-content.9d0d2e67.js";import"./index.60af85f4.js";import{E as sr}from"./edit-data-form.84053f68.js";import"./html-block.eedc0de8.js";import{c as ar,_ as ir}from"./edit-dialog.caa719ce.js";import{$ as cr,a as ur,N as dr,M as mr}from"./dev-mode.c4133b5a.js";import"./userWorker.b3a6730b.js";import"./config.9fb52765.js";import"./product.c1a83798.js";import"./commerce.f8d3336c.js";import"./useTag.2282521e.js";import"./option-group-editor.fe5eab36.js";import"./useLabels.456dfc28.js";import"./dayjs.min.0a66969b.js";import"./index.67130863.js";import"./custom-field.74b8b7fb.js";import{S as fr}from"./index.28a41b01.js";import{m as Zt,x as pr,f as vr,r as Fo,h as Xt,p as gr,k as _r,y as hr,u as yr}from"./index.4fa52eca.js";import{a as br,g as co,r as xr,_ as uo}from"./renderer.cbda5f2c.js";import{l as kr,e as wr,a as $r}from"./page.831d1a45.js";import{c as Fn}from"./cloneDeep.ff43c1f8.js";import{u as Ao}from"./binding.38e61d47.js";import{E as Cr}from"./index.99c4f65d.js";import{E as An}from"./index.968f79fd.js";import{_ as Ee}from"./alert.583ccfe6.js";import{_ as Se}from"./index.a731e53b.js";import{E as To,a as Vo}from"./index.be352e91.js";import{E as G}from"./index.c4e9b529.js";import{E as ue}from"./index.2bc50276.js";import{E as Er}from"./index.379e80ad.js";import{_ as Sr}from"./edit-value-dialog.3fdfa214.js";import{M as Fr}from"./media-dialog.00ce8f4f.js";import{_ as Ar}from"./index.051a5017.js";import{E as Tr}from"./index.fafb14b3.js";import{E as Vr}from"./index.8ef89ff6.js";import{_ as Lr}from"./plugin-vue_export-helper.41ffa612.js";import{E as ut}from"./index.fc90f5ad.js";import{E as Tn,a as Yt}from"./index.6855d037.js";import{E as en,a as tn}from"./index.b494e80e.js";import{E as Vn,a as Ln,c as Lo}from"./index.0d2684bf.js";import{E as nn}from"./index.a439b087.js";import{E as on}from"./index.7af8368f.js";import{_ as Dr}from"./htmlblock-form.f5d35690.js";import{_ as Mr}from"./edit-form.8145c063.js";import{_ as Do}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as Dn}from"./icon-button.3313e42d.js";import{d as Ir}from"./debounce.61c67278.js";import{E as Br}from"./index.c5fde138.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./toNumber.574be4f1.js";import"./_baseIsEqual.c0d7e77a.js";import"./index.ae716322.js";import"./event.53b2ad83.js";import"./position.c0f844a3.js";import"./index.064c7de9.js";import"./validator.e2869aba.js";import"./event.776e7e11.js";import"./index.fcc3ea42.js";import"./index.ff0264f3.js";import"./error.7e8331f1.js";import"./dropdown.0507a1c7.js";import"./refs.4001ce17.js";import"./focus-trap.23f44899.js";import"./isNil.98bb3b88.js";import"./logo-transparent.1566007e.js";import"./pick.db46e15f.js";import"./_basePickBy.a6ffdd2d.js";import"./index.d75a71d9.js";import"./index.aba77680.js";import"./index.6d45a031.js";import"./index.31f26a0f.js";import"./key-value-editor.b270c5cd.js";import"./dropdown-input.1a28e074.js";import"./string.955a924b.js";import"./use-operation-dialog.f0f37a10.js";import"./index.77edae39.js";import"./index.695d0284.js";import"./index.cbddf8eb.js";import"./index.81036e13.js";import"./index.e3f90979.js";import"./isEqual.f1ae9fb3.js";import"./index.d4bbb472.js";import"./index.4db7adae.js";import"./index.7034978e.js";import"./classCompletion.a22e38a6.js";import"./editor.main.d2800f63.js";import"./index.66d5d547.js";import"./use-save-tip.04d9878f.js";import"./use-shortcuts.21ce2d8e.js";import"./index.c6df1b45.js";import"./toggleComment.5b29ca87.js";import"./index.af90dc36.js";import"./index.470f0e7e.js";import"./index.deca86b5.js";import"./image-editor.846c8dc6.js";import"./main.esm.5190fb65.js";import"./index.f01d4ffd.js";import"./image-cover.5aa60066.js";import"./media.56507018.js";import"./breadcrumb.80c136b8.js";import"./search-provider.68dc3c2c.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./_baseUniq.c69c2d82.js";import"./folder.8308bb9d.js";import"./relations-tag.a09361ff.js";import"./index.500e98ec.js";import"./browser.6147bf52.js";import"./throttle.041b2553.js";import"./search-input.67dfc984.js";import"./layout.7d98e9c1.js";import"./index.d971d096.js";import"./scroll.f51de5d8.js";import"./utils.6985c8b2.js";import"./index.0e262df3.js";import"./index.a47bd154.js";import"./editable-tags.e8873ae5.js";import"./_baseClone.adbc92f5.js";import"./product-variant.f9d76101.js";import"./digital-items-editor.6c733298.js";import"./index.4a51c2b7.js";import"./_createCompounder.591d8488.js";import"./useFields.2c414714.js";import"./isEmpty.dc565ae5.js";import"./index.73bdefdb.js";import"./tooltip.28a451cc.js";import"./content-effect.325a9c06.js";import"./omitBy.c7280540.js";import"./pickBy.a9d2c8dd.js";import"./index.6a6b77f3.js";import"./index.15ec68ba.js";import"./index.603c1365.js";import"./aria.75ec5909.js";import"./file.e38b2555.js";import"./index.8262f5ef.js";const Pr=D({name:"Close"}),jr={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zr=b("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Or=[zr];function Nr(e,t,n,o,l,s){return g(),S("svg",jr,Or)}var Hr=Lr(Pr,[["render",Nr]]);const Ur=z.global.t;function Rr(e,t){return $(this,null,function*(){yield xo.post(Cn("/InlineEditor/Update"),t,{url:e},{successMessage:Ur("common.saveSuccess")})})}function Wr(e){return $(this,null,function*(){return yield xo.post(Cn("/InlineEditor/canEnter"),{url:e})})}const Ke=p([]),Pe=p([]);function qr(){const e=Pe.value[Pe.value.length-1];if(console.log(e),e){for(const t of[...e].reverse())t.undo();Ke.value.push(e)}Pe.value.pop()}function Kr(){const e=Ke.value[Ke.value.length-1];if(console.log(e),e){for(const t of e)t.redo();Pe.value.push(e)}Ke.value.pop()}function ae(e){console.log(e),Pe.value.push(e),Ke.value=[]}function Mo(e){return $(this,null,function*(){const t=[];for(const n of Pe.value)for(const o of n)for(const l of o.changes)t.push(Jr(l));yield Rr(e,t)})}const Be=K(()=>Pe.value.length),un=K(()=>Ke.value.length);function fe(e){let t=e.getAttribute(wt);return t||(t=Oe(),e.setAttribute(wt,t)),t}function dt(e,t="children"){let n=[];switch(t){case"brothers":e.parentElement&&(n=_e(e.parentElement,!0));break;case"self":n=_e(e,!0,!0);break;case"children":default:n=_e(e,!0);break}for(const o of n)o.setAttribute(En,"")}function Gr(e){return e.hasAttribute(En)}function N(e,t){var l;let n=!0,o=e;for(;o&&!(!Gr(o)&&ne(o));){if(o==(t==null?void 0:t.reference)||((l=t==null?void 0:t.references)==null?void 0:l.includes(o)))return null;o=o.parentElement,n=!1}return{isSelf:n,element:o}}function Jr(e){var n;const t=[];for(const o in e)t.push({key:o.toLowerCase(),value:(n=e[o])==null?void 0:n.toString()});return{source:e.source,infos:t}}const Mn=["htmlblock"],ie=["view","Page","Layout","form",...Mn],mt=["textcontent"],Io=["commerce"],ft=["kconfig"],ln=["Label"],pt=["keyvalue"],vt=["indexdb","sqlite","mysql","sqlserver","mongo"],rn=["html","body"];function M(e){let t=e,n=!1;const o=[],l=[];for(;t;){if(fn(t)){const a=hn(t);if(a){if(a.type=="start"&&!o.includes(a.id)){const u=JSON.parse(a.bindings),i=[];let d=t;for(;d;){if(i.push(d),fn(d)){const m=hn(d);if(m&&m.type=="end"&&m.id==a.id)break}d=d.nextSibling}const v=Oe();u.forEach(m=>{m.references=i,m.group=v}),l.push(...u)}a.type=="end"&&o.push(a.id)}}if(wo(t)){const a=t;if(!n){const u=Qr(a),i=Oe();u.forEach(d=>{d.reference=a,d.group=i}),l.push(...u)}}let s=t.previousSibling;s?n=!0:(s=t.parentElement,n=!1),t=s}return l}function ye(e){var n;return e?e.getAttribute("data-designer-type")||e.id==="designer-page-style"?!0:((n=M(e)[0])==null?void 0:n.source)==="designer":!1}function ne(e){return e.getAttribute(ko)}function hn(e){if(!e.textContent||!e.textContent.startsWith(pn))return;let t=e.textContent.substring(pn.length+2);const n={};if(t.startsWith("start"))n.type="start";else if(t.startsWith("end"))n.type="end";else return;return t=t.substring(t.indexOf("-")+2),n.type=="start"?(n.id=t.substring(0,t.indexOf("[")-2),n.bindings=t.substring(t.indexOf("["))):n.id=t.substring(0),n}function Qr(e){const t=[];if(e.hasAttribute($t)&&t.push(...JSON.parse(e.getAttribute($t))),e.hasAttribute(vn)){const n=JSON.parse(e.getAttribute(vn));n.forEach(o=>o.target="content"),t.push(...n)}if(e.hasAttribute(gn)){const n=JSON.parse(e.getAttribute(gn));n.forEach(o=>o.target="attribute"),t.push(...n)}return t}function pe(e,t,n=!0){if(!!e)if(n){const o=e[0];return o?e.filter(s=>s.group==o.group).find(s=>t.includes(s.source)):void 0}else return e.find(o=>t.includes(o.source))}function O(e,t,n,o){return n&&(o="attribute"),e.find(l=>!t.includes(l.source)||o&&l.target!=o?!1:l.attribute==n?!0:l.target!="attribute")}function Bo(e,t){const n=t?e.outerHTML:e.innerHTML;return n.includes($t)||n.includes(pn)}function Zr(e,t){const n=O(e,ln);return!(!n||t&&n.reference==t)}function Po(e,t,n){const o=O(e,pt,n);return!(!o||t&&o.reference==t||n&&o.reference!=t)}function jo(e,t,n){const o=O(e,mt,n);return!(!o||!o.id||!o.fieldName||t&&o.reference==t||n&&o.reference!=t)}function zo(e,t,n){const o=O(e,vt,n);return!(!o||!o.id||!o.fieldName||t&&o.reference==t||n&&o.reference!=t)}function Oo(e,t,n){const o=O(e,ft,n!=null?n:"innerHtml");return!o||!o.key?!1:n=="innerHtml"?!0:!(t&&o.reference==t||n&&o.reference!=t)}function In(e,t){var s;if(rn.includes((s=t.tagName)==null?void 0:s.toLowerCase()))return!1;const n=O(e,ie);if(!n)return!1;const o=N(t,n);return!(!o||Bo(o.element)||!ne(o.element))}function gt(e,t){var s;if(rn.includes((s=t.tagName)==null?void 0:s.toLowerCase()))return!1;const n=O(e,ie);if(!n)return!1;const o=N(t,n);return!(!o||!o.isSelf&&Bo(o.element)||!ne(o.element))}function Fe(e,t){if(Zr(e,t)||Po(e,t)||jo(e,t)||zo(e,t)||Oo(e,t))return!0}function No(e,t,n){if(Po(e,t,n)||jo(e,t,n)||zo(e,t,n)||Oo(e,t,n))return!0}function W(e,t){var l;const n=(l=e[0])==null?void 0:l.group;return!!e.find(s=>{var a,u;return!(s.source!="Binding"||s.group!=n||((a=s.Expression)==null?void 0:a.startsWith("{"))&&((u=s.Expression)==null?void 0:u.endsWith("}"))||s.attribute!=t)})}function Ae(e){return e.some(t=>t.selfClosed)}const it=e=>{if(!!e)return e.getBoundingClientRect()},Xr=()=>({x:window.innerWidth,y:window.innerHeight});function oe(e){const t=document.createElement("div");t.innerHTML=e;const n=$o(t,!0);for(const o of n)if(fn(o)&&hn(o)&&Ol(o),wo(o)){const l=o;l.removeAttribute(ze),l.removeAttribute(En),l.removeAttribute(wt),l.removeAttribute(ko),l.removeAttribute($t),l.removeAttribute(vn),l.removeAttribute(gn),(l.hasAttribute(_n)||l.hasAttribute(Nl))&&l.remove()}return t.innerHTML}function ke(e,t){return e.find(n=>n.getAttribute(ze)==t)}const yn={aliceblue:{hex:"F0F8FF",dec:[240,248,255]},antiquewhite:{hex:"FAEBD7",dec:[250,235,215]},aqua:{hex:"00FFFF",dec:[0,255,255]},aquamarine:{hex:"7FFFD4",dec:[127,255,212]},azure:{hex:"F0FFFF",dec:[240,255,255]},beige:{hex:"F5F5DC",dec:[245,245,220]},bisque:{hex:"FFE4C4",dec:[255,228,196]},black:{hex:"000000",dec:[0,0,0]},blanchedalmond:{hex:"FFEBCD",dec:[255,235,205]},blue:{hex:"0000FF",dec:[0,0,255]},blueviolet:{hex:"8A2BE2",dec:[138,43,226]},brown:{hex:"A52A2A",dec:[165,42,42]},burlywood:{hex:"DEB887",dec:[222,184,135]},cadetblue:{hex:"5F9EA0",dec:[95,158,160]},chartreuse:{hex:"7FFF00",dec:[127,255,0]},chocolate:{hex:"D2691E",dec:[210,105,30]},coral:{hex:"FF7F50",dec:[255,127,80]},cornflowerblue:{hex:"6495ED",dec:[100,149,237]},cornsilk:{hex:"FFF8DC",dec:[255,248,220]},crimson:{hex:"DC143C",dec:[220,20,60]},cyan:{hex:"00FFFF",dec:[0,255,255]},darkblue:{hex:"00008B",dec:[0,0,139]},darkcyan:{hex:"008B8B",dec:[0,139,139]},darkgoldenrod:{hex:"B8860B",dec:[184,134,11]},darkgray:{hex:"A9A9A9",dec:[169,169,169]},darkgreen:{hex:"006400",dec:[0,100,0]},darkgrey:{hex:"A9A9A9",dec:[169,169,169]},darkkhaki:{hex:"BDB76B",dec:[189,183,107]},darkmagenta:{hex:"8B008B",dec:[139,0,139]},darkolivegreen:{hex:"556B2F",dec:[85,107,47]},darkorange:{hex:"FF8C00",dec:[255,140,0]},darkorchid:{hex:"9932CC",dec:[153,50,204]},darkred:{hex:"8B0000",dec:[139,0,0]},darksalmon:{hex:"E9967A",dec:[233,150,122]},darkseagreen:{hex:"8FBC8F",dec:[143,188,143]},darkslateblue:{hex:"483D8B",dec:[72,61,139]},darkslategray:{hex:"2F4F4F",dec:[47,79,79]},darkslategrey:{hex:"2F4F4F",dec:[47,79,79]},darkturquoise:{hex:"00CED1",dec:[0,206,209]},darkviolet:{hex:"9400D3",dec:[148,0,211]},deeppink:{hex:"FF1493",dec:[255,20,147]},deepskyblue:{hex:"00BFFF",dec:[0,191,255]},dimgray:{hex:"696969",dec:[105,105,105]},dimgrey:{hex:"696969",dec:[105,105,105]},dodgerblue:{hex:"1E90FF",dec:[30,144,255]},firebrick:{hex:"B22222",dec:[178,34,34]},floralwhite:{hex:"FFFAF0",dec:[255,250,240]},forestgreen:{hex:"228B22",dec:[34,139,34]},fuchsia:{hex:"FF00FF",dec:[255,0,255]},gainsboro:{hex:"DCDCDC",dec:[220,220,220]},ghostwhite:{hex:"F8F8FF",dec:[248,248,255]},gold:{hex:"FFD700",dec:[255,215,0]},goldenrod:{hex:"DAA520",dec:[218,165,32]},gray:{hex:"808080",dec:[128,128,128]},green:{hex:"008000",dec:[0,128,0]},greenyellow:{hex:"ADFF2F",dec:[173,255,47]},grey:{hex:"808080",dec:[128,128,128]},honeydew:{hex:"F0FFF0",dec:[240,255,240]},hotpink:{hex:"FF69B4",dec:[255,105,180]},indianred:{hex:"CD5C5C",dec:[205,92,92]},indigo:{hex:"4B0082",dec:[75,0,130]},ivory:{hex:"FFFFF0",dec:[255,255,240]},khaki:{hex:"F0E68C",dec:[240,230,140]},lavender:{hex:"E6E6FA",dec:[230,230,250]},lavenderblush:{hex:"FFF0F5",dec:[255,240,245]},lawngreen:{hex:"7CFC00",dec:[124,252,0]},lemonchiffon:{hex:"FFFACD",dec:[255,250,205]},lightblue:{hex:"ADD8E6",dec:[173,216,230]},lightcoral:{hex:"F08080",dec:[240,128,128]},lightcyan:{hex:"E0FFFF",dec:[224,255,255]},lightgoldenrodyellow:{hex:"FAFAD2",dec:[250,250,210]},lightgray:{hex:"D3D3D3",dec:[211,211,211]},lightgreen:{hex:"90EE90",dec:[144,238,144]},lightgrey:{hex:"D3D3D3",dec:[211,211,211]},lightpink:{hex:"FFB6C1",dec:[255,182,193]},lightsalmon:{hex:"FFA07A",dec:[255,160,122]},lightseagreen:{hex:"20B2AA",dec:[32,178,170]},lightskyblue:{hex:"87CEFA",dec:[135,206,250]},lightslategray:{hex:"778899",dec:[119,136,153]},lightslategrey:{hex:"778899",dec:[119,136,153]},lightsteelblue:{hex:"B0C4DE",dec:[176,196,222]},lightyellow:{hex:"FFFFE0",dec:[255,255,224]},lime:{hex:"00FF00",dec:[0,255,0]},limegreen:{hex:"32CD32",dec:[50,205,50]},linen:{hex:"FAF0E6",dec:[250,240,230]},magenta:{hex:"FF00FF",dec:[255,0,255]},maroon:{hex:"800000",dec:[128,0,0]},mediumaquamarine:{hex:"66CDAA",dec:[102,205,170]},mediumblue:{hex:"0000CD",dec:[0,0,205]},mediumorchid:{hex:"BA55D3",dec:[186,85,211]},mediumpurple:{hex:"9370DB",dec:[147,112,219]},mediumseagreen:{hex:"3CB371",dec:[60,179,113]},mediumslateblue:{hex:"7B68EE",dec:[123,104,238]},mediumspringgreen:{hex:"00FA9A",dec:[0,250,154]},mediumturquoise:{hex:"48D1CC",dec:[72,209,204]},mediumvioletred:{hex:"C71585",dec:[199,21,133]},midnightblue:{hex:"191970",dec:[25,25,112]},mintcream:{hex:"F5FFFA",dec:[245,255,250]},mistyrose:{hex:"FFE4E1",dec:[255,228,225]},moccasin:{hex:"FFE4B5",dec:[255,228,181]},navajowhite:{hex:"FFDEAD",dec:[255,222,173]},navy:{hex:"000080",dec:[0,0,128]},oldlace:{hex:"FDF5E6",dec:[253,245,230]},olive:{hex:"808000",dec:[128,128,0]},olivedrab:{hex:"6B8E23",dec:[107,142,35]},orange:{hex:"FFA500",dec:[255,165,0]},orangered:{hex:"FF4500",dec:[255,69,0]},orchid:{hex:"DA70D6",dec:[218,112,214]},palegoldenrod:{hex:"EEE8AA",dec:[238,232,170]},palegreen:{hex:"98FB98",dec:[152,251,152]},paleturquoise:{hex:"AFEEEE",dec:[175,238,238]},palevioletred:{hex:"DB7093",dec:[219,112,147]},papayawhip:{hex:"FFEFD5",dec:[255,239,213]},peachpuff:{hex:"FFDAB9",dec:[255,218,185]},peru:{hex:"CD853F",dec:[205,133,63]},pink:{hex:"FFC0CB",dec:[255,192,203]},plum:{hex:"DDA0DD",dec:[221,160,221]},powderblue:{hex:"B0E0E6",dec:[176,224,230]},purple:{hex:"800080",dec:[128,0,128]},rebeccapurple:{hex:"663399",dec:[102,51,153]},red:{hex:"FF0000",dec:[255,0,0]},rosybrown:{hex:"BC8F8F",dec:[188,143,143]},royalblue:{hex:"4169E1",dec:[65,105,225]},saddlebrown:{hex:"8B4513",dec:[139,69,19]},salmon:{hex:"FA8072",dec:[250,128,114]},sandybrown:{hex:"F4A460",dec:[244,164,96]},seagreen:{hex:"2E8B57",dec:[46,139,87]},seashell:{hex:"FFF5EE",dec:[255,245,238]},sienna:{hex:"A0522D",dec:[160,82,45]},silver:{hex:"C0C0C0",dec:[192,192,192]},skyblue:{hex:"87CEEB",dec:[135,206,235]},slateblue:{hex:"6A5ACD",dec:[106,90,205]},slategray:{hex:"708090",dec:[112,128,144]},slategrey:{hex:"708090",dec:[112,128,144]},snow:{hex:"FFFAFA",dec:[255,250,250]},springgreen:{hex:"00FF7F",dec:[0,255,127]},steelblue:{hex:"4682B4",dec:[70,130,180]},tan:{hex:"D2B48C",dec:[210,180,140]},teal:{hex:"008080",dec:[0,128,128]},thistle:{hex:"D8BFD8",dec:[216,191,216]},tomato:{hex:"FF6347",dec:[255,99,71]},turquoise:{hex:"40E0D0",dec:[64,224,208]},violet:{hex:"EE82EE",dec:[238,130,238]},wheat:{hex:"F5DEB3",dec:[245,222,179]},white:{hex:"FFFFFF",dec:[255,255,255]},whitesmoke:{hex:"F5F5F5",dec:[245,245,245]},yellow:{hex:"FFFF00",dec:[255,255,0]},yellowgreen:{hex:"9ACD32",dec:[154,205,50]}},Ho=[{name:"color",extract:e=>Ve("color",e)},{name:"background",extract:e=>Le("background-color",e)},{name:"background-color",extract:e=>Ve("background-color",e)},{name:"border",extract:e=>Le("border-color",e)},{name:"border-color",extract(e){const t=[];if(e){const n=Uo(e);n.length==1?t.push({key:"border-color",value:n[0]}):n.length==2?(t.push({key:"border-top-color",value:n[0]}),t.push({key:"border-bottom-color",value:n[0]}),t.push({key:"border-left-color",value:n[1]}),t.push({key:"border-right-color",value:n[1]})):n.length==3?(t.push({key:"border-top-color",value:n[0]}),t.push({key:"border-bottom-color",value:n[2]}),t.push({key:"border-left-color",value:n[1]}),t.push({key:"border-right-color",value:n[1]})):n.length==4&&(t.push({key:"border-top-color",value:n[0]}),t.push({key:"border-right-color",value:n[1]}),t.push({key:"border-bottom-color",value:n[2]}),t.push({key:"border-left-color",value:n[3]}))}return t}},{name:"border-top",extract:e=>Le("border-top-color",e)},{name:"border-right",extract:e=>Le("border-right-color",e)},{name:"border-bottom",extract:e=>Le("border-bottom-color",e)},{name:"border-left",extract:e=>Le("border-left-color",e)},{name:"border-top-color",extract:e=>Ve("border-top-color",e)},{name:"border-right-color",extract:e=>Ve("border-right-color",e)},{name:"border-bottom-color",extract:e=>Ve("border-bottom-color",e)},{name:"border-left-color",extract:e=>Ve("border-left-color",e)},{name:"outline",extract:e=>Le("outline-color",e)},{name:"outline-color",extract:e=>Ve("outline-color",e)}];function Ve(e,t){const n=[];return t&&n.push({key:e,value:t}),n}function Le(e,t){const n=[];if(t){const o=Uo(t);o.length&&n.push({key:e,value:o[0]})}return n}const Yr=RegExp(`\\s${Object.keys(yn).map(e=>"("+e+")").join("|")}|(rgb(a)?\\(\\s*\\d+\\s*,\\s*\\d+\\s*,\\s*\\d+\\s*(,\\s*\\d*\\.?\\d*\\s*)?)\\)|(#[\\d\\w]{3,8})\\s`,"gim");function Uo(e){e=` ${e} `;const t=[],n=e.matchAll(Yr);for(const o of n)t.push(o[0].trim());return t}function Ro(e){if(e in yn){const t=yn[e].dec;return`rgb(${t[0]},${t[1]},${t[2]})`}return e}const es={class:"w-46px flex items-center justify-center pr-4"},ts=D({props:{modelValue:null,displayColor:null},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=p();let l=n.modelValue||"rgba(0,0,0,0)";function s(a){a.endsWith("0)")&&(l==null?void 0:l.endsWith("0)"))&&t("update:modelValue",a.substring(0,a.length-2)+"1)"),l=a}return(a,u)=>{const i=ut;return g(),E(i,{"model-value":e.modelValue,placeholder:e.displayColor,"onUpdate:modelValue":u[1]||(u[1]=d=>a.$emit("update:modelValue",d))},{append:f(()=>[b("div",es,[c(Sn,{ref_key:"picker",ref:o,"show-alpha":"","model-value":e.modelValue||e.displayColor,"onUpdate:modelValue":u[0]||(u[0]=d=>a.$emit("update:modelValue",d)),onActiveChange:s},null,8,["model-value"])])]),_:1},8,["model-value","placeholder"])}}});var Wo=Do(ts,[["__scopeId","data-v-cb85724e"]]);const ns=["width","height"],os=D({props:{color:null,size:null},setup(e){const t=e;function n(){var h,w;if(!o.value)return;const i=o.value.getContext("2d");let d=0,v=0,m=0;const _=(h=t.size)!=null?h:12;for(;(d<o.value.width||v<o.value.height)&&(m%2||(i.fillStyle=(w=t.color)!=null?w:"#D7D7D7",i.fillRect(d,v,_,_)),d+=_,!(d>o.value.width&&(d=0,m=v/_%2?1:0,v+=_,v>o.value.height)));)m++}const o=p(),l=p(!1),s=new ResizeObserver(()=>$(this,null,function*(){!a.value||(l.value=!1,u.value=a.value.getBoundingClientRect(),l.value=!0,yield ho(),n())})),a=p(),u=p();return Jt(()=>{s.observe(a.value)}),Tl(()=>{s.disconnect()}),(i,d)=>{var v,m;return g(),S("div",{ref_key:"container",ref:a,class:"w-full h-full"},[l.value?(g(),S("canvas",{key:0,ref_key:"canvas",ref:o,width:(v=u.value)==null?void 0:v.width,height:(m=u.value)==null?void 0:m.height,class:"dark:bg-666"},null,8,ns)):F("",!0)],512)}}}),ls={key:0,class:"transition-all duration-300 absolute inset-0 top-auto opacity-0 bg-000/40 flex items-center justify-center group-hover:opacity-100"},rs={class:"text-fff text-2l font-bold p-12"},Bn=D({props:{src:null,hasUrlWrap:{type:Boolean},onSelect:null},setup(e){const t=e,n=p(),{t:o}=H(),l=K(()=>t.hasUrlWrap?t.src:`url("${t.src}")`);return(s,a)=>{const u=os;return g(),S("div",{ref_key:"container",ref:n,class:"h-full w-full overflow-hidden relative bg-fff group cursor-pointer",onClick:a[0]||(a[0]=(...i)=>e.onSelect&&e.onSelect(...i))},[c(u),b("div",{class:"absolute inset-0 bg-no-repeat bg-center bg-contain",style:ce({backgroundImage:r(l)})},null,4),e.onSelect?(g(),S("div",ls,[b("span",rs,A(r(o)("common.clickReplace")),1)])):F("",!0)],512)}}}),dn=D({props:{options:null},setup(e){const t=e,n=K(()=>[{key:"",value:""},...t.options]);return(o,l)=>{const s=Vn,a=Ln;return g(),S("div",null,[c(a,yo(o.$attrs,{filterable:"","allow-create":"","default-first-option":"",class:"w-full"}),{default:f(()=>[(g(!0),S(Z,null,se(r(n),u=>(g(),E(s,{key:u.key,label:u.value,value:u.key},null,8,["label","value"]))),128))]),_:1},16)])}}}),et=p(!1);let St;const qo=p(!1),sn=(e=!1)=>$(void 0,null,function*(){return St=new q,et.value=!0,qo.value=e,yield St.promise}),ss=e=>{e?St.resolve(e):St.reject("close image dialog")};const as={class:"h-180px flex w-full space-x-12"},is={class:"flex-1 w-full relative group"},cs={class:"flex-1 space-y-4"},us=D({setup(e){const{t}=H(),n=le(Q.value,"background-image"),o=le(Q.value,"background-size"),l=le(Q.value,"background-repeat"),s=le(Q.value,"background-position"),a=le(Q.value,"background-color"),u=getComputedStyle(Q.value),i=()=>$(this,null,function*(){const m=(yield sn(!1))[0];n.value=`url(${m.url})`}),d=kn("values");return d==null||d.push(n,o,l,s,a),(v,m)=>{const _=Bn,h=Dn,w=Wo;return g(),S("div",as,[b("div",is,[c(_,{src:r(n)||r(u).backgroundImage,class:"rounded-normal","has-url-wrap":!0,"on-select":i},null,8,["src"]),r(u).backgroundImage!="none"?(g(),E(h,{key:0,class:"opacity-0 group-hover:opacity-100 absolute top-12 right-12 transform scale-75 origin-top-right",circle:"",icon:"icon-delete",tip:r(t)("common.remove"),onClick:m[0]||(m[0]=y=>n.value="none")},null,8,["tip"])):F("",!0)]),b("div",cs,[c(dn,{modelValue:r(o),"onUpdate:modelValue":m[1]||(m[1]=y=>U(o)?o.value=y:null),placeholder:r(u).backgroundSize,options:r(Hl),title:"background-size"},null,8,["modelValue","placeholder","options"]),c(dn,{modelValue:r(l),"onUpdate:modelValue":m[2]||(m[2]=y=>U(l)?l.value=y:null),placeholder:r(u).backgroundRepeat,options:r(Ul),title:"background-repeat"},null,8,["modelValue","placeholder","options"]),c(dn,{modelValue:r(s),"onUpdate:modelValue":m[3]||(m[3]=y=>U(s)?s.value=y:null),placeholder:r(u).backgroundPosition,options:r(Rl),title:"background-position"},null,8,["modelValue","placeholder","options"]),c(w,{modelValue:r(a),"onUpdate:modelValue":m[4]||(m[4]=y=>U(a)?a.value=y:null),"display-color":r(u).backgroundColor},null,8,["modelValue","display-color"])])])}}});var ds=Do(us,[["__scopeId","data-v-1ce6ad30"]]);const ms={class:"flex w-full space-x-12"},fs={class:"flex-1"},ps={class:"px-12"},vs={class:"flex-1"},gs={class:"px-12"},_s=D({setup(e){const{t}=H(),n=le(Q.value,"width"),o=le(Q.value,"height"),l=getComputedStyle(Q.value),s=kn("values");return s==null||s.push(n,o),(a,u)=>{const i=ut;return g(),S("div",ms,[b("div",fs,[c(i,{modelValue:r(n),"onUpdate:modelValue":u[0]||(u[0]=d=>U(n)?n.value=d:null),placeholder:r(l).width},{append:f(()=>[b("span",ps,A(r(t)("common.width")),1)]),_:1},8,["modelValue","placeholder"])]),b("div",vs,[c(i,{modelValue:r(o),"onUpdate:modelValue":u[1]||(u[1]=d=>U(o)?o.value=d:null),placeholder:r(l).height},{append:f(()=>[b("span",gs,A(r(t)("common.height")),1)]),_:1},8,["modelValue","placeholder"])])])}}}),hs={class:"space-y-12 w-full"},ys={class:"flex w-full space-x-12"},bs={class:"flex-1"},xs={class:"flex-1"},ks={class:"px-12"},ws={class:"flex w-full space-x-12"},$s={class:"flex-1"},Cs={class:"px-12"},Es={class:"flex-1"},Ss={class:"px-12"},Fs=D({setup(e){const{t}=H(),n=le(Q.value,"color"),o=le(Q.value,"line-height"),l=le(Q.value,"font-size"),s=le(Q.value,"font-weight"),a=le(Q.value,"font-family"),u=getComputedStyle(Q.value),i=K({get(){var v,m;return(m=(v=a.value)==null?void 0:v.split(","))==null?void 0:m.map(_=>_==null?void 0:_.trim()).filter(_=>!!_)},set(v){a.value=v.join(",")}}),d=kn("values");return d==null||d.push(l,s,a,o,n),(v,m)=>{const _=Wo,h=ut,w=Vn,y=Ln;return g(),S("div",hs,[b("div",ys,[b("div",bs,[c(_,{modelValue:r(n),"onUpdate:modelValue":m[0]||(m[0]=x=>U(n)?n.value=x:null),"show-alpha":!0,"display-color":r(u).color},null,8,["modelValue","display-color"])]),b("div",xs,[c(h,{modelValue:r(s),"onUpdate:modelValue":m[1]||(m[1]=x=>U(s)?s.value=x:null),placeholder:r(u).fontWeight},{append:f(()=>[b("span",ks,A(r(t)("common.fontWeight")),1)]),_:1},8,["modelValue","placeholder"])])]),b("div",ws,[b("div",$s,[c(h,{modelValue:r(l),"onUpdate:modelValue":m[2]||(m[2]=x=>U(l)?l.value=x:null),placeholder:r(u).fontSize},{append:f(()=>[b("span",Cs,A(r(t)("common.size")),1)]),_:1},8,["modelValue","placeholder"])]),b("div",Es,[c(h,{modelValue:r(o),"onUpdate:modelValue":m[3]||(m[3]=x=>U(o)?o.value=x:null),placeholder:r(u).lineHeight},{append:f(()=>[b("span",Ss,A(r(t)("common.lineHeight")),1)]),_:1},8,["modelValue","placeholder"])])]),b("div",null,[c(y,{modelValue:r(i),"onUpdate:modelValue":m[4]||(m[4]=x=>U(i)?i.value=x:null),multiple:"",filterable:"","allow-create":"","default-first-option":"",class:"w-full",placeholder:r(u).fontFamily,title:"font-family"},{default:f(()=>[(g(!0),S(Z,null,se(r(Wl),x=>(g(),E(w,{key:x,label:x,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])])}}}),As={class:"px-32 py-24"},Ts=D({setup(e){const{t}=H(),n=p(!0),o=p([]);let l=p(!1);const s=()=>{l.value=!0,a()},a=()=>{const u=o.value.filter(i=>i.origin!=i.value);Ls(l.value,u)};return wn("values",o.value),(u,i)=>{const d=Tn,v=Yt,m=ue,_=G;return g(),E(_,{modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=h=>n.value=h),width:"600px","close-on-click-modal":!1,title:r(t)("common.inlineStyle"),"custom-class":"el-dialog--zero-padding",draggable:"",onClosed:a},{footer:f(()=>[c(m,{round:"",onClick:i[0]||(i[0]=h=>n.value=!1)},{default:f(()=>[R(A(r(t)("common.cancel")),1)]),_:1}),c(m,{type:"primary",round:"",onClick:s},{default:f(()=>[R(A(r(t)("common.save")),1)]),_:1})]),default:f(()=>[b("div",As,[c(v,{ref:"form","label-position":"top"},{default:f(()=>[c(d,{label:r(t)("common.background")},{default:f(()=>[c(ds)]),_:1},8,["label"]),c(d,{label:r(t)("common.size")},{default:f(()=>[c(_s)]),_:1},8,["label"]),c(d,{label:r(t)("common.font")},{default:f(()=>[c(Fs)]),_:1},8,["label"])]),_:1},512)])]),_:1},8,["modelValue","title"])}}}),Pn=p(!1);let Ft;const Q=p(),Vs=e=>$(void 0,null,function*(){return Ft=new q,Q.value=e,Pn.value=!0,yield Ft.promise}),Ls=(e,t)=>{e?Ft.resolve(t):Ft.reject(),Pn.value=!1};function Ds(e,t){const n=O(e,ln);if(!(!n||W(e))&&!(t&&n.reference==t))return{source:n.source,id:n.id,value:oe(n.reference.innerHTML)}}function Ms(e,t){const n=O(e,pt,void 0,"content");if(!(!n||W(e))&&!(t&&n.reference==t))return{source:n.source,id:n.key,value:oe(n.reference.innerHTML)}}function Is(e,t,n){const o=O(e,pt,n);if(!(!o||o.reference!==t||W(e,"attribute")))return{source:o.source,id:o.key,value:t.getAttribute(n)}}function Bs(e,t){const n=O(e,ft,"innerHtml");if(!(!n||W(e))&&!(t&&n.reference==t))return{source:n.source,id:n.key,value:oe(n.reference.innerHTML),attribute:"innerHtml"}}function Ps(e,t,n){const o=O(e,ft,n);if(!(!o||o.reference!=t||W(e,n)))return{source:o.source,id:o.key,value:t.getAttribute(n),attribute:n}}function js(e,t){const n=O(e,mt,void 0,"content");if(!(!n||W(e))&&!(t&&n.reference==t))return{source:n.source,id:n.id,path:n.fieldName,action:"update",value:oe(n.reference.innerHTML)}}function zs(e,t,n){const o=O(e,mt,n);if(!(!o||o.reference!=t||W(e,n)))return{source:o.source,id:o.id,path:o.fieldName,action:"update",value:t.getAttribute(n)}}function Os(e,t){const n=O(e,vt,void 0,"content");if(!(!n||W(e))&&!(t&&n.reference==t))return{source:n.source,id:n.id,path:n.fieldName,table:n.table,action:"update",value:oe(n.reference.innerHTML)}}function Ns(e,t,n){const o=O(e,vt,n);if(!(!o||o.reference!=t||W(e,n)))return{source:o.source,id:o.id,path:o.fieldName,table:o.table,action:"update",value:t.getAttribute(n)}}function Te(e,t){const n=Ds(e,t);if(n)return n;const o=Ms(e,t);if(o)return o;const l=Bs(e,t);if(l)return l;const s=js(e,t);if(s)return s;const a=Os(e,t);if(a)return a}function Ko(e,t,n){const o=Is(e,t,n);if(o)return o;const l=Ps(e,t,n);if(l)return l;const s=zs(e,t,n);if(s)return s;const a=Ns(e,t,n);if(a)return a}function ve(e,t){let n;return{changes:[],undo:()=>{const s=mo(e);s&&(n=s.innerHTML,s.innerHTML=t)},redo:()=>{const s=mo(e);s&&(s.innerHTML=n)}}}function mo(e){if(!T.value)return;const t=te(T.value);for(const n of t){const o=n.getAttribute(wt);if(!!o&&o.includes(e))return n}}const{t:Hs}=z.global,Us="editStyle",Rs=Hs("common.inlineStyle"),Ws="icon-style",qs=0;function jn(e){const t=N(e);if(!t)return!1;const n=M(t.element);return Ae(n)?!1:Fe(n,t.element)?!W(n,"style"):gt(n,e)}function Ks(e){return $(this,null,function*(){const t=yield zn(e);t&&ae([t])})}function zn(e){return $(this,null,function*(){const{element:t,isSelf:n}=N(e),o=n?e.parentElement:t,l=o.innerHTML,s=e.parentElement.innerHTML;try{const a=yield Vs(e);if(l==o.innerHTML)return;if(!a.length)throw new Error("not change style");const u=fe(e.parentElement),i=ve(u,l),d=On(e);if(!d)throw new Error("can not get changes");return i.changes.push(d),i}catch(a){throw e.parentElement.innerHTML=s,new Error("change style error")}})}function On(e){var l;const t=M(e),n=Te(t,e);if(n)return n;const o=O(t,ie);if(o){const{element:s,isSelf:a}=N(e,o),u=ne(s);return a?{source:o.source,id:o.id,action:"update",koobooId:u,attribute:"style",value:(l=s.getAttribute("style"))==null?void 0:l.replaceAll('"',"'")}:{source:o.source,id:o.id,action:"update",koobooId:u,value:oe(s.innerHTML)}}}var Gs=Object.freeze(Object.defineProperty({__proto__:null,name:Us,display:Rs,icon:Ws,order:qs,active:jn,invoke:Ks,editStyle:zn,getChange:On},Symbol.toStringTag,{value:"Module"}));const{t:Js}=z.global;function fo(e,t){const n=[];for(const o of Ho){const l=e.style.getPropertyValue(o.name),s=o.extract(l);for(const a of s){if(Et.includes(a.value))continue;const u=e.selectorText,i=Ro(a.value),d=a.key;n.find(v=>v.selectorText==u&&v.value==i&&v.property==d)||n.push({value:i,property:d,selectorText:u,rule:e,type:t,owner:e.parentStyleSheet.ownerNode})}}return n}function Qs(e,t){var o,l;const n=[];for(const s of Array.from((o=e.rules)!=null?o:[]))if(Ct(s)){const a=fo(s,e.type);for(const u of a)u.file=e.url,n.push(u)}else if(Eo(s)){const a=s;for(const u of Array.from((l=a.cssRules)!=null?l:[])){if(!Ct(u)||t&&!t.matchMedia(a.media.mediaText).matches)continue;const i=fo(u,e.type);for(const d of i)d.file=e.url,d.media=a.media.mediaText,n.push(d)}}return n}function Zs(e){const t=[],n=e.getAttribute("style");for(const o of Ho){if(!(n!=null&&n.includes(o.name)))continue;const l=e.style.getPropertyValue(o.name);if(!l)continue;const s=o.extract(l);for(const a of s){if(Et.includes(a.value))continue;const u=a.key,i=Ro(a.value);t.find(d=>d.property==u&&d.value==i)||t.push({value:i,property:u,selectorText:`${e.tagName} > ${Js("common.inlineStyle")}`,type:"inline",references:[e],owner:e})}}return t}function Go(e,t,n){n=n.filter(a=>jn(a));const o=Co(e),l=te(e),s=[];for(const a of o)for(const u of Qs(a,t))try{const i=l.filter(d=>{try{return d.matches(u.selectorText)}catch(v){const m=ea(u.selectorText);return d.matches(m)}});i.length&&i.some(d=>n.includes(d))&&(u.references=i,s.push(u))}catch(i){console.log(`matches selectorText error ${u.selectorText}`)}for(const a of n)s.push(...Zs(a));return s}const Xs=["transparent","rgba(0, 0, 0, 0)","rgb(0, 0, 0)","rgb(255, 255, 255)","rgba(255, 255, 255, 1)","initial","inherit","none"];function Jo(e,t){const n=te(e),o=Go(e,t,n),l=new Set,s=o.map(a=>a.value).filter(a=>!Xs.includes(a));for(const a of s)l.add(a);return Array.from(l)}const Ys=[":fullscreen",":modal",":picture-in-picture",":autofill",":read-only",":read-write",":placeholder-shown",":indeterminate",":blank",":invalid",":in-range",":out-of-range",":required",":optional",":user-invalid",/:dir\(?.*?\)?/g,":link",":any-link",":target",":scope",":playing",":paused",":current",":past",":future",":root",/:has\(?.*?\)?/g,/:nth-child\(?.*?\)?/g,/:nth-last-child\(?.*?\)?/g,":first-child",":last-child",":only-child",/:nth-of-type\(?.*?\)?/g,/:nth-last-of-type\(?.*?\)?/g,":first-of-type",":last-of-type",":only-of-type",":focus-visible",":focus-within",":target-within",/:lang\(?.*?\)?/g,":active",/:host-context\(?.*?\)?/g,/:is\(?.*?\)?/g,/:where\(?.*?\)?/g,":left",":local-link",":autofill",":checked",":default",":defined",":disabled",":empty",":enabled",":focus",":hover",":visited",":valid",/:not\(?.*?\)?/g];function ea(e){for(const t of Ys)e=e.replaceAll(t,"");return e}const ta={class:"text-black rounded-normal p-4 hover:bg-blue/10 flex items-center cursor-pointer relative"},na={class:"flex items-center space-x-4 h-24 px-4"},Qo=D({props:{action:null},setup(e){const t=e,n=p(),o=p(),l=Jo(T.value,Ze.value);return he(()=>be.value,()=>{var s;!t.action.active||(n.value=(s=t.action.active())!=null?s:"#000")},{immediate:!0,deep:!0}),(s,a)=>{const u=Ne;return g(),S("div",ta,[c(Sn,{ref_key:"picker",ref:o,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=i=>n.value=i),"show-alpha":"",predefine:r(l),onChange:a[1]||(a[1]=i=>e.action.invoke(i))},{default:f(()=>[b("div",na,[e.action.params?(g(),E(kt(e.action.params.icon),{key:0,class:"w-16 h-16",color:n.value},null,8,["color"])):F("",!0),c(u,{class:"iconfont icon-pull-down text-s leading-none pointer-events-none"})])]),_:1},8,["modelValue","predefine"])])}}}),oa={width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},la=b("title",null,"background-color",-1),ra={id:"\u5F39\u7A97",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},sa={id:"background-color"},aa=b("rect",{id:"\u77E9\u5F62\u5907\u4EFD-22",opacity:"0.43859282",x:"0",y:"0",width:"14",height:"14"},null,-1),ia=["fill"],ca=b("path",{id:"\u5F62\u72B6",d:"M5.33164931,0.259428793 L5.41390635,0.329520326 L6.32615229,1.25965344 L10.5629218,5.52973092 C10.6495848,5.61489811 10.6983993,5.73131101 10.6983993,5.85281791 C10.6983993,5.94394808 10.6709412,6.03221288 10.6206512,6.10657956 L10.5629218,6.1759049 L6.48269959,10.3027582 C6.39530407,10.3923349 6.27474412,10.4417645 6.14962023,10.4395632 C6.05588849,10.4405855 5.9648083,10.4131446 5.88806813,10.3618406 L5.81654086,10.3027582 L1.71633386,6.1759049 C1.56116658,6.01823995 1.54177067,5.7771684 1.65814613,5.5986518 L1.71633386,5.52640013 L5.2,1.92171506 L4.56301118,1.2771108 C4.31114711,1.0222356 4.30144815,0.615265312 4.54088474,0.348681376 L4.56709113,0.321298819 C4.77696835,0.115457699 5.09984919,0.0954948238 5.33164931,0.259428793 Z M11.3635431,7.11135538 L11.5458592,6.84206363 L11.5858287,6.90201791 C12.2786338,7.9079176 12.6117286,8.58739951 12.6117286,8.98043316 C12.6125979,9.26399901 12.5007996,9.53630206 12.3009129,9.73743804 C12.1010263,9.93857403 11.829425,10.0520667 11.5458592,10.0529487 C11.2622933,10.0520667 10.9906921,9.93857403 10.7908054,9.73743804 C10.5909187,9.53630206 10.4791205,9.26399901 10.4799898,8.98043316 C10.4799898,8.61547334 10.7700724,7.99778106 11.3635431,7.11135538 Z M6.05549178,2.83601696 L5.99849921,2.87128414 L5.97995453,2.87128414 L3.17599905,5.6937843 C3.15357316,5.71575203 3.13627023,5.74215179 3.12506348,5.77109436 L3.11294715,5.81617918 L9.16963934,5.81617918 L9.15832649,5.77850587 L9.14367679,5.74200046 L9.09916956,5.68636643 L6.30263195,2.87128414 C6.23217982,2.81250552 6.13616785,2.80074979 6.05549178,2.83601696 Z",fill:"#2D3645","fill-rule":"nonzero"},null,-1),ua=D({props:{color:{default:"#000"}},setup(e){return(t,n)=>(g(),S("svg",oa,[la,b("g",ra,[b("g",sa,[aa,b("polygon",{id:"\u8DEF\u5F84",fill:e.color,"fill-rule":"nonzero",points:"12.8333333 11.4683817 12.8333333 13.9683817 1.16666667 13.9683817 1.16666667 11.4683817"},null,8,ia),ca])])]))}}),da=z.global.t;var ma={name:"backColor",invoke:e=>{var t,n;(t=T.value)==null||t.execCommand("styleWithCSS",!1,"true"),(n=T.value)==null||n.execCommand("backColor",!1,e)},component:Qo,order:21,display:da("common.backColor"),active:()=>T.value?T.value.queryCommandValue("backColor"):!1,params:{icon:ua}},fa=Object.freeze(Object.defineProperty({__proto__:null,default:ma},Symbol.toStringTag,{value:"Module"}));const He=D({props:{action:null},setup(e){const t=e,n=p(!1);return he(()=>be.value,()=>{!t.action.active||(n.value=t.action.active())},{immediate:!0,deep:!0}),(o,l)=>{const s=Ne;return g(),S("div",{class:Ge(["rounded-normal p-4 hover:bg-blue/10 flex items-center cursor-pointer",n.value?"bg-blue/10":""]),onClick:l[0]||(l[0]=a=>e.action.invoke())},[c(s,{class:Ge(["iconfont w-24 h-24",e.action.icon])},null,8,["class"])],2)}}}),pa=z.global.t,va={name:"bold",invoke:()=>$(void 0,null,function*(){T.value.execCommand("styleWithCSS",!1,"true"),T.value.execCommand("bold"),Ce(be)}),component:He,order:10,icon:"icon-bold",display:pa("common.bold"),divider:!0,active:()=>T.value.queryCommandValue("bold")=="true"};var ga=Object.freeze(Object.defineProperty({__proto__:null,default:va},Symbol.toStringTag,{value:"Module"})),_a={name:"cancel",invoke:()=>{Hn(!0)},component:He,order:2,icon:"icon-close"},ha=Object.freeze(Object.defineProperty({__proto__:null,default:_a},Symbol.toStringTag,{value:"Module"}));const ya={class:"text-black rounded-normal p-4 hover:bg-blue/10 flex items-center cursor-pointer"},ba={class:"h-24 flex items-center space-x-4 px-4"},xa=D({props:{action:null},setup(e){const t=e,n=[{key:1,value:"10px"},{key:2,value:"13px"},{key:3,value:"16px"},{key:4,value:"18px"},{key:5,value:"24px"},{key:6,value:"32px"},{key:7,value:"48px"}],o=p(3),l=K(()=>{const s=n.find(a=>a.key==o.value);return s?s.value:"16px"});return he(()=>be.value,()=>{!t.action.active||(o.value=parseInt(t.action.active()))},{immediate:!0,deep:!0}),(s,a)=>{const u=Ne,i=Xl,d=Yl,v=er;return g(),E(v,{trigger:"click",onCommand:a[0]||(a[0]=m=>e.action.invoke(m))},{dropdown:f(()=>[c(d,null,{default:f(()=>[(g(),S(Z,null,se(n,m=>c(i,{key:m.key,command:m.key},{default:f(()=>[b("div",null,A(m.value),1)]),_:2},1032,["command"])),64))]),_:1})]),default:f(()=>[b("div",ya,[b("div",ba,[b("span",null,A(r(l)),1),c(u,{class:"iconfont icon-pull-down text-s leading-none"})])])]),_:1})}}}),ka=z.global.t;var wa={name:"fontSize",invoke:e=>{var t,n;(t=T.value)==null||t.execCommand("styleWithCSS",!1,"true"),(n=T.value)==null||n.execCommand("fontSize",!1,e),Ce(be)},component:xa,order:13,icon:"icon-underline",display:ka("common.fontSize"),active:()=>T.value.queryCommandValue("fontSize")},$a=Object.freeze(Object.defineProperty({__proto__:null,default:wa},Symbol.toStringTag,{value:"Module"}));const Ca={width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Ea=b("title",null,"text-color",-1),Sa={id:"\u5F39\u7A97",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Fa={id:"text-color"},Aa=b("rect",{id:"\u77E9\u5F62\u5907\u4EFD-22",opacity:"0.43859282",x:"0",y:"0",width:"14",height:"14"},null,-1),Ta=["fill"],Va=b("path",{id:"\u5F62\u72B6",d:"M7.01302083,0.31 C7.33130787,0.31 7.55185828,0.448888889 7.69753444,0.749529035 L7.74869792,0.869895833 L10.7760417,9.04697917 C10.828125,9.19020833 10.8476562,9.28786458 10.8476562,9.3725 C10.8476562,9.67197917 10.6002604,9.88682292 10.2617188,9.88682292 C10.0053711,9.88682292 9.84372965,9.78214762 9.73317973,9.54662821 L9.68880208,9.43760417 L8.85546875,7.106875 L5.13802083,7.106875 L4.31119792,9.43760417 C4.20052083,9.75010417 4.03125,9.88682292 3.73828125,9.88682292 C3.39973958,9.88682292 3.15234375,9.67197917 3.15234375,9.3725 C3.15234375,9.30902344 3.16333008,9.23822266 3.1907959,9.14636475 L3.22395833,9.04697917 L6.24479167,0.87640625 C6.38802083,0.492291667 6.62890625,0.31 7.01302083,0.31 Z M7.01953125,1.82692708 L6.98046875,1.82692708 L5.4765625,6.11078125 L8.5234375,6.11078125 L7.01953125,1.82692708 Z",fill:"#2D3645","fill-rule":"nonzero"},null,-1),La=D({props:{color:{default:"#000"}},setup(e){return(t,n)=>(g(),S("svg",Ca,[Ea,b("g",Sa,[b("g",Fa,[Aa,b("polygon",{id:"\u8DEF\u5F84",fill:e.color,"fill-rule":"nonzero",points:"12.8333333 11.4623437 12.8333333 13.9623437 1.16666667 13.9623437 1.16666667 11.4623437"},null,8,Ta),Va])])]))}}),Da=z.global.t;var Ma={name:"foreColor",invoke:e=>{var t,n;(t=T.value)==null||t.execCommand("styleWithCSS",!1,"true"),(n=T.value)==null||n.execCommand("foreColor",!1,e),Ce(be)},component:Qo,order:20,icon:"icon-a-writein3",display:Da("common.textColor"),active:()=>T.value?T.value.queryCommandValue("foreColor"):!1,params:{icon:La}},Ia=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"}));const Ba=z.global.t;var Pa={name:"image",invoke:()=>$(void 0,null,function*(){const e=yield sn();T.value.execCommand("insertImage",!1,e[0].url),setTimeout(()=>{var t;(t=T.value)==null||t.dispatchEvent(new Event("scroll"))},100)}),component:He,order:30,icon:"icon-photo",display:Ba("common.insertImage"),divider:!0,active:()=>T.value.queryCommandValue("insertImage")},ja=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"}));const za=z.global.t;var Oa={name:"italic",invoke:()=>$(void 0,null,function*(){var e;(e=T.value)==null||e.execCommand("italic"),Ce(be)}),component:He,order:11,icon:"icon-italic",display:za("common.italic"),active:()=>T.value.queryCommandValue("italic")==="true"},Na=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"}));const Ha={class:"px-32 py-24"},Ua=D({setup(e){const{t}=H(),n=p(!0),o=Zo.value,l=De(o,"href"),s=p(!1),a=()=>{s.value=!0,n.value=!1},u=()=>Ra(s.value,[l]);return(i,d)=>{const v=Ee,m=Vn,_=Ln,h=Tn,w=Yt,y=G;return g(),E(y,{modelValue:n.value,"onUpdate:modelValue":d[2]||(d[2]=x=>n.value=x),width:"600px","close-on-click-modal":!1,title:r(t)("common.link"),"custom-class":"el-dialog--zero-padding",draggable:"",onClosed:u},{footer:f(()=>[c(Se,{onConfirm:a,onCancel:d[1]||(d[1]=x=>n.value=!1)})]),default:f(()=>[c(v,{content:r(t)("common.linkDialogTip")},null,8,["content"]),b("div",Ha,[c(w,{ref:"form","label-position":"top"},{default:f(()=>[c(h,{label:r(t)("common.url")},{default:f(()=>[c(_,{modelValue:r(l),"onUpdate:modelValue":d[0]||(d[0]=x=>U(l)?l.value=x:null),filterable:"","allow-create":"","default-first-option":"",class:"w-full"},{default:f(()=>[(g(!0),S(Z,null,se(r(tl),x=>(g(),E(m,{key:x,label:x,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},512)])]),_:1},8,["modelValue","title"])}}}),Nn=p(!1);let At;const Zo=p(),Xo=e=>$(void 0,null,function*(){return At=new q,Zo.value=e,Nn.value=!0,yield At.promise}),Ra=(e,t)=>{e?At.resolve(t):At.reject(),Nn.value=!1},Wa=z.global.t;var qa={name:"link",invoke:()=>$(void 0,null,function*(){const e=yield Xo(document.createElement("a"));T.value.execCommand("createLink",!1,e[0].value)}),component:He,order:31,display:Wa("common.insertLink"),icon:"icon-link1",active:()=>T.value.queryCommandValue("createLink")},Ka=Object.freeze(Object.defineProperty({__proto__:null,default:qa},Symbol.toStringTag,{value:"Module"})),Ga={name:"save",invoke:()=>{Hn(!1)},component:He,order:1,icon:"icon-yes3",divider:!0},Ja=Object.freeze(Object.defineProperty({__proto__:null,default:Ga},Symbol.toStringTag,{value:"Module"}));const Qa=z.global.t;var Za={name:"underline",invoke:()=>$(void 0,null,function*(){var e;(e=T.value)==null||e.execCommand("underline"),Ce(be)}),component:He,order:12,icon:"icon-underline",display:Qa("common.underline"),active:()=>T.value.queryCommandValue("underline")==="true"},Xa=Object.freeze(Object.defineProperty({__proto__:null,default:Za},Symbol.toStringTag,{value:"Module"}));const po={"./back-color.ts":fa,"./bold.ts":ga,"./cancel.ts":ha,"./font-size.ts":$a,"./fore-color.ts":Ia,"./image.ts":ja,"./italic.ts":Na,"./link.ts":Ka,"./save.ts":Ja,"./underline.ts":Xa};function Ya(){const e=[];for(const t in po){const n=po[t].default;e.push(n)}return e.sort((t,n)=>t.order-n.order)}const Yo=D({props:{handler:null,init:null},setup(e){const t=e,n=p("end"),o=p(),l=p({x:0,y:0}),s=p(t.init);var a=new Image;a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";const u=d=>{n.value="start";const v=d.dataTransfer;v.setDragImage(a,0,0),v.effectAllowed="none";const m=o.value.getBoundingClientRect();l.value={x:d.x-m.x,y:d.y-m.y}},i=d=>{d.preventDefault(),s.value.x=d.x-l.value.x,s.value.y=d.y-l.value.y};return he(()=>t.handler,()=>{!t.handler||(t.handler.draggable=!0,t.handler.ondragstart=u,t.handler.ondragover=i,t.handler.ondragend=()=>n.value="end")},{immediate:!0}),he(()=>t.init,()=>s.value=t.init),(d,v)=>(g(),S(Z,null,[b("div",{class:Ge(["fixed",n.value!=="end"?"inset-0":""]),onDragover:i},null,34),b("div",{ref_key:"container",ref:o,class:"fixed",style:ce({top:s.value.y+"px",left:s.value.x+"px"})},[Vl(d.$slots,"default")],4)],64))}}),ei=D({setup(e){const t=it(Y.value),n=p(),o=p(),l=Ya(),s=ct(()=>{let a=40;n.value&&(a=it(n.value).height);let u=t.y+ee.value.y-a,i=t.x+ee.value.x;return u=u<0?0:u,i=i<0?0:i,{x:i,y:u}});return(a,u)=>{const i=Ne,d=Vr;return g(),E(Yo,{handler:o.value,init:r(s)},{default:f(()=>[b("div",{ref_key:"barElement",ref:n,class:"shadow-s-10 bg-fff py-4 p-x-8 rounded-normal flex items-center fixed text-m"},[b("div",{ref_key:"handleElement",ref:o,class:"rounded-normal py-4 px-8 cursor-move"},[c(i,{class:"iconfont icon-move"})],512),(g(!0),S(Z,null,se(r(l),v=>(g(),S(Z,{key:v.name},[v.divider?(g(),E(d,{key:0,direction:"vertical"})):F("",!0),(g(),E(kt(v.component),{action:v,title:v.display},null,8,["action","title"]))],64))),128))],512)]),_:1},8,["handler","init"])}}}),ti={key:0},ni=D({props:{color:null},setup(e){const t=ct(()=>it(Y.value)),n=o=>{const l=T.value.documentElement;!l||(l.scrollTop+=o.deltaY,l.scrollLeft+=o.deltaX)};return(o,l)=>{const s=Ne,a=ue;return r(t)&&r(re)?(g(),S("div",ti,[b("div",{class:"absolute top-0 left-0 right-0",style:ce({height:r(t).y+r(ee).y+"px",left:r(t).x+r(ee).x+"px",opacity:.5,backgroundColor:e.color||"black"}),onWheel:n},null,36),b("div",{class:"absolute bottom-0 right-0",style:ce({left:r(t).x+r(ee).x+r(t).width+"px",top:r(t).y+r(ee).y+"px",opacity:.5,backgroundColor:e.color||"black"}),onWheel:n},null,36),b("div",{class:"absolute bottom-0 left-0",style:ce({width:r(t).x+r(ee).x+r(t).width+"px",top:r(t).y+r(ee).y+r(t).height+"px",opacity:.5,backgroundColor:e.color||"black"}),onWheel:n},null,36),b("div",{class:"absolute top-0 left-0",style:ce({width:r(t).x+r(ee).x+"px",height:r(t).y+r(ee).y+r(t).height+"px",opacity:.5,backgroundColor:e.color||"black"}),onWheel:n},null,36),c(a,{circle:"",bg:"",type:"info",class:"absolute top-24 right-24",onClick:l[0]||(l[0]=u=>r(Hn)(!0))},{default:f(()=>[c(s,{color:"white"},{default:f(()=>[c(r(Hr))]),_:1})]),_:1})])):F("",!0)}}}),oi={key:0},li=D({setup(e){return(t,n)=>r(re)?(g(),S("div",oi,[c(ni),c(ei)])):F("",!0)}}),re=p(!1);let We;function ri(e){return $(this,null,function*(){if(re.value)return;e.setAttribute(ao,"true"),e.onclick_bak=e.onclick,e.onclick=n=>{n.stopPropagation(),n.preventDefault()};const t=new MutationObserver(()=>{Ce(Y)});t.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),re.value=!0,We=new q;try{yield We.promise}finally{e.removeAttribute(ao),e.onclick=e.onclick_bak,t.disconnect(),re.value=!1}})}function Hn(e){e?We.reject():We==null||We.resolve();const t=Ze.value.getSelection();!t||("empty"in t&&t.empty(),"removeAllRanges"in t&&t.removeAllRanges())}const si=["onWheel","onScroll"],ai={key:1,class:"fixed inset-0 bg-gray z-100"},ii=D({props:{content:null},setup(e){const{t}=H(),n=Il(),o=location.href,l=p(),s=k=>{if(re.value)return;const C=_(k);!C||(Y.value=C,Ue.value={x:k.x,y:k.y},v())},a=p(!1),u=p(!1);let i;function d(){v(),clearTimeout(i),a.value=!0,i=setTimeout(()=>{a.value=!1},100)}function v(){var L,P,I,B,V,j;const k=(I=(P=(L=T.value)==null?void 0:L.documentElement)==null?void 0:P.getBoundingClientRect())==null?void 0:I.width,C=(j=(V=(B=Je.value)==null?void 0:B.element)==null?void 0:V.getBoundingClientRect())==null?void 0:j.left;l.value={left:C,width:k}}function m(k){const C=_(k);C&&($e.value=C),v()}function _(k){var L;const C=T.value.elementFromPoint(k.x-ee.value.x,k.y-ee.value.y);if(!rn.includes((L=C==null?void 0:C.tagName)==null?void 0:L.toLowerCase()))return C}function h(){u.value=!0}function w(){return $(this,null,function*(){if(Be.value)try{yield Xe(t("common.reloadTip"));const k=Re("path");yield Mo(k)}catch(k){}location.href=o})}const y=k=>{const C=k.addEventListener;C("scroll",function(){Ce(Y),Ce($e)}),C("selectionchange",function(L){!re.value||(be.value=L)}),Ze.value.onbeforeunload=()=>{if(Vt.value)return Vt.value},Ze.value.onunload=h},x=K(()=>{const k=Qe.value.size;return k&&`${Qe.value.size}px !important`});return(k,C)=>{var B,V,j,X,J;const L=ue,P=Tr,I=Zl;return Ll((g(),S("div",{style:ce({width:r(x)}),class:"h-full my-0 mx-auto"},[e.content&&((V=(B=r(n))==null?void 0:B.site)==null?void 0:V.baseUrl)?(g(),E(Ar,{key:0,ref:an=>Je.value=an,content:e.content,"agent-events":y},null,8,["content"])):F("",!0),b("div",{class:"fixed inset-0",style:ce({display:a.value||r(re)?"none":"block",cursor:(j=r($e))==null?void 0:j.style.cursor,width:((X=l.value)==null?void 0:X.width)+"px",left:((J=l.value)==null?void 0:J.left)+"px",top:0,bottom:0}),onPointermove:m,onWheel:at(d,["stop","prevent"]),onScroll:at(d,["stop","prevent"]),onClick:s},null,44,si),u.value?(g(),S("div",ai,[c(P,{icon:"warning",title:r(t)("common.notEditableTitle"),"sub-title":r(t)("common.notEditableTip")},{extra:f(()=>[c(L,{type:"primary",onClick:w},{default:f(()=>[R(A(r(t)("common.refresh")),1)]),_:1})]),_:1},8,["title","sub-title"])])):F("",!0)],4)),[[I,!e.content]])}}}),vo=D({props:{position:null,color:null,width:null},setup(e){return(t,n)=>(g(),S("div",{class:"absolute pointer-events-none",style:ce({top:e.position.y+r(ee).y+"px",left:e.position.x+r(ee).x+"px",width:e.position.width+"px",height:e.position.height+"px",outlineStyle:"solid",outlineColor:e.color||"red",outlineWidth:(e.width||1)+"px"})},null,4))}}),ci={key:0},ui=D({setup(e){const t=K(()=>it(Y.value)),n=K(()=>it($e.value));return(o,l)=>r(re)?F("",!0):(g(),S("div",ci,[r(n)?(g(),E(vo,{key:0,position:r(n),color:"rgba(34, 150, 243,.8)",width:2},null,8,["position"])):F("",!0),r(t)?(g(),E(vo,{key:1,position:r(t),width:1},null,8,["position"])):F("",!0)]))}}),{t:mn}=z.global,el=Ql(),tl=p([]);tr().then(e=>tl.value=e.pages.map(t=>t.url));const Tt=[{name:"full",size:void 0,display:mn("common.fullScreen")},{name:"pad",size:820,display:mn("common.pad")},{name:"phone",size:390,display:mn("inlineDesign.phone")}],be=p(),Y=p(),$e=p(),Ue=p(),di=p("en"),Je=p(),Vt=p(),nl=e=>{var t;return(t=Tt.find(n=>n.name==e))!=null?t:Tt[0]},Qe=p(nl(el.inlineDesignWidth.value)),mi=e=>{Qe.value=nl(e),el.inlineDesignWidth.value=Qe.value.name},ee=ct(()=>{if(!Je.value||Qe.value==Tt[0])return{x:0,y:0};const e=Je.value.element.getBoundingClientRect();return{x:e.x,y:e.y}}),T=ct(()=>{var e,t;return(t=(e=Je.value)==null?void 0:e.element)==null?void 0:t.contentDocument}),Ze=ct(()=>{var e,t;return(t=(e=Je.value)==null?void 0:e.element)==null?void 0:t.contentWindow}),{t:ol}=z.global,fi="click",pi=ol("common.trigger"),vi="icon-Select3",gi=50;function _i(e){return!!e}function hi(e){return $(this,null,function*(){Vt.value=ol("common.clickLeaveTip"),setTimeout(()=>{Vt.value=""},500),yield ho(),e.click()})}var yi=Object.freeze(Object.defineProperty({__proto__:null,name:fi,display:pi,icon:vi,order:gi,active:_i,invoke:hi},Symbol.toStringTag,{value:"Module"}));const{t:bi}=z.global,xi="copyDom",ki=bi("common.copy"),wi="icon-copy",$i=9;function Ci(e){if(ye(e))return!1;const t=N(e);if(!t)return!1;const n=M(t.element);return Ae(n)?!1:Fe(n,t.element)?!W(n):gt(n,e)}function Ei(e){const{element:t,isSelf:n}=N(e),o=n?e.parentElement:t,l=o.innerHTML,s=So(e.outerHTML);e.parentElement.insertBefore(s,e.nextSibling);const a=fe(o),u=ve(a,l),i=Si(e);if(!i)throw new Error("can not get change");u.changes.push(i),ae([u])}function Si(e){const t=M(e),n=Te(t,e);if(n)return n;const o=O(t,ie);if(o){const{element:l,isSelf:s}=N(e,o),a=ne(l);return dt(l,s?"brothers":"children"),{source:o.source,id:o.id,action:s?"copy":"update",koobooId:a,value:oe(l.innerHTML)}}}var Fi=Object.freeze(Object.defineProperty({__proto__:null,name:xi,display:ki,icon:wi,order:$i,active:Ci,invoke:Ei},Symbol.toStringTag,{value:"Module"}));function ll(e,t){const n=e.style.getPropertyValue(t),o=e.style.getPropertyPriority(t);let l,s;return{changes:[],undo:()=>{l=e.style.getPropertyValue(t),s=e.style.getPropertyPriority(t),e.style.setProperty(t,n,o)},redo:()=>{e.style.setProperty(t,l,s)}}}const Ai=["title"],Ti={class:"space-x-4 space-y-4"},Vi={class:"flex"},Li={class:"flex items-center space-x-8 p-4 max-w-230px w-full justify-end"},Di={class:"flex-1 ellipsis"},Mi=D({setup(e){const{t}=H(),n=p(!0),o=[],l=p(!1),s=Jo(T.value,Ze.value),a=h=>{if(!h)return t("common.page");const w=h.split("/");return w[w.length-1]},u=h=>[a(h.file),h.media,h.selectorText].filter(w=>!!w).join(" > "),i=h=>{if(h.type=="inline"){const{element:w,isSelf:y}=N(h.owner),x=y?h.owner.parentElement:w,k=x.innerHTML,C=h.owner.style.getPropertyPriority(h.property);h.owner.style.setProperty(h.property,h.value,C);const L=fe(x),P=ve(L,k),I=d(h);if(!I)throw new Error("can not get change");P.changes.push(I),o.push(P)}else if(h.rule){const w=ll(h.rule,h.property),y=h.rule.style.getPropertyPriority(h.property);h.rule.style.setProperty(h.property,h.value,y);const x=M(h.owner),k=O(x,ie);w.changes.push({source:k==null?void 0:k.source,id:k==null?void 0:k.id,action:"styleSheet",mediarulelist:h.media,property:h.property,selector:h.selectorText,url:h.file,koobooId:ne(h.owner),important:y,value:h.value}),o.push(w)}};function d(h){if(!!jn(h.owner))return On(h.owner)}const v=h=>{h.scrollIntoView({behavior:"smooth"}),$e.value=h},m=()=>{l.value=!0,n.value=!1};function _(h){return $(this,null,function*(){!l.value&&o.length&&(yield Xe(t("common.unsavedChangesLeaveTips"))),h()})}return(h,w)=>{const y=en,x=Lo,k=nn,C=An,L=tn,P=on,I=ue,B=G;return g(),E(B,{"model-value":n.value,width:"800px","close-on-click-modal":!1,title:r(t)("common.colorList"),draggable:"","custom-class":"el-dialog--zero-padding","before-close":_,onClosed:w[1]||(w[1]=V=>r(Ii)(l.value,o))},Qt({default:f(()=>[r(_t).length?(g(),E(k,{key:0},{default:f(()=>[c(L,{data:r(_t),"max-height":"540px"},{default:f(()=>[c(y,{width:"20px"}),c(y,{label:r(t)("common.path")},{default:f(({row:V})=>[b("div",{class:"ellipsis",title:u(V)},A(u(V)),9,Ai)]),_:1},8,["label"]),c(y,{label:r(t)("common.references"),width:"100",align:"center"},{default:f(({row:V})=>[c(C,{placement:"auto",trigger:"hover",width:240,onBeforeEnter:j=>V.renderReferences=!0,onAfterLeave:j=>V.renderReferences=!1},{reference:f(()=>[c(x,{round:"",class:"cursor-pointer"},{default:f(()=>[R(A(V.references.length),1)]),_:2},1024)]),default:f(()=>[V.renderReferences?(g(),E(k,{key:0,height:"180px"},{default:f(()=>[b("div",Ti,[(g(!0),S(Z,null,se(V.references,(j,X)=>(g(),E(x,{key:X,class:"cursor-pointer",size:"small",round:"",onPointerenter:J=>v(j)},{default:f(()=>[R(A(j.tagName),1)]),_:2},1032,["onPointerenter"]))),128))])]),_:2},1024)):F("",!0)]),_:2},1032,["onBeforeEnter","onAfterLeave"])]),_:1},8,["label"]),c(y,{label:r(t)("common.property"),width:"150"},{default:f(({row:V})=>[b("div",Vi,[c(x,{type:"success",round:"",title:V.property},{default:f(()=>[R(A(V.property),1)]),_:2},1032,["title"])])]),_:1},8,["label"]),c(y,{label:r(t)("common.value"),width:"230"},{default:f(({row:V})=>[c(Sn,{modelValue:V.value,"onUpdate:modelValue":[j=>V.value=j,j=>i(V)],"show-alpha":"",predefine:r(s)},{default:f(({color:j})=>[b("div",Li,[b("p",Di,A(V.value),1),b("div",{style:ce({backgroundColor:j}),class:"w-24 h-24 rounded-4px shadow-s-10"},null,4)])]),_:2},1032,["modelValue","onUpdate:modelValue","predefine"])]),_:1},8,["label"]),c(y,{width:"20px"})]),_:1},8,["data"])]),_:1})):(g(),E(P,{key:1}))]),_:2},[r(_t).length?{name:"footer",fn:f(()=>[c(I,{round:"",onClick:w[0]||(w[0]=V=>_(()=>n.value=!1))},{default:f(()=>[R(A(r(t)("common.cancel")),1)]),_:1}),c(I,{type:"primary",round:"",onClick:m},{default:f(()=>[R(A(r(t)("common.save")),1)]),_:1})])}:void 0]),1032,["model-value","title"])}}}),Un=p(!1);let Lt;const _t=p([]),rl=e=>$(void 0,null,function*(){if(!!e)return Lt=new q,Un.value=!0,_t.value=sl(e),yield Lt.promise}),Ii=(e,t)=>{if(e)t.length&&ae(t),Lt.resolve();else{for(const n of[...t].reverse())n.undo();Lt.reject()}Un.value=!1};function sl(e){const t=_e(e,!0,!0).filter(l=>!ye(l)),n=Go(T.value,Ze.value,t),o=[];for(const l of n)switch(l.type){case"file":o.push(l);break;case"embedded":case"inline":o.push(l);break}return o}const{t:Bi}=z.global,Pi="editColor",ji=Bi("common.color"),zi="icon-background-color",Oi=9;function Ni(e){return sl(e).length>0}function Hi(e){rl(e)}var Ui=Object.freeze(Object.defineProperty({__proto__:null,name:Pi,display:ji,icon:zi,order:Oi,active:Ni,invoke:Hi},Symbol.toStringTag,{value:"Module"}));const Ri=D({setup(e){const{t}=H();return(n,o)=>r(tt)?(g(),E(nr,{key:0,modelValue:r(tt),"onUpdate:modelValue":o[0]||(o[0]=l=>U(tt)?tt.value=l:null),current:r(Rn),alert:r(t)("common.immediatelyChange"),onSuccess:r(qi)},null,8,["modelValue","current","alert","onSuccess"])):F("",!0)}}),tt=p(!1);let Dt;const Rn=p(),Wi=e=>$(void 0,null,function*(){return Rn.value=yield or({id:e,name:e}),tt.value=!0,Dt=new q,yield Dt.promise}),qi=e=>{e?Dt.resolve(Rn.value):Dt.reject()},{t:Ki}=z.global,Gi="editConfig",Ji=Ki("common.config"),Qi="icon-a-setup",Zi=0,Xi=!0;function Yi(e){const t=M(e);return!!pe(t,ft)}function ec(e){return $(this,null,function*(){const t=M(e),n=pe(t,ft);yield Wi(n.key),location.reload()})}var tc=Object.freeze(Object.defineProperty({__proto__:null,name:Gi,display:Ji,icon:Qi,order:Zi,immediate:Xi,active:Yi,invoke:ec},Symbol.toStringTag,{value:"Module"}));const nc={class:"px-32 py-24"},oc=D({setup(e){const{t}=H(),n=p(),o=p(!1),l=p(!0),s=p();setTimeout(()=>{document.querySelectorAll(".tox-tinymce-aux").forEach(i=>{var d;(d=s.value)==null||d.appendChild(i)})},500);const a=()=>$(this,null,function*(){yield n.value.save(),o.value=!0,l.value=!1});return(u,i)=>{const d=Ee,v=G;return g(),E(v,{modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=m=>l.value=m),width:"800px","close-on-click-modal":!1,title:r(t)("common.textContent"),"custom-class":"el-dialog--zero-padding",onClosed:i[2]||(i[2]=m=>r(rc)(o.value))},{footer:f(()=>[c(Se,{onConfirm:a,onCancel:i[0]||(i[0]=m=>l.value=!1)})]),default:f(()=>[c(d,{content:r(t)("common.immediatelyChange")},null,8,["content"]),b("div",nc,[c(rr,{id:r(al),ref_key:"form",ref:n,"folder-id":r(Jl)},null,8,["id","folder-id"])]),b("div",{ref_key:"tinymceAuxNewContainer",ref:s},null,512)]),_:1},8,["modelValue","title"])}}}),Wn=p(!1);let Mt;const al=p(),lc=e=>$(void 0,null,function*(){return al.value=e,Wn.value=!0,Mt=new q,yield Mt.promise}),rc=e=>{e?Mt.resolve():Mt.reject(),Wn.value=!1},{t:sc}=z.global,ac="editContent",ic=sc("common.content"),cc="icon-form",uc=0,dc=!0;function mc(e){const t=M(e);return!!pe(t,mt,!1)}function fc(e){return $(this,null,function*(){const t=M(e),n=pe(t,mt,!1);yield lc(n.id),location.reload()})}var pc=Object.freeze(Object.defineProperty({__proto__:null,name:ac,display:ic,icon:cc,order:uc,immediate:dc,active:mc,invoke:fc},Symbol.toStringTag,{value:"Module"}));const vc={class:"px-32 py-24"},gc=D({setup(e){const{t}=H(),n=p(),o=p(!1),l=p(!0),s=p();setTimeout(()=>{document.querySelectorAll(".tox-tinymce-aux").forEach(i=>{var d;(d=s.value)==null||d.appendChild(i)})},500);const a=()=>$(this,null,function*(){yield n.value.save(),o.value=!0,l.value=!1});return(u,i)=>{const d=Ee,v=ue,m=G;return g(),E(m,{modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=_=>l.value=_),width:"800px","close-on-click-modal":!1,title:r(t)("common.database"),"custom-class":"el-dialog--zero-padding",onClosed:i[2]||(i[2]=_=>r(hc)(o.value))},{footer:f(()=>[c(v,{round:"",onClick:i[0]||(i[0]=_=>l.value=!1)},{default:f(()=>[R(A(r(t)("common.cancel")),1)]),_:1}),c(v,{type:"primary",round:"",onClick:a},{default:f(()=>[R(A(r(t)("common.save")),1)]),_:1})]),default:f(()=>[c(d,{content:r(t)("common.immediatelyChange")},null,8,["content"]),b("div",vc,[c(sr,{id:r(il),ref_key:"form",ref:n,"db-type":r(ul),table:r(cl)},null,8,["id","db-type","table"])]),b("div",{ref_key:"tinymceAuxNewContainer",ref:s},null,512)]),_:1},8,["modelValue","title"])}}}),qn=p(!1);let It;const il=p(),cl=p(),ul=p(),_c=(e,t,n)=>$(void 0,null,function*(){return ul.value=e,cl.value=t,il.value=n,qn.value=!0,It=new q,yield It.promise}),hc=e=>{e?It.resolve():It.reject(),qn.value=!1},{t:yc}=z.global,bc="editDatabase",xc=yc("common.database"),kc="icon-form",wc=0,$c=!0,Cc={indexdb:"Database",sqlite:"Sqlite",mysql:"MySql",sqlserver:"SqlServer"};function Ec(e){const t=M(e),n=O(t,vt);return!(!n||n.source=="mongo")}function Sc(e){return $(this,null,function*(){const t=M(e),n=O(t,vt);yield _c(Cc[n.source],n.table,n.id),location.reload()})}var Fc=Object.freeze(Object.defineProperty({__proto__:null,name:bc,display:xc,icon:kc,order:wc,immediate:$c,active:Ec,invoke:Sc},Symbol.toStringTag,{value:"Module"}));const{t:Ac}=z.global,Tc="editDom",Vc=Ac("common.edit"),Lc="icon-a-writein",Dc=0,Kn=["img","input","video","audio","table","col","colgroup","tbody","td","tfoot","th","thead","tr","canvas","meter","progress","select","textarea"];function dl(e){var o;if(Kn.includes((o=e.tagName)==null?void 0:o.toLowerCase())||me(e,!0).find(l=>{var s;return((s=l==null?void 0:l.tagName)==null?void 0:s.toLowerCase())=="svg"}))return!1;const t=N(e);if(!t)return!1;const n=M(t.element);return Ae(n)||n.find(l=>l.format=="text")?!1:Fe(n)?!W(n):W(n)||n.find(l=>l.source===null&&l.format=="html")?!1:In(n,e)}function Mc(e){return $(this,null,function*(){Ic(e);const{element:t}=N(e),n=t.innerHTML;try{if(yield ri(e),n==e.innerHTML)return;const o=fe(t),l=ve(o,n),s=Gn(e);if(!s)throw new Error("can not get change");l.changes.push(s),ae([l])}catch(o){t.innerHTML=n}})}function Gn(e){const t=M(e),n=Te(t);if(n)return n;const o=O(t,ie);if(!o)return;const{element:l}=N(e,o),s=ne(l);return dt(l),{source:o.source,id:o.id,action:"update",koobooId:s,value:oe(l.innerHTML)}}function Ic(e){T.value.onselectstart=null,T.value.documentElement.style.userSelect="all",e.onselectstart=null,e.style.userSelect="all"}var Bc=Object.freeze(Object.defineProperty({__proto__:null,name:Tc,display:Vc,icon:Lc,order:Dc,ignoreTags:Kn,active:dl,invoke:Mc,getChange:Gn},Symbol.toStringTag,{value:"Module"}));const Pc={class:"px-32 py-24"},jc=D({setup(e){const{t}=H(),n=p(),o=p(!1),l=p(!0),s=p();setTimeout(()=>{document.querySelectorAll(".tox-tinymce-aux").forEach(i=>{var d;(d=s.value)==null||d.appendChild(i)})},500);const a=()=>$(this,null,function*(){yield n.value.save(),o.value=!0,l.value=!1});return(u,i)=>{const d=Ee,v=G;return g(),E(v,{modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=m=>l.value=m),width:"1000px","close-on-click-modal":!1,title:r(t)("common.htmlBlock"),"custom-class":"el-dialog--zero-padding","append-to-body":"",onClosed:i[2]||(i[2]=m=>r(Nc)(o.value,n.value.model))},{footer:f(()=>[c(Se,{onConfirm:a,onCancel:i[0]||(i[0]=m=>l.value=!1)})]),default:f(()=>[c(d,{content:r(t)("common.immediatelyChange")},null,8,["content"]),b("div",Pc,[c(Dr,{id:r(ml),ref_key:"form",ref:n},null,8,["id"])]),b("div",{ref_key:"tinymceAuxNewContainer",ref:s},null,512)]),_:1},8,["modelValue","title"])}}}),zc=z.global.t,Jn=p(!1);let Bt;const ml=p(),Oc=e=>$(void 0,null,function*(){return ml.value=e,Jn.value=!0,Bt=new q,yield Bt.promise}),Nc=(e,t)=>{e?($n.success(zc("common.saveSuccess")),Bt.resolve(t)):Bt.reject(),Jn.value=!1},{t:Hc}=z.global,Uc="editHtmlblock",Rc=Hc("common.htmlBlock"),Wc="icon-html",qc=0,Kc=!0;function Gc(e){const t=M(e);return!!pe(t,Mn)}function Jc(e){return $(this,null,function*(){const t=M(e),n=pe(t,Mn);yield Oc(n.id),location.reload()})}var Qc=Object.freeze(Object.defineProperty({__proto__:null,name:Uc,display:Rc,icon:Wc,order:qc,immediate:Kc,active:Gc,invoke:Jc},Symbol.toStringTag,{value:"Module"}));const Zc={class:"flex w-full space-x-16"},Xc={class:"flex-1 items-center justify-center h-280px overflow-hidden rounded-normal relative"},Yc={class:"flex-1"},eu={class:"el-form-item__label"},tu={class:"text-s text-999"},nu={class:"flex space-x-8 w-full"},ou={class:"px-12"},lu={class:"px-12"},ru=D({setup(e){var I,B;const{t}=H(),n=p(!0),o=p(),l=p(!1),s=p();we(ht.value,"picture")?s.value=_e(ht.value):s.value=[ht.value];const a=K(()=>s.value.find(V=>we(V,"img"))),u=K(()=>s.value.filter(V=>we(V,"source"))),i=De(a.value,"src"),d=Dl(i.value),v=[];if(d)try{for(const V of a.value.getAttributeNames())["src","title","alt","srcset","id","name"].includes(V)||(I=a.value.getAttribute(V))!=null&&I.endsWith(d)&&v.push(De(a.value,V))}catch(V){console.log(V)}const m=De((B=u.value[0])!=null?B:a.value,"srcset"),_=De(a.value,"width"),h=De(a.value,"height"),w=io(a.value,"width"),y=io(a.value,"height"),x=De(a.value,"alt"),k=p(a.value.src),C=()=>$(this,null,function*(){l.value=!0,n.value=!1}),L=()=>$(this,null,function*(){const j=(yield sn(!1))[0];i.value=j.url,m.value&&(m.value=j.url),k.value=j.previewUrl});he(()=>i.value,()=>{k.value=i.value;for(const V of v)V.value=i.value;if(u.value)for(const V of u.value)V.srcset=i.value});const P=()=>{au(l.value,[i,m,...v,_,h,x])};return(V,j)=>{const X=ut,J=Tn,an=Yt,Al=G;return g(),E(Al,{"model-value":n.value,width:"800px","close-on-click-modal":!1,title:r(t)("common.image"),draggable:"",onClosed:P},{footer:f(()=>[c(Se,{onConfirm:C,onCancel:j[5]||(j[5]=ge=>n.value=!1)})]),default:f(()=>[b("div",Zc,[b("div",Xc,[c(Bn,{src:k.value,"on-select":L},null,8,["src"])]),b("div",Yc,[c(an,{ref_key:"form",ref:o,"label-position":"top"},{default:f(()=>[c(J,null,{label:f(()=>[b("div",eu,[R(A(r(t)("common.size"))+" ",1),b("span",tu,"("+A(r(t)("common.imgSizeTip"))+")",1)])]),default:f(()=>{var ge,so;return[b("div",nu,[c(X,{modelValue:r(_),"onUpdate:modelValue":j[0]||(j[0]=cn=>U(_)?_.value=cn:null),modelModifiers:{number:!0},class:"flex-1",placeholder:(ge=r(w))==null?void 0:ge.toString()},{append:f(()=>[b("span",ou,A(r(t)("common.width")),1)]),_:1},8,["modelValue","placeholder"]),c(X,{modelValue:r(h),"onUpdate:modelValue":j[1]||(j[1]=cn=>U(h)?h.value=cn:null),modelModifiers:{number:!0},class:"flex-1",placeholder:(so=r(y))==null?void 0:so.toString()},{append:f(()=>[b("span",lu,A(r(t)("common.height")),1)]),_:1},8,["modelValue","placeholder"])])]}),_:1}),c(J,{label:"src"},{default:f(()=>[c(X,{modelValue:r(i),"onUpdate:modelValue":j[2]||(j[2]=ge=>U(i)?i.value=ge:null)},null,8,["modelValue"])]),_:1}),c(J,{label:"srcset"},{default:f(()=>[c(X,{modelValue:r(m),"onUpdate:modelValue":j[3]||(j[3]=ge=>U(m)?m.value=ge:null)},null,8,["modelValue"])]),_:1}),c(J,{label:"alt"},{default:f(()=>[c(X,{modelValue:r(x),"onUpdate:modelValue":j[4]||(j[4]=ge=>U(x)?x.value=ge:null)},null,8,["modelValue"])]),_:1})]),_:1},512)])])]),_:1},8,["model-value","title"])}}}),Qn=p(!1),ht=p();let Pt;const su=e=>$(void 0,null,function*(){return Pt=new q,ht.value=e,Qn.value=!0,yield Pt.promise}),au=(e,t)=>{if(e){const n=t.filter(o=>o.value!=o.origin);Pt.resolve(n)}else Pt.reject();Qn.value=!1},{t:iu}=z.global,cu="editImage",uu=iu("common.image"),du="icon-photo",mu=0;function fl(e){if(!we(e,"img"))return;const t=pl(e);t&&(e=t);const n=N(e);if(!n)return!1;const o=M(n.element);return Ae(o)?!1:Fe(o,n.element)?!W(o):W(o,"src")?!1:No(o,n.element,"src")?!W(o,"src"):o.find(l=>l.source===null&&l.format=="attribute"&&l.attribute=="src")?!1:gt(o,e)}function fu(e){return $(this,null,function*(){const t=yield Zn(e);t&&ae([t])})}function Zn(e){return $(this,null,function*(){const t=pl(e);t&&(e=t);const{element:n,isSelf:o}=N(e),l=o?e.parentElement:n,s=l.innerHTML;try{const a=yield su(e);if(!a.length)return;const u=fe(l),i=ve(u,s),d=pu(e,a);if(!d)throw new Error("can not get change");return i.changes.push(...d),i}catch(a){throw e.parentElement.innerHTML=s,new Error("edit image error")}})}function pu(e,t){const n=M(e),o=Te(n);if(o)return[o];const l=O(n,ie);if(!l)return;const{element:s,isSelf:a}=N(e,l),u=ne(s);if(a&&!we(e,"picture")){const i=[];for(const d of t){if(d.origin==d.value)continue;const v=Ko(n,e,d.name);v?i.push(v):i.push({source:l.source,id:l.id,action:"update",koobooId:u,attribute:d.name,value:e.getAttribute(d.name)})}return i}else return[{source:l.source,id:l.id,action:"update",koobooId:u,value:oe(s.innerHTML)}]}function pl(e){const n=me(e).find(o=>we(o,"picture"));if(n)return n}var vu=Object.freeze(Object.defineProperty({__proto__:null,name:cu,display:uu,icon:du,order:mu,active:fl,invoke:fu,editImage:Zn},Symbol.toStringTag,{value:"Module"}));const qe=p(!1);let jt;const vl=p(),gu=e=>$(void 0,null,function*(){return vl.value=e,qe.value=!0,jt=new q,yield jt.promise}),_u=e=>{e?jt.resolve():jt.reject(),qe.value=!1},{t:hu}=z.global,yu="editKeyValue",bu=hu("common.keyValue"),xu="icon-form",ku=0,wu=!0;function $u(e){const t=M(e);return!!pe(t,pt)}function Cu(e){return $(this,null,function*(){const t=M(e),n=pe(t,pt);yield gu(n.key),location.reload()})}var Eu=Object.freeze(Object.defineProperty({__proto__:null,name:yu,display:bu,icon:xu,order:ku,immediate:wu,active:$u,invoke:Cu},Symbol.toStringTag,{value:"Module"}));const nt=p(!1);let zt;const Xn=p(),Su=e=>$(void 0,null,function*(){return Xn.value=yield ar(e),nt.value=!0,zt=new q,yield zt.promise}),Fu=e=>{e?zt.resolve(Xn.value):zt.reject()},{t:Au}=z.global,Tu="editLabel",Vu=Au("common.label"),Lu="icon-a-writein",Du=0,Mu=!0;function Iu(e){const t=M(e);return!!pe(t,ln)}function Bu(e){return $(this,null,function*(){const t=M(e),n=pe(t,ln);yield Su(n.id),location.reload()})}var Pu=Object.freeze(Object.defineProperty({__proto__:null,name:Tu,display:Vu,icon:Lu,order:Du,immediate:Mu,active:Iu,invoke:Bu},Symbol.toStringTag,{value:"Module"}));const{t:ju}=z.global,zu="editLink",Ou=ju("common.link"),Nu="icon-link1",Hu=0;function gl(e){if(!we(e,"a")||me(e,!0).find(o=>{var l;return((l=o.tagName)==null?void 0:l.toLowerCase())=="svg"}))return;const t=N(e);if(!t)return!1;const n=M(t.element);return Fe(n,t.element)?!W(n):No(n,t.element,"href")?!W(n,"href"):W(n,"href")||n.find(o=>o.source===null&&o.format=="attribute"&&o.attribute=="href")?!1:gt(n,e)}function Uu(e){return $(this,null,function*(){const t=yield Yn(e);t&&ae([t])})}function Yn(e){return $(this,null,function*(){const{element:t,isSelf:n}=N(e),o=n?e.parentElement:t,l=o.innerHTML;try{if(yield Xo(e),l==o.innerHTML)return;const s=fe(o),a=ve(s,l),u=Ru(e);if(!u)throw new Error("can not get change");return a.changes.push(u),a}catch(s){throw e.parentElement.innerHTML=l,new Error("edit link error")}})}function Ru(e){const t=M(e);if(Ae(t))return!1;const n=Te(t,e);if(n)return n;const o=Ko(t,e,"href");if(o)return o;const l=O(t,ie);if(l){const{element:s,isSelf:a}=N(e,l),u=ne(s);return a?{source:l.source,id:l.id,action:"update",koobooId:u,attribute:"href",value:e.getAttribute("href")}:{source:l.source,id:l.id,action:"update",koobooId:u,value:oe(s.innerHTML)}}}var Wu=Object.freeze(Object.defineProperty({__proto__:null,name:zu,display:Ou,icon:Nu,order:Hu,active:gl,invoke:Uu,editAnchor:Yn},Symbol.toStringTag,{value:"Module"}));const qu={class:"px-32 pb-24"},Ku={class:"flex w-full justify-end h-10 items-center pr-8"},Gu=D({setup(e){const{t}=H(),n=p(),o=p(),l=p(!1),s=p(!0);let a;return he(()=>o.value,()=>{!a&&o.value&&(a=JSON.stringify(o.value)),l.value=a!=JSON.stringify(o.value)},{immediate:!0}),(u,i)=>{const d=Ee,v=Dn,m=G;return g(),E(m,{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=_=>s.value=_),width:"800px","close-on-click-modal":!1,title:r(t)("common.menu"),"custom-class":"el-dialog--zero-padding",draggable:"",onClosed:i[3]||(i[3]=_=>r(Qu)(l.value))},{default:f(()=>[c(d,{content:r(t)("common.immediatelyChange")},null,8,["content"]),b("div",qu,[b("div",Ku,[c(v,{icon:"icon-code",tip:r(t)("common.editTemplate"),onClick:i[0]||(i[0]=_=>n.value.onTemplateEdit(o.value))},null,8,["tip"])]),c(cr,{id:r(_l),ref_key:"inner",ref:n,"onUpdate:model":i[1]||(i[1]=_=>o.value=_)},null,8,["id"])])]),_:1},8,["modelValue","title"])}}}),eo=p(!1);let Ot;const _l=p(),Ju=e=>$(void 0,null,function*(){return Ot=new q,_l.value=e,eo.value=!0,yield Ot.promise}),Qu=e=>{e?Ot.resolve():Ot.reject(),eo.value=!1},{t:Zu}=z.global,Xu="editMenu",Yu=Zu("common.menu"),ed="icon-menu",td=0,nd=!0;function od(e){const t=M(e);if(!!t.length)return t[0].source=="menu"}function ld(e){return $(this,null,function*(){const t=M(e);yield Ju(t[0].id),location.reload()})}var rd=Object.freeze(Object.defineProperty({__proto__:null,name:Xu,display:Yu,icon:ed,order:td,immediate:nd,active:od,invoke:ld},Symbol.toStringTag,{value:"Module"}));const sd={class:"px-32 py-24"},ad=D({setup(e){const{t}=H(),n=p(),o=p(!1),l=p(!0),s=()=>$(this,null,function*(){yield n.value.onSave(),o.value=!0,l.value=!1});return(a,u)=>{const i=Ee,d=G;return g(),E(d,{modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=v=>l.value=v),width:"1100px","close-on-click-modal":!1,title:r(t)("commerce.product"),"custom-class":"el-dialog--zero-padding",onClosed:u[2]||(u[2]=v=>r(cd)(o.value))},{footer:f(()=>[c(Se,{onConfirm:s,onCancel:u[0]||(u[0]=v=>l.value=!1)})]),default:f(()=>[c(i,{content:r(t)("common.immediatelyChange")},null,8,["content"]),b("div",sd,[c(Mr,{id:r(hl),ref_key:"form",ref:n},null,8,["id"])])]),_:1},8,["modelValue","title"])}}}),to=p(!1);let Nt;const hl=p(),id=e=>$(void 0,null,function*(){return hl.value=e,to.value=!0,Nt=new q,yield Nt.promise}),cd=e=>{e?Nt.resolve():Nt.reject(),to.value=!1},{t:ud}=z.global,dd="editProduct",md=ud("commerce.product"),fd="icon-form",pd=0,vd=!0;function gd(e){const t=M(e);return!!O(t,Io)}function _d(e){return $(this,null,function*(){const t=M(e),n=O(t,Io);yield id(n.id),location.reload()})}var hd=Object.freeze(Object.defineProperty({__proto__:null,name:dd,display:md,icon:fd,order:pd,immediate:vd,active:gd,invoke:_d},Symbol.toStringTag,{value:"Module"}));const yd={class:"px-32 py-24 space-y-12"},bd={class:"flex-1"},xd={class:"flex flex-col items-center justify-center space-y-8 ml-8"},kd=D({setup(e){const{t}=H(),n=p(!1),o=p(!0),l=p(),s=p([]),a=()=>{const m=_e(bn.value);for(const _ of m)_.__edit_repeater_id||(_.__edit_repeater_id=Oe());s.value=m};Jt(a),setTimeout(()=>{document.querySelectorAll(".tox-tinymce-aux").forEach(_=>{var h;(h=l.value)==null||h.appendChild(_)})},500);const u=(m,_)=>{m.innerHTML=_},i=m=>{const _=So(m.outerHTML);m.parentElement.insertBefore(_,m.nextSibling),a()},d=m=>{var _;(_=bn.value)==null||_.removeChild(m),a()},v=()=>$(this,null,function*(){n.value=!0,o.value=!1});return(m,_)=>{const h=lr,w=Dn,y=G;return g(),E(y,{modelValue:o.value,"onUpdate:modelValue":_[1]||(_[1]=x=>o.value=x),width:"1000px","close-on-click-modal":!1,title:r(t)("common.editRepeater"),"append-to-body":"","custom-class":"el-dialog--zero-padding",onClosed:_[2]||(_[2]=x=>r(Cd)(n.value))},{footer:f(()=>[c(Se,{onConfirm:v,onCancel:_[0]||(_[0]=x=>o.value=!1)})]),default:f(()=>[b("div",yd,[(g(!0),S(Z,null,se(s.value,x=>(g(),S("div",{key:x.__edit_repeater_id,class:"space-x-8 flex"},[b("div",bd,[c(h,{"model-value":x.innerHTML,min_height:180,"onUpdate:modelValue":k=>u(x,k)},null,8,["model-value","onUpdate:modelValue"])]),b("div",xd,[b("div",null,[c(w,{class:"text-blue",icon:"icon-copy",tip:r(t)("common.copy"),circle:"",onClick:k=>i(x)},null,8,["tip","onClick"])]),b("div",null,[s.value.length>1?(g(),E(w,{key:0,class:"text-orange",icon:"icon-delete",tip:r(t)("common.delete"),circle:"",onClick:k=>d(x)},null,8,["tip","onClick"])):F("",!0)])])]))),128))]),b("div",{ref_key:"tinymceAuxNewContainer",ref:l},null,512)]),_:1},8,["modelValue","title"])}}}),wd=z.global.t,no=p(!1);let Ht;const bn=p(),$d=e=>$(void 0,null,function*(){return bn.value=e,no.value=!0,Ht=new q,yield Ht.promise}),Cd=e=>{e?($n.success(wd("common.saveSuccess")),Ht.resolve()):Ht.reject(),no.value=!1},{t:Ed}=z.global,Sd="editRepeater",Fd=Ed("common.editRepeater"),Ad="icon-view",Td=20;function Vd(e){var l;const t=bl(e);if(!t||(e=t,Kn.includes((l=e.tagName)==null?void 0:l.toLowerCase()))||me(e,!0).find(s=>{var a;return((a=s==null?void 0:s.tagName)==null?void 0:a.toLowerCase())=="svg"}))return!1;const n=N(e);if(!n)return!1;const o=M(n.element);return Ae(o)||o.find(s=>s.format=="text")?!1:Fe(o)?!W(o):W(o)||o.find(s=>s.source===null&&s.format=="html")?!1:In(o,e)}function Ld(e){return $(this,null,function*(){e=bl(e);const{element:n}=N(e),o=n.innerHTML;try{if(yield $d(e),o==e.innerHTML)return;const l=fe(n),s=ve(l,o),a=yl(e);if(!a)throw new Error("can not get change");s.changes.push(a),ae([s])}catch(l){n.innerHTML=o}})}function yl(e){const t=M(e),n=Te(t);if(n)return n;const o=O(t,ie);if(!o)return;const{element:l}=N(e,o),s=ne(l);return dt(l),{source:o.source,id:o.id,action:"update",koobooId:s,value:oe(l.innerHTML)}}function bl(e){const t=me(e);for(const n of t){const o=_e(n);if(!(o.length<2)&&!([...new Set(o.map(Dd))].length>1))return n}}function Dd(e){var n;return(n=[e,..._e(e)].map(o=>{var l;return(l=o.tagName)==null?void 0:l.toLowerCase()}))==null?void 0:n.join("_")}var Md=Object.freeze(Object.defineProperty({__proto__:null,name:Sd,display:Fd,icon:Ad,order:Td,active:Vd,invoke:Ld,getChange:yl},Symbol.toStringTag,{value:"Module"}));const Id={key:0,class:"h-600px"},Bd=D({setup(e){const{t}=H(),n=p(!0),o=p([]);let l=p(!1);const s=p(!1),a=p();setTimeout(()=>{s.value=!0},100);const u=()=>{l.value=!0,i()},i=()=>{const v=a.value.getSvgString();jd(l.value,v)},d=K(()=>{if(!xn.value)return"";const v=xn.value.cloneNode(!0);return v.getAttribute("xmlns")||v.setAttribute("xmlns","http://www.w3.org/2000/svg"),v.outerHTML});return wn("values",o.value),(v,m)=>{const _=ue,h=G;return g(),E(h,{modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=w=>n.value=w),width:"1000px","close-on-click-modal":!1,title:r(t)("common.svgEditor"),"custom-class":"el-dialog--zero-padding",draggable:"",onClosed:i},{footer:f(()=>[c(_,{round:"",onClick:m[0]||(m[0]=w=>n.value=!1)},{default:f(()=>[R(A(r(t)("common.cancel")),1)]),_:1}),c(_,{type:"primary",round:"",onClick:u},{default:f(()=>[R(A(r(t)("common.save")),1)]),_:1})]),default:f(()=>[s.value?(g(),S("div",Id,[c(fr,{ref_key:"editor",ref:a,svg:r(d),alt:"",ext:"svg",name:"",url:"","site-url":""},null,8,["svg"])])):F("",!0)]),_:1},8,["modelValue","title"])}}}),oo=p(!1);let Ut;const xn=p(),Pd=e=>$(void 0,null,function*(){return Ut=new q,xn.value=e,oo.value=!0,yield Ut.promise}),jd=(e,t)=>{e?Ut.resolve(t):Ut.reject(),oo.value=!1},{t:zd}=z.global,Od="editSvg",Nd=zd("common.editSvg"),Hd="icon-a-writein",Ud=5;function Rd(e){if(e=me(e,!0).find(o=>{var l;return((l=o.tagName)==null?void 0:l.toLowerCase())=="svg"}),!e)return!1;const t=N(e);if(!t)return!1;const n=M(t.element);return Ae(n)||n.find(o=>o.format=="text")?!1:Fe(n)?!W(n):W(n)||n.find(o=>o.source===null&&o.format=="html")?!1:In(n,e)}function Wd(e){return $(this,null,function*(){e=me(e,!0).find(o=>{var l;return((l=o.tagName)==null?void 0:l.toLowerCase())=="svg"});const{element:t}=N(e),n=t.innerHTML;try{const o=yield Pd(e),l=document.createElement("div");if(l.innerHTML=o,e.innerHTML=l.firstChild.innerHTML,n==e.innerHTML)return;const s=fe(t),a=ve(s,n),u=qd(e);if(!u)throw new Error("can not get change");a.changes.push(u),ae([a])}catch(o){t.innerHTML=n}})}function qd(e){const t=M(e),n=Te(t);if(n)return n;const o=O(t,ie);if(!o)return;const{element:l}=N(e,o),s=ne(l);return dt(l),{source:o.source,id:o.id,action:"update",koobooId:s,value:oe(l.innerHTML)}}var Kd=Object.freeze(Object.defineProperty({__proto__:null,name:Od,display:Nd,icon:Hd,order:Ud,active:Rd,invoke:Wd},Symbol.toStringTag,{value:"Module"}));const Gd=D({props:{modelValue:null},setup(e){const t=e,{t:n}=H();function o(v){return pr(`ve-${v.controlType}`)}const l=p(),s=Zt(),{model:a,containerFields:u,fields:i,rules:d}=br(t.modelValue,s);return he(()=>a.value,Ir(function(v){t.modelValue.props=v},500),{deep:!0}),Jt(()=>{i.value.length?l.value="basic":u.value.length?l.value="container":l.value=void 0}),(v,m)=>{const _=Yt,h=To,w=Vo;return g(),E(w,{modelValue:l.value,"onUpdate:modelValue":m[2]||(m[2]=y=>l.value=y)},{default:f(()=>[r(i).length?(g(),E(h,{key:0,label:r(n)("common.basic"),name:"basic"},{default:f(()=>[c(_,{model:r(a),rules:r(d),"label-position":"top",class:"props-editor-form",onSubmit:m[0]||(m[0]=at(()=>{},["prevent"]))},{default:f(()=>[(g(!0),S(Z,null,se(r(i),y=>(g(),E(kt(r(co)(y)),{key:y.name,field:y,model:r(a),"css-class":o(y)},null,8,["field","model","css-class"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["label"])):F("",!0),r(u).length?(g(),E(h,{key:1,label:r(n)("ve.containerStyles"),name:"container"},{default:f(()=>[c(_,{model:r(a),rules:r(d),"label-position":"top",class:"props-editor-form",onSubmit:m[1]||(m[1]=at(()=>{},["prevent"]))},{default:f(()=>[(g(!0),S(Z,null,se(r(u),y=>(g(),E(kt(r(co)(y)),{key:y.name,field:y,model:r(a),"css-class":o(y)},null,8,["field","model","css-class"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["label"])):F("",!0)]),_:1},8,["modelValue"])}}}),Me=p(),ot=p(),Rt=p(),Ie=p(),je=p(),xl=p([]),{updatePage:Jd,getPage:Qd,load:Zd}=ur();function Xd(e){let t=je.value.head.querySelector("style");if(e){if(!t){t=document.createElement("style"),t.innerHTML=e,je.value.head.appendChild(t);return}t.innerHTML=e;return}t&&je.value.head.removeChild(t)}function Yd(e){return $(this,null,function*(){const t=yield Zd();xl.value=t.map(o=>({key:o.name,value:o.path}));const n=yield Qd(e,{type:"Designer"});Ie.value=JSON.parse(n.designConfig),n.layoutId&&n.layoutName?(Me.value=yield dr(n.layoutId,{design:"true",env:"production"}),Rt.value=Me.value.body):(Rt.value=yield mr(),je.value=ql(n.body)),ot.value=n})}function em(e,t,n){if(!je.value)throw new Error("document is null");je.value.body.innerHTML=Fo(t[""],Zt()),Xd(n),e.body=Kl(je.value)}function tm(e,t){if(!Me.value)throw new Error("layout is null");e.layoutId=Me.value.id,e.layoutName=Me.value.name;const n=kr(Me.value.name,Me.value.body);for(const o of n.content){const l=t[o.name];if(!l)continue;const s=document.createElement("div");s.innerHTML=Fo(l,Zt());for(let a=0;a<s.children.length;a++){const u=s.children[a],i=wr(u);o.addons.push(i)}}e.body=$r(n)}function nm(e,t){return $(this,null,function*(){if(!ot.value||!Rt.value||!Ie.value)throw new Error("PageDesigner not initialized yet");e?Ie.value=JSON.parse(e.designConfig):(e=Fn(Ml(ot.value)),e.designConfig=JSON.stringify(Ie.value)),e.type="Designer";const n=yield xr(Ie.value,t!=null?t:!1);if(e.layoutId&&e.layoutName)tm(e,n);else{const o=vr(Ie.value.props,t);em(e,n,o)}ot.value=yield Jd(e)})}function lo(){return{initPageDesigner:Yd,page:ot,allPages:xl,rootMeta:Ie,template:Rt,onSave:nm}}const om={class:"mt-8"},lm=D({setup(e){const{page:t,rootMeta:n,onSave:o}=lo(),{t:l}=H(),s=K(()=>{var i;const u=(i=t.value)==null?void 0:i.previewUrl;return u?new URL(u).origin:"/"}),a=()=>$(this,null,function*(){const u=xe.value;if(!u||!t.value)return;const[i]=Xt(n.value,d=>d.id===u.id);if(!i){console.log(["error"]);return}i.props=u.props,i.htmlStr=yield gr(i,{baseUrl:s.value,classic:Zt(),rootMeta:n.value}),xe.value=i,yield o(),go(!0)});return(u,i)=>{var m;const d=Ee,v=G;return g(),E(v,{modelValue:r(de),"onUpdate:modelValue":i[2]||(i[2]=_=>U(de)?de.value=_:null),width:"800px","close-on-click-modal":!1,title:r(l)("ve.editWidget",{name:(m=r(xe))==null?void 0:m.name}),"custom-class":"el-dialog--zero-padding",onClosed:i[3]||(i[3]=_=>r(go)(!1))},{footer:f(()=>[c(Se,{onConfirm:a,onCancel:i[1]||(i[1]=_=>de.value=!1)})]),default:f(()=>[c(d,{content:r(l)("common.immediatelyChange")},null,8,["content"]),b("div",om,[r(xe)?(g(),E(Gd,{key:0,modelValue:r(xe),"onUpdate:modelValue":i[0]||(i[0]=_=>U(xe)?xe.value=_:null)},null,8,["modelValue"])):F("",!0)])]),_:1},8,["modelValue","title"])}}}),{rootMeta:Wt,onSave:kl}=lo(),de=p(!1);p();p(!1);let lt;const xe=p(),rm=e=>$(void 0,null,function*(){lt=new q;const[t]=Xt(Wt.value,n=>n.id===e);if(!t){lt.reject();return}return xe.value=Fn(t),de.value=!0,yield lt.promise}),sm=e=>$(void 0,null,function*(){const[t,n]=Xt(Wt.value,l=>l.id===e);if(!t||!n)return;const o=n.children.findIndex(l=>l.id===t.id);if(o>-1){const l=_r(t);l.htmlStr=yield hr(l),n.children.splice(o+1,0,l),yield kl()}return n}),am=e=>$(void 0,null,function*(){const[t,n]=Xt(Wt.value,l=>l.id===e,Wt.value);if(!t||!n)return;const o=n.children.findIndex(l=>l.id===t.id);return o>-1&&(n.children.splice(o,1),yield kl()),n}),go=e=>{e?lt.resolve():lt.reject(),de.value=!1},{t:Ye}=z.global;function im(e){return ye(e)}function wl(e){if(!ye(e))return null;const t=[{name:"editWidget",display:Ye("common.edit"),icon:"icon-a-writein",invoke:El,immediate:!0,order:0}],o=M(e)[0].type;return["section","column"].includes(o)||(t.push({name:"copyWidget",display:Ye("common.copy"),icon:"icon-copy",invoke:$l,immediate:!0,order:1,confirm:Ye("common.copyTips")}),t.push({name:"deleteWidget",display:Ye("common.remove"),icon:"icon-delete",invoke:Cl,immediate:!0,order:2,confirm:Ye("common.deleteTips")})),t}function $l(e){return $(this,null,function*(){const t=M(e),{id:n}=t[0];!n||(yield sm(n),location.reload())})}function Cl(e){return $(this,null,function*(){const t=M(e),{id:n}=t[0];!n||(yield am(n),location.reload())})}function El(e){return $(this,null,function*(){const t=M(e),{id:n}=t[0];!n||(yield rm(n),location.reload())})}var cm=Object.freeze(Object.defineProperty({__proto__:null,active:im,getWidgetMenus:wl,onCopy:$l,onDelete:Cl,invoke:El},Symbol.toStringTag,{value:"Module"}));const{t:Sl}=z.global,um="enterLink",dm=Sl("common.enterLink"),mm="icon-link1",fm=5;function pm(e){var o;if(e=Fl(e),!e)return;const t=(o=e.getAttribute("href"))==null?void 0:o.toLowerCase();if(!t)return!1;const n=Ao();if(t.startsWith("http")||t.startsWith("//")){for(const l of n.bindings)if(l.fullName&&t.indexOf(l.fullName)>-1)return!0;return!1}return!0}function vm(e){return $(this,null,function*(){Be.value>0&&(yield Xe(Sl("common.hasUnsaveChangeTip")));const t=Fl(e).getAttribute("href"),n=yield Wr(t);n.canEnter?location.search=bo(location.search,{path:n.url}):Bl(n.message)})}function Fl(e){return me(e,!0).find(n=>we(n,"a"))}var gm=Object.freeze(Object.defineProperty({__proto__:null,name:um,display:dm,icon:mm,order:fm,active:pm,invoke:vm},Symbol.toStringTag,{value:"Module"}));const{t:_m}=z.global,hm="removeDom",ym=_m("common.remove"),bm="icon-delete",xm=10;function km(e){if(ye(e))return!1;const t=N(e);if(!t)return!1;const n=M(t.element);return Ae(n)?!1:Fe(n,t.element)?!W(n):gt(n,e)}function wm(e){const{element:t,isSelf:n}=N(e),o=n?e.parentElement:t,l=o.innerHTML;e.setAttribute(_n,"true");const s=document.createElement("div");s.innerHTML=o.innerHTML,_e(s,!0).forEach(d=>{d.hasAttribute(_n)&&d.remove()});const a=fe(o),u=ve(a,l),i=$m(e);if(!i)throw new Error("can not get change");e.remove(),u.changes.push(i),ae([u])}function $m(e){const t=M(e),n=Te(t,e);if(n)return n;const o=O(t,ie);if(o){const{element:l,isSelf:s}=N(e,o),a=ne(l);return dt(l,s?"brothers":"children"),{source:o.source,id:o.id,action:s?"delete":"update",koobooId:a,value:oe(l.innerHTML)}}}var Cm=Object.freeze(Object.defineProperty({__proto__:null,name:hm,display:ym,icon:bm,order:xm,active:km,invoke:wm},Symbol.toStringTag,{value:"Module"}));function Em(){const e={"./click-element.ts":yi,"./copy-dom.ts":Fi,"./edit-color.ts":Ui,"./edit-config.ts":tc,"./edit-content.ts":pc,"./edit-database.ts":Fc,"./edit-dom.ts":Bc,"./edit-htmlblock.ts":Qc,"./edit-image.ts":vu,"./edit-key-value.ts":Eu,"./edit-label.ts":Pu,"./edit-link.ts":Wu,"./edit-menu.ts":rd,"./edit-product.ts":hd,"./edit-repeater.ts":Md,"./edit-style.ts":Gs,"./edit-svg.ts":Kd,"./edit-widget.ts":cm,"./enter-link.ts":gm,"./remove-dom.ts":Cm},t=[];for(const n in e)t.push(e[n]);return t.sort((n,o)=>n.order-o.order)}const Sm=Em();var Fm="/_Admin/assets/icon_scale.bfb10846.svg",Am="/_Admin/assets/icon_extend.562924ce.svg";const Tm=["src"],_o=D({props:{src:null,disabled:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=e;function o(){n.disabled||t("click")}return(l,s)=>(g(),S("div",yo({class:["hover:bg-blue/10 cursor-pointer w-24 h-24 p-4 rounded-4px",{"opacity-30":e.disabled,"hover:bg-blue/0":e.disabled,"cursor-not-allowed":e.disabled}]},l.$attrs,{onClick:o}),[b("img",{src:e.src},null,8,Tm)],16))}}),Vm={class:"flex items-center cursor-default px-12 py-8 border-b border-solid border-line dark:border-[#555] dark:bg-999"},Lm={class:"ellipsis text-l relative"},Dm=b("div",{class:"flex-1"},null,-1),Mm={class:"flex items-center space-x-4"},Im=["onClick"],Bm={key:0,class:"text-s w-full p-4 pl-12 bg-gray/50 flex items-center"},Pm={class:"transform scale-90 origin-left"},jm=["onClick"],zm=D({setup(e){const{t}=H(),n=p(!1),o=p(),l=p(),s=p([]),a=p([]),u=K(()=>s.value.filter(C=>!C.immediate)),i=K(()=>s.value.filter(C=>C.immediate)),d=(C,L)=>$(this,null,function*(){if(Be.value&&L){$n.warning(t("common.existOperations"));return}C.confirm&&(yield Cr.confirm(C.confirm,{confirmButtonText:t("common.ok"),cancelButtonText:t("common.cancel"),type:"warning"}).catch(()=>"cancel"))!=="confirm"||(C.invoke(Y.value),m())});function v(){const C=[],L=Y.value;if(!L)return C;const P=wl(L);if(P)return P;for(const I of Sm)I!=null&&I.active(L)&&C.push({name:I.name,display:I.display,icon:I.icon,invoke:I.invoke,immediate:I.immediate});return C}const m=()=>{Ue.value=void 0,n.value=!1},_=()=>{const C=a.value.indexOf(Y.value);return a.value[C+1]},h=K(()=>{var L;let C=_();return!(!C||rn.includes((L=C.tagName)==null?void 0:L.toLowerCase()))}),w=()=>{if(!h.value)return;let C=_();Y.value=C,s.value=v()},y=()=>{const C=a.value.indexOf(Y.value);if(C!=0)return a.value[C-1]},x=K(()=>!!y()),k=()=>{let C=y();Y.value=C,s.value=v()};return he([Ue,re],()=>{n.value=!1,a.value=[],Y.value&&(!Ue.value||re.value||(s.value=v(),a.value=me(Y.value,!0),n.value=!0,l.value="click",setTimeout(()=>{var L;(L=o.value)==null||L.click(),l.value="hover"},0)))}),(C,L)=>{const P=Ne,I=An;return n.value?(g(),E(I,{key:0,trigger:l.value,placement:"auto","popper-class":"!p-0 overflow-hidden",onAfterLeave:m},{reference:f(()=>[b("div",{ref_key:"triggerRef",ref:o,class:"absolute w-4 h-4",style:ce({top:r(Ue).y+"px",left:r(Ue).x+"px"})},null,4)]),default:f(()=>[b("div",null,[b("div",Vm,[b("div",Lm,[b("span",null,A(r(t)("common.menu")),1)]),Dm,b("div",Mm,[c(_o,{src:r(Fm),title:r(t)("common.narrowSelection"),disabled:!r(x),onClick:k},null,8,["src","title","disabled"]),c(_o,{title:r(t)("common.expandSelection"),src:r(Am),disabled:!r(h),onClick:w},null,8,["title","src","disabled"])])]),(g(!0),S(Z,null,se(r(u),B=>(g(),S("div",{key:B.name,class:"hover:bg-blue/10 px-12 py-8 cursor-pointer flex items-center space-x-8",onClick:V=>d(B,!1)},[c(P,{class:Ge(["iconfont",B.icon])},null,8,["class"]),b("span",null,A(B.display),1)],8,Im))),128)),r(i).length?(g(),S("p",Bm,[b("span",Pm,A(r(t)("common.cmsEdit")),1)])):F("",!0),(g(!0),S(Z,null,se(r(i),B=>(g(),S("div",{key:B.name,class:"px-12 py-8 cursor-pointer flex items-center space-x-8",onClick:V=>d(B,!0)},[c(P,{class:Ge(["iconfont",B.icon])},null,8,["class"]),b("span",null,A(B.display),1)],8,jm))),128))])]),_:1},8,["trigger"])):F("",!0)}}}),Om=["title"],Nm={class:"inline-flex"},Hm={key:1},Um=D({setup(e){const{t}=H(),n=p(!0),o=[],l=p(!1),s=y=>$(this,null,function*(){switch(y.type){case"src":a(y);break;case"inline":u(y);break;case"style":i(y);break}});function a(y){return $(this,null,function*(){const x=te(T.value),k=ke(x,y.id);if(!k)return;const C=yield Zn(k);C&&(y.url=k.getAttribute("src"),o.push(C))})}function u(y){return $(this,null,function*(){const x=te(T.value),k=ke(x,y.id);if(!k)return;const C=yield zn(k);C&&(y.url=k.style.backgroundImage,o.push(C))})}function i(y){return $(this,null,function*(){if(!y.element||!y.rule)return;const x="background-image",k=y.rule.style.getPropertyPriority(x),L=`url('${(yield sn())[0].url}')`,P=ll(y.rule,x);y.rule.style.setProperty(x,L,k);const I=M(y.element),B=O(I,ie);P.changes.push({source:B==null?void 0:B.source,id:B==null?void 0:B.id,action:"styleSheet",mediarulelist:y.media,property:x,selector:y.rule.selectorText,url:y.file,koobooId:ne(y.element),important:k,value:L}),o.push(P),y.url=L})}function d(y){if(!y.id)return;const x=te(T.value),k=ke(x,y.id);!k||(k.scrollIntoView({behavior:"smooth"}),$e.value=k)}const v=y=>{if(!y)return t("common.page");const x=y.split("/");return x[x.length-1]},m=y=>{var k;const x=[];if(x.push(v(y.file)),y.id){const C=te(T.value),L=ke(C,y.id);L&&x.push(...me(L,!0).map(P=>{var I;return(I=P.nodeName)==null?void 0:I.toLowerCase()}).reverse().filter(P=>!["html","body"].includes(P)))}return(k=y.rule)!=null&&k.selectorText&&x.push(y.rule.selectorText),x.filter(C=>!!C).join(" > ")},_=y=>{switch(y.type){case"style":return t("common.style");case"inline":return t("common.inlineStyle");case"src":return t("common.image");default:return""}},h=()=>{l.value=!0,n.value=!1};function w(y){return $(this,null,function*(){!l.value&&o.length&&(yield Xe(t("common.unsavedChangesLeaveTips"))),y()})}return(y,x)=>{var j;const k=en,C=Lo,L=tn,P=nn,I=on,B=ue,V=G;return g(),E(V,{"model-value":n.value,width:"800px","close-on-click-modal":!1,title:r(t)("common.globalImageList"),draggable:"","custom-class":"el-dialog--zero-padding","before-close":w,onClosed:x[1]||(x[1]=X=>r(Wm)(l.value,o))},Qt({default:f(()=>{var X;return[(X=r(yt))!=null&&X.length?(g(),E(P,{key:0},{default:f(()=>[c(L,{data:r(yt),"max-height":"540px",onCellMouseEnter:d,onCellClick:s},{default:f(()=>[c(k,{width:"20"}),c(k,{label:r(t)("common.path")},{default:f(({row:J})=>[b("div",{class:"ellipsis",title:m(J)},A(m(J)),9,Om)]),_:1},8,["label"]),c(k,{label:r(t)("common.type")},{default:f(({row:J})=>[c(C,{type:"success",round:""},{default:f(()=>[R(A(_(J)),1)]),_:2},1024)]),_:1},8,["label"]),c(k,{align:"right",width:"120"},{default:f(({row:J})=>[b("div",Nm,[c(Bn,{src:J.url,"has-url-wrap":J.type!="src",class:"h-80px w-80px overflow-hidden"},null,8,["src","has-url-wrap"])])]),_:1}),c(k,{width:"20"})]),_:1},8,["data"])]),_:1})):(g(),S("div",Hm,[c(I)]))]}),_:2},[(j=r(yt))!=null&&j.length?{name:"footer",fn:f(()=>[c(B,{round:"",onClick:x[0]||(x[0]=X=>w(()=>n.value=!1))},{default:f(()=>[R(A(r(t)("common.cancel")),1)]),_:1}),c(B,{type:"primary",round:"",onClick:h},{default:f(()=>[R(A(r(t)("common.save")),1)]),_:1})])}:void 0]),1032,["model-value","title"])}}}),ro=p(!1);let qt;const yt=p(),Rm=()=>$(void 0,null,function*(){return qt=new q,yt.value=qm(),ro.value=!0,yield qt.promise}),Wm=(e,t)=>{if(e)t.length&&ae(t),qt.resolve();else{for(const n of[...t].reverse())n.undo();qt.reject()}ro.value=!1};function qm(){const e=[],t=Co(T.value);for(const l of t){const s=Km(l);e.push(...s)}const o=te(T.value).map(l=>Gm(l)).filter(l=>l);return e.push(...o),e}function Km(e,t){var o,l,s;const n=[];for(const a of Array.from((o=e.rules)!=null?o:[]))if(!(!a||ye(e.owner))){if(Ct(a)){const u=a,i=u.style.getPropertyValue("background-image");i&&!Et.includes(i)&&i.includes("url")&&n.push({url:i,type:"style",element:e.owner,rule:u,file:e.url})}else if(Eo(a)){const u=a;for(const i of Array.from((l=u.cssRules)!=null?l:[])){if(!Ct(i)||t&&!t.matchMedia(u.media.mediaText).matches)continue;const d=i,v=d.style.getPropertyValue("background-image");v&&!Et.includes(v)&&v.includes("url")&&n.push({url:v,type:"style",element:e.owner,rule:d,file:e.url,media:(s=u.media)==null?void 0:s.mediaText})}}}return n}function Gm(e){if(ye(e))return;const t=Oe();if(fl(e)){e.setAttribute(ze,t);const o=e.getAttribute("src");if(o)return{type:"src",url:o,id:t}}const n=e.style.getPropertyValue("background-image");if(n&&n!="none")return e.setAttribute(ze,t),{type:"inline",url:n,id:t}}const Jm=["title"],Qm=["title"],Zm={key:1},Xm=D({setup(e){const{t}=H(),n=p(!0),o=[],l=p(!1),s=d=>$(this,null,function*(){const v=te(T.value),m=ke(v,d.id);if(!m)return;const _=yield Yn(m);_&&(d.url=m.getAttribute("href"),o.push(_))}),a=d=>{const v=te(T.value),m=ke(v,d.id);!m||(m.scrollIntoView({behavior:"smooth"}),$e.value=m)},u=()=>{l.value=!0,n.value=!1};function i(d){return $(this,null,function*(){!l.value&&o.length&&(yield Xe(t("common.unsavedChangesLeaveTips"))),d()})}return(d,v)=>{const m=en,_=ue,h=tn,w=nn,y=on,x=G;return g(),E(x,{"model-value":n.value,width:"600px","close-on-click-modal":!1,title:r(t)("common.globalLinkList"),draggable:"","before-close":i,"custom-class":"el-dialog--zero-padding",onClosed:v[1]||(v[1]=k=>r(tf)(l.value,o))},Qt({default:f(()=>[r(bt).length?(g(),E(w,{key:0},{default:f(()=>[c(h,{data:r(bt),"max-height":"540px",onCellMouseEnter:a},{default:f(()=>[c(m,{width:"20px"}),c(m,{label:r(t)("common.url")},{default:f(({row:k})=>[b("div",{class:"ellipsis",title:k.url},A(k.url),9,Jm)]),_:1},8,["label"]),c(m,{label:r(t)("common.content")},{default:f(({row:k})=>[b("div",{class:"ellipsis",title:k.content},A(k.content),9,Qm)]),_:1},8,["label"]),c(m,{width:"100",align:"right"},{default:f(({row:k})=>[c(_,{type:"primary",round:"",size:"small",onClick:C=>s(k)},{default:f(()=>[R(A(r(t)("common.edit")),1)]),_:2},1032,["onClick"])]),_:1}),c(m,{width:"20"})]),_:1},8,["data"])]),_:1})):(g(),S("div",Zm,[c(y)]))]),_:2},[r(bt).length?{name:"footer",fn:f(()=>[c(_,{round:"",onClick:v[0]||(v[0]=k=>i(()=>n.value=!1))},{default:f(()=>[R(A(r(t)("common.cancel")),1)]),_:1}),c(_,{type:"primary",round:"",onClick:u},{default:f(()=>[R(A(r(t)("common.save")),1)]),_:1})])}:void 0]),1032,["model-value","title"])}}}),Kt=p(!1);let rt;const bt=p([]),Ym=()=>$(void 0,null,function*(){return rt=new q,bt.value=ef(),Kt.value=!0,yield rt.promise});function ef(){const e=te(T.value).filter(n=>!ye(n)),t=[];for(const n of e){if(!gl(n))continue;const o=Oe();n.setAttribute(ze,o),t.push({url:n.getAttribute("href"),id:o,content:n.textContent||n.innerText||""})}return t}const tf=(e,t)=>{if(Kt.value=!1,rt.resolve(),e)t.length&&ae(t),rt.resolve();else{for(const n of[...t].reverse())n.undo();rt.reject()}Kt.value=!1},nf=D({props:{value:null},emits:["finish"],setup(e,{emit:t}){const n=e,{t:o}=H(),l=p(!0),s=p(n.value);let a=p(!1);const u=()=>{a.value=n.value!=s.value,l.value=!1};return(i,d)=>{const v=ut,m=ue,_=G;return g(),S("div",null,[c(_,{"model-value":l.value,width:"600px","close-on-click-modal":!1,title:r(o)("common.text"),draggable:"",onClosed:d[2]||(d[2]=h=>t("finish",r(a),s.value))},{footer:f(()=>[c(m,{round:"",onClick:d[1]||(d[1]=h=>l.value=!1)},{default:f(()=>[R(A(r(o)("common.cancel")),1)]),_:1}),c(m,{type:"primary",round:"",onClick:u},{default:f(()=>[R(A(r(o)("common.save")),1)]),_:1})]),default:f(()=>[c(v,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=h=>s.value=h),rows:4,type:"textarea"},null,8,["modelValue"])]),_:1},8,["model-value","title"])])}}}),of=["title"],lf={key:1},rf=D({setup(e){const{t}=H(),n=p(!0),o=[],l=p(!1),s=p();let a=p();const u=_=>$(this,null,function*(){const h=te(T.value),w=ke(h,_.id);if(!w)return;const{element:y}=N(w),x=y.innerHTML;s.value=_,a.value=new q;const k=yield a.value.promise;_.text.data=k,_.content=k;const C=fe(y),L=ve(C,x),P=Gn(w);if(!P)throw new Error("can not get change");L.changes.push(P),o.push(L)}),i=_=>{const h=te(T.value),w=ke(h,_.id);!w||(w.scrollIntoView({behavior:"smooth"}),$e.value=w)},d=(_,h)=>{var w,y;_?(w=a.value)==null||w.resolve(h):(y=a.value)==null||y.reject(h),a.value=void 0},v=()=>{l.value=!0,n.value=!1};function m(_){return $(this,null,function*(){!l.value&&o.length&&(yield Xe(t("common.unsavedChangesLeaveTips"))),_()})}return(_,h)=>{var P,I;const w=en,y=ue,x=tn,k=nn,C=on,L=G;return g(),S(Z,null,[c(L,{"model-value":n.value,width:"600px","close-on-click-modal":!1,title:r(t)("common.globalTextList"),draggable:"","before-close":m,"custom-class":"el-dialog--zero-padding",onClosed:h[1]||(h[1]=B=>r(cf)(l.value,o))},Qt({default:f(()=>[r(xt).length?(g(),E(k,{key:0},{default:f(()=>[c(x,{data:r(xt),"max-height":"540px",onCellMouseEnter:i},{default:f(()=>[c(w,{width:"20px"}),c(w,{label:r(t)("common.text")},{default:f(({row:B})=>[b("div",{class:"ellipsis",title:B.content},A(B.content),9,of)]),_:1},8,["label"]),c(w,{width:"100",align:"right"},{default:f(({row:B})=>[c(y,{type:"primary",round:"",size:"small",onClick:V=>u(B)},{default:f(()=>[R(A(r(t)("common.edit")),1)]),_:2},1032,["onClick"])]),_:1}),c(w,{width:"20"})]),_:1},8,["data"])]),_:1})):(g(),S("div",lf,[c(C)]))]),_:2},[r(xt).length?{name:"footer",fn:f(()=>[c(y,{round:"",onClick:h[0]||(h[0]=B=>m(()=>n.value=!1))},{default:f(()=>[R(A(r(t)("common.cancel")),1)]),_:1}),c(y,{type:"primary",round:"",onClick:v},{default:f(()=>[R(A(r(t)("common.save")),1)]),_:1})])}:void 0]),1032,["model-value","title"]),r(a)?(g(),E(nf,{key:0,value:(I=(P=s.value)==null?void 0:P.content)!=null?I:"",onFinish:d},null,8,["value"])):F("",!0)],64)}}}),Gt=p(!1);let st;const xt=p([]),sf=()=>$(void 0,null,function*(){return st=new q,xt.value=af(),Gt.value=!0,yield st.promise});function af(){var n;const e=[];for(const o of $o(T.value.body,!0)){if(!Gl(o))continue;const l=o;if(!l.data.trim().replaceAll(`\r
`,"").replaceAll(`
`,""))continue;const a=l.parentElement;if(ye(a))continue;const u=(n=a==null?void 0:a.tagName)==null?void 0:n.toLowerCase();u=="script"||u=="style"||e.push({text:l,el:a})}const t=[];for(const o of e){if(!o.el||!dl(o.el))continue;const l=o.el.getAttribute(ze)||Oe();o.el.setAttribute(ze,l),t.push({text:o.text,id:l,content:o.text.data})}return t}const cf=(e,t)=>{if(Gt.value=!1,st.resolve(),e)t.length&&ae(t),st.resolve();else{for(const n of[...t].reverse())n.undo();st.reject()}Gt.value=!1};const uf={class:"mt-8"},df=D({emits:["save"],setup(e,{expose:t,emit:n}){const o=p("general"),l=p(),{rootProps:s,linkFields:a,generalFields:u,initPageStyles:i}=yr(),d=p(),v=p(!1),{t:m}=H();function _(){v.value=!1}function h(y){const x=JSON.parse(y.designConfig);i(x),l.value=y,d.value=x,v.value=!0}const w=()=>$(this,null,function*(){const y=Fn(s.value);d.value.props=y,console.log(["newProps",y]),l.value.designConfig=JSON.stringify(d.value),n("save",l.value),_(),location.reload()});return t({init:h}),(y,x)=>{const k=Ee,C=To,L=Vo,P=G;return v.value?(g(),E(P,{key:0,modelValue:v.value,"onUpdate:modelValue":x[1]||(x[1]=I=>v.value=I),width:"800px","close-on-click-modal":!1,title:r(m)("common.styles"),"custom-class":"el-dialog--zero-padding",onClosed:_},{footer:f(()=>[c(Se,{onConfirm:w,onCancel:_})]),default:f(()=>[c(k,{content:r(m)("common.immediatelyChange")},null,8,["content"]),b("div",uf,[c(L,{modelValue:o.value,"onUpdate:modelValue":x[0]||(x[0]=I=>o.value=I)},{default:f(()=>[r(u).length?(g(),E(C,{key:0,label:r(m)("common.general"),name:"general"},{default:f(()=>[c(uo,{class:"props-editor-form",model:r(s),fields:r(u)},null,8,["model","fields"])]),_:1},8,["label"])):F("",!0),r(a).length?(g(),E(C,{key:1,label:r(m)("common.link"),name:"link"},{default:f(()=>[c(uo,{class:"props-editor-form",model:r(s),fields:r(a)},null,8,["model","fields"])]),_:1},8,["label"])):F("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])):F("",!0)}}}),mf={class:"space-y-8"},ff=["onClick"],pf={key:0},vf=D({props:{page:null},emits:["save"],setup(e,{emit:t}){const n=e,{t:o}=H(),l=p(),s=p(),a=Xr(),u=K(()=>{var v,m;return((v=n.page)==null?void 0:v.type)==="Designer"&&!((m=n.page)!=null&&m.layoutName)}),i=()=>$(this,null,function*(){const v=Re("path");yield Mo(v),setTimeout(()=>{location.reload()},500)});function d(){var v;!n.page||(v=l.value)==null||v.init(n.page)}return(v,m)=>{const _=Ne,h=ue,w=Er,y=An,x=Pl;return g(),S(Z,null,[r(re)?F("",!0):(g(),E(Yo,{key:0,handler:s.value,init:{x:r(a).x-100,y:32}},{default:f(()=>[b("div",mf,[b("div",{ref_key:"handleElement",ref:s},[c(h,{size:"large",plain:"",circle:"",class:"cursor-move"},{default:f(()=>[c(_,{class:"iconfont icon-move"})]),_:1})],512),b("div",null,[c(y,{placement:"left",trigger:"click"},{reference:f(()=>[b("div",{onClick:m[0]||(m[0]=at(()=>{},["stop"]))},[c(w,{content:r(o)("common.toggleScreenSize"),placement:"auto"},{default:f(()=>[c(h,{size:"large",plain:"",circle:""},{default:f(()=>[c(_,{class:"iconfont icon-database"})]),_:1})]),_:1},8,["content"])])]),default:f(()=>[b("div",null,[(g(!0),S(Z,null,se(r(Tt),k=>(g(),S("div",{key:k.name,class:Ge(["py-4 px-8 hover:bg-blue/10 rounded-4px cursor-pointer",r(Qe).name==k.name?"text-blue":""]),onClick:C=>r(mi)(k.name)},A(k.display),11,ff))),128))])]),_:1})]),r(u)?(g(),S("div",pf,[c(w,{content:r(o)("common.styles"),placement:"auto"},{default:f(()=>[c(h,{size:"large",plain:"",circle:"",onClick:d},{default:f(()=>[c(_,{class:"iconfont icon-page"})]),_:1})]),_:1},8,["content"])])):F("",!0),b("div",null,[c(w,{content:r(o)("common.colors"),placement:"auto"},{default:f(()=>[c(h,{size:"large",plain:"",circle:"",onClick:m[1]||(m[1]=k=>{var C;return r(rl)((C=r(T))==null?void 0:C.documentElement)})},{default:f(()=>[c(_,{class:"iconfont icon-background-color"})]),_:1})]),_:1},8,["content"])]),b("div",null,[c(w,{content:r(o)("common.images"),placement:"auto"},{default:f(()=>[c(h,{size:"large",plain:"",circle:"",onClick:m[2]||(m[2]=k=>r(Rm)())},{default:f(()=>[c(_,{class:"iconfont icon-photo"})]),_:1})]),_:1},8,["content"])]),b("div",null,[c(w,{content:r(o)("common.links"),placement:"auto"},{default:f(()=>[c(h,{size:"large",plain:"",circle:"",onClick:m[3]||(m[3]=k=>r(Ym)())},{default:f(()=>[c(_,{class:"iconfont icon-link1"})]),_:1})]),_:1},8,["content"])]),b("div",null,[c(w,{content:r(o)("common.text"),placement:"auto"},{default:f(()=>[c(h,{size:"large",plain:"",circle:"",onClick:m[4]||(m[4]=k=>r(sf)())},{default:f(()=>[c(_,{class:"iconfont icon-menu"})]),_:1})]),_:1},8,["content"])]),b("div",null,[c(w,{content:r(o)("common.undo"),placement:"auto"},{default:f(()=>[c(x,{value:r(Be),hidden:!r(Be),class:"!dark:border-none"},{default:f(()=>[c(h,{size:"large",plain:"",circle:"",disabled:!r(Be),onClick:m[5]||(m[5]=k=>r(qr)())},{default:f(()=>[c(_,{class:"iconfont icon-go-back"})]),_:1},8,["disabled"])]),_:1},8,["value","hidden"])]),_:1},8,["content"])]),b("div",null,[c(w,{content:r(o)("common.redo"),placement:"auto"},{default:f(()=>[c(x,{value:r(un),hidden:!r(un)},{default:f(()=>[c(h,{size:"large",plain:"",circle:"",disabled:!r(un),onClick:m[6]||(m[6]=k=>r(Kr)())},{default:f(()=>[c(_,{class:"iconfont icon-go-back transform rotate-y-180"})]),_:1},8,["disabled"])]),_:1},8,["value","hidden"])]),_:1},8,["content"])]),b("div",null,[c(w,{content:r(o)("common.save"),placement:"auto"},{default:f(()=>[c(h,{size:"large",plain:"",circle:"",disabled:!r(Be),onClick:i},{default:f(()=>[c(_,{class:"iconfont icon-preservation"})]),_:1},8,["disabled"])]),_:1},8,["content"])])])]),_:1},8,["handler","init"])),c(df,{ref_key:"styleDialogRef",ref:l,onSave:m[7]||(m[7]=k=>t("save",k))},null,512)],64)}}}),gf={key:0,class:"h-full relative bg-gray"},_f=b("div",null,null,-1),hf=D({setup(e){const t=Re("type"),n=Re("id");let o=Re("path");o!=null&&o.startsWith("/")||(o="/"+o);const l=p(),{t:s}=H(),a=jl();a.load(),Ao().loadBindings(),localStorage.setItem("vueuse-color-scheme",Re("scheme"));const{page:i,allPages:d,initPageDesigner:v,onSave:m}=lo();function _(h){return $(this,null,function*(){yield m(h)})}return wn("ve-get-pages",()=>d.value),Jt(()=>$(this,null,function*(){n&&t==="Designer"&&(yield v(n));const h=Cn(bo(o,{koobooInline:"design"})),{data:w,headers:y}=yield zl.get(h,{baseURL:""});l.value=w,y["k-culture"]&&(di.value=y["k-culture"])})),(h,w)=>{const y=Br;return g(),E(y,{locale:r(a).locale},{default:f(()=>[l.value?(g(),S("div",gf,[c(r(ii),{content:l.value,class:"bg-fff"},null,8,["content"]),c(r(ui)),c(r(li)),c(r(zm),{page:r(i)},null,8,["page"]),c(r(vf),{page:r(i),onSave:_},null,8,["page"]),r(Qn)?(g(),E(r(ru),{key:0})):F("",!0),r(ro)?(g(),E(r(Um),{key:1})):F("",!0),r(Jn)?(g(),E(r(jc),{key:2})):F("",!0),r(Nn)?(g(),E(r(Ua),{key:3})):F("",!0),r(Kt)?(g(),E(r(Xm),{key:4})):F("",!0),r(Gt)?(g(),E(r(rf),{key:5})):F("",!0),r(Wn)?(g(),E(r(oc),{key:6})):F("",!0),r(to)?(g(),E(r(ad),{key:7})):F("",!0),c(r(Ri)),r(Pn)?(g(),E(r(Ts),{key:8})):F("",!0),r(oo)?(g(),E(r(Bd),{key:9})):F("",!0),r(Un)?(g(),E(r(Mi),{key:10})):F("",!0),r(eo)?(g(),E(r(Gu),{key:11})):F("",!0),r(qn)?(g(),E(r(gc),{key:12})):F("",!0),r(nt)?(g(),E(ir,{key:13,modelValue:r(nt),"onUpdate:modelValue":w[0]||(w[0]=x=>U(nt)?nt.value=x:null),current:r(Xn),alert:r(s)("common.immediatelyChange"),onSuccess:r(Fu)},null,8,["modelValue","current","alert","onSuccess"])):F("",!0),r(qe)?(g(),E(Sr,{key:14,modelValue:r(qe),"onUpdate:modelValue":w[1]||(w[1]=x=>U(qe)?qe.value=x:null),current:r(vl),alert:r(s)("common.immediatelyChange"),onSuccess:r(_u)},null,8,["modelValue","current","alert","onSuccess"])):F("",!0),r(no)?(g(),E(r(kd),{key:15})):F("",!0),r(et)?(g(),E(r(Fr),{key:16,modelValue:r(et),"onUpdate:modelValue":w[2]||(w[2]=x=>U(et)?et.value=x:null),multiple:r(qo),onChoose:r(ss)},null,8,["modelValue","multiple","onChoose"])):F("",!0),r(de)&&r(i)?(g(),E(r(lm),{key:17,modelValue:r(de),"onUpdate:modelValue":w[3]||(w[3]=x=>U(de)?de.value=x:null),page:r(i)},null,8,["modelValue","page"])):F("",!0),_f])):F("",!0)]),_:1},8,["locale"])}}});var Fg=hf;export{Fg as default};
