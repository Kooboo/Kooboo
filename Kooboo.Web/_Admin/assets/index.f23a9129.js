var Ke=Object.defineProperty,Qe=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var De=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var qe=(h,o,s)=>o in h?Ke(h,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[o]=s,Y=(h,o)=>{for(var s in o||(o={}))Ge.call(o,s)&&qe(h,s,o[s]);if(De)for(var s of De(o))We.call(o,s)&&qe(h,s,o[s]);return h},ee=(h,o)=>Qe(h,Ze(o));var I=(h,o,s)=>new Promise((i,L)=>{var t=y=>{try{A(s.next(y))}catch(B){L(B)}},D=y=>{try{A(s.throw(y))}catch(B){L(B)}},A=y=>y.done?i(y.value):Promise.resolve(y.value).then(t,D);A((s=s.apply(h,o)).next())});import{g as je,d as Xe,w as Ye}from"./i18n.a87944a4.js";import{_ as et}from"./index.f0ea490f.js";import{l as Ee,o as tt,p as ke,q as at,s as Ie,t as lt,u as ot,v as rt,w as st,x as nt}from"./index.d24a40b9.js";import{a as Ae,I as ne}from"./validate.bb56f9e3.js";import{d as Fe,g as f,o as S,j as U,w as v,f as m,u as d,t as _,b as c,aI as z,N as it,cd as ut,c as dt,x as G,h as mt,i as F,L as te,K as ct,cj as pt,a as O,n as Ve,F as ie,b7 as Ce,k as R,aU as vt}from"./url.4cb47a7a.js";import{_ as ue}from"./index.3a2ad4ec.js";import{L as ft}from"./logo-transparent.1566007e.js";import{E as Be}from"./index.361e2245.js";import{E as Te}from"./index.c003dfa1.js";import{g as de,d as gt}from"./use-date.f1258183.js";import{u as yt}from"./email.3c5ebb02.js";import{_ as bt}from"./index.ca5e03a4.js";import{d as $e,t as ht}from"./dark.9459c47b.js";import{_ as xt}from"./plugin-vue_export-helper.21dcd24c.js";import{j as _t}from"./windi.6360286d.js";import{E as ae}from"./main.9fdfea92.js";import{E as wt,a as St,c as Lt}from"./index.7c862087.js";import{E as Dt,a as qt}from"./index.9fd79879.js";import{E as Et}from"./index.178b9e08.js";import{E as kt}from"./index.fd96ea36.js";import"./dev-mode.acf56c3e.js";import"./replace-all.56d2c1f7.js";import"./guid.c1a40312.js";import"./use-shortcuts.ff4b1f52.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./preload-helper.13a99eb0.js";import"./config.1e73f9c3.js";import"./page.881ec888.js";import"./index.f2c1b903.js";import"./index.c10802d9.js";import"./error.7e8331f1.js";import"./scroll.16983984.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.50a00b7f.js";import"./isNil.98bb3b88.js";import"./validator.b5df2420.js";import"./index.4d568055.js";import"./index.7b8c5aef.js";import"./style.c350d462.js";import"./toNumber.47eea968.js";import"./_baseIsEqual.dc9e64c4.js";import"./index.c86a187b.js";import"./index.d96452a6.js";import"./dropdown.86d3a7fb.js";import"./refs.3132cbdb.js";import"./use-copy-text.ec245a13.js";import"./index.269bf65e.js";import"./monaco.c080bc0a.js";import"./classCompletion.a22e38a6.js";import"./extraLib.d94bb2b4.js";import"./use-save-tip.e3dc783a.js";import"./confirm.b60b5d2f.js";import"./index.f0d5f031.js";import"./index.6918f0a5.js";import"./event.776e7e11.js";import"./index.f15f695e.js";import"./icon-button.74ccc970.js";import"./index.4f90a917.js";import"./vuedraggable.umd.af323a53.js";import"./index.f154d010.js";import"./index.42922617.js";import"./index.b9a74c44.js";import"./index.79632b7d.js";import"./index.99e769ef.js";import"./index.d878e15f.js";import"./alert.d2815716.js";import"./index.24947ed8.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.d235f69b.js";/* empty css                                                          */import"./file.a821eac5.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.78bd75f1.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.ec5f0705.js";import"./image-editor.a4ae94b1.js";import"./index.0e5d639d.js";import"./cloneDeep.c5011aa2.js";import"./_baseClone.b8903935.js";import"./main.esm.e26794cb.js";import"./index.16f227d6.js";import"./media-dialog.69c737ad.js";import"./breadcrumb.f4d80c95.js";import"./plugin-vue_export-helper.41ffa612.js";import"./media.e27599b4.js";import"./index.5ed58b47.js";import"./search-provider.ad425b7b.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./_baseUniq.d719bd5f.js";import"./use-operation-dialog.4f6d7533.js";import"./folder.8308bb9d.js";import"./relations-tag.b9cbe606.js";import"./index.b38edc72.js";import"./debounce.4e0c106e.js";import"./index.66319a92.js";import"./caret-bottom.ddd8dd91.js";import"./index.c33743a1.js";import"./browser.aedb6977.js";import"./throttle.1f6a079c.js";import"./index.c6da2706.js";import"./isEqual.4cab74e3.js";import"./search-input.2a27ef56.js";import"./layout.b686c380.js";import"./index.765084fe.js";import"./position.7590de53.js";import"./utils.aa7941f8.js";import"./index.9fc39dc8.js";import"./index.1b4db5fb.js";import"./index.4d2ce883.js";import"./file.7f0748f1.js";import"./pick.5253ba21.js";import"./_basePickBy.6b7a83ab.js";import"./index.f23f1e38.js";import"./index.a24f458a.js";import"./index.1fd72ea8.js";import"./index.abe211fa.js";import"./dayjs.min.ccc40d4f.js";import"./index.d2657986.js";import"./index.ba677b9f.js";import"./index.50c16ae5.js";const It={class:"flex justify-center"},At=["innerHTML"],Vt={class:"mt-18px text-s text-[#606266] font-bold leading-17px px-12 dark:text-[#cfd3dc] break-normal"},Ct={class:"flex justify-end items-center mt-16"},$t=Fe({props:{modelValue:{type:Boolean}},emits:["update:modelValue","saveDraft","cancelSaveDraft","closeDialog"],setup(h,{emit:o}){const{t:s}=je(),i=f(!0);return(L,t)=>{const D=Be,A=Te;return S(),U(A,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=y=>i.value=y),width:"400px","custom-class":"leaveConfirmDialog","close-on-click-modal":!1,onClosed:t[4]||(t[4]=y=>o("update:modelValue",!1))},{default:v(()=>[m("div",It,[m("div",{innerHTML:d(ft)},null,8,At)]),m("div",Vt,_(d(s)("common.mailUnSaveTips")),1),m("div",Ct,[c(D,{round:"",onClick:t[0]||(t[0]=y=>o("closeDialog"))},{default:v(()=>[z(_(d(s)("common.cancel")),1)]),_:1}),c(D,{round:"",onClick:t[1]||(t[1]=y=>o("cancelSaveDraft"))},{default:v(()=>[z(_(d(s)("common.no")),1)]),_:1}),c(D,{type:"primary",round:"",onClick:t[2]||(t[2]=y=>o("saveDraft"))},{default:v(()=>[z(_(d(s)("common.yes")),1)]),_:1})])]),_:1},8,["modelValue"])}}});const jt={class:"p-24 flex"},Ft={class:"pl-12 space-x-12 text-s"},Bt={class:"pl-12 text-orange text-s"},Tt={class:"pl-12 text-orange text-s"},Mt={class:"space-x-16 flex"},Nt={class:"h-40px flex items-center"},Ot={class:"h-32 bg-blue rounded-full flex items-center justify-center cursor-pointer"},Rt={class:"mx-12 flex text-fff h-32 w-50px justify-center cursor-pointer"},Ut={class:"flex flex-wrap items-center"},zt={class:"max-w-132px ellipsis h-24 leading-6"},Ht=["innerHTML"],Jt=Xe.global.t,g=f(),Pt={beforeRouteEnter(h,o){return I(this,null,function*(){var s=G("messageId");s||(s=G("sourceId")),g.value=yield ot(s!=null?s:"0"),g.value&&g.value.length===0&&ae.error(Jt("common.emptyAddressTips"))})}},Kt=Fe(ee(Y({},Pt),{setup(h){const o=it(),s=ut(),{t:i}=je(),L=f(),t=f({}),D=f(),A=f(),y=dt(()=>{var e,a;return(a=(e=A.value)==null?void 0:e.open)!=null?a:!1}),B=f(),me=f();let q=G("type");const H=f();let C;const ce=f(!0),J=f(!1),E=f({name:"",params:{},query:{}});let pe=null;const le=f("");let W;const oe=yt(),P=f(),V=f(!0);let ve;const fe=e=>{ve&&(e.preventDefault(),e.returnValue="")},ge=e=>{if(!t.value.html.match("<!--signature -->")){let l=t.value.html===""?`<div>&nbsp;</div>
<!--signature -->
<div>&nbsp;</div>
<!--signature -->`:"<!--signature --><div>&nbsp;</div><!--signature -->";e?t.value.html=`<div>&nbsp;</div>
<!--signature -->
<div>&nbsp;</div><!--signature -->
`+t.value.html:t.value.html=t.value.html+l}let a=P.value?`<!--signature -->
<div class="signature" style="-webkit-user-modify: read-only; pointer-events: none;">
<div style="background: #e4e5e6; width: 40px; height: 1px; margin: 15px 0;">&nbsp;</div>
${P.value}
</div>
<!--signature -->`:"<!--signature --><!--signature -->";t.value.html=t.value.html.replace(/(<!--signature -->)([\s\S]*)(<!--signature -->)/,a)},Me=()=>I(this,null,function*(){P.value=yield Ie(t.value.from),ge()});mt(()=>{new ResizeObserver(a=>{var l,u;for(const n of a)B.value=((l=D.value)==null?void 0:l.offsetHeight)-((u=me.value)==null?void 0:u.offsetHeight)-70}).observe(D.value),H.value=o.query.messageId,window.addEventListener("beforeunload",fe)});const $=f({show:!1,title:"",body:"",width:"600px"}),Ne={from:[Ae(i("common.senderRequired"))],to:[ne()],cc:[ne()],bcc:[ne()],subject:[Ae(i("common.subjectRequiredTips"))]},T=f(),M=e=>{e.preventDefault()},re=(e,a)=>{var l,u;(l=document.querySelector(".contentFormItem"))==null||l.classList.add("pointer-events-none"),(u=document.querySelector(".subjectInput"))==null||u.classList.add("pointer-events-none"),document.querySelectorAll(".inputShade").forEach(n=>{n.getAttribute("id")!==a+"InputShade"&&(n.classList.add("block"),n.classList.remove("hidden"),n.classList.remove("opacity-10"))}),T.value=a,e.dataTransfer.setData("text/plain",e.target.innerText)},N=(e,a)=>{if(a!==T.value){var l=e.dataTransfer.getData("text/plain");let u=t.value[T.value].indexOf(l);t.value[T.value].splice(u,1),t.value[a].includes(l)||t.value[a].push(l),L.value.validateField(a),L.value.validateField(T.value)}e.preventDefault(),T.value=""},Oe=()=>{var e,a;document.querySelectorAll(".inputShade").forEach(l=>{l.classList.remove("block"),l.classList.add("hidden"),l.classList.remove("opacity-10"),l.classList.add("opacity-0")}),(e=document.querySelector(".contentFormItem"))==null||e.classList.remove("pointer-events-none"),(a=document.querySelector(".subjectInput"))==null||a.classList.remove("pointer-events-none")};F(()=>[t.value.to,t.value.bcc,t.value.cc],e=>{e!=null&&e.length&&te().then(()=>{document.querySelectorAll(".el-hover-title .el-tag__content").forEach(a=>{a.setAttribute("title",a.innerText)}),document.querySelectorAll(".el-tag.is-closable.el-tag--info.el-tag--default.el-tag--light").forEach(a=>{a.addEventListener("dragend",Oe)})})},{deep:!0}),F(()=>t.value.to,()=>{te().then(()=>{document.getElementById("to").querySelectorAll(".el-tag.is-closable.el-tag--info.el-tag--default.el-tag--light").forEach(a=>{a.setAttribute("draggable","true"),a.addEventListener("dragstart",l=>re(l,"to"))});const e=document.getElementById("toInputShade");e.addEventListener("dragenter",()=>{e.classList.remove("opacity-0"),e.classList.add("opacity-10")}),e.addEventListener("dragleave",()=>{e.classList.remove("opacity-10"),e.classList.add("opacity-0")})})},{deep:!0}),F(()=>t.value.cc,()=>{!t.value.cc||te().then(()=>{document.getElementById("cc").querySelectorAll(".el-tag.is-closable.el-tag--info.el-tag--default.el-tag--light").forEach(a=>{a.setAttribute("draggable","true"),a.addEventListener("dragstart",l=>re(l,"cc"))});const e=document.getElementById("ccInputShade");e.addEventListener("dragenter",()=>{e.classList.remove("opacity-0"),e.classList.add("opacity-10")}),e.addEventListener("dragleave",()=>{e.classList.remove("opacity-10"),e.classList.add("opacity-0")})})},{deep:!0}),F(()=>t.value.bcc,()=>{!t.value.bcc||te().then(()=>{document.getElementById("bcc").querySelectorAll(".el-tag.is-closable.el-tag--info.el-tag--default.el-tag--light").forEach(a=>{a.setAttribute("draggable","true"),a.addEventListener("dragstart",l=>re(l,"bcc"))});const e=document.getElementById("bccInputShade");e.addEventListener("dragenter",()=>{e.classList.remove("opacity-0"),e.classList.add("opacity-10")}),e.addEventListener("dragleave",()=>{e.classList.remove("opacity-10"),e.classList.add("opacity-0")})})},{deep:!0}),F(()=>o.query.type,()=>{o.query.type&&(ye(),t.value.html="")}),F(()=>t.value,()=>{if(C===void 0)return!1;ve=C!==JSON.stringify(t.value)},{deep:!0}),ct(()=>{clearInterval(pe),oe.firstActiveMenu="",window.removeEventListener("beforeunload",fe)}),pe=setInterval(()=>{C!==JSON.stringify(t.value)&&X()},2e4);function ye(){return I(this,null,function*(){var a,l,u,n,x,p;const e=G("sourceId");if(q==="Drafts"&&e)t.value=yield Ee(e);else if(q==="Forward"&&e)t.value=yield tt(e,de());else if(q==="Reply"&&e)t.value=yield ke(e,de());else if(q==="EditAgain"&&e)t.value=yield at(e);else if(q==="ReplyAll"&&e)t.value=yield ke(e,de(),"all");else{if(!g.value)return;let w,b;t.value=yield Ee();let K=g.value.map(j=>j.address);o.query.address&&K.indexOf(o.query.address)>=0?(w=g.value.filter(j=>{var Q;return j.address==((Q=o.query.address)==null?void 0:Q.toString())}),t.value.from=(a=w[0])==null?void 0:a.id,t.value.fromAddress=(l=w[0])==null?void 0:l.address):(b=g.value.find(j=>j.isDefault),t.value.from=b?b.id:(u=g.value[0])==null?void 0:u.id,t.value.fromAddress=(n=g.value[0])==null?void 0:n.address)}t.value.from===0&&(t.value.from=void 0),(x=t.value.cc)!=null&&x.length||(t.value.cc=void 0),(p=t.value.bcc)!=null&&p.length||(t.value.bcc=void 0),P.value=yield Ie(t.value.from),q!=="Drafts"&&ge(["Forward","Reply","ReplyAll"].includes(q)),C=JSON.stringify(t.value)})}ye(),pt((e,a,l)=>{var u,n,x,p,w;if(C!==JSON.stringify(t.value)&&e.name!="login"&&ce.value){J.value=!0,V.value=!1;let b=(u=e.query)!=null&&u.folder?e.query.folder:e.name;oe.firstActiveMenu=(n=e.query)!=null&&n.address?(b==null?void 0:b.toString())+((x=e.query)==null?void 0:x.address.toString()):(p=e.query)!=null&&p.folderName?(b==null?void 0:b.toString())+((w=e.query)==null?void 0:w.folderName.toString()):b==null?void 0:b.toString(),E.value.name=e.name,E.value.params=e.params,E.value.query=e.query,l(!1)}else q==="Drafts"&&e.path==="/kmail/content"&&!e.params.isBreak?(e.query.messageId=H.value,e.params.isBreak="true",l(e)):l()});function Re(){var e,a;J.value=!1,V.value=!0,oe.firstActiveMenu=(e=o.query)!=null&&e.address?"compose"+((a=o.query)==null?void 0:a.address):"compose"}function Ue(e){return I(this,null,function*(){var l,u;const a=(l=e.target)==null?void 0:l.files[0];if(a){const n=new FormData;if(n.append("file",a),n.append("filename",a.name),((u=t.value.attachments)==null?void 0:u.reduce((p,w)=>p+w.size,0))+a.size>=20*1024*1024){ae.error(i("common.totalAttachmentsSizeLimitTips"));return}else{const p=yield rt(n);t.value.attachments?t.value.attachments.push(p):t.value.attachments=[p]}}})}function ze(e){return I(this,null,function*(){var a;yield st(e),t.value.attachments=(a=t.value.attachments)==null?void 0:a.filter(l=>l.fileName!==e)})}function be(){return I(this,null,function*(){var e,a,l,u,n,x,p;t.value.from&&(t.value.fromAddress=(a=(e=g.value)==null?void 0:e.find(w=>w.id===t.value.from))==null?void 0:a.address),t.value.to.length!==0||((l=t.value.cc)==null?void 0:l.length)&&((u=t.value.cc)==null?void 0:u.length)!==0||((n=t.value.bcc)==null?void 0:n.length)&&((x=t.value.bcc)==null?void 0:x.length)!==0?((yield(p=L.value)==null?void 0:p.validate())&&(V.value=!1,t.value.html=t.value.html.replaceAll("<!--signature -->",""),t.value.html=t.value.html.replace(/<div class="signature"([^>]*)style=["'][^"']*["']([^>]*)>/gi,'<div class="signature"$1$2>'),yield nt(t.value),V.value=!0),ce.value=!1,s.replace({name:"sent",query:{address:t.value.fromAddress}})):ae.error(i("common.pleaseFillRecipientTips"))})}function X(e){return I(this,null,function*(){var n,x;if(!(e!=null&&e.forceSave)&&!V.value)return;V.value=!1;const a=yield(n=L.value)==null?void 0:n.validateField("from");e!=null&&e.showLoading&&(W=_t.service({background:"rgba(0, 0, 0, 0.5)"}));let l;if(a&&(l=yield lt(t.value),V.value=!0,e!=null&&e.showLoading&&(W==null||W.close(),ae.success(i("common.saveSuccess"))),t.value.messageId=l,q==="Drafts"&&(H.value=l)),q==="Drafts"){const p=new URLSearchParams(location.search);p.set("messageId",t.value.messageId.toString()),p.set("sourceId",t.value.messageId.toString()),history.replaceState(null,"",location.pathname+"?"+p.toString())}C=JSON.stringify(t.value),(x=L.value)==null||x.clearValidate();const u=new Date;le.value=u.toString(),e!=null&&e.isLeave&&(E.value.query.messageId=l,s.push({name:E.value.name,params:E.value.params,query:E.value.query}))})}function He(){C=JSON.stringify(t.value),s.push({name:E.value.name,params:E.value.params,query:E.value.query})}function he(){return I(this,null,function*(){var e;Object.getOwnPropertyNames(o.query).length?(delete o.query.type,delete o.query.sourceId,o.query.messageId?o.query.address||o.query.oldFolderName?(delete o.query.activeMenu,s.push({name:"mail-content",query:ee(Y({},s.currentRoute.value.query),{folderName:(e=o.query.oldFolderName)!=null?e:void 0,folder:o.query.oldActiveMenu,messageId:H.value})})):s.push({name:"mail-content",query:ee(Y({},s.currentRoute.value.query),{folder:o.query.oldActiveMenu,activeMenu:o.query.oldActiveMenu,messageId:H.value})}):s.back()):s.push({name:"inbox"})})}function Je(e){Object.assign($.value,e),$.value.show=!0}const xe=[],Pe={send:be,saveDraft:X,cancel:he,alert:Je,get dark(){return $e.value},set dark(e){ht(e)},onDark(e){xe.push(e)},get subject(){return t.value.subject},set subject(e){t.value.subject=e},get to(){return t.value.to},set to(e){t.value.to=e},get html(){return t.value.html},set html(e){t.value.html=e},get from(){var e,a;return(a=(e=g.value)==null?void 0:e.find(l=>l.id==t.value.from))==null?void 0:a.address},set from(e){var l,u;const a=(u=(l=g.value)==null?void 0:l.find(n=>n.address==e))==null?void 0:u.id;a&&(t.value.from=a)}};return F($e,e=>I(this,null,function*(){for(const a of xe)try{a(e)}catch(l){}}),{immediate:!0}),(e,a)=>{var Q;const l=wt,u=St,n=Dt,x=Et,p=Lt,w=qt,b=kt,K=Be,j=Te;return S(),O(ie,null,[m("div",jt,[m("div",{ref_key:"outBox",ref:D,class:Ve(["rounded-normal h-[calc(100vh-160px)] bg-fff shadow-s-10 p-24 pr-8 dark:bg-[#252526] w-full transition-all duration-500",d(y)?"box-border w-[calc(100%-22%-46px)]":""])},[c(b,{height:"h-full",class:"pr-16",always:""},{default:v(()=>[c(w,{ref_key:"form",ref:L,"label-position":"left","label-width":"100px",model:t.value,rules:d(Ne),onSubmit:a[17]||(a[17]=Ye(()=>{},["prevent"]))},{default:v(()=>[m("div",{ref_key:"topPartForm",ref:me},[c(n,{label:d(i)("mail.from"),prop:"from"},{default:v(()=>{var r,Z;return[c(u,{"model-value":t.value.from,class:"w-480px",placeholder:" ",title:(Z=(r=g.value)==null?void 0:r.filter(k=>k.id===t.value.from)[0])==null?void 0:Z.address,"data-cy":"from","onUpdate:modelValue":a[0]||(a[0]=k=>{var _e,we,Se,Le;t.value.from=(we=(_e=g.value)==null?void 0:_e.find(se=>se.id===k))==null?void 0:we.id,t.value.fromAddress=(Le=(Se=g.value)==null?void 0:Se.find(se=>se.id===k))==null?void 0:Le.address}),onChange:a[1]||(a[1]=k=>Me())},{default:v(()=>[(S(!0),O(ie,null,Ce(g.value,k=>(S(),U(l,{key:k.id,style:{"max-width":"480px"},title:k.address,label:k.displayName,value:k.id,"data-cy":"from-opt"},null,8,["title","label","value"]))),128))]),_:1},8,["model-value","title"]),le.value!==""?(S(),O("span",{key:0,class:Ve(["text-s text-999",P.value!==""?"px-8":"px-12 "])},_(d(i)("common.draftSavedAtTime",{time:d(gt)(le.value)})),3)):R("",!0)]}),_:1},8,["label"]),c(n,{id:"to",label:d(i)("mail.to"),prop:"to"},{default:v(()=>[m("div",{id:"toInputShade",class:"bg-blue h-10 w-480px absolute rounded-5px z-9999 hidden opacity-0 inputShade",onDrop:a[2]||(a[2]=r=>N(r,"to")),onDragover:M},null,32),c(ue,{modelValue:t.value.to,"onUpdate:modelValue":a[3]||(a[3]=r=>t.value.to=r),"input-value":t.value.to||[],"data-cy":"to",onDrop:a[4]||(a[4]=r=>N(r,"to")),onDragover:M},null,8,["modelValue","input-value"]),m("div",Ft,[t.value.cc?R("",!0):(S(),O("span",{key:0,class:"cursor-pointer text-999 hover:text-blue","data-cy":"add-cc",onClick:a[5]||(a[5]=r=>t.value.cc=[])},_(d(i)("common.addCc")),1)),t.value.bcc?R("",!0):(S(),O("span",{key:1,class:"cursor-pointer text-999 hover:text-blue","data-cy":"add-bcc",onClick:a[6]||(a[6]=r=>t.value.bcc=[])},_(d(i)("common.addBcc")),1))])]),_:1},8,["label"]),t.value.cc?(S(),U(n,{key:0,id:"cc",label:d(i)("common.carbonCopy"),prop:"cc"},{default:v(()=>[m("div",{id:"ccInputShade",class:"bg-blue h-10 w-480px absolute rounded-5px z-9999 hidden opacity-0 inputShade",onDrop:a[7]||(a[7]=r=>N(r,"cc")),onDragover:M},null,32),c(ue,{modelValue:t.value.cc,"onUpdate:modelValue":a[8]||(a[8]=r=>t.value.cc=r),"input-value":t.value.cc,"data-cy":"cc",onDrop:a[9]||(a[9]=r=>N(r,"cc")),onDragover:M},null,8,["modelValue","input-value"]),m("div",Bt,[m("span",{class:"cursor-pointer",onClick:a[10]||(a[10]=r=>t.value.cc=void 0)},_(d(i)("common.delete")),1)])]),_:1},8,["label"])):R("",!0),t.value.bcc?(S(),U(n,{key:1,id:"bcc",label:d(i)("common.blindCarbonCopy"),prop:"bcc"},{default:v(()=>[m("div",{id:"bccInputShade",class:"bg-blue h-10 w-480px absolute rounded-5px z-9999 hidden opacity-0 inputShade",onDrop:a[11]||(a[11]=r=>N(r,"bcc")),onDragover:M},null,32),c(ue,{modelValue:t.value.bcc,"onUpdate:modelValue":a[12]||(a[12]=r=>t.value.bcc=r),"input-value":t.value.bcc,"data-cy":"bcc",onDrop:a[13]||(a[13]=r=>N(r,"bcc")),onDragover:M},null,8,["modelValue","input-value"]),m("div",Tt,[m("span",{class:"cursor-pointer",onClick:a[14]||(a[14]=r=>t.value.bcc=void 0)},_(d(i)("common.delete")),1)])]),_:1},8,["label"])):R("",!0),c(n,{label:d(i)("common.subject"),prop:"subject"},{default:v(()=>[c(x,{modelValue:t.value.subject,"onUpdate:modelValue":a[15]||(a[15]=r=>t.value.subject=r),class:"w-480px subjectInput","data-cy":"subject"},null,8,["modelValue"])]),_:1},8,["label"]),c(n,{label:d(i)("common.attachments"),prop:"attachments"},{default:v(()=>[m("div",Mt,[m("div",Nt,[m("label",Ot,[m("span",Rt,_(d(i)("common.select")),1),m("input",{id:"attachments",class:"hidden",type:"file","data-cy":"upload-attachment",onChange:Ue},null,32)])]),m("div",Ut,[(S(!0),O(ie,null,Ce(t.value.attachments,r=>(S(),U(p,{key:r.fileName,class:"rounded-full px-16 mr-8 my-4",size:"large",effect:"plain",round:"",closable:"",onClose:Z=>ze(r.fileName)},{default:v(()=>[m("div",zt,_(r.fileName),1)]),_:2},1032,["onClose"]))),128))])])]),_:1},8,["label"])],512),c(n,{label:d(i)("common.content"),class:"contentFormItem mb-0"},{default:v(()=>{var r;return[c(et,{modelValue:t.value.html,"onUpdate:modelValue":a[16]||(a[16]=Z=>t.value.html=Z),"manual-upload":!0,"hidden-code":!0,"only-new-window":!0,min_height:B.value,max_height:(r=D.value)==null?void 0:r.offsetHeight},null,8,["modelValue","min_height","max_height"])]}),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})],2),c(bt,{ref_key:"extensionDrawerRef",ref:A,context:Pe,"message-id":parseInt((Q=d(G)("sourceId"))!=null?Q:"0"),type:"extendcompose"},null,8,["message-id"])]),m("div",vt(e.$attrs,{class:"k-bottom-bar bg-gray/10 py-15px pr-130px text-right space-x-32 absolute bottom-0 w-full left-0 z-1 backdrop-filter backdrop-blur-md shadow-m-20"}),[c(K,{round:"",type:"primary","data-cy":"send",disabled:!V.value,onClick:be},{default:v(()=>[z(_(d(i)("common.send")),1)]),_:1},8,["disabled"]),c(K,{plain:"",round:"",type:"primary","data-cy":"save-draft",onClick:a[18]||(a[18]=r=>X({isLeave:!1,showLoading:!0}))},{default:v(()=>[z(_(d(i)("common.saveDraft")),1)]),_:1}),c(K,{round:"","data-cy":"cancel",onClick:he},{default:v(()=>[z(_(d(i)("common.cancel")),1)]),_:1})],16),c(j,{modelValue:$.value.show,"onUpdate:modelValue":a[19]||(a[19]=r=>$.value.show=r),width:$.value.width||"600px",title:$.value.title||d(i)("common.tooltip")},{default:v(()=>[m("div",{innerHTML:$.value.body},null,8,Ht)]),_:1},8,["modelValue","width","title"]),J.value?(S(),U($t,{key:0,modelValue:J.value,"onUpdate:modelValue":a[20]||(a[20]=r=>J.value=r),onSaveDraft:a[21]||(a[21]=r=>X({isLeave:!0,showLoading:!0,forceSave:!0})),onCancelSaveDraft:He,onCloseDialog:Re},null,8,["modelValue"])):R("",!0)],64)}}}));var co=xt(Kt,[["__scopeId","data-v-c134035c"]]);export{co as default};
