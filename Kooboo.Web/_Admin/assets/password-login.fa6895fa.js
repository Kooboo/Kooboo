var U=Object.defineProperty;var k=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var q=(s,o,t)=>o in s?U(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t,v=(s,o)=>{for(var t in o||(o={}))z.call(o,t)&&q(s,t,o[t]);if(k)for(var t of k(o))B.call(o,t)&&q(s,t,o[t]);return s};var I=(s,o,t)=>new Promise((c,f)=>{var m=r=>{try{a(t.next(r))}catch(u){f(u)}},p=r=>{try{a(t.throw(r))}catch(u){f(u)}},a=r=>r.done?c(r.value):Promise.resolve(r.value).then(m,p);a((t=t.apply(s,o)).next())});import{g as A,o as G}from"./i18n.a87944a4.js";import{_ as M}from"./container.b5d815f8.js";import{l as P}from"./index.1fd72ea8.js";import{d as R,cd as T,o as b,a as E,F as W,b7 as j,f as i,b as l,n as Q,u as e,m as H,t as h,g as w,N as J,G as X,w as d,aI as Y,b4 as Z,b2 as oo,x as eo}from"./url.4cb47a7a.js";import{z as F}from"./validate.bb56f9e3.js";import{g as to}from"./index.0f9746b8.js";import{d as S}from"./dark.9459c47b.js";import{P as ro,Q as so,R as ao,i as no,S as $}from"./main.9fdfea92.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import{E as lo}from"./windi.6360286d.js";import{u as io}from"./use-first-input-focus.135952ac.js";import{_ as mo}from"./two-fa-verify-dialog.55dc53b4.js";import{E as co}from"./index.178b9e08.js";import{E as po,a as uo}from"./index.9fd79879.js";import{E as fo}from"./index.361e2245.js";import{E as _o}from"./index.a7b376b1.js";import{E as yo}from"./index.fd96ea36.js";import"./logo-transparent.1566007e.js";import"./light-switch.51a4a594.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.d24a40b9.js";import"./index.f23f1e38.js";import"./replace-all.56d2c1f7.js";import"./index.a24f458a.js";import"./index.abe211fa.js";import"./style.c350d462.js";import"./toNumber.47eea968.js";import"./_baseIsEqual.dc9e64c4.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.79632b7d.js";import"./index.c003dfa1.js";import"./index.c10802d9.js";import"./error.7e8331f1.js";import"./scroll.16983984.js";import"./index.4d568055.js";import"./focus-trap.50a00b7f.js";import"./isNil.98bb3b88.js";import"./refs.3132cbdb.js";import"./event.776e7e11.js";import"./index.7b8c5aef.js";import"./_baseClone.b8903935.js";import"./isEqual.4cab74e3.js";const ho={class:"flex items-center justify-center"},go=["onClick"],vo={class:"text-999 mt-4 text-s"},xo=R({setup(s){const{t:o}=A(),t=T(),c=[{name:"phone",display:o("common.phone"),icon:"icon-phone",color:"#2296F3"},ro()?{name:"wechat-mp",display:o("common.Wechat"),icon:"icon-WeChat",color:"#1AAD19"}:{name:"wechat",display:o("common.Wechat"),icon:"icon-WeChat",color:"#1AAD19"},{name:"google",display:"Google",icon:"icon-Google",color:"#1A73E8"},{name:"github",display:"Github",icon:"icon-github",color:"#000000",darkColor:"#fff"}],f=m=>{m==="phone"?t.push({name:`${m}-login`,query:v({},t.currentRoute.value.query)}):to(location.href,m).then(p=>{location.href=p})};return(m,p)=>{const a=lo;return b(),E("div",ho,[(b(),E(W,null,j(c,r=>{var u;return i("div",{key:r.name,class:"w-88px h-88px text-center rounded-normal cursor-pointer flex items-center justify-center flex-col hover:bg-blue/20",type:"text",onClick:C=>f(r.name)},[l(a,{class:Q([[r.icon,e(S)&&r.darkColor],"iconfont text-40px rounded-full"]),alt:r.display,style:H({color:e(S)&&(u=r.darkColor)!=null?u:r.color})},null,8,["class","alt","style"]),i("p",vo,h(r.display),1)],8,go)}),64))])}}});var wo=L(xo,[["__scopeId","data-v-19cd829c"]]);const bo=s=>(Z("data-v-253bcd6a"),s=s(),oo(),s),Eo={class:"h-full overflow-hidden"},Co={class:"flex items-center mb-24 text-m"},Vo={class:"text-444 dark:text-fff/50 mr-4"},ko={class:"flex items-end"},qo=bo(()=>i("div",{class:"flex-1"},null,-1)),Io={class:"text-666 text-s"},Fo=R({setup(s){io();const{t:o}=A(),t=w(),c=T(),f=J(),m=w(!1),p=w(""),a=X({username:"",password:"",remember:!1,returnurl:"",code:""});(()=>{f.query.returnurl&&(a.returnurl=f.query.returnurl)})();const u={username:F(o("common.inputUsernameOrEmailTips")),password:F(o("common.inputPasswordTips"))};function C(_){return a.code=_,x()}const x=()=>I(this,null,function*(){yield t.value.validate();try{return yield P(a),eo("vscode-require-auth")?so():c.replace({name:"home"}),!0}catch(_){if(a.code="",!_.isAxiosError)return;const n=ao(_);if(n)if(n.startsWith("NeedVerifyCode")){const g=n.split(" ")[1];g=="email"?p.value=o("common.emailVerifyCodeSentTip"):g=="tel"?p.value=o("common.phoneVerifyCodeSentTip"):g=="otp"&&(p.value=o("common.optVerifyTip")),m.value=!0;return}else n=="VerifyCodeError"?no(o("common.verifyCodeInvalid")):$.showMessage(_);else $.showMessage(_);return!1}});return(_,n)=>{const g=co,V=po,D=uo,K=fo,N=_o,O=yo;return b(),E(W,null,[i("div",Eo,[l(O,null,{default:d(()=>[l(M,{title:e(o)("common.login"),onKeypress:G(x,["enter"])},{default:d(()=>[i("div",Co,[i("span",Vo,h(e(o)("common.withoutKoobooAccount")),1),i("a",{class:"text-blue cursor-pointer","data-cy":"register",onClick:n[0]||(n[0]=y=>e(c).push({name:"register",query:v({},e(c).currentRoute.value.query)}))},h(e(o)("login.register")),1)]),l(D,{ref_key:"form",ref:t,"label-position":"top",model:e(a),rules:e(u),"hide-required-asterisk":""},{default:d(()=>[l(V,{label:e(o)("common.account"),prop:"username"},{default:d(()=>[l(g,{modelValue:e(a).username,"onUpdate:modelValue":n[1]||(n[1]=y=>e(a).username=y),placeholder:e(o)("common.usernameOrEmail"),"data-cy":"username-or-email"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(V,{label:e(o)("common.password"),prop:"password"},{label:d(()=>[i("div",ko,[i("span",null,h(e(o)("common.password")),1),qo,i("a",{type:"text",class:"text-blue cursor-pointer text-s font-normal","data-cy":"forgot-password",onClick:n[2]||(n[2]=y=>e(c).push({name:"retrieve-password",query:v({},e(c).currentRoute.value.query)}))},h(e(o)("common.forgotPassword")),1)])]),default:d(()=>[l(g,{modelValue:e(a).password,"onUpdate:modelValue":n[3]||(n[3]=y=>e(a).password=y),type:"password","data-cy":"password"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),l(K,{class:"w-full text-l h-48px",round:"",type:"primary",size:"large","data-cy":"login",onClick:x},{default:d(()=>[Y(h(e(o)("common.login")),1)]),_:1}),l(N,null,{default:d(()=>[i("span",Io,h(e(o)("login.or")),1)]),_:1}),l(wo)]),_:1},8,["title","onKeypress"])]),_:1})]),l(mo,{modelValue:m.value,"onUpdate:modelValue":n[4]||(n[4]=y=>m.value=y),tip:p.value,onOk:C},null,8,["modelValue","tip"])],64)}}});var xe=L(Fo,[["__scopeId","data-v-253bcd6a"]]);export{xe as default};
