var b=(h,a,m)=>new Promise((d,c)=>{var y=t=>{try{o(m.next(t))}catch(e){c(e)}},_=t=>{try{o(m.throw(t))}catch(e){c(e)}},o=t=>t.done?d(t.value):Promise.resolve(t.value).then(y,_);o((m=m.apply(h,a)).next())});import{_ as P}from"./icon-button.a2edb33f.js";import{g as $,a as F}from"./index.8d99b8f6.js";import{_ as M}from"./k-table.c1a07faa.js";import{d as R,cd as S,g as x,aV as j,c as q,b7 as z,o as l,a as f,b as n,u as i,f as v,w as r,F as w,b6 as k,t as g,j as B,e as H,aH as C}from"./url.8f5ec20c.js";import{u as A}from"./replace-all.e310d26c.js";import{B as G}from"./breadcrumb.3432b615.js";import{g as J}from"./i18n.0d8cb6d1.js";import{E as K}from"./windi.dcba9a95.js";import{E as O}from"./index.c7806af3.js";import{E as Q,a as U,b as W}from"./index.bc6ab153.js";import{E as X}from"./index.8e0d96d6.js";import{c as Y}from"./index.9a7a049b.js";import"./index.38840738.js";import"./focus-trap.0c15535f.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.6e9a6658.js";import"./index.36905e5d.js";import"./index.1d64e54f.js";import"./main.d919dab0.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./sortable.esm.a99254e8.js";import"./index.17321c3b.js";import"./isEqual.8058d1d5.js";import"./_baseIsEqual.f1f57955.js";import"./index.97ced36a.js";import"./event.776e7e11.js";import"./error.7e8331f1.js";import"./index.ec3d8ab1.js";import"./index.230671a2.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.3d638063.js";import"./dropdown.61c74520.js";import"./refs.d2253dd4.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.6d134d76.js";import"./scroll.9a94de30.js";import"./validator.11bc55c7.js";const Z={class:"p-24"},tt={class:"flex items-center py-24 space-x-16"},ot={class:"flex items-center"},et={class:"p-4 dark:text-fff/86"},Kt=R({setup(h){const{t:a}=J(),m=S(),d=x([]),c=x([]);j(()=>b(this,null,function*(){const o=yield Promise.all([$(),F()]);d.value=o[0],c.value=o[1]}));const y=q(()=>{const o=[];for(const t of d.value){if(c.value.some(p=>p.name===t.name))continue;let e=o.find(p=>p.group===t.category);e?e.list.push(t.name):(e={group:t.category,list:[t.name]},o.push(e))}return o}),_=o=>{m.push(A({name:"frontevents-edit",query:{name:o}}))};return(o,t)=>{const e=K,p=O,D=Q,T=U,I=W,E=X,L=Y,V=P,N=z("hasPermission");return l(),f("div",Z,[n(G,{name:i(a)("common.frontEvents")},null,8,["name"]),v("div",tt,[n(I,{trigger:"click",onCommand:_},{dropdown:r(()=>[n(T,null,{default:r(()=>[(l(!0),f(w,null,k(i(y),s=>(l(),f(w,{key:s.group},[v("h3",et,g(s.group),1),(l(!0),f(w,null,k(s.list,u=>(l(),B(D,{key:u,command:u,"data-cy":u},{default:r(()=>[v("span",null,g(u),1)]),_:2},1032,["command","data-cy"]))),128))],64))),128))]),_:1})]),default:r(()=>[H((l(),B(p,{round:"","data-cy":"new-event"},{default:r(()=>[v("div",ot,[C(g(i(a)("common.newEvent"))+" ",1),n(e,{class:"iconfont icon-pull-down text-12px ml-8 !mr-0"})])]),_:1})),[[N,{feature:"frontEvents",action:"edit"}]])]),_:1})]),n(i(M),{data:c.value},{default:r(()=>[n(E,{label:i(a)("common.type"),prop:"name"},null,8,["label"]),n(E,{label:i(a)("common.rulesCount")},{default:r(({row:s})=>[n(L,{type:"success",size:"small",class:"rounded-full","data-cy":"rules-count"},{default:r(()=>[C(g(s.count),1)]),_:2},1024)]),_:1},8,["label"]),n(E,{width:"100px",align:"right"},{default:r(({row:s})=>[n(V,{icon:"icon-a-writein",tip:i(a)("common.edit"),"data-cy":"edit",onClick:u=>_(s.name)},null,8,["tip","onClick"])]),_:1})]),_:1},8,["data"])])}}});export{Kt as default};
