var w=(C,i,x)=>new Promise((p,y)=>{var u=s=>{try{d(x.next(s))}catch(l){y(l)}},_=s=>{try{d(x.throw(s))}catch(l){y(l)}},d=s=>s.done?p(s.value):Promise.resolve(s.value).then(u,_);d((x=x.apply(C,i)).next())});import{_ as z}from"./k-table.e9121736.js";import{_ as I}from"./country.01b632e9.js";import{d as R,g as E,c as q,o as g,j as T,w as c,f as v,b as o,u as n,t as k,M as A,cd as F,h as G,N as Q,b7 as W,a as $,e as X,k as B,aH as D}from"./url.2e6a77c4.js";import{B as Y}from"./breadcrumb.0ef7e7c4.js";import{g as L}from"./i18n.97105311.js";import{u as N}from"./replace-all.8fa5a83d.js";import{d as Z,g as ee}from"./tax.791745a7.js";import{b as te}from"./confirm.46f27373.js";import{S as oe}from"./search-input.1597a477.js";import{u as M}from"./commerce.c633c6e0.js";import{s as P}from"./commerce.5a632190.js";import{E as U,a as ne}from"./index.f3d28a97.js";import{E as ae}from"./index.4b289bae.js";import{E as se}from"./windi.539ebeab.js";import{E as le}from"./index.b09a9f00.js";import{E as re}from"./index.9589f7cf.js";import"./sortable.esm.a99254e8.js";import"./icon-button.e1f3bfd2.js";import"./index.975a8825.js";import"./index.bc93d068.js";import"./main.52487121.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.7a88a6b5.js";import"./index.afee24fe.js";import"./index.4587e608.js";import"./event.776e7e11.js";import"./index.9e96921b.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./index.f997a738.js";import"./scroll.8babc10c.js";import"./isEqual.3700b7f1.js";import"./_baseIsEqual.abb55a3a.js";import"./debounce.61c67278.js";import"./toNumber.574be4f1.js";import"./index.a46fa52c.js";import"./validator.1d438d08.js";import"./index.c1764395.js";import"./index.6302b2c1.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./logo-transparent.1566007e.js";import"./index.d267cbe6.js";import"./index.07e210fb.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.de18cf8f.js";/* empty css                                                                 */import"./refs.4001ce17.js";const ce={class:"flex items-center pb-12 space-x-16"},me={class:"flex items-center gap-4"},ie={class:"text-black dark:text-[#cfd3dc]"},ue={class:"text-black dark:text-[#cfd3dc]"},de=R({props:{modelValue:{type:Boolean},excludes:null},emits:["update:modelValue","selected"],setup(C,{emit:i}){const x=C,{t:p}=L(),y=E(!0),u=E(""),_=M();function d(l){i("selected",l),y.value=!1}const s=q(()=>{var m,f,h,e;const l=[];for(const t of _.countries){const b=(f=(m=u.value)==null?void 0:m.toLowerCase())==null?void 0:f.trim();b&&!((h=JSON.stringify(t).toLowerCase())!=null&&h.includes(b))||(e=x.excludes)!=null&&e.find(a=>t.code==a||t.name==a)||l.push(t)}return l});return(l,m)=>{const f=oe,h=I,e=U,t=ne,b=ae;return g(),T(b,{"model-value":y.value,width:"600px",title:n(p)("common.selectCountry"),"close-on-click-modal":!1,onClosed:m[1]||(m[1]=a=>i("update:modelValue",!1))},{default:c(()=>[v("div",ce,[o(f,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=a=>u.value=a),class:"w-full",placeholder:n(p)("common.keyword")},null,8,["modelValue","placeholder"])]),o(t,{data:n(s),class:"el-table--gray mb-24",height:"400","row-class-name":"cursor-pointer",onRowClick:d},{default:c(()=>[o(e,{label:n(p)("common.name")},{default:c(({row:a})=>[v("div",me,[o(h,{"only-flag":!0,"name-or-code":a.code},null,8,["name-or-code"]),v("span",ie,k(n(P)(a.nameTranslations,a.name)),1)])]),_:1},8,["label"]),o(e,{label:n(p)("common.code")},{default:c(({row:a})=>[v("span",ue,k(a.code),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["model-value","title"])}}}),pe={class:"p-24"},_e={class:"flex items-center py-24 space-x-16"},fe={class:"flex items-center"},xe={key:0,class:"flex items-center gap-4"},ye={class:"text-black dark:text-[#cfd3dc]"},xt=R({setup(C){const{t:i}=L(),p=A().meta.title,y=F(),u=E([]),_=E(!1),d=M();function s(e){y.push(N({name:"taxes create",query:{country:e.name}}))}function l(e){return w(this,null,function*(){yield te(e.length),yield Z(e.map(t=>t.id)),m()})}function m(){return w(this,null,function*(){u.value=yield ee()})}G(()=>w(this,null,function*(){m()}));function f(e){return d==null?void 0:d.countries.find(t=>t.name==e)}const h=q(()=>u.value.map(e=>e.country));return(e,t)=>{const b=se,a=le,j=I,V=U,H=re,J=Q("router-link"),K=z,O=W("hasPermission");return g(),$("div",pe,[o(Y,{name:n(p)},null,8,["name"]),v("div",_e,[X((g(),T(a,{round:"",onClick:t[0]||(t[0]=r=>_.value=!0)},{default:c(()=>[v("div",fe,[o(b,{class:"mr-16 iconfont icon-a-addto"}),D(" "+k(n(i)("common.create")),1)])]),_:1})),[[O,{feature:"taxes",action:"edit"}]])]),o(K,{data:u.value,"show-check":"",onDelete:l},{default:c(()=>[o(V,{label:n(i)("common.country")},{default:c(({row:r})=>{var S;return[f(r.country)?(g(),$("div",xe,[o(j,{"only-flag":!0,"name-or-code":(S=f(r.country))==null?void 0:S.code},null,8,["name-or-code"]),v("span",ye,k(n(P)(f(r.country).nameTranslations,r.country)),1)])):B("",!0)]}),_:1},8,["label"]),o(V,{label:n(i)("common.baseTax"),align:"center"},{default:c(({row:r})=>[D(k(r.baseTax)+"% ",1)]),_:1},8,["label"]),o(V,{align:"right",width:"60"},{default:c(({row:r})=>[o(J,{to:n(N)({name:"taxes edit",query:{id:r.id}}),class:"mx-8"},{default:c(()=>[o(H,{placement:"top",content:n(i)("common.edit")},{default:c(()=>[o(b,{class:"iconfont icon-a-writein hover:text-blue text-l"})]),_:1},8,["content"])]),_:2},1032,["to"])]),_:1})]),_:1},8,["data"]),_.value?(g(),T(de,{key:0,modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=r=>_.value=r),excludes:n(h),onSelected:s},null,8,["modelValue","excludes"])):B("",!0)])}}});export{xt as default};
