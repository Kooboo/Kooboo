var f=(c,e,a)=>new Promise((i,l)=>{var o=n=>{try{r(a.next(n))}catch(t){l(t)}},s=n=>{try{r(a.throw(n))}catch(t){l(t)}},r=n=>n.done?i(n.value):Promise.resolve(n.value).then(o,s);r((a=a.apply(c,e)).next())});import{c as v}from"./confirm.e2c924ff.js";import{h as p,J as M,cj as y}from"./url.2e6a77c4.js";function S(c,e){const a=n=>{l&&(n.preventDefault(),n.returnValue="")};p(()=>{window.addEventListener("beforeunload",a)}),M(()=>{window.removeEventListener("beforeunload",a)});let i,l;const o=n=>{l=!1,i=JSON.stringify(n,c).replace(/\\r\\n/g,"\\n")},s=n=>{if(i===void 0)return!1;const t=JSON.stringify(n,c).replace(/\\r\\n/g,"\\n");return l=i!==t,i!==t},r=n=>f(this,null,function*(){s(n)&&(yield v())});return e&&y((n,t,u)=>f(this,null,function*(){var d,m,g;if(n.name==="login")u();else{(m=e.activeMenuChanged)==null||m.call(null,(d=n.meta.activeMenu)!=null?d:n.name);const h=(g=e.modelGetter)==null?void 0:g.call(null);if(!h){u();return}yield r(h).then(()=>{u()}).catch(()=>{var w;(w=e.activeMenuChanged)==null||w.call(null,e.defaultActiveMenu),u(!1)})}})),{init:o,check:r,changed:s,getValue:()=>i}}export{S as u};
