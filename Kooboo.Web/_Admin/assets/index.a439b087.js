var ae=Object.defineProperty,se=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var L=Math.pow,D=(n,l,r)=>l in n?ae(n,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[l]=r,K=(n,l)=>{for(var r in l||(l={}))re.call(l,r)&&D(n,r,l[r]);if(j)for(var r of j(l))ne.call(l,r)&&D(n,r,l[r]);return n},U=(n,l)=>se(n,oe(l));import{u as x,v as ie,T as ce,a as ue,i as E,b as ve}from"./i18n.48bd28ac.js";import{b as O,u as Q,_ as X,d as fe,R as V,w as me}from"./windi.a5b0b048.js";import{t as de}from"./error.7e8331f1.js";import{d as Y,B as he,g as c,c as N,aW as pe,as as F,o as H,j as M,w as Z,e as be,f as W,n as T,u as h,m as A,a as ee,b as I,F as ye,i as q,K as G,b2 as ge,E as we,h as Se,a3 as ze,r as _e,l as ke,k as Ee,W as He}from"./url.2e6a77c4.js";const te=Symbol("scrollbarContextKey"),z=4,Te={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Be=({move:n,size:l,bar:r})=>({[r.size]:l,transform:`translate${r.axis}(${n}%)`}),Ce=O({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Pe=Y({__name:"thumb",props:Ce,setup(n){const l=n,r="Thumb",a=he(te),u=Q("scrollbar");a||de(r,"can not inject scrollbar context");const v=c(),o=c(),p=c({}),s=c(!1);let g=!1,w=!1,S=ue?document.onselectstart:null;const t=N(()=>Te[l.vertical?"vertical":"horizontal"]),B=N(()=>Be({size:l.size,move:l.move,bar:t.value})),_=N(()=>L(v.value[t.value.offset],2)/a.wrapElement[t.value.scrollSize]/l.ratio/o.value[t.value.offset]),R=i=>{var f;if(i.stopPropagation(),i.ctrlKey||[1,2].includes(i.button))return;(f=window.getSelection())==null||f.removeAllRanges(),$(i);const m=i.currentTarget;!m||(p.value[t.value.axis]=m[t.value.offset]-(i[t.value.client]-m.getBoundingClientRect()[t.value.direction]))},C=i=>{if(!o.value||!v.value||!a.wrapElement)return;const f=Math.abs(i.target.getBoundingClientRect()[t.value.direction]-i[t.value.client]),m=o.value[t.value.offset]/2,y=(f-m)*100*_.value/v.value[t.value.offset];a.wrapElement[t.value.scroll]=y*a.wrapElement[t.value.scrollSize]/100},$=i=>{i.stopImmediatePropagation(),g=!0,document.addEventListener("mousemove",P),document.addEventListener("mouseup",k),S=document.onselectstart,document.onselectstart=()=>!1},P=i=>{if(!v.value||!o.value||g===!1)return;const f=p.value[t.value.axis];if(!f)return;const m=(v.value.getBoundingClientRect()[t.value.direction]-i[t.value.client])*-1,y=o.value[t.value.offset]-f,le=(m-y)*100*_.value/v.value[t.value.offset];a.wrapElement[t.value.scroll]=le*a.wrapElement[t.value.scrollSize]/100},k=()=>{g=!1,p.value[t.value.axis]=0,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",k),d(),w&&(s.value=!1)},b=()=>{w=!1,s.value=!!l.size},e=()=>{w=!0,s.value=g};pe(()=>{d(),document.removeEventListener("mouseup",k)});const d=()=>{document.onselectstart!==S&&(document.onselectstart=S)};return x(F(a,"scrollbarElement"),"mousemove",b),x(F(a,"scrollbarElement"),"mouseleave",e),(i,f)=>(H(),M(ce,{name:h(u).b("fade"),persisted:""},{default:Z(()=>[be(W("div",{ref_key:"instance",ref:v,class:T([h(u).e("bar"),h(u).is(h(t).key)]),onMousedown:C},[W("div",{ref_key:"thumb",ref:o,class:T(h(u).e("thumb")),style:A(h(B)),onMousedown:R},null,38)],34),[[ie,i.always||s.value]])]),_:1},8,["name"]))}});var J=X(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Le=O({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ne=Y({__name:"bar",props:Le,setup(n,{expose:l}){const r=n,a=c(0),u=c(0);return l({handleScroll:o=>{if(o){const p=o.offsetHeight-z,s=o.offsetWidth-z;u.value=o.scrollTop*100/p*r.ratioY,a.value=o.scrollLeft*100/s*r.ratioX}}}),(o,p)=>(H(),ee(ye,null,[I(J,{move:a.value,ratio:o.ratioX,size:o.width,always:o.always},null,8,["move","ratio","size","always"]),I(J,{move:u.value,ratio:o.ratioY,size:o.height,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var Re=X(Ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const $e=O({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:fe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),xe={scroll:({scrollTop:n,scrollLeft:l})=>[n,l].every(E)},Me={name:"ElScrollbar"},We=Y(U(K({},Me),{props:$e,emits:xe,setup(n,{expose:l,emit:r}){const a=n,u=Q("scrollbar");let v,o;const p=c(),s=c(),g=c(),w=c("0"),S=c("0"),t=c(),B=c(1),_=c(1),R=N(()=>{const e={};return a.height&&(e.height=V(a.height)),a.maxHeight&&(e.maxHeight=V(a.maxHeight)),[a.wrapStyle,e]}),C=()=>{var e;s.value&&((e=t.value)==null||e.handleScroll(s.value),r("scroll",{scrollTop:s.value.scrollTop,scrollLeft:s.value.scrollLeft}))};function $(e,d){He(e)?s.value.scrollTo(e):E(e)&&E(d)&&s.value.scrollTo(e,d)}const P=e=>{!E(e)||(s.value.scrollTop=e)},k=e=>{!E(e)||(s.value.scrollLeft=e)},b=()=>{if(!s.value)return;const e=s.value.offsetHeight-z,d=s.value.offsetWidth-z,i=L(e,2)/s.value.scrollHeight,f=L(d,2)/s.value.scrollWidth,m=Math.max(i,a.minSize),y=Math.max(f,a.minSize);B.value=i/(e-i)/(m/(e-m)),_.value=f/(d-f)/(y/(d-y)),S.value=m+z<e?`${m}px`:"",w.value=y+z<d?`${y}px`:""};return q(()=>a.noresize,e=>{e?(v==null||v(),o==null||o()):({stop:v}=ve(g,b),o=x("resize",b))},{immediate:!0}),q(()=>[a.maxHeight,a.height],()=>{a.native||G(()=>{var e;b(),s.value&&((e=t.value)==null||e.handleScroll(s.value))})}),ge(te,we({scrollbarElement:p,wrapElement:s})),Se(()=>{a.native||G(()=>b())}),ze(()=>b()),l({wrap$:s,update:b,scrollTo:$,setScrollTop:P,setScrollLeft:k,handleScroll:C}),(e,d)=>(H(),ee("div",{ref_key:"scrollbar$",ref:p,class:T(h(u).b())},[W("div",{ref_key:"wrap$",ref:s,class:T([e.wrapClass,h(u).e("wrap"),{[h(u).em("wrap","hidden-default")]:!e.native}]),style:A(h(R)),onScroll:C},[(H(),M(ke(e.tag),{ref_key:"resize$",ref:g,class:T([h(u).e("view"),e.viewClass]),style:A(e.viewStyle)},{default:Z(()=>[_e(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?Ee("v-if",!0):(H(),M(Re,{key:0,ref_key:"barRef",ref:t,height:S.value,width:w.value,always:e.always,"ratio-x":_.value,"ratio-y":B.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}}));var Ae=X(We,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ke=me(Ae);export{Te as B,Ke as E};
