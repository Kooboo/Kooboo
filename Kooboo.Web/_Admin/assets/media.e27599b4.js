var Xe=Object.defineProperty,Ye=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var eo=Object.prototype.hasOwnProperty,oo=Object.prototype.propertyIsEnumerable;var Pe=(l,v,s)=>v in l?Xe(l,v,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[v]=s,pe=(l,v)=>{for(var s in v||(v={}))eo.call(v,s)&&Pe(l,s,v[s]);if(Ee)for(var s of Ee(v))oo.call(v,s)&&Pe(l,s,v[s]);return l},ve=(l,v)=>Ye(l,Ze(v));var z=(l,v,s)=>new Promise((c,d)=>{var E=b=>{try{P(s.next(b))}catch(I){d(I)}},C=b=>{try{P(s.throw(b))}catch(I){d(I)}},P=b=>b.done?c(b.value):Promise.resolve(b.value).then(E,C);P((s=s.apply(l,v)).next())});import{d as De,g as lo,i as ao,a as to,b as no,c as so,e as io,f as ro}from"./media-list.vue_vue_type_style_index_0_scoped_true_lang.d235f69b.js";import{B as co}from"./breadcrumb.f4d80c95.js";import{L as uo}from"./index.5ed58b47.js";import{u as fo,_ as Ie,M as mo,a as Le,b as po,t as Se,c as Me}from"./search-provider.ad425b7b.js";import{g as ie,w as R,o as vo}from"./i18n.a87944a4.js";import{_ as ho}from"./folder.8308bb9d.js";import{u as go}from"./use-date.f1258183.js";import{u as Te,k as yo,d as ge,l as bo,i as wo}from"./main.9fdfea92.js";import{c as ko}from"./use-copy-text.ec245a13.js";import{d as le,g,h as ze,c as q,o as n,a as L,F as oe,b7 as he,u as o,f as m,t as B,j as w,n as O,k as p,b as $,w as k,e as Z,r as ee,A as ye,aI as W,b4 as _o,b2 as xo,cg as se,x as Be,H as Co,cl as $o,bA as Vo,C as Uo,cd as Fo,N as Eo,G as Po,i as J,b8 as Io}from"./url.4cb47a7a.js";import{a as X}from"./replace-all.56d2c1f7.js";/* empty css                                                          */import{_ as Ne}from"./plugin-vue_export-helper.21dcd24c.js";import{E as Lo}from"./index.c33743a1.js";import{E as Ae}from"./index.42922617.js";import{E as je}from"./index.d96452a6.js";import{al as So,j as Mo,E as Do}from"./windi.6360286d.js";import{_ as To}from"./layout.b686c380.js";import{s as zo}from"./utils.aa7941f8.js";import{d as Bo,b as No}from"./confirm.b60b5d2f.js";import{_ as Ao}from"./index.9fc39dc8.js";import{u as jo}from"./use-file-upload.78bd75f1.js";import{_ as Ko}from"./index.f0d5f031.js";import{u as Ro}from"./use-operation-dialog.4f6d7533.js";import{E as qo}from"./index.178b9e08.js";import{E as Oo,a as Ho}from"./index.9fd79879.js";import{E as Go}from"./index.1b4db5fb.js";import{E as Qo}from"./index.c003dfa1.js";import{E as Jo,a as Wo}from"./index.4d2ce883.js";import{E as Xo}from"./index.361e2245.js";import{l as Yo}from"./last.e7aa49db.js";const Zo=l=>(_o("data-v-5a518433"),l=l(),xo(),l),el={key:0,class:"flex items-center flex-wrap"},ol=["onClick"],ll={class:"flex flex-1 items-center justify-between px-24"},al={class:"flex items-center cursor-pointer min-w-0","data-cy":"folder"},tl=Zo(()=>m("img",{src:ho,class:"w-48px mr-16"},null,-1)),nl={class:"text-m overflow-hidden"},sl=["title"],il={class:"text-444 dark:text-fff/60 mt-1px","data-cy":"total-files"},rl={key:0,class:"flex-none mb-16"},dl={class:"h-38px px-24 text-666 dark:text-fff/50 flex items-center justify-between border-solid border-t-1 border-black/6 dark:border-fff/10","data-cy":"last-modified-in-grid"},cl={class:"text-s"},ul=["onClick"],fl={key:1},ml={class:"hidden absolute top-8 right-8"},pl={class:"h-20px flex items-center space-x-8 dark:text-fff/50 text-14px text-666"},vl=["onClick"],hl=["onClick"],gl=["onClick"],yl=["onClick"],bl=["onClick"],wl={class:"w-full flex-1 rounded-4px overflow-hidden"},kl=["src","alt","title"],_l={class:"ellipsis text-s text-444 dark:text-fff/60 h-32 leading-32px text-center","data-cy":"file-name"},xl={key:0,class:"el-table__empty-block w-full"},Cl={class:"el-table__empty-text"},$l=le({props:{folders:null,files:null,hasCheckbox:{type:Boolean},gridCol:null,hideOpenFolder:{type:Boolean},pagination:null,fileActions:null,provider:null},emits:["clickFolder","editImage","changePage","loadMore"],setup(l,{emit:v}){const s=l,c=g(!1);ze(()=>{c.value=!0});const{t:d}=ie(),E=Te(),C=q(()=>s.folders.length===0&&s.files.length===0),P=q(()=>s.fileActions?s.fileActions:["openFolder","copy","preview","edit","download"]),b=g(!1),I=g([]),T=f=>{I.value=[N(f.url)],b.value=!0},x=f=>z(this,null,function*(){const H=yield De({folder:f,folders:[f],files:[]},s.provider);if(!H)return;const y=X(`Download/Package?file=${H}&type=media`);se(`/_api/v2/${y}`)}),i=f=>{if(f.downloadUrl)se(f.downloadUrl);else{const V=X(`Download/Single?id=${f.key}&type=media&provider=${s.provider}`);se(`/_api/v2/${V}`)}},h=f=>{if(!f.folder){console.warn("folder is empty");return}const V={fullPath:`${f.folder||"/"}`,name:"",lastModified:new Date,count:1};F(V)},{handleClickFolder:F,handleEditImage:r,dialogInfo:u,handleCheckFile:D,getPreviewUrl:N}=fo(v);return(f,V)=>{const H=Ae,y=je,U=Lo,A=So;return n(),L("div",null,[l.folders.length?(n(),L("div",el,[(n(!0),L(oe,null,he(l.folders,a=>(n(),L("div",{key:a.fullPath,class:"folder-item bg-fff dark:bg-444 dark:text-fff/50 rounded-4px shadow-l-10 w-354px h-147px mr-32 mb-24 flex flex-col justify-between cursor-pointer",onClick:S=>o(F)(a)},[m("div",ll,[m("div",al,[tl,m("div",nl,[m("div",{class:"font-bold ellipsis",title:a.name,"data-cy":"folder-name"},B(a.name),9,sl),m("div",il,B(o(d)("common.totalFiles",{n:a.count>99?"99+":a.count},a.count)),1)])]),o(u)?p("",!0):(n(),L("div",rl,[l.hasCheckbox?(n(),w(H,{key:0,modelValue:a.selected,"onUpdate:modelValue":S=>a.selected=S,size:"large",class:O(["hidden rounded-full text-0px !h-24",{"!block":a.selected}]),"data-cy":"checkbox",onClick:V[0]||(V[0]=R(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","class"])):p("",!0)]))]),m("div",dl,[m("span",cl,B(o(d)("common.lastModified"))+": "+B(o(go)(a.lastModified)),1),$(y,{placement:"top","show-after":300,content:o(d)("common.download")},{default:k(()=>[m("span",{class:O(["iconfont icon-xiazai-wenjianxiazai-05 cursor-pointer hover:text-blue font-bold pr-6px hidden text-14px",{"!block":a.selected}]),"data-cy":"copy-in-grid",onClick:R(S=>x(a.fullPath),["stop"])},null,10,ul)]),_:2},1032,["content"])])],8,ol))),128))])):p("",!0),c.value?(n(),L("div",fl,[m("div",{class:O(["grid gap-2",l.gridCol===4?"grid-cols-4":"grid-cols-6"])},[(n(!0),L(oe,null,he(l.files,a=>Z((n(),L("div",{key:a.id,class:O(["file-item relative rounded-4px w-full h-161px px-32 pt-32 mb-12 hover:bg-[#E9EAF0] dark:hover:bg-444 flex flex-col",{"bg-[#E9EAF0] dark:bg-444":a.selected}])},[ee(f.$slots,"checkbox",{item:a},()=>[l.hasCheckbox?(n(),w(H,{key:0,modelValue:a.selected,"onUpdate:modelValue":S=>a.selected=S,size:"large",class:O(["hidden absolute top-8 left-8",{"!block":a.selected}]),onClick:V[1]||(V[1]=R(()=>{},["stop"])),onChange:S=>o(D)(a,l.files)},null,8,["modelValue","onUpdate:modelValue","class","onChange"])):p("",!0)],!0),m("div",ml,[m("div",pl,[l.hideOpenFolder?p("",!0):(n(),w(y,{key:0,placement:"top","show-after":300,content:o(d)("common.openFileLocation",a)},{default:k(()=>[m("span",{class:"iconfont icon-folder cursor-pointer hover:text-blue","data-cy":"open-folder",onClick:R(S=>h(a),["stop"])},null,8,vl)]),_:2},1032,["content"])),o(P).includes("copy")?(n(),w(y,{key:1,placement:"top","show-after":300,content:o(d)("common.copyUrl")},{default:k(()=>[m("span",{class:"iconfont icon-copy cursor-pointer hover:text-blue","data-cy":"copy-in-grid",onClick:R(S=>o(ko)(o(ye)(o(E).site.baseUrl,a.url)),["stop"])},null,8,hl)]),_:2},1032,["content"])):p("",!0),o(P).includes("preview")?(n(),w(y,{key:2,placement:"top","show-after":300,content:o(d)("common.preview")},{default:k(()=>[m("span",{class:"iconfont icon-eyes cursor-pointer hover:text-blue","data-cy":"preview-in-grid",onClick:R(S=>T(a),["stop"])},null,8,gl)]),_:2},1032,["content"])):p("",!0),o(E).hasAccess("mediaLibrary","edit")&&o(P).includes("edit")?(n(),w(y,{key:3,placement:"top","show-after":300,content:o(d)("common.edit")},{default:k(()=>[m("span",{class:"iconfont icon-a-writein cursor-pointer hover:text-blue","data-cy":"edit-in-grid",onClick:R(S=>o(r)(a,l.provider),["stop"])},null,8,yl)]),_:2},1032,["content"])):p("",!0),o(P).includes("download")?(n(),w(y,{key:4,placement:"top","show-after":300,content:o(d)("common.download")},{default:k(()=>[m("span",{class:"iconfont icon-xiazai-wenjianxiazai-05 cursor-pointer hover:text-blue font-bold","data-cy":"download-in-grid",onClick:R(S=>i(a),["stop"])},null,8,bl)]),_:2},1032,["content"])):p("",!0),ee(f.$slots,"actions",{item:a},void 0,!0)])]),m("div",wl,[ee(f.$slots,"thumbnail",{item:a},()=>[a.thumbnail?(n(),L("img",{key:0,class:"select-none w-full h-full object-contain dark:text-fff/60",src:a.thumbnail,"data-cy":"thumbnail",alt:a.alt||a.name,title:o(d)("common.imageTitle",ve(pe({},a),{size:o(yo)(a.size)}))},null,8,kl)):p("",!0)],!0)]),m("div",_l,[ee(f.$slots,"file-name",{item:a},()=>[W(B(a.name),1)],!0)])],2)),[[A,a.loading]])),128))],2),o(C)?(n(),L("div",xl,[m("span",Cl,B(o(d)("common.noData")),1)])):p("",!0),b.value?(n(),w(U,{key:1,"url-list":I.value,"hide-on-click-modal":"",onClose:V[2]||(V[2]=a=>b.value=!1)},null,8,["url-list"])):p("",!0)])):p("",!0)])}}});var Ke=Ne($l,[["__scopeId","data-v-5a518433"]]);const Vl=l=>ge.get(X("online-media/SearchOnline"),l),Ul=()=>ge.get(X("online-media/Providers")),Fl=(l,v,s)=>ge.post(X(`online-media/Download?provider=${s}`),{file:v},{path:l},{hiddenLoading:!0}),El=["onClick"],Pl=m("span",{class:"absolute top-8 left-8 iconfont text-green icon-fasongchenggong","data-cy":"downloaded"},null,-1),Il=m("span",{class:"absolute top-8 left-8 iconfont text-orange icon-fasongshibai","data-cy":"download-failed"},null,-1),Ll=le({props:{provider:null},emits:["reload"],setup(l,{expose:v,emit:s}){const c=l,d=g(!1),{t:E}=ie(),C=g(),P=g([]),b=g([]),I=()=>z(this,null,function*(){P.value=yield Ul()});function T(r){return z(this,null,function*(){return yield Vl(r)})}function x(r){b.value=r}function i(r){var D;r.loading=!0;const u={id:r.id,name:r.name,url:r.url,alt:r.alt};return r.status=void 0,Fl((D=Be("folder"))!=null?D:"/",u,c.provider).then(()=>{r.status=!0,s("reload")}).catch(()=>{r.status=!1}).finally(()=>{r.selected=!0,r.loading=!1})}I();function h(){var r;d.value=!0,(r=C.value)==null||r.reset()}function F(r){return z(this,null,function*(){if(b.value.some(u=>u.loading===!0)){yield zo(E("common.downloadingImageTip"),{showCancelButton:!1});return}r()})}return v({show:h}),(r,u)=>{const D=je,N=Ke;return n(),w(To,{ref_key:"searchDialogRef",ref:C,modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=f=>d.value=f),"fetch-data":T,providers:P.value,"before-close":F,onListChanged:x},{default:k(({list:f})=>[$(N,{class:"mr-12",folders:[],files:f||[],"has-checkbox":!1,"hide-open-folder":!0,"grid-col":4,"file-actions":["copy","preview"],provider:l.provider},{actions:k(({item:V})=>[V.status!==!0?(n(),w(D,{key:0,placement:"top","show-after":300,content:o(E)("common.downloadToMediaLibrary")},{default:k(()=>[m("span",{class:"iconfont icon-xiazai-wenjianxiazai-05 cursor-pointer hover:text-blue font-bold","data-cy":"download-in-search",onClick:R(H=>i(V),["stop"])},null,8,El)]),_:2},1032,["content"])):p("",!0)]),checkbox:k(({item:V})=>[V.status===!0?(n(),w(D,{key:0,placement:"top","show-after":300,content:o(E)("common.downloaded")},{default:k(()=>[Pl]),_:1},8,["content"])):p("",!0),V.status===!1?(n(),w(D,{key:1,placement:"top","show-after":300,content:o(E)("common.downloadFailed")},{default:k(()=>[Il]),_:1},8,["content"])):p("",!0)]),_:2},1032,["files","provider"])]),_:1},8,["modelValue","providers"])}}}),Sl=le({props:{folder:null,provider:null,multiple:{type:Boolean},prefix:null},emits:["afterUpload"],setup(l,{emit:v}){const s=l;let c;const{getAccepts:d,checkFile:E}=jo(),C=d("image"),P=q(()=>{var i;return lo((i=s.provider)!=null?i:"default")});function b(){c||(c=Mo.service({background:"rgba(0, 0, 0, 0.5)"}))}function I(i){return z(this,null,function*(){var u;if(!E(C,i))return!1;let h=i.name;s.prefix&&(h=`${s.prefix}_${h}`);const F=ye(s.folder,h);(yield ao((u=s.provider)!=null?u:"default",F).then(()=>!0).catch(()=>!1))||(yield Bo()),b()})}function T(){c==null||c.close(),c=void 0}function x(i){bo(),T(),v("afterUpload",i)}return(i,h)=>{const F=Ao;return n(),w(F,{permission:{feature:"mediaLibrary",action:"edit"},multiple:l.multiple,action:o(P),accept:o(C).join(","),"before-upload":I,"on-success":x,data:{folder:l.folder,prefix:l.prefix||""},"data-cy":"upload"},{default:k(()=>[ee(i.$slots,"default")]),_:3},8,["multiple","action","accept","data"])}}}),Ml={class:"flex items-center justify-center h-90px w-90px"},Dl=le({props:{modelValue:{type:Boolean},file:null,provider:null},emits:["saved"],setup(l,{emit:v}){const s=l,c=g(),d=g({}),{t:E}=ie(),{visible:C,handleClose:P}=Ro(s,v),b=Te();function I(x){return x&&($o(x)?x:(x=Vo(x,{siteId:Be("siteId")}),ye(b.site.prUrl,x)))}function T(){var x;(x=c.value)==null||x.validate(i=>z(this,null,function*(){var h;i&&(yield to({id:s.file.key,alt:(h=s.file.alt)!=null?h:"",name:s.file.name,provider:s.provider}),P(),v("saved"))}))}return(x,i)=>{const h=qo,F=Oo,r=Go,u=Ho,D=Ko,N=Qo;return n(),w(N,{modelValue:o(C),"onUpdate:modelValue":i[3]||(i[3]=f=>Co(C)?C.value=f:null),width:"600px","close-on-click-modal":!1,title:o(E)("common.editImage"),onClose:o(P)},{footer:k(()=>[$(D,{"confirm-label":o(E)("common.save"),onConfirm:T,onCancel:o(P)},null,8,["confirm-label","onCancel"])]),default:k(()=>[l.file?(n(),w(u,{key:0,ref_key:"form",ref:c,class:"el-form--label-normal",model:l.file,rules:d.value,"label-position":"top",onSubmit:i[2]||(i[2]=R(()=>{},["prevent"]))},{default:k(()=>[$(F,{prop:"name",label:o(E)("common.name")},{default:k(()=>[$(h,{modelValue:l.file.name,"onUpdate:modelValue":i[0]||(i[0]=f=>l.file.name=f),disabled:"","data-cy":"folder-name-input"},null,8,["modelValue"])]),_:1},8,["label"]),$(F,{prop:"alt",label:o(E)("common.altText")},{default:k(()=>[$(h,{modelValue:l.file.alt,"onUpdate:modelValue":i[1]||(i[1]=f=>l.file.alt=f),"data-cy":"folder-alt-input",onKeydown:vo(T,["enter"])},null,8,["modelValue","onKeydown"])]),_:1},8,["label"]),$(F,{label:o(E)("common.image")},{default:k(()=>[m("div",Ml,[$(r,{style:{"max-height":"100%","max-width":"100%"},src:l.file.thumbnail,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[I(l.file.url)],"initial-index":0,fit:"contain"},null,8,["src","zoom-rate","min-scale","preview-src-list"])])]),_:1},8,["label"])]),_:1},8,["model","rules"])):p("",!0)]),_:1},8,["modelValue","title","onClose"])}}}),Tl={class:"media"},zl={class:"p-24px media__body"},Bl={class:"flex items-center space-x-24"},Nl={key:1},Al={key:0,class:"rounded-normal overflow-hidden shadow-s-10"},jl={key:1},Kl=le({props:{gridCol:null},emits:["loaded"],setup(l,{expose:v,emit:s}){var Ue;const{t:c}=ie(),d=Uo("dialogInfo"),E=Fo(),C=Eo(),P=[{displayName:c("common.all"),value:"all"},{displayName:c("common.page"),value:"page"},{displayName:c("common.style"),value:"style"},{displayName:c("common.view"),value:"view"},{displayName:c("common.layout"),value:"layout"},{displayName:c("common.htmlBlock"),value:"HTMLBlock"},{displayName:c("common.content"),value:"TextContent"}],b=g("all"),I=g(!1),T=g(!1),x=g((Ue=C.query.listType)!=null?Ue:"grid"),i=g([]),h=g([]),F=g(!1),r=g("/"),u=Po({currentPage:1,pageSize:24,totalCount:0}),D=g("lastModified"),N=g(!0),f=g(!1),V=g(!1),H=g({key:"",alt:"",name:"",url:"",thumbnail:""}),y=g(""),U=g(C.query.provider||"default"),A=g([]),a=q(()=>h.value.filter(e=>e.selected)),S=q(()=>i.value.filter(e=>e.selected)),re=q(()=>a.value.length+S.value.length),be=q(()=>h.value.length+i.value.length),ae=q(()=>b.value==="all"),we=g([]),ke=q(()=>we.value.map(e=>(e.name==="searchResult"?e.name=c("common.searchResult"):e.name==="root"&&!d&&(e.name=c("common.mediaLibrary")),e))),Re=q(()=>!d&&(U.value||"default")==="default");ze(()=>{d?Q():J(()=>C.query,e=>{C.name==="media"&&(r.value=e.folder||"/",y.value=e.keyword||"",U.value=e.provider||"default",Q())},{immediate:!0,deep:!0})}),J(()=>b.value,()=>{r.value="/",Q()}),J(()=>I.value,e=>{i.value.forEach(t=>{t.selected=e}),h.value.forEach(t=>{t.selected=e})}),J(()=>re.value,e=>{e===0?(I.value=!1,T.value=!1):e<be.value?T.value=!0:e===be.value&&(T.value=!1,I.value=!0)}),J(()=>C.query.listType,()=>{x.value=C.query.listType}),J(()=>y.value,()=>{u.currentPage=1});function qe(e,t){return z(this,null,function*(){var K,G,M;const j=yield io({pageNr:e,pageSize:u.pageSize,provider:U.value,path:r.value,keyword:(K=y.value)==null?void 0:K.trim(),startAfter:e>1&&(M=(G=Yo(h.value))==null?void 0:G.key)!=null?M:"",sort:D.value,desc:N.value},t);_e(j,e)})}function _e(e,t){var G;if(A.value=(G=e.providers)!=null?G:[],we.value=e.crumbPath,y.value&&(b.value="all"),e.errorMessage){i.value=[],h.value=[],u.totalCount=0,u.currentPage=1,console.warn(e.errorMessage),wo(c("common.configError",{message:e.errorMessage.replace("{troubleshoot}",c("common.troubleshoot"))}),!0,{dangerouslyUseHTMLString:!0});return}F.value=e.files.infinite||!1,F.value&&(t=e.files.pageNr);const j=(e.folders||[]).map(M=>(M.selected=!1,M));!F.value||t<=1?i.value=Me(j,"id"):i.value=Me([...i.value,...j],"id");const K=e.files.list.map(M=>(M.selected=!1,M));h.value=!F.value||t<=1?K:[...h.value,...K],u.totalCount=e.files.totalCount,u.currentPage=t,s("loaded",{keyword:y.value,data:e,page:t,providers:A.value,infinite:F.value})}function de(e){u.currentPage=e,ue(u.currentPage)}function ce(e){r.value=e.fullPath,u.currentPage=1,y.value="",h.value=[],i.value=[],Y()}function xe(e){H.value=e,V.value=!0}function Oe(e,t){return z(this,null,function*(){const j=yield ro({pageNr:e,pageSize:u.pageSize,provider:U.value,by:b.value,sort:D.value,desc:N.value},t);_e(j,e)})}function ue(e,t){ae.value?qe(e,t):Oe(e,t)}function Q(e){Y(),ue(u.currentPage,e)}function He(){f.value=!0}const Ce=g();function Ge(){var e;(e=Ce.value)==null||e.show()}function fe(e){u.currentPage=1,Q(e)}function Qe(){return z(this,null,function*(){try{if(yield No(S.value.length+a.value.length),S.value.length>0&&(yield no(S.value.map(e=>e.fullPath),U.value)),a.value.length>0){const e=a.value.map(t=>t.key||t.id);yield so(e,U.value)}fe()}catch(e){}})}function Je(){return z(this,null,function*(){const e=S.value.map(M=>M.fullPath),t=a.value.map(M=>M.key),j={root:r.value,folders:e,files:t},K=yield De(j,U.value);if(!K)return;const G=X(`Download/Package?file=${K}&type=media`);se(`/_api/v2/${G}`)})}function $e(e){Se(e.fullPath,"/")!==Se(r.value,"/")&&me(e)}function me(e){ce(e)}function Ve(){me({name:"root",fullPath:"/"})}function Y(){d?ue(u.currentPage):E.push({name:C.name,query:ve(pe({},C.query),{folder:r.value,keyword:y.value,provider:U.value,listType:x.value})})}function We(e,t){D.value=e,N.value=t,fe()}return v({selectedFiles:a,getCrumbPath:ke,handleClickPath:me,handleClickBreadcrumb:$e}),(e,t)=>{var Fe;const j=Jo,K=Wo,G=Ae,M=Do,te=Xo,ne=Io("hasPermission");return n(),L("div",Tl,[o(d)?p("",!0):(n(),L("div",{key:0,class:O(["flex items-center justify-between px-24 pt-0 relative",{"pb-24":U.value==="default"}])},[$(co,{class:O({"w-[calc(100%-400px)]":A.value.length>1,"w-[calc(100%-270px)]":A.value.length<=1}),"crumb-path":o(ke),onHandleClickPath:$e},null,8,["class","crumb-path"]),m("div",{class:O({"max-w-400px":A.value.length>1,"max-w-270px":A.value.length<=1})},[$(Ie,{provider:U.value,"onUpdate:provider":[t[0]||(t[0]=_=>U.value=_),Ve],searchKey:y.value,"onUpdate:searchKey":[t[1]||(t[1]=_=>y.value=_),Y],providers:A.value},null,8,["provider","searchKey","providers"])],2)],2)),o(Re)?(n(),w(K,{key:1,modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=_=>b.value=_),class:"el-tabs--hide-content"},{default:k(()=>[(n(!0),L(oe,null,he(o(P),_=>(n(),L(oe,null,[_.value==="all"||!y.value?(n(),w(j,{key:_.value,label:_.displayName,name:_.value},null,8,["label","name"])):p("",!0)],64))),256))]),_:1},8,["modelValue"])):p("",!0),m("div",zl,[m("div",{class:O(["flex items-center justify-between media__head",{"mb-24px":!o(d)}])},[m("div",Bl,[o(ae)?(n(),L(oe,{key:0},[o(d)?p("",!0):(n(),w(G,{key:0,modelValue:I.value,"onUpdate:modelValue":t[3]||(t[3]=_=>I.value=_),indeterminate:T.value,size:"large","data-cy":"check-all"},{default:k(()=>[W(B(o(c)("common.selectAllFiles")),1)]),_:1},8,["modelValue","indeterminate"])),$(Sl,{disabled:!!y.value,folder:r.value,provider:U.value,multiple:!0,onAfterUpload:t[4]||(t[4]=_=>fe(!0))},null,8,["disabled","folder","provider"]),o(d)?p("",!0):Z((n(),w(te,{key:1,disabled:!!y.value,round:"","data-cy":"new-folder",onClick:He},{default:k(()=>[$(M,{class:"iconfont icon-a-addfile"}),W(" "+B(o(c)("common.newFolder")),1)]),_:1},8,["disabled"])),[[ne,{feature:"mediaLibrary",action:"edit"}]]),o(d)?p("",!0):Z((n(),w(te,{key:2,disabled:!!y.value,round:"","data-cy":"search",onClick:Ge},{default:k(()=>[$(M,{class:"iconfont icon-search"}),W(" "+B(o(c)("common.search")),1)]),_:1},8,["disabled"])),[[ne,{feature:"mediaLibrary",action:"view"}]]),o(re)>0&&!o(d)?Z((n(),w(te,{key:3,round:"","data-cy":"download",onClick:Je},{default:k(()=>[$(M,{class:"iconfont icon-xiazai-wenjianxiazai-05"}),W(" "+B(o(c)("common.download")),1)]),_:1})),[[ne,{feature:"mediaLibrary",action:"view"}]]):p("",!0),o(re)>0&&!o(d)?Z((n(),w(te,{key:4,round:"",class:"text-orange","data-cy":"delete",onClick:Qe},{default:k(()=>[$(M,{class:"iconfont icon-delete"}),W(" "+B(o(c)("common.delete")),1)]),_:1})),[[ne,{feature:"mediaLibrary",action:"delete"}]]):p("",!0)],64)):p("",!0)]),o(d)?(n(),L("div",Nl,[$(Ie,{provider:U.value,"onUpdate:provider":[t[6]||(t[6]=_=>U.value=_),Ve],searchKey:y.value,"onUpdate:searchKey":[t[7]||(t[7]=_=>y.value=_),Y],providers:A.value},null,8,["provider","searchKey","providers"])])):(n(),w(uo,{key:0,current:x.value,"onUpdate:current":t[5]||(t[5]=_=>x.value=_),onChange:Y},null,8,["current"]))],2),x.value==="list"?(n(),L("div",Al,[$(mo,{folders:i.value,files:h.value,"has-checkbox":o(ae),"hide-open-folder":!y.value,provider:U.value,"sort-field":D.value,"sort-desc":N.value,onClickFolder:ce,onEditImage:xe,onSort:We},null,8,["folders","files","has-checkbox","hide-open-folder","provider","sort-field","sort-desc"]),h.value.length||i.value.length?(n(),w(Le,{key:0,class:"bg-fff dark:bg-444 py-24",pagination:o(u),infinite:F.value,onCurrentChange:de},null,8,["pagination","infinite"])):p("",!0)])):(n(),L("div",jl,[$(Ke,{folders:i.value,files:h.value,"has-checkbox":o(ae),"hide-open-folder":!y.value,"grid-col":(Fe=l.gridCol)!=null?Fe:6,pagination:o(u),provider:U.value,onClickFolder:ce,onEditImage:xe,onChangePage:de},null,8,["folders","files","has-checkbox","hide-open-folder","grid-col","pagination","provider"]),h.value.length||i.value.length?(n(),w(Le,{key:0,class:O(["dark:bg-[#1e1e1e] py-24",l.gridCol?"bg-fff dark:bg-[#222222]":"bg-[#f3f5f5]"]),pagination:o(u),infinite:F.value,onCurrentChange:de},null,8,["class","pagination","infinite"])):p("",!0)]))]),$(po,{modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=_=>f.value=_),path:r.value,folders:i.value,provider:U.value,onCreateSuccess:Q},null,8,["modelValue","path","folders","provider"]),$(Dl,{modelValue:V.value,"onUpdate:modelValue":t[9]||(t[9]=_=>V.value=_),file:H.value,provider:U.value},null,8,["modelValue","file","provider"]),$(Ll,{ref_key:"searchDialog",ref:Ce,provider:U.value,onReload:t[10]||(t[10]=_=>Q(!0))},null,8,["provider"])])}}});var ka=Ne(Kl,[["__scopeId","data-v-84bfd550"]]);export{ka as M,Sl as _};
