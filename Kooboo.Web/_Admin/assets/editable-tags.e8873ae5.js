import{o as P,w as E,g as I}from"./i18n.48bd28ac.js";import{c as M}from"./index.0d2684bf.js";import{E as W}from"./index.fc90f5ad.js";import{E as j}from"./index.968f79fd.js";import{E as N}from"./windi.a5b0b048.js";import{c5 as H,bW as q,d as S,g as x,i as G,o as p,a as C,b as w,w as V,f as h,F as B,b6 as T,j as k,aH as K,t as U,r as z,k as $,c as F,u as D}from"./url.2e6a77c4.js";import{i as L}from"./main.ea42d807.js";import{b as J}from"./_baseIndexOf.4d7985be.js";import{c as Q}from"./_baseClone.adbc92f5.js";function R(e,l,n,i){for(var m=n-1,u=e.length;++m<u;)if(i(e[m],l))return m;return-1}var X=Array.prototype,O=X.splice;function Y(e,l,n,i){var m=i?R:J,u=-1,f=l.length,g=e;for(e===l&&(l=Q(l)),n&&(g=H(e,q(n)));++u<f;)for(var c=0,a=l[u],d=n?n(a):a;(c=m(g,d,c,i))>-1;)g!==e&&O.call(g,c,1),O.call(e,c,1);return e}function Z(e,l){return e&&e.length&&l&&l.length?Y(e,l):e}const _={key:0,class:"flex items-center space-x-8"},ee={class:"flex gap-4 flex-wrap max-w-500px"},oe={class:"space-x-8 flex items-center"},A=S({props:{modelValue:null,editing:{type:Boolean},readonly:{type:Boolean},options:null,optionDeletable:{type:Boolean},size:null,labelFormatter:null},emits:["update:model-value","update:editing","delete","delete-option"],setup(e,{emit:l}){const n=e,i=x(n.modelValue),m=x();function u(){var a=i.value.trim();a?l("update:model-value",a):l("delete"),l("update:editing",!1)}function f(){i.value=n.modelValue,l("update:editing",!1),n.modelValue.trim()||l("delete")}G(()=>n.editing,a=>{a||(i.value=n.modelValue)});function g(a){var d;i.value=a,(d=m.value)==null||d.hide(),u()}function c(a){return typeof n.labelFormatter=="function"?n.labelFormatter(a):a}return(a,d)=>{var s;const t=M,o=W,b=j,y=N;return e.editing&&!e.readonly?(p(),C("div",_,[w(b,{ref_key:"popover",ref:m,disabled:!((s=e.options)!=null&&s.length),placement:"top-start",trigger:"click",width:"auto",content:"this is content, this is content, this is content"},{reference:V(()=>[w(o,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=r=>i.value=r),size:"small",onKeydown:P(E(u,["stop"]),["enter"])},null,8,["modelValue","onKeydown"])]),default:V(()=>[h("div",ee,[(p(!0),C(B,null,T(e.options,r=>(p(),k(t,{key:r,class:"cursor-pointer",closable:e.optionDeletable,onClick:v=>g(r),onClose:v=>a.$emit("delete-option",r)},{default:V(()=>[K(U(c(r)),1)]),_:2},1032,["closable","onClick","onClose"]))),128))])]),_:1},8,["disabled"]),w(y,{class:"iconfont icon-yes3 text-green cursor-pointer",onClick:E(u,["stop"])},null,8,["onClick"]),w(y,{class:"iconfont icon-close text-orange cursor-pointer",onClick:E(f,["stop"])},null,8,["onClick"])])):(p(),k(t,{key:1,type:"warning",size:e.size},{default:V(()=>[h("div",oe,[h("div",{class:"cursor-pointer flex items-center space-x-8",onClick:d[1]||(d[1]=r=>l("update:editing",!0))},[z(a.$slots,"option",{option:c(e.modelValue)}),h("div",null,U(c(e.modelValue)),1)]),e.readonly?$("",!0):(p(),k(y,{key:0,class:"iconfont icon-delete",onClick:d[2]||(d[2]=r=>l("delete"))}))])]),_:3},8,["size"]))}}}),te={class:"flex flex-wrap gap-4"},pe=S({props:{modelValue:null,readonly:{type:Boolean},addLabel:null,options:null,optionDeletable:{type:Boolean},size:null,labelFormatter:null},emits:["update:model-value","remove-item","add-item","change-item","delete-option"],setup(e,{emit:l}){const n=e,{t:i}=I(),m=F(()=>{var t,o;return(o=(t=n.modelValue)==null?void 0:t.map(b=>({key:b,value:b})))!=null?o:[]}),u=F(()=>{var t,o;return Z(((t=n.options)!=null?t:[]).slice(),(o=n.modelValue)!=null?o:[])}),f=x();function g(t){if(n.modelValue.map(o=>o.toLowerCase()).includes(t.toLowerCase())){L(i("common.valueExist"));return}l("update:model-value",[...n.modelValue,t]),l("add-item",t),f.value=void 0}function c(t,o){f.value=t?o:void 0}function a(t){l("remove-item",t);const o=[...n.modelValue];o.splice(t,1),l("update:model-value",o)}function d(t,o){var b=n.modelValue[t];if(b==o)return;if(n.modelValue.map(s=>s.toLowerCase()).includes(o.toLowerCase())){L(i("common.valueExist"));return}l("change-item",t,o);const y=[...n.modelValue];y.splice(t,1,o),l("update:model-value",y)}return(t,o)=>{const b=N,y=M;return p(),C("div",te,[(p(!0),C(B,null,T(D(m),(s,r)=>(p(),k(A,{key:s.key,"model-value":s.value,editing:r==f.value,readonly:e.readonly,options:D(u),"option-deletable":e.optionDeletable,"label-formatter":e.labelFormatter,size:e.size,"onUpdate:modelValue":v=>d(r,v),"onUpdate:editing":v=>c(v,r),onDelete:v=>a(r),onDeleteOption:o[0]||(o[0]=v=>t.$emit("delete-option",v))},{option:V(({option:v})=>[z(t.$slots,"option",{option:v})]),_:2},1032,["model-value","editing","readonly","options","option-deletable","label-formatter","size","onUpdate:modelValue","onUpdate:editing","onDelete"]))),128)),e.readonly?$("",!0):(p(),C(B,{key:0},[f.value==-1?(p(),k(A,{key:0,"model-value":"",editing:"",readonly:e.readonly,options:D(u),"option-deletable":e.optionDeletable,"label-formatter":e.labelFormatter,size:e.size,"onUpdate:modelValue":g,"onUpdate:editing":o[1]||(o[1]=s=>c(s,-1)),onDeleteOption:o[2]||(o[2]=s=>t.$emit("delete-option",s))},{option:V(({option:s})=>[z(t.$slots,"option",{option:s})]),_:3},8,["readonly","options","option-deletable","label-formatter","size"])):$("",!0),f.value==null?(p(),k(y,{key:1,type:"success",class:"cursor-pointer",size:e.size,onClick:o[3]||(o[3]=s=>f.value=-1)},{default:V(()=>[w(b,{class:"iconfont icon-a-addto"}),K(" "+U(e.addLabel),1)]),_:1},8,["size"])):$("",!0)],64)),z(t.$slots,"default")])}}});export{pe as _};
