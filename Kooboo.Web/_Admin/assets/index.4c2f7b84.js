var b=(h,a,m)=>new Promise((d,c)=>{var y=t=>{try{o(m.next(t))}catch(e){c(e)}},_=t=>{try{o(m.throw(t))}catch(e){c(e)}},o=t=>t.done?d(t.value):Promise.resolve(t.value).then(y,_);o((m=m.apply(h,a)).next())});import{_ as P}from"./icon-button.3313e42d.js";import{g as $,a as F}from"./index.f01d4ffd.js";import{_ as M}from"./k-table.d4486972.js";import{d as R,cd as S,g as x,aV as j,c as q,b7 as z,o as l,a as f,b as n,u as i,f as v,w as r,F as w,b6 as k,t as g,j as B,e as H,aH as C}from"./url.2e6a77c4.js";import{u as A}from"./replace-all.7cf5f327.js";import{B as G}from"./breadcrumb.80c136b8.js";import{g as J}from"./i18n.48bd28ac.js";import{E as K}from"./windi.a5b0b048.js";import{E as O}from"./index.2bc50276.js";import{E as Q,a as U,b as W}from"./index.f5a869bb.js";import{E as X}from"./index.b494e80e.js";import{c as Y}from"./index.0d2684bf.js";import"./index.379e80ad.js";import"./focus-trap.23f44899.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.ff0264f3.js";import"./index.8262f5ef.js";import"./index.fcc3ea42.js";import"./main.ea42d807.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./sortable.esm.a99254e8.js";import"./index.7034978e.js";import"./isEqual.f1ae9fb3.js";import"./_baseIsEqual.c0d7e77a.js";import"./index.fc90f5ad.js";import"./event.776e7e11.js";import"./error.7e8331f1.js";import"./index.77edae39.js";import"./index.695d0284.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.a439b087.js";import"./dropdown.0507a1c7.js";import"./refs.4001ce17.js";import"./debounce.61c67278.js";import"./toNumber.574be4f1.js";import"./index.064c7de9.js";import"./scroll.f51de5d8.js";import"./validator.e2869aba.js";const Z={class:"p-24"},tt={class:"flex items-center py-24 space-x-16"},ot={class:"flex items-center"},et={class:"p-4 dark:text-fff/86"},Kt=R({setup(h){const{t:a}=J(),m=S(),d=x([]),c=x([]);j(()=>b(this,null,function*(){const o=yield Promise.all([$(),F()]);d.value=o[0],c.value=o[1]}));const y=q(()=>{const o=[];for(const t of d.value){if(c.value.some(p=>p.name===t.name))continue;let e=o.find(p=>p.group===t.category);e?e.list.push(t.name):(e={group:t.category,list:[t.name]},o.push(e))}return o}),_=o=>{m.push(A({name:"frontevents-edit",query:{name:o}}))};return(o,t)=>{const e=K,p=O,D=Q,T=U,I=W,E=X,L=Y,V=P,N=z("hasPermission");return l(),f("div",Z,[n(G,{name:i(a)("common.frontEvents")},null,8,["name"]),v("div",tt,[n(I,{trigger:"click",onCommand:_},{dropdown:r(()=>[n(T,null,{default:r(()=>[(l(!0),f(w,null,k(i(y),s=>(l(),f(w,{key:s.group},[v("h3",et,g(s.group),1),(l(!0),f(w,null,k(s.list,u=>(l(),B(D,{key:u,command:u,"data-cy":u},{default:r(()=>[v("span",null,g(u),1)]),_:2},1032,["command","data-cy"]))),128))],64))),128))]),_:1})]),default:r(()=>[H((l(),B(p,{round:"","data-cy":"new-event"},{default:r(()=>[v("div",ot,[C(g(i(a)("common.newEvent"))+" ",1),n(e,{class:"iconfont icon-pull-down text-12px ml-8 !mr-0"})])]),_:1})),[[N,{feature:"frontEvents",action:"edit"}]])]),_:1})]),n(i(M),{data:c.value},{default:r(()=>[n(E,{label:i(a)("common.type"),prop:"name"},null,8,["label"]),n(E,{label:i(a)("common.rulesCount")},{default:r(({row:s})=>[n(L,{type:"success",size:"small",class:"rounded-full","data-cy":"rules-count"},{default:r(()=>[C(g(s.count),1)]),_:2},1024)]),_:1},8,["label"]),n(E,{width:"100px",align:"right"},{default:r(({row:s})=>[n(V,{icon:"icon-a-writein",tip:i(a)("common.edit"),"data-cy":"edit",onClick:u=>_(s.name)},null,8,["tip","onClick"])]),_:1})]),_:1},8,["data"])])}}});export{Kt as default};
