import{n as y}from"./guid.c1a40312.js";import{g as v}from"./url.2e6a77c4.js";function w(o,i){return{id:y(),active:!0,barcode:"",originalInventory:0,newInventory:0,selectedOptions:o,price:0,sku:"",weight:0,image:i,tags:[],digitalItems:[],autoDelivery:!0}}function D(o,i){const a=[];for(const d of o)for(const l of d.selectedOptions)l.name==i&&(a.includes(l.value)||a.push(l.value));return a}function m(o,i=!1){return o!=null&&o.length?o.map(a=>i?a.value:`${a.name}: ${a.value}`).join(" / "):"-"}function J(){const o=v([]),i=v([]);function a(e){i.value.push(e);for(const s of e.selectedOptions)o.value.includes(s.name)||o.value.push(s.name)}function d(e,s,u){const t=[];for(const n of i.value)if(n.selectedOptions.find(f=>f.name==e)){const f=JSON.parse(JSON.stringify(n.selectedOptions));f.find(r=>r.name==e).value=s;const h=m(f);t.find(r=>m(r)==h)||t.push(f)}else n.selectedOptions.push({name:e,value:s});for(const n of t)i.value.push(w(n,u))}function l(e,s){const u=o.value.findIndex(t=>t==e);o.value.splice(u,1,s);for(const t of i.value){const n=t.selectedOptions.find(c=>c.name==e);n&&(n.name=s)}}function O(e,s,u){for(const t of i.value){const n=t.selectedOptions.find(c=>c.name==e);!n||n.value==s&&(n.value=u)}}function p(e,s){const u=i.value.find(t=>t.selectedOptions.find(n=>n.name==e&&n.value!=s));for(const t of[...i.value]){const n=t.selectedOptions.findIndex(c=>c.name==e);if(n!=-1&&t.selectedOptions[n].value==s)if(u){const c=i.value.findIndex(f=>f==t);i.value.splice(c,1)}else t.selectedOptions.splice(n,1)}}function I(e){const s=o.value.indexOf(e);o.value.splice(s,1);for(const u of[...i.value]){const t=u.selectedOptions.find(n=>n.name==e);!t||p(t.name,t.value)}}function x(e){o.value.push(e)}function g(e){const s=i.value.findIndex(u=>u.id==e);i.value.splice(s,1)}return{options:o,list:i,updateOptionName:l,updateOptionItem:O,addOptionItem:d,addVariant:a,deleteOptionItem:p,deleteOption:I,addOption:x,removeVariant:g}}export{m as b,w as c,D as g,J as u};
