var ne=Object.defineProperty,ie=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var H=(e,n,t)=>n in e?ne(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,F=(e,n)=>{for(var t in n||(n={}))re.call(n,t)&&H(e,t,n[t]);if(G)for(var t of G(n))ce.call(n,t)&&H(e,t,n[t]);return e},W=(e,n)=>ie(e,se(n));var E=(e,n,t)=>new Promise((l,o)=>{var r=v=>{try{w(t.next(v))}catch(d){o(d)}},h=v=>{try{w(t.throw(v))}catch(d){o(d)}},w=v=>v.done?l(v.value):Promise.resolve(v.value).then(r,h);w((t=t.apply(e,n)).next())});import{_ as ue}from"./k-table.d4486972.js";import{B as me}from"./breadcrumb.80c136b8.js";import{s as q,d as pe,g as U,w as L}from"./i18n.48bd28ac.js";import{a as j}from"./replace-all.7cf5f327.js";import{d as z,E as I,u as de}from"./main.ea42d807.js";import{_ as R}from"./index.a731e53b.js";import{E as fe}from"./index.fc90f5ad.js";import{E as ee,a as oe}from"./index.6855d037.js";import{E as J}from"./index.c4e9b529.js";import{d as D,o as b,a as S,r as ve,n as _e,u as a,g as B,i as A,j as g,w as u,b as p,b6 as P,k as $,F as T,f as M,aH as V,t as y,G as be,E as he,b7 as ke,e as K}from"./url.2e6a77c4.js";import{b as ye,u as we,_ as Ce,w as ge,E as Ve}from"./windi.a5b0b048.js";import{C as te}from"./event.776e7e11.js";import{_ as xe}from"./dev-mode.c4133b5a.js";import{s as Q,b as Se}from"./confirm.e2c924ff.js";import{E as Ee,a as $e}from"./index.695d0284.js";import{E as le}from"./index.2bc50276.js";import{a as Me}from"./use-date.01b82ce0.js";import{_ as X}from"./icon-button.3313e42d.js";import{E as Be}from"./index.b494e80e.js";import"./sortable.esm.a99254e8.js";import"./index.7034978e.js";import"./index.0d2684bf.js";import"./index.379e80ad.js";import"./focus-trap.23f44899.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.ff0264f3.js";import"./index.a439b087.js";import"./error.7e8331f1.js";import"./index.fcc3ea42.js";import"./scroll.f51de5d8.js";import"./isEqual.f1ae9fb3.js";import"./_baseIsEqual.c0d7e77a.js";import"./debounce.61c67278.js";import"./toNumber.574be4f1.js";import"./index.064c7de9.js";import"./validator.e2869aba.js";import"./index.77edae39.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./_baseClone.adbc92f5.js";import"./index.603c1365.js";import"./refs.4001ce17.js";import"./guid.c1a40312.js";import"./use-shortcuts.21ce2d8e.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./config.9fb52765.js";import"./dark.ddf8665a.js";import"./page.831d1a45.js";import"./validate.efc4a5c0.js";import"./index.d75a71d9.js";import"./index.aba77680.js";import"./index.6d45a031.js";import"./index.31f26a0f.js";import"./index.60af85f4.js";import"./style.19d0c187.js";import"./index.99c4f65d.js";import"./aria.75ec5909.js";import"./index.f5a869bb.js";import"./dropdown.0507a1c7.js";import"./use-copy-text.a346ed23.js";import"./index.c6df1b45.js";import"./index.0f940e7f.js";import"./classCompletion.a22e38a6.js";import"./vuedraggable.umd.5840ebc7.js";import"./cloneDeep.ff43c1f8.js";import"./toggleComment.5b29ca87.js";import"./use-save-tip.04d9878f.js";import"./index.cbddf8eb.js";import"./index.66d5d547.js";import"./index.232e741a.js";import"./index.af90dc36.js";import"./index.470f0e7e.js";import"./index.deca86b5.js";import"./alert.583ccfe6.js";import"./index.fafb14b3.js";import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.118b18f5.js";/* empty css                                                          */import"./file.b0d4cc6e.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.82732353.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.f6d26366.js";import"./image-editor.846c8dc6.js";import"./main.esm.5190fb65.js";import"./index.f01d4ffd.js";import"./logo-transparent.1566007e.js";import"./dayjs.min.0a66969b.js";import"./index.8262f5ef.js";const je=ye({checked:{type:Boolean,default:!1}}),ze={"update:checked":e=>q(e),[te]:e=>q(e)},De={name:"ElCheckTag"},Ne=D(W(F({},De),{props:je,emits:ze,setup(e,{emit:n}){const t=e,l=we("check-tag"),o=()=>{const r=!t.checked;n(te,r),n("update:checked",r)};return(r,h)=>(b(),S("span",{class:_e([a(l).b(),a(l).is("checked",r.checked)]),onClick:o},[ve(r.$slots,"default")],2))}}));var Fe=Ce(Ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const Ie=ge(Fe),O=pe.global.t;var ae=(e=>(e.af="af",e.ar="ar",e.bg="bg",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.eo="eo",e.es="es",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fr="fr",e.he="he",e.hr="hr",e.hu="hu",e["hy-am"]="hy-am",e.id="id",e.it="it",e.ja="ja",e.kk="kk",e.km="km",e.ko="ko",e.ku="ku",e.ky="ky",e.lt="lt",e.lv="lv",e.mn="mn",e["nb-no"]="nb-no",e.nl="nl",e.pl="pl",e["pt-br"]="pt-br",e.pt="pt",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.ta="ta",e.th="th",e.tk="tk",e.tr="tr",e["ug-cn"]="ug-cn",e.uk="uk",e["uz-uz"]="uz-uz",e.vi="vi",e["zh-cn"]="zh-cn",e["zh-tw"]="zh-tw",e))(ae||{});const Te=()=>z.get(j("/SpaMultilingual/List")),Ue=e=>z.post(j("/SpaMultilingual/post"),e,void 0,{successMessage:O("common.saveSuccess")}),Oe=e=>z.post(j("/SpaMultilingual/SetLang"),e,void 0,{successMessage:O("common.saveSuccess")}),Re=e=>z.post(j("/SpaMultilingual/Deletes"),e,void 0,{successMessage:O("common.deleteSuccess")}),Z=e=>z.post(j("/SpaMultilingual/Import"),e,void 0,{successMessage:O("common.importSuccess")}),Je=D({props:{modelValue:{type:Boolean},data:null,keys:null},emits:["close","save-success"],setup(e,{emit:n}){const t=e,{t:l}=U(),o=B();A(()=>t.data,w=>{o.value=F({},w),o.value.value&&(o.value.value=F({},o.value.value))},{immediate:!0,deep:!0});const r=()=>{n("close")};function h(){return E(this,null,function*(){!o.value||(yield Ue(o.value),n("save-success"),r())})}return(w,v)=>{const d=fe,c=ee,i=oe,s=J;return b(),g(s,{modelValue:t.modelValue,"onUpdate:modelValue":v[1]||(v[1]=m=>t.modelValue=m),width:"650px","close-on-click-modal":!1,title:a(l)("common.setting"),onClose:r},{footer:u(()=>[p(R,{onConfirm:h,onCancel:r})]),default:u(()=>[p(i,{"label-position":"top",onSubmit:v[0]||(v[0]=L(()=>{},["prevent"]))},{default:u(()=>[(b(!0),S(T,null,P(e.keys,m=>(b(),g(c,{key:m,label:m},{default:u(()=>{var f;return[(f=o.value)!=null&&f.value?(b(),g(d,{key:0,modelValue:o.value.value[m],"onUpdate:modelValue":_=>o.value.value[m]=_,rows:2,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):$("",!0)]}),_:2},1032,["label"]))),128))]),_:1})]),_:1},8,["modelValue","title"])}}}),Ae={class:"space-y-8 space-x-8 select-none"},Pe=D({props:{modelValue:{type:Boolean},data:null},emits:["close","save-success"],setup(e,{emit:n}){const t=e,{t:l}=U(),o=B([]),r=B(),h=Object.values(ae);A(()=>t.data,c=>{c.length&&(o.value=[...c],r.value=c[0])},{immediate:!0,deep:!0});const w=c=>{c!==r.value&&(o.value.find(i=>i===c)?o.value=o.value.filter(i=>i!==c):o.value.push(c))},v=()=>{n("close")};function d(){return E(this,null,function*(){yield Oe(o.value),n("save-success"),v()})}return(c,i)=>{const s=Ie,m=J;return b(),g(m,{modelValue:t.modelValue,"onUpdate:modelValue":i[0]||(i[0]=f=>t.modelValue=f),width:"650px","close-on-click-modal":!1,title:a(l)("common.setting"),onClose:v},{footer:u(()=>[p(R,{onConfirm:d,onCancel:v})]),default:u(()=>[M("div",Ae,[(b(!0),S(T,null,P(a(h),f=>(b(),g(s,{key:f,size:"large",checked:o.value.includes(f),onChange:_=>w(f)},{default:u(()=>[V(y(f),1)]),_:2},1032,["checked","onChange"]))),128))])]),_:1},8,["modelValue","title"])}}}),Ye={key:0,class:"absolute left-0 top-0 w-full h-full"},Ge={class:"ml-8"},He=D({props:{modelValue:{type:Boolean},isNull:{type:Boolean}},emits:["close","save-success"],setup(e,{emit:n}){const t=e,{t:l}=U(),o=B({submitter:"replace",type:"file",filename:"",text:"",file:null}),r={example:{en:"example","zh-cn":"\u793A\u4F8B"},key:{en:"","zh-cn":""}};A(()=>t.modelValue,i=>{i&&(o.value={submitter:"replace",type:"file",filename:"",text:JSON.stringify(r,null,2),file:null})});const h=()=>{n("close")},w=i=>{i.target.value=""},v=i=>{var m;const s=(m=i.target)==null?void 0:m.files[0];s&&s.type==="application/json"?(o.value.filename=s.name,o.value.file=s):(I.warning(l("common.fileFormatIsIncorrect")),i.target.files=null,o.value.filename="",o.value.file=null)};function d(){return E(this,null,function*(){if(o.value.type==="file"){if(!o.value.file){I.warning(l("common.selectFileTips"));return}const i=new FormData;i.append("file",o.value.file),i.append("importType",o.value.submitter),o.value.submitter==="replace"&&!t.isNull&&(yield Q(l("common.replaceWarning"))),yield Z(i)}else{let i;try{i=JSON.parse(o.value.text)}catch(m){I.warning(l("common.codeFormatIsIncorrect"));return}if(Object.keys(i).length<=0){I.warning(l("common.inputValue"));return}const s=new FormData;s.append("file",new Blob([JSON.stringify(i)])),s.append("importType",o.value.submitter),o.value.submitter==="replace"&&!t.isNull&&(yield Q(l("common.replaceWarning"))),yield Z(s)}n("save-success"),h()})}function c(){const i=JSON.stringify(r,null,2),s=new Blob([i]),m=window.URL.createObjectURL(s),f=document.createElement("a");f.href=m,f.download="example.json",f.click()}return(i,s)=>{const m=Ee,f=$e,_=ee,C=le,k=oe,N=J;return b(),g(N,{modelValue:e.modelValue,"onUpdate:modelValue":s[4]||(s[4]=x=>be(modelValue)?modelValue.value=x:null),width:"650px","close-on-click-modal":!1,title:a(l)("common.import"),onClose:h},{footer:u(()=>[p(R,{"confirm-label":a(l)("common.start"),onConfirm:d,onCancel:h},null,8,["confirm-label"])]),default:u(()=>[p(k,{"label-position":"top",onSubmit:s[3]||(s[3]=L(()=>{},["prevent"]))},{default:u(()=>[p(_,{label:a(l)("common.submitter")},{default:u(()=>[p(f,{modelValue:o.value.submitter,"onUpdate:modelValue":s[0]||(s[0]=x=>o.value.submitter=x),class:"el-radio-group--rounded"},{default:u(()=>[p(m,{size:"large",label:"replace","data-cy":"replace"},{default:u(()=>[V(y(a(l)("common.replace")),1)]),_:1}),p(m,{size:"large",label:"combine","data-cy":"combine"},{default:u(()=>[V(y(a(l)("common.combine")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),p(_,{label:a(l)("common.contentType")},{default:u(()=>[p(f,{modelValue:o.value.type,"onUpdate:modelValue":s[1]||(s[1]=x=>o.value.type=x),class:"el-radio-group--rounded"},{default:u(()=>[p(m,{size:"large",label:"file","data-cy":"file"},{default:u(()=>[V(y(a(l)("common.files")),1)]),_:1}),p(m,{size:"large",label:"code","data-cy":"code"},{default:u(()=>[V(y(a(l)("common.code")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),o.value.type==="file"?(b(),g(_,{key:0,label:a(l)("common.files")},{default:u(()=>[p(C,{type:"primary",class:"rounded-full relative"},{default:u(()=>[V(y(a(l)("common.selectFile"))+" ",1),e.modelValue?(b(),S("label",Ye,[M("input",{id:"attachments",accept:".json",class:"hidden",type:"file",onChange:v,onClick:w},null,32)])):$("",!0)]),_:1}),M("span",Ge,y(o.value.filename||a(l)("common.supportFile")+": .json"),1),M("span",{class:"ml-8 text-blue cursor-pointer",onClick:c},y(a(l)("common.downloadTheSample")),1)]),_:1},8,["label"])):$("",!0),o.value.type==="code"?(b(),g(_,{key:1,label:a(l)("common.code")},{default:u(()=>[p(xe,{ref:"editor",modelValue:o.value.text,"onUpdate:modelValue":s[2]||(s[2]=x=>o.value.text=x),class:"border border-line border-solid dark:border-opacity-50 !min-h-200px h-auto",language:"json"},null,8,["modelValue"])]),_:1},8,["label"])):$("",!0)]),_:1})]),_:1},8,["modelValue","title"])}}}),We={class:"p-24"},qe={class:"flex items-center py-24 space-x-16"},Ke=["title"],Qe=D({setup(e){const{t:n}=U(),t=B([]),l=B([]),o=de(),r=he({current:"",row:void 0,open(d,c){d==="edit"&&!o.hasAccess("spaMultilingual","edit")||(r.current=d,d==="edit"&&c&&(r.row=c))},close(){r.current=void 0,r.row=void 0}}),h=()=>E(this,null,function*(){var d;if(t.value=yield Te(),(d=t.value)!=null&&d.length){let c=1,i=0;t.value.forEach((_,C)=>{const k=Object.keys(_.value||{}).length;k>c&&(c=k,i=C)});const{value:s,defaultLang:m}=t.value[i];l.value=Object.keys(s||{});const f=l.value.findIndex(_=>_===m);f!==-1&&l.value.splice(f,1),l.value.unshift(m)}});h();const w=d=>E(this,null,function*(){yield Se(d.length),yield Re(d.map(c=>c.id)),h()}),v=d=>{const c={};d!=null&&d.length?d.forEach(_=>{c[_.name]=_.value}):t.value.forEach(_=>{c[_.name]=_.value});const i=JSON.stringify(c,null,2),s=new Blob([i]),m=window.URL.createObjectURL(s),f=document.createElement("a");f.href=m,f.download=`translate-${Me(new Date().toString(),"YYYYMMDD")}.json`,f.click()};return(d,c)=>{const i=Ve,s=le,m=Be,f=ue,_=ke("hasPermission");return b(),S("div",We,[p(me,{name:a(n)("common.spaMultilingual")},null,8,["name"]),M("div",qe,[K((b(),g(s,{round:"","data-cy":"upload",onClick:c[0]||(c[0]=C=>a(r).open("upload"))},{default:u(()=>[p(i,{class:"iconfont icon-a-Cloudupload"}),V(" "+y(a(n)("common.import")),1)]),_:1})),[[_,{feature:"spaMultilingual",action:"edit"}]]),p(s,{round:"","data-cy":"export",onClick:c[1]||(c[1]=C=>v())},{default:u(()=>[p(i,{class:"iconfont icon-share"}),V(" "+y(a(n)("common.exportAll")),1)]),_:1}),K((b(),g(s,{round:"","data-cy":"setting",onClick:c[2]||(c[2]=C=>a(r).open("setting"))},{default:u(()=>[p(i,{class:"iconfont icon-a-setup"}),V(" "+y(a(n)("common.setting")),1)]),_:1})),[[_,{feature:"spaMultilingual",action:"edit"}]])]),p(f,{data:t.value,"show-check":"","table-layout":"auto",permission:{feature:"spaMultilingual",action:"delete"},onDelete:w},{bar:u(({selected:C})=>[C.length?(b(),g(X,{key:0,class:"text-blue",icon:"icon-share",tip:a(n)("common.exportSelectedItems"),circle:"","data-cy":"export-seleted",onClick:k=>v(C)},null,8,["tip","onClick"])):$("",!0)]),default:u(()=>{var C;return[(C=t.value)!=null&&C.length?(b(),S(T,{key:0},[p(m,{label:a(n)("common.name"),width:"150"},{default:u(({row:k})=>[M("span",{class:"ellipsis",title:k.name,"data-cy":"name"},y(k.name),9,Ke)]),_:1},8,["label"]),(b(!0),S(T,null,P(l.value,(k,N)=>(b(),g(m,{key:k,"min-width":"160",label:N===0?k+`(${a(n)("common.default")})`:k},{default:u(({row:x})=>{var Y;return[V(y((Y=x.value)==null?void 0:Y[k]),1)]}),_:2},1032,["label"]))),128)),p(m,{fixed:"right",width:"70",align:"right"},{default:u(({row:k})=>[p(X,{permission:{feature:"spaMultilingual",action:"edit"},icon:"icon-a-writein",tip:a(n)("common.edit"),"data-cy":"edit",onClick:N=>a(r).open("edit",k)},null,8,["tip","onClick"])]),_:1})],64)):$("",!0)]}),_:1},8,["data"]),p(Pe,{"model-value":a(r).current==="setting",data:l.value,onClose:a(r).close,onSaveSuccess:h},null,8,["model-value","data","onClose"]),p(He,{"model-value":a(r).current==="upload","is-null":!(t.value.length>0),onClose:a(r).close,onSaveSuccess:h},null,8,["model-value","is-null","onClose"]),p(Je,{data:a(r).row,keys:l.value,"model-value":a(r).current==="edit",onClose:a(r).close,onSaveSuccess:h},null,8,["data","keys","model-value","onClose"])])}}});var Ot=Qe;export{Ot as default};
