var Z=Object.defineProperty,ee=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var $=(t,l,a)=>l in t?Z(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,M=(t,l)=>{for(var a in l||(l={}))te.call(l,a)&&$(t,a,l[a]);if(V)for(var a of V(l))le.call(l,a)&&$(t,a,l[a]);return t},x=(t,l)=>ee(t,ae(l));var F=(t,l,a)=>new Promise((w,h)=>{var o=r=>{try{p(a.next(r))}catch(n){h(n)}},S=r=>{try{p(a.throw(r))}catch(n){h(n)}},p=r=>r.done?w(r.value):Promise.resolve(r.value).then(o,S);p((a=a.apply(t,l)).next())});import{i as se,a as m,u as H,x as re}from"./i18n.bcd18f8a.js";import{E as ne}from"./index.ea2df5df.js";import{b as oe,d as j,m as ie,u as ue,_ as ce,g as de,w as fe}from"./windi.19264205.js";import{u as ve}from"./index.c80f5028.js";import{u as pe}from"./index.5cbbc5d7.js";import{i as me}from"./position.f6e7bc86.js";import{d as ye,bf as ge,g as d,c as y,i as we,h as he,o as f,a as g,aT as Le,u as s,k as v,n as k,r as B,f as D,t as ke,F as Se,j as Ee,w as ze,m as Ce,K as Ie,p as be}from"./url.8f5ec20c.js";import{g as Be}from"./scroll.4888a9e9.js";const _e=oe({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:j([String,Object])},previewSrcList:{type:j(Array),default:()=>ie([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),Te={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>se(t),close:()=>!0},Ae=["src","loading"],Ne={key:0},Oe={name:"ElImage",inheritAttrs:!1},Pe=ye(x(M({},Oe),{props:_e,emits:Te,setup(t,{emit:l}){const a=t;let w="";const{t:h}=ve(),o=ue("image"),S=ge(),p=pe(),r=d(),n=d(!1),c=d(!0),E=d(!1),L=d(),u=d(),K=m&&"loading"in HTMLImageElement.prototype;let z,C;const Y=y(()=>S.style),q=y(()=>{const{fit:e}=a;return m&&e?{objectFit:e}:{}}),I=y(()=>{const{previewSrcList:e}=a;return Array.isArray(e)&&e.length>0}),W=y(()=>{const{previewSrcList:e,initialIndex:i}=a;let P=i;return i>e.length-1&&(P=0),P}),_=y(()=>a.loading==="eager"?!1:!K&&a.loading==="lazy"||a.lazy),b=()=>{!m||(c.value=!0,n.value=!1,r.value=a.src)};function G(e){c.value=!1,n.value=!1,l("load",e)}function J(e){c.value=!1,n.value=!0,l("error",e)}function T(){me(L.value,u.value)&&(b(),O())}const A=re(T,200);function N(){return F(this,null,function*(){var e;if(!m)return;yield Ie();const{scrollContainer:i}=a;de(i)?u.value=i:be(i)&&i!==""?u.value=(e=document.querySelector(i))!=null?e:void 0:L.value&&(u.value=Be(L.value)),u.value&&(z=H(u,"scroll",A),setTimeout(()=>T(),100))})}function O(){!m||!u.value||!A||(z==null||z(),u.value=void 0)}function Q(e){if(!!e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function R(){!I.value||(C=H("wheel",Q,{passive:!1}),w=document.body.style.overflow,document.body.style.overflow="hidden",E.value=!0)}function U(){C==null||C(),document.body.style.overflow=w,E.value=!1,l("close")}function X(e){l("switch",e)}return we(()=>a.src,()=>{_.value?(c.value=!0,n.value=!1,O(),N()):b()}),he(()=>{_.value?N():b()}),(e,i)=>(f(),g("div",{ref_key:"container",ref:L,class:k([s(o).b(),e.$attrs.class]),style:Ce(s(Y))},[r.value!==void 0&&!n.value?(f(),g("img",Le({key:0},s(p),{src:r.value,loading:e.loading,style:s(q),class:[s(o).e("inner"),s(I)&&s(o).e("preview"),c.value&&s(o).is("loading")],onClick:R,onLoad:G,onError:J}),null,16,Ae)):v("v-if",!0),c.value||n.value?(f(),g("div",{key:1,class:k(s(o).e("wrapper"))},[c.value?B(e.$slots,"placeholder",{key:0},()=>[D("div",{class:k(s(o).e("placeholder"))},null,2)]):n.value?B(e.$slots,"error",{key:1},()=>[D("div",{class:k(s(o).e("error"))},ke(s(h)("el.image.error")),3)]):v("v-if",!0)],2)):v("v-if",!0),s(I)?(f(),g(Se,{key:2},[E.value?(f(),Ee(s(ne),{key:0,"z-index":e.zIndex,"initial-index":s(W),infinite:e.infinite,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:U,onSwitch:X},{default:ze(()=>[e.$slots.viewer?(f(),g("div",Ne,[B(e.$slots,"viewer")])):v("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):v("v-if",!0)],64)):v("v-if",!0)],6))}}));var Ve=ce(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const qe=fe(Ve);export{qe as E};
