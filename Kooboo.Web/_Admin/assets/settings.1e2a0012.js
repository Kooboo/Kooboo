var ie=Object.defineProperty;var te=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var oe=(V,a,o)=>a in V?ie(V,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):V[a]=o,ae=(V,a)=>{for(var o in a||(a={}))de.call(a,o)&&oe(V,o,a[o]);if(te)for(var o of te(a))me.call(a,o)&&oe(V,o,a[o]);return V};var J=(V,a,o)=>new Promise((p,f)=>{var i=b=>{try{r(o.next(b))}catch(y){f(y)}},_=b=>{try{r(o.throw(b))}catch(y){f(y)}},r=b=>b.done?p(b.value):Promise.resolve(b.value).then(i,_);r((o=o.apply(V,a)).next())});import{_ as ee}from"./icon-button.a2edb33f.js";import{_ as j}from"./tooltip.9f258018.js";import{u as Y,h as re,m as ce,E as pe,n as fe,o as ve,p as _e,b as be}from"./main.d919dab0.js";import{d as Ve,g as M,w as ye}from"./i18n.0d8cb6d1.js";import{r as ge}from"./index.8cff0d70.js";import{g as E,d as L,b7 as xe,u as e,o as v,a as w,f as m,b as t,w as s,aH as O,t as S,F as T,b6 as R,j as x,k,e as he,i as q,r as Se,c as X,c0 as ke,az as Ce,h as we,J as Ue,cj as $e}from"./url.8f5ec20c.js";import{E as G}from"./index.97ced36a.js";import{E as I,a as Pe}from"./index.6756a6f3.js";import{E as H,a as K}from"./index.9a7a049b.js";import{E as Q}from"./index.d29acda2.js";import{E as Ee}from"./windi.dcba9a95.js";import{E as ne}from"./index.c7806af3.js";import{E as Te}from"./index.337c36f2.js";import{_ as Le}from"./key-value-editor.37da5d91.js";import{b as F,a as De}from"./replace-all.e310d26c.js";import{E as se}from"./index.66c73cbe.js";import{M as Re}from"./media-dialog.6d9d43ca.js";import"./validate.b9ea657d.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.8fc1c564.js";import{_ as Oe}from"./index.d1d474c4.js";import{_ as Ie,a as Me}from"./dev-mode.7f653a4a.js";import{U as Ne}from"./editor.main.d2800f63.js";import{b as Ae,a as Be}from"./index.230671a2.js";import{E as Je}from"./index.6ac167de.js";import{T as Fe}from"./index.86140375.js";import{c as qe}from"./country-and-region-codes.c36488d2.js";import{E as ze}from"./index.55f31b64.js";import{u as We}from"./use-save-tip.a46b00fb.js";const l=E(),Z=Y(),je=Ve.global.t,D={},Ge=["application/zip","application/x-zip","application/octet-stream","application/x-zip-compressed"],ue=()=>J(void 0,null,function*(){l.value=JSON.parse(JSON.stringify(Z.site))}),He=V=>J(void 0,null,function*(){if(V.name.indexOf(".")>-1&&V.name.split(".").reverse()[0]==="zip"){const a=new FormData;a.append("file",V.raw),yield ce(a),yield Z.loadSite(),ue()}else pe.error(je("common.fileFormatIsIncorrect"))}),so=()=>J(void 0,null,function*(){var a,o;(a=l.value)!=null&&a.specialPath&&(l.value.specialPath=Array.from(new Set(l.value.specialPath.filter(p=>p.trim()!==""))));const V=JSON.parse(JSON.stringify(l.value));D.onPwaSave(V),D.onMultilingualSave(V),(o=D.onVisitorCountryRestrictionsSave)==null||o.call(D,V),D.onLighthouseSave(V),D.onCustomSettingsSave(V),yield re(V),Z.loadSite(),Z.loadSites(),ge()}),Ke={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px"},Ye={class:"max-w-504px"},Qe={class:"flex items-center"},Xe={key:0,class:"!-ml-56px !-mr-56px !px-56px bg-[#fafafa] dark:bg-[#333]"},Ze={class:"max-w-504px py-16 mb-18px"},el={class:"space-y-8 w-full"},ll={class:"max-w-504px"},tl={class:"flex items-center space-x-16"},ol=L({emits:["export","initSite"],setup(V,{emit:a}){const{t:o}=M(),p=E();fe().then(y=>p.value=y);const f=E({o:"private",p:"public",m:"member"}),i=y=>J(this,null,function*(){yield He(y),a("initSite")}),_=()=>{Array.isArray(l.value.specialPath)||(l.value.specialPath=[]),l.value.specialPath.push("")},r=y=>{l.value.specialPath.splice(y,1)},b=E([{value:!0,name:"Contain",title:o("common.IncludePath")},{value:!1,name:"Exclude",title:o("common.ExcludePath")}]);return(y,u)=>{const n=G,d=I,g=j,c=H,$=K,C=ee,U=Q,B=Ee,h=ne,W=Te,N=xe("hasPermission");return e(l)?(v(),w("div",Ke,[m("div",Ye,[t(d,{label:e(o)("common.displayName")},{default:s(()=>[t(n,{modelValue:e(l).displayName,"onUpdate:modelValue":u[0]||(u[0]=P=>e(l).displayName=P),"data-cy":"display-name"},null,8,["modelValue"])]),_:1},8,["label"]),t(d,null,{label:s(()=>[m("div",Qe,[O(S(e(o)("common.defaultDatabase"))+" ",1),t(g,{tip:e(o)("common.defaultDataBaseTips"),"custom-class":"ml-4"},null,8,["tip"])])]),default:s(()=>[t($,{modelValue:e(l).defaultDatabase,"onUpdate:modelValue":u[1]||(u[1]=P=>e(l).defaultDatabase=P),class:"w-full"},{default:s(()=>[t(c,{value:"Auto",label:e(o)("common.auto"),"data-cy":"auto"},null,8,["label"]),t(c,{value:"Sqlite",label:"Sqlite","data-cy":"sqlite"}),t(c,{value:"Mysql",label:"Mysql","data-cy":"mysql"}),t(c,{value:"SqlServer",label:"SqlServer","data-cy":"sqlserver"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:e(o)("common.siteType")},{default:s(()=>[t($,{modelValue:e(l).siteType,"onUpdate:modelValue":u[2]||(u[2]=P=>e(l).siteType=P),class:"w-full","data-cy":"site-type"},{default:s(()=>[(v(!0),w(T,null,R(p.value,(P,A)=>(v(),x(c,{key:A,value:A,label:P,"data-cy":f.value[A]},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),e(l).siteType!=="p"?(v(),w("div",Xe,[m("div",Ze,[t(d,{label:e(o)("common.PathPattern")},{default:s(()=>[t($,{modelValue:e(l).includePath,"onUpdate:modelValue":u[3]||(u[3]=P=>e(l).includePath=P),class:"w-full","data-cy":"site-type"},{default:s(()=>[(v(!0),w(T,null,R(b.value,(P,A)=>(v(),x(c,{key:A,value:P.value,label:P.title,"data-cy":P.title},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(d,{label:e(o)("common.path")},{default:s(()=>[m("div",el,[(v(!0),w(T,null,R(e(l).specialPath,(P,A)=>(v(),w("div",{key:A,class:"flex items-center space-x-8 w-full"},[t(n,{modelValue:e(l).specialPath[A],"onUpdate:modelValue":le=>e(l).specialPath[A]=le,placeholder:e(o)("common.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),m("div",null,[t(C,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:e(o)("common.delete"),onClick:le=>r(A)},null,8,["tip","onClick"])])]))),128)),t(C,{circle:"",class:"text-blue",icon:"icon-a-addto ",tip:e(o)("common.add"),onClick:_},null,8,["tip"])])]),_:1},8,["label"]),t(d,{label:e(o)("common.singleSignOn")},{default:s(()=>[t(U,{modelValue:e(l).ssoLogin,"onUpdate:modelValue":u[4]||(u[4]=P=>e(l).ssoLogin=P)},null,8,["modelValue"])]),_:1},8,["label"])])])):k("",!0),m("div",ll,[t(d,{label:"Base URL"},{default:s(()=>[t(n,{modelValue:e(l).previewUrl,"onUpdate:modelValue":u[5]||(u[5]=P=>e(l).previewUrl=P),"data-cy":"base-url"},null,8,["modelValue"])]),_:1}),t(d,{label:e(o)("common.import/exportSite")},{default:s(()=>[m("div",tl,[t(W,{"show-file-list":!1,action:"",accept:e(Ge).join(","),"auto-upload":!1,"on-change":i,"data-cy":"import-package"},{default:s(()=>[t(h,{round:""},{default:s(()=>[t(B,{class:"iconfont icon-a-Pullin"}),O(" "+S(e(o)("common.importPackage")),1)]),_:1})]),_:1},8,["accept"]),he((v(),x(h,{round:"","data-cy":"export-site",onClick:u[6]||(u[6]=P=>y.$emit("export"))},{default:s(()=>[t(B,{class:"iconfont icon-share"}),O(" "+S(e(o)("common.exportSite")),1)]),_:1})),[[N,{feature:"site",action:"export"}]])])]),_:1},8,["label"])])])):k("",!0)}}}),al={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 py-24 px-56px"},nl={class:"max-w-504px"},sl={class:"flex items-center"},ul=L({setup(V){const{t:a}=M(),o=E([]);if(D.onCustomSettingsSave=p=>{p.customSettings=F(o.value)},l.value)for(const p in l.value.customSettings)o.value.push({key:p,value:l.value.customSettings[p]});return q(()=>o.value,()=>{l.value&&(l.value.customSettings=F(o.value))},{deep:!0}),(p,f)=>{const i=j,_=Le,r=I;return e(l)?(v(),w("div",al,[m("div",nl,[t(r,null,{label:s(()=>[m("div",sl,[O(S(e(a)("common.customSettings"))+" ",1),t(i,{tip:e(a)("common.customSettingsTips"),"custom-class":"ml-4"},null,8,["tip"])])]),default:s(()=>[t(_,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=b=>o.value=b)},null,8,["modelValue"])]),_:1})])])):k("",!0)}}}),il={class:"flex items-center flex-1 max-w-504px"},dl={class:"font-bold dark:text-fff/86"},ml=m("div",{class:"flex-1"},null,-1),rl={key:0,class:"!-ml-56px !-mr-56px !px-56px bg-[#fafafa] dark:bg-[#333]"},cl={class:"max-w-504px py-16 mb-18px"},z=L({props:{modelValue:{type:Boolean},label:null,tooltipLabel:null},emits:["update:modelValue"],setup(V,{emit:a}){return(o,p)=>{const f=j,i=Q,_=I;return e(l)?(v(),w(T,{key:0},[t(_,null,{default:s(()=>[m("div",il,[m("span",dl,S(V.label),1),V.tooltipLabel?(v(),x(f,{key:0,tip:V.tooltipLabel,"custom-class":"ml-4"},null,8,["tip"])):k("",!0),ml,t(i,{"model-value":V.modelValue,"data-cy":V.label.replace(/\s+/g,"-"),"onUpdate:modelValue":p[0]||(p[0]=r=>a("update:modelValue",!!r))},null,8,["model-value","data-cy"])])]),_:1}),V.modelValue?(v(),w("div",rl,[m("div",cl,[Se(o.$slots,"default")])])):k("",!0)],64)):k("",!0)}}}),pl=L({setup(V){const{t:a}=M();return(o,p)=>{const f=H,i=K,_=I,r=se;return e(l)?(v(),x(z,{key:0,modelValue:e(l).codeLogSettings.enable,"onUpdate:modelValue":p[2]||(p[2]=b=>e(l).codeLogSettings.enable=b),label:e(a)("common.codeLog")},{default:s(()=>[t(_,{label:e(a)("codelog.level")},{default:s(()=>[t(i,{modelValue:e(l).codeLogSettings.logLevel,"onUpdate:modelValue":p[0]||(p[0]=b=>e(l).codeLogSettings.logLevel=b),class:"w-full","data-cy":"level"},{default:s(()=>[t(f,{value:"Debug",label:e(a)("common.debug"),"data-cy":"Debug"},null,8,["label"]),t(f,{value:"Information",label:e(a)("common.information"),"data-cy":"Information"},null,8,["label"]),t(f,{value:"Warning",label:e(a)("common.warning"),"data-cy":"Warning"},null,8,["label"]),t(f,{value:"Error",label:e(a)("common.error"),"data-cy":"Error"},null,8,["label"]),t(f,{value:"Critical",label:e(a)("common.critical"),"data-cy":"Critical"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(_,{label:e(a)("common.keepDays")},{default:s(()=>[t(r,{modelValue:e(l).codeLogSettings.keepDays,"onUpdate:modelValue":p[1]||(p[1]=b=>e(l).codeLogSettings.keepDays=b),precision:0,min:1,"data-cy":"keey-days"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):k("",!0)}}}),fl=L({setup(V){const{t:a}=M();return(o,p)=>{const f=se,i=I;return e(l)?(v(),x(z,{key:0,modelValue:e(l).enableImageBrowserCache,"onUpdate:modelValue":p[1]||(p[1]=_=>e(l).enableImageBrowserCache=_),label:e(a)("common.imageBrowserCache")},{default:s(()=>[t(i,{label:e(a)("common.numberOfExpirationDaysAndUseVersionControl")},{default:s(()=>[t(f,{modelValue:e(l).imageCacheDays,"onUpdate:modelValue":p[0]||(p[0]=_=>e(l).imageCacheDays=_),precision:0,min:-1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):k("",!0)}}}),vl={class:"flex items-center w-full"},_l={class:"mr-auto"},bl={class:"mr-12 text-666 flex items-center"},Vl={key:0,class:"w-full"},yl={class:"text-666 font-bold"},gl=L({setup(V){const{t:a}=M(),o=E([]);D.onLighthouseSave=f=>{p(f)};const p=f=>{const i=[];for(const _ of o.value){const r={};if(_.setting)for(const b of _.setting)r[b.name]=b.value;i.push({name:_.name,enable:_.enable,setting:r})}f.lighthouseSettingsJson=JSON.stringify(i)};if(l.value){const f=JSON.parse(l.value.lighthouseSettingsJson||"[]");ve().then(i=>{for(const _ of i){const r=f.find(b=>b.name===_.name);if(r){_.enable=r.enable;for(const b in r.setting){const y=_.setting.find(u=>u.name===b);y&&(y.value=r[b])}}else _.enable=!0;o.value.push(_)}})}return q(()=>o.value,()=>{l.value&&l.value.lighthouseSettingsJson!==null&&p(l.value)},{deep:!0}),(f,i)=>{const _=j,r=Q,b=G,y=I;return e(l)&&o.value.length?(v(),x(z,{key:0,modelValue:e(l).enableLighthouseOptimization,"onUpdate:modelValue":i[0]||(i[0]=u=>e(l).enableLighthouseOptimization=u),label:e(a)("common.lighthouseOptimization")},{default:s(()=>[(v(!0),w(T,null,R(o.value,u=>(v(),x(y,{key:u.name},{default:s(()=>[m("div",vl,[m("div",_l,[m("div",bl,[O(S(u.name)+" ",1),t(_,{tip:u.description,"custom-class":"ml-4"},null,8,["tip"])])]),t(r,{modelValue:u.enable,"onUpdate:modelValue":n=>u.enable=n},null,8,["modelValue","onUpdate:modelValue"])]),u.enable?(v(),w("div",Vl,[(v(!0),w(T,null,R(u.setting,n=>(v(),w("div",{key:n.name,class:"mt-18px"},[m("span",yl,S(n.displayName||n.name),1),n.controlType==="Text"?(v(),x(b,{key:0,modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),n.controlType==="Number"?(v(),x(b,{key:1,modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,modelModifiers:{number:!0},class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),n.controlType==="Switch"?(v(),x(r,{key:2,modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,class:"float-right"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0)]))),128))])):k("",!0)]),_:2},1024))),128))]),_:1},8,["modelValue","label"])):k("",!0)}}}),xl=["src"],hl={class:"space-y-4"},Sl={class:"px-12"},kl=L({setup(V){const{t:a}=M(),o=E(),p=E(),f=E(!1),i=Y();l.value&&(o.value=JSON.parse(l.value.pwa.manifest),p.value=JSON.parse(l.value.pwa.serviceWorker)),D.onPwaSave=u=>{u.pwa.manifest=JSON.stringify(o.value),u.pwa.serviceWorker=JSON.stringify(p.value)};const _=()=>{p.value.CacheSettings.push({Method:"get",Pattern:"",ExpiresIn:0})},r=u=>{p.value.CacheSettings.splice(u,1)},b=X(()=>De(o.value.icons[0].src)),y=u=>{if(u.length===1)for(const n of o.value.icons){n.src=u[0].url;let d=u[0].height,g=u[0].width;d||(d=32),g||(g=32),n.sizes=`${d}x${g}`}f.value=!1};return q(()=>o.value,()=>{l.value&&(l.value.pwa.manifest=JSON.stringify(o.value))},{deep:!0}),q(()=>p.value,()=>{l.value&&(l.value.pwa.serviceWorker=JSON.stringify(p.value))},{deep:!0}),(u,n)=>{const d=I,g=G,c=H,$=K,C=ee;return e(l)&&o.value?(v(),x(z,{key:0,modelValue:e(l).pwa.enable,"onUpdate:modelValue":n[7]||(n[7]=U=>e(l).pwa.enable=U),label:"PWA"},{default:s(()=>[t(d,{label:e(a)("common.icon")},{default:s(()=>[m("div",{class:"w-88px h-88px rounded-4px bg-gray flex items-center justify-center",onClick:n[0]||(n[0]=U=>f.value=!0)},[m("img",{src:e(ke)(e(i).site.baseUrl,e(b))},null,8,xl)])]),_:1},8,["label"]),t(d,{label:e(a)("common.name")},{default:s(()=>[t(g,{modelValue:o.value.name,"onUpdate:modelValue":n[1]||(n[1]=U=>o.value.name=U),placeholder:e(a)("common.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{label:e(a)("common.themeColor")},{default:s(()=>[t(g,{modelValue:o.value.theme_color,"onUpdate:modelValue":n[2]||(n[2]=U=>o.value.theme_color=U),placeholder:e(a)("common.themeColor")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{label:e(a)("common.bgColor")},{default:s(()=>[t(g,{modelValue:o.value.background_color,"onUpdate:modelValue":n[3]||(n[3]=U=>o.value.background_color=U),placeholder:e(a)("common.bgColor")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{label:e(a)("common.startUrl")},{default:s(()=>[t(g,{modelValue:o.value.start_url,"onUpdate:modelValue":n[4]||(n[4]=U=>o.value.start_url=U),placeholder:e(a)("common.startUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{label:e(a)("common.display")},{default:s(()=>[t($,{modelValue:o.value.display,"onUpdate:modelValue":n[5]||(n[5]=U=>o.value.display=U),class:"w-full"},{default:s(()=>[t(c,{value:"fullscreen",label:"fullscreen"}),t(c,{value:"standalone",label:"standalone"}),t(c,{value:"minimal-ui",label:"minimal-ui"}),t(c,{value:"browser",label:"browser"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(d,{label:"Service worker"},{default:s(()=>[m("div",hl,[(v(!0),w(T,null,R(p.value.CacheSettings,(U,B)=>(v(),w("div",{key:B,class:"flex items-center space-x-4"},[t($,{modelValue:U.Method,"onUpdate:modelValue":h=>U.Method=h,class:"w-120px"},{default:s(()=>[t(c,{value:"get",label:"GET"}),t(c,{value:"put",label:"PUT"}),t(c,{value:"post",label:"POST"}),t(c,{value:"delete",label:"DELETE"}),t(c,{value:"head",label:"HEAD"}),t(c,{value:"any",label:"ALL"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),t(g,{modelValue:U.Pattern,"onUpdate:modelValue":h=>U.Pattern=h,class:"w-220px",placeholder:e(a)("common.exampleUrl")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),t(g,{modelValue:U.ExpiresIn,"onUpdate:modelValue":h=>U.ExpiresIn=h,modelModifiers:{number:!0},class:"w-150px"},{append:s(()=>[m("span",Sl,S(e(a)("common.minutes")),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),m("div",null,[t(C,{circle:"",class:"text-orange",icon:"icon-delete",tip:e(a)("common.delete"),onClick:h=>r(B)},null,8,["tip","onClick"])])]))),128)),t(C,{circle:"",class:"text-blue",icon:"icon-a-addto",tip:e(a)("common.add"),onClick:_},null,8,["tip"])])]),_:1}),f.value?(v(),x(e(Re),{key:0,modelValue:f.value,"onUpdate:modelValue":n[6]||(n[6]=U=>f.value=U),onChoose:y},null,8,["modelValue"])):k("",!0)]),_:1},8,["modelValue"])):k("",!0)}}}),Cl={class:"space-y-4 w-full"},wl={class:"flex items-center w-full"},Ul={class:"font-bold text-666"},$l=m("div",{class:"flex-1"},null,-1),Pl={key:0,class:"space-y-4"},El={class:"px-12 text-999"},Tl={class:"font-bold text-666"},Ll=m("div",{class:"flex-1"},null,-1),Dl=L({setup(V){const{t:a}=M(),o=E([]),p=E([]),f=E([]);if(D.onMultilingualSave=u=>{u.enableMultilingual||(u.enableSitePath=!1,o.value=o.value.filter(n=>{var d;return n.key===((d=l.value)==null?void 0:d.defaultCulture)}),f.value=f.value.filter(n=>{var d;return n.key===((d=l.value)==null?void 0:d.defaultCulture)})),u.culture=F(o.value),u.sitePath=F(f.value)},l.value){for(const u in l.value.sitePath)f.value.push({key:u,value:l.value.sitePath[u]});for(const u in l.value.culture)o.value.push({key:u,value:l.value.culture[u]}),f.value.find(d=>d.key===u)||f.value.push({key:u,value:u});_e().then(u=>{for(const n in u)p.value.push({key:n,value:u[n]})})}const i=X(()=>{const u=[];for(const n of p.value)o.value.find(d=>d.key===n.key)||u.push(n);return u}),_=()=>{if(!i.value.length)return;const u=i.value[0];o.value.push(ae({},u)),y()},r=u=>{o.value.splice(u,1),y()},b=u=>{var d;const n=(d=p.value.find(g=>g.key===u))==null?void 0:d.value;if(n){const g=o.value.find(c=>c.key===u);g&&(g.value=n)}y()},y=()=>{var u;for(const n of f.value.map(d=>d.key))o.value.find(d=>d.key===n)||(f.value=f.value.filter(d=>d.key!==n));for(const n of o.value)f.value.find(d=>d.key===n.key)||f.value.push({key:n.key,value:n.key});l.value&&!o.value.find(n=>{var d;return n.key===((d=l.value)==null?void 0:d.defaultCulture)})&&(l.value.defaultCulture=(u=o.value[0])==null?void 0:u.key)};return q(()=>o.value,()=>{l.value&&(l.value.culture=F(o.value))},{deep:!0}),q(()=>f.value,()=>{l.value&&(l.value.sitePath=F(f.value))},{deep:!0}),(u,n)=>{const d=H,g=K,c=G,$=ee,C=I,U=j,B=Q;return e(l)?(v(),x(z,{key:0,modelValue:e(l).enableMultilingual,"onUpdate:modelValue":n[3]||(n[3]=h=>e(l).enableMultilingual=h),label:e(a)("common.multilingual")},{default:s(()=>[t(C,null,{default:s(()=>[m("div",Cl,[(v(!0),w(T,null,R(o.value,(h,W)=>(v(),w("div",{key:W,class:"flex items-center space-x-4"},[t(g,{modelValue:h.key,"onUpdate:modelValue":N=>h.key=N,onChange:b},{default:s(()=>[(v(!0),w(T,null,R(e(i),N=>(v(),x(d,{key:N.key,value:N.key,label:N.key},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),t(c,{modelValue:h.value,"onUpdate:modelValue":N=>h.value=N,placeholder:e(a)("common.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),m("div",null,[o.value.length>1?(v(),x($,{key:0,circle:"",class:"text-orange",icon:"icon-delete",tip:e(a)("common.delete"),onClick:N=>r(W)},null,8,["tip","onClick"])):k("",!0)])]))),128)),e(i).length?(v(),x($,{key:0,circle:"",class:"text-blue",icon:"icon-a-addto",tip:e(a)("common.add"),onClick:_},null,8,["tip"])):k("",!0)])]),_:1}),t(C,{label:e(a)("common.defaultLanguage")},{default:s(()=>[t(g,{modelValue:e(l).defaultCulture,"onUpdate:modelValue":n[0]||(n[0]=h=>e(l).defaultCulture=h),class:"w-full"},{default:s(()=>[(v(!0),w(T,null,R(o.value,h=>(v(),x(d,{key:h.key,value:h.key,label:h.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(C,null,{default:s(()=>[m("div",wl,[m("span",Ul,S(e(a)("common.languagePath")),1),t(U,{tip:e(a)("common.languagePathTips"),"custom-class":"ml-4"},null,8,["tip"]),$l,t(B,{modelValue:e(l).enableSitePath,"onUpdate:modelValue":n[1]||(n[1]=h=>e(l).enableSitePath=h)},null,8,["modelValue"])]),e(l).enableSitePath?(v(),w("div",Pl,[(v(!0),w(T,null,R(f.value,h=>(v(),w("div",{key:h.key},[t(c,{modelValue:h.value,"onUpdate:modelValue":W=>h.value=W},{suffix:s(()=>[m("span",El,S(h.key),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])):k("",!0)]),_:1}),t(C,null,{default:s(()=>[m("span",Tl,S(e(a)("common.autoDetectCulture")),1),Ll,t(B,{modelValue:e(l).autoDetectCulture,"onUpdate:modelValue":n[2]||(n[2]=h=>e(l).autoDetectCulture=h)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","label"])):k("",!0)}}}),Rl={class:"flex items-center justify-between w-full"},Ol=L({setup(V){const{t:a}=M(),o=E(!1),p=E("");function f(){!l.value||(l.value.sitemapSettings.code=p.value,o.value=!1)}function i(){!l.value||(o.value=!0,p.value=l.value.sitemapSettings.code)}return(_,r)=>{const b=G,y=I,u=Ae,n=Be,d=ne,g=Oe,c=Je;return e(l)?(v(),x(z,{key:0,modelValue:e(l).sitemapSettings.enable,"onUpdate:modelValue":r[6]||(r[6]=$=>e(l).sitemapSettings.enable=$),label:e(a)("common.sitemap"),"tooltip-label":e(a)("common.sitemapTips")},{default:s(()=>[t(y,{label:e(a)("common.path")},{default:s(()=>[t(b,{modelValue:e(l).sitemapSettings.path,"onUpdate:modelValue":r[0]||(r[0]=$=>e(l).sitemapSettings.path=$)},null,8,["modelValue"])]),_:1},8,["label"]),t(y,{label:e(a)("common.generateType")},{default:s(()=>[m("div",Rl,[t(n,{modelValue:e(l).sitemapSettings.autoGenerate,"onUpdate:modelValue":r[1]||(r[1]=$=>e(l).sitemapSettings.autoGenerate=$)},{default:s(()=>[t(u,{label:!0},{default:s(()=>[O(S(e(a)("common.auto")),1)]),_:1}),t(u,{label:!1},{default:s(()=>[O(S(e(a)("common.manual")),1)]),_:1})]),_:1},8,["modelValue"]),e(l).sitemapSettings.autoGenerate?k("",!0):(v(),x(d,{key:0,type:"primary",size:"small",onClick:i},{default:s(()=>[O(S(e(a)("common.editCode")),1)]),_:1}))])]),_:1},8,["label"]),(v(),x(Ce,{to:"body"},[t(c,{"model-value":o.value,"custom-class":"el-dialog--zero-padding",width:"800px","close-on-click-modal":!1,title:e(a)("common.editCode"),onClosed:r[5]||(r[5]=$=>o.value=!1)},{footer:s(()=>[t(g,{onConfirm:f,onCancel:r[4]||(r[4]=$=>o.value=!1)})]),default:s(()=>[m("div",{class:"h-500px",onKeydown:r[3]||(r[3]=ye(()=>{},["stop"]))},[t(Ie,{modelValue:p.value,"onUpdate:modelValue":r[2]||(r[2]=$=>p.value=$),language:"typescript","k-script":"",uri:e(Ne).file(e(l).id+"sitemap")},null,8,["modelValue","uri"])],32)]),_:1},8,["model-value","title"])]))]),_:1},8,["modelValue","label","tooltip-label"])):k("",!0)}}}),Il=L({setup(V){const{t:a}=M();function o(p){l.value.tinymceSettings[p]=void 0}return(p,f)=>{const i=I;return v(),x(z,{modelValue:e(l).enableTinymceToolbarSettings,"onUpdate:modelValue":f[1]||(f[1]=_=>e(l).enableTinymceToolbarSettings=_),label:e(a)("common.richTextEditorConfigurationForContentType")},{default:s(()=>[t(i,{class:"w-800px mb-0"},{default:s(()=>[e(l).enableTinymceToolbarSettings?(v(),x(Fe,{key:0,modelValue:e(l).tinymceSettings,"onUpdate:modelValue":f[0]||(f[0]=_=>e(l).tinymceSettings=_),onReset:o},null,8,["modelValue"])):k("",!0)]),_:1})]),_:1},8,["modelValue","label"])}}}),Ml=L({setup(V){var y,u;const{locale:a,t:o}=M(),p=E([]),f=X(()=>a.value==="zh"?"nameCN":"name"),{list:i,load:_}=Me(),r=E(i);D.onVisitorCountryRestrictionsSave=n=>{n.visitorCountryRestrictions=F(p.value.map(d=>{var g,c;return{key:d,value:(c=(g=l.value)==null?void 0:g.visitorCountryRestrictionPage)!=null?c:""}}))},we(()=>J(this,null,function*(){var n;(n=r.value)!=null&&n.length||(r.value=yield _())})),l.value&&(l.value.enableVisitorCountryRestriction=(y=l.value.enableVisitorCountryRestriction)!=null?y:!1,l.value.visitorCountryRestrictionPage=(u=l.value.visitorCountryRestrictionPage)!=null?u:"",l.value.visitorCountryRestrictions&&(p.value=Object.keys(l.value.visitorCountryRestrictions)));const b=X(()=>qe.sort((n,d)=>f.value==="nameCN"?n.namePY.localeCompare(d.namePY):n.name.localeCompare(d.name)));return q(()=>p.value,()=>{l.value&&(l.value.visitorCountryRestrictions=F(p.value.map(n=>{var d,g;return{key:n,value:(g=(d=l.value)==null?void 0:d.visitorCountryRestrictionPage)!=null?g:""}})))},{deep:!0}),(n,d)=>{const g=H,c=K,$=I;return e(l)?(v(),x(z,{key:0,modelValue:e(l).enableVisitorCountryRestriction,"onUpdate:modelValue":d[2]||(d[2]=C=>e(l).enableVisitorCountryRestriction=C),label:e(o)("common.visitorCountryRestriction")},{default:s(()=>[t($,{label:e(o)("common.countryAndRegion")},{default:s(()=>[t(c,{modelValue:p.value,"onUpdate:modelValue":d[0]||(d[0]=C=>p.value=C),multiple:"",filterable:"","default-first-option":"",class:"w-full","data-cy":"VisitorCountryRestriction"},{default:s(()=>[(v(!0),w(T,null,R(e(b),C=>(v(),x(g,{key:C.isoCode,value:C.isoCode.toLowerCase(),label:`${C[e(f)]} (${C.isoCode})`,"data-cy":C.isoCode},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t($,{label:e(o)("common.visitorCountryRestrictionPage")},{default:s(()=>[t(c,{modelValue:e(l).visitorCountryRestrictionPage,"onUpdate:modelValue":d[1]||(d[1]=C=>e(l).visitorCountryRestrictionPage=C),class:"w-full","data-cy":"VisitorCountryRestrictionPage"},{default:s(()=>[t(g,{value:"",label:e(o)("common.default"),"data-cy":"DefaultPage"},null,8,["label"]),(v(!0),w(T,null,R(r.value,C=>(v(),x(g,{key:C.id,value:C.path,label:C.path,"data-cy":C.path},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):k("",!0)}}}),Nl={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px"},Al={class:"max-w-504px"},Bl={class:"font-bold dark:text-fff/86"},Jl=m("div",{class:"flex-1"},null,-1),Fl={class:"font-bold dark:text-fff/86"},ql=m("div",{class:"flex-1"},null,-1),zl={class:"max-w-504px"},Wl={class:"font-bold dark:text-fff/86"},jl=m("div",{class:"flex-1"},null,-1),Gl={class:"font-bold dark:text-fff/86"},Hl=m("div",{class:"flex-1"},null,-1),Kl={class:"font-bold dark:text-fff/86"},Yl=m("div",{class:"flex-1"},null,-1),Ql={class:"font-bold dark:text-fff/86"},Xl=m("div",{class:"flex-1"},null,-1),Zl={class:"font-bold dark:text-fff/86"},et=m("div",{class:"flex-1"},null,-1),lt={class:"font-bold dark:text-fff/86"},tt=m("div",{class:"flex-1"},null,-1),ot={class:"font-bold dark:text-fff/86"},at=m("div",{class:"flex-1"},null,-1),nt={class:"max-w-504px"},st=m("span",{class:"font-bold dark:text-fff/86"},"CORS",-1),ut=m("div",{class:"flex-1"},null,-1),it=m("span",{class:"font-bold dark:text-fff/86"},"SPA",-1),dt=m("div",{class:"flex-1"},null,-1),mt={class:"font-bold dark:text-fff/86 text-black"},rt=O("bootstrap-v3"),ct=O("tailwind-v3.1"),pt=O("element-plus-v2.2"),ft=O("amp-v0"),vt={class:"font-bold dark:text-fff/86"},_t=m("div",{class:"flex-1"},null,-1),bt={class:"font-bold dark:text-fff/86"},Vt=m("div",{class:"flex-1"},null,-1),yt={class:"font-bold dark:text-fff/86"},gt=m("div",{class:"flex-1"},null,-1),xt={class:"font-bold dark:text-fff/86"},ht=m("div",{class:"flex-1"},null,-1),St={class:"font-bold dark:text-fff/86"},kt=m("div",{class:"flex-1"},null,-1),Ct={class:"font-bold dark:text-fff/86"},wt=m("div",{class:"flex-1"},null,-1),Ut={class:"font-bold dark:text-fff/86"},$t=m("div",{class:"flex-1"},null,-1),Pt=L({setup(V){const{t:a}=M(),o=Y(),p=be();return(f,i)=>{var d,g;const _=Q,r=I,b=j,y=H,u=K,n=G;return e(l)?(v(),w("div",Nl,[m("div",Al,[t(r,null,{default:s(()=>[m("span",Bl,S(e(a)("common.visitorLog")),1),Jl,t(_,{modelValue:e(l).enableVisitorLog,"onUpdate:modelValue":i[0]||(i[0]=c=>e(l).enableVisitorLog=c),"data-cy":"visitor-log"},null,8,["modelValue"])]),_:1}),(d=e(p).header)!=null&&d.isOnlineServer?(v(),x(Ml,{key:0})):k("",!0),t(r,null,{default:s(()=>[m("span",Fl,S(e(a)("common.sqlLog")),1),ql,t(_,{modelValue:e(l).enableSqlLog,"onUpdate:modelValue":i[1]||(i[1]=c=>e(l).enableSqlLog=c),"data-cy":"sql-log"},null,8,["modelValue"])]),_:1})]),t(pl),m("div",zl,[t(r,null,{default:s(()=>[m("span",Wl,S(e(a)("common.constraintFixOnSave")),1),t(b,{tip:e(a)("common.constraintFixOnSaveTips"),"custom-class":"ml-4"},null,8,["tip"]),jl,t(_,{modelValue:e(l).enableConstraintFixOnSave,"onUpdate:modelValue":i[2]||(i[2]=c=>e(l).enableConstraintFixOnSave=c),"data-cy":"constraint-fix-on-save"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",Gl,S(e(a)("common.frontEvent")),1),t(b,{tip:e(a)("common.frontEventTips"),"custom-class":"ml-4"},null,8,["tip"]),Hl,t(_,{modelValue:e(l).enableFrontEvents,"onUpdate:modelValue":i[3]||(i[3]=c=>e(l).enableFrontEvents=c),"data-cy":"front-event"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",Kl,S(e(a)("common.JsCssCompression")),1),Yl,t(_,{modelValue:e(l).enableJsCssCompress,"onUpdate:modelValue":i[4]||(i[4]=c=>e(l).enableJsCssCompress=c),"data-cy":"js-css-compress"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",Ql,S(e(a)("common.JsCssBrowserCache")),1),Xl,t(_,{modelValue:e(l).enableJsCssBrowerCache,"onUpdate:modelValue":i[5]||(i[5]=c=>e(l).enableJsCssBrowerCache=c),"data-cy":"js-css-cache"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",Zl,S(e(a)("common.videoBrowserCache")),1),et,t(_,{modelValue:e(l).enableVideoBrowserCache,"onUpdate:modelValue":i[6]||(i[6]=c=>e(l).enableVideoBrowserCache=c),"data-cy":"video-cache"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",lt,S(e(a)("common.htmlCompression")),1),tt,t(_,{modelValue:e(l).enableHtmlMinifier,"onUpdate:modelValue":i[7]||(i[7]=c=>e(l).enableHtmlMinifier=c),"data-cy":"html-compress"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",ot,S(e(a)("common.enableImageAlt")),1),at,t(_,{modelValue:e(l).enableImageAlt,"onUpdate:modelValue":i[8]||(i[8]=c=>e(l).enableImageAlt=c),"data-cy":"image-alt"},null,8,["modelValue"])]),_:1})]),t(fl),t(gl),t(kl),t(Dl),t(Il),t(Ol),m("div",nt,[t(r,null,{default:s(()=>[st,t(b,{tip:e(a)("common.corsTips"),"custom-class":"ml-4"},null,8,["tip"]),ut,t(_,{modelValue:e(l).enableCORS,"onUpdate:modelValue":i[9]||(i[9]=c=>e(l).enableCORS=c),"data-cy":"cors"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[it,t(b,{tip:e(a)("common.spaTips"),"custom-class":"ml-4"},null,8,["tip"]),dt,t(_,{modelValue:e(l).enableSPA,"onUpdate:modelValue":i[10]||(i[10]=c=>e(l).enableSPA=c),"data-cy":"spa"},null,8,["modelValue"])]),_:1}),t(r,null,{label:s(()=>[m("span",mt,S(e(a)("common.additionalCodeSuggestions")),1)]),default:s(()=>[t(u,{modelValue:e(l).codeSuggestions,"onUpdate:modelValue":i[11]||(i[11]=c=>e(l).codeSuggestions=c),multiple:"",class:"w-full"},{default:s(()=>[t(y,{value:"bootstrap-v3"},{default:s(()=>[rt]),_:1}),t(y,{value:"tailwind-v3.1"},{default:s(()=>[ct]),_:1}),t(y,{value:"element-plus-v2.2"},{default:s(()=>[pt]),_:1}),t(y,{value:"amp-v0"},{default:s(()=>[ft]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",vt,S(e(a)("common.recordSiteLogVideo")),1),_t,t(_,{modelValue:e(l).recordSiteLogVideo,"onUpdate:modelValue":i[12]||(i[12]=c=>e(l).recordSiteLogVideo=c),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",bt,S(e(a)("common.forceSSL")),1),t(b,{tip:e(a)("common.forceSSLTips"),"custom-class":"ml-4"},null,8,["tip"]),Vt,t(_,{modelValue:e(l).forceSSL,"onUpdate:modelValue":i[13]||(i[13]=c=>e(l).forceSSL=c),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),e(l).continueDownload!==void 0?(v(),x(r,{key:0},{default:s(()=>[m("span",yt,S(e(a)("common.continueDownload")),1),t(b,{tip:e(a)("common.continueDownloadTips"),"custom-class":"ml-4"},null,8,["tip"]),gt,t(_,{modelValue:e(l).continueDownload,"onUpdate:modelValue":i[14]||(i[14]=c=>e(l).continueDownload=c),"data-cy":"continue-download"},null,8,["modelValue"])]),_:1})):k("",!0),t(r,null,{default:s(()=>[m("span",xt,S(e(a)("common.enableUpdateSimilarPage")),1),ht,t(_,{modelValue:e(l).enableUpdateSimilarPage,"onUpdate:modelValue":i[15]||(i[15]=c=>e(l).enableUpdateSimilarPage=c),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[m("span",St,S(e(a)("common.automateCovertImageToWebp")),1),kt,t(_,{modelValue:e(l).automateCovertImageToWebp,"onUpdate:modelValue":i[16]||(i[16]=c=>e(l).automateCovertImageToWebp=c)},null,8,["modelValue"])]),_:1}),(g=e(p).header)!=null&&g.isOnlineServer?(v(),w(T,{key:1},[e(o).serviceLevel>0?(v(),x(r,{key:0},{default:s(()=>[m("span",Ct,S(e(a)("common.enableDevPassword")),1),wt,t(_,{"model-value":e(l).status=="Development","onUpdate:modelValue":i[17]||(i[17]=c=>e(l).status=e(l).status=="Development"?"Published":"Development")},null,8,["model-value"])]),_:1})):k("",!0),e(l).status=="Development"?(v(),x(r,{key:1},{default:s(()=>[m("span",Ut,S(e(a)("common.devPassword")),1),$t,t(n,{modelValue:e(l).devPassword,"onUpdate:modelValue":i[18]||(i[18]=c=>e(l).devPassword=c),disabled:!0,"data-cy":"dev-password"},null,8,["modelValue"])]),_:1})):k("",!0)],64)):k("",!0)])])):k("",!0)}}}),Et={key:0},uo=L({setup(V,{expose:a}){const o=E(!1),p=We(),f=Y(),i=E(+new Date);function _(){return J(this,null,function*(){l.value=void 0,yield Y().loadSite(),ue(),p.init(l.value)})}const r=()=>{p.init(l.value),i.value=+new Date};return Ue(()=>{f.firstActiveMenu=""}),_(),$e((b,y,u)=>J(this,null,function*(){var n;b.name==="login"?u():(f.firstActiveMenu=(n=b.meta.activeMenu)!=null?n:b.name,yield p.check(l.value).then(()=>{u()}).catch(()=>{f.firstActiveMenu="settings",u(!1)}))})),q(()=>l.value,()=>{p.changed(l.value)},{deep:!0}),a({initSite:r}),(b,y)=>{const u=Pe;return e(l)?(v(),w("div",Et,[(v(),x(u,{key:i.value,"label-position":"top"},{default:s(()=>[t(ol,{onExport:y[0]||(y[0]=n=>o.value=!0),onInitSite:r}),t(Pt),t(ul)]),_:1})),o.value?(v(),x(ze,{key:0,modelValue:o.value,"onUpdate:modelValue":y[1]||(y[1]=n=>o.value=n),"site-id":e(l).id},null,8,["modelValue","site-id"])):k("",!0)])):k("",!0)}}});export{uo as _,so as s};
