var qe=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var Ee=(a,l,s)=>l in a?qe(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,Q=(a,l)=>{for(var s in l||(l={}))Ge.call(l,s)&&Ee(a,s,l[s]);if(Ie)for(var s of Ie(l))Ze.call(l,s)&&Ee(a,s,l[s]);return a},ke=(a,l)=>Xe(a,Ye(l));var $=(a,l,s)=>new Promise((o,d)=>{var c=i=>{try{b(s.next(i))}catch(y){d(y)}},u=i=>{try{b(s.throw(i))}catch(y){d(y)}},b=i=>i.done?o(i.value):Promise.resolve(i.value).then(c,u);b((s=s.apply(a,l)).next())});import{i as ze,b as Je,v as Qe,w as et,a as tt}from"./i18n.48bd28ac.js";import{G as at,b as ot,l as st,d as ee,i as Pe,m as nt,q as lt,o as rt,u as $e,V as it,H as ut,I as dt,E as L,F as ct,_ as pt,w as ft}from"./windi.a5b0b048.js";import{c as f,A as Ae,g as T,p as te,d as vt,bf as mt,bh as yt,aq as ae,i as oe,K as N,h as ht,a3 as bt,as as gt,e as xt,o as p,a as x,k as m,F as se,n as h,u as t,r as W,f as V,j as w,w as O,l as U,aT as ne,b as wt,bB as St,t as _,m as Ct,W as Ne}from"./url.2e6a77c4.js";import{U as le}from"./event.776e7e11.js";import{u as It,a as Et}from"./index.ff0264f3.js";import{d as Ve}from"./error.7e8331f1.js";import{i as kt}from"./isNil.98bb3b88.js";const zt=a=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(a),Pt=["class","style"],$t=/^on[A-Z]/,Nt=(a={})=>{const{excludeListeners:l=!1,excludeKeys:s}=a,o=f(()=>((s==null?void 0:s.value)||[]).concat(Pt)),d=Ae();return d?f(()=>{var c;return at(Object.entries((c=d.proxy)==null?void 0:c.$attrs).filter(([u])=>!o.value.includes(u)&&!(l&&$t.test(u))))}):f(()=>({}))};function Vt(a){const l=T();function s(){if(a.value==null)return;const{selectionStart:d,selectionEnd:c,value:u}=a.value;if(d==null||c==null)return;const b=u.slice(0,Math.max(0,d)),i=u.slice(Math.max(0,c));l.value={selectionStart:d,selectionEnd:c,value:u,beforeTxt:b,afterTxt:i}}function o(){if(a.value==null||l.value==null)return;const{value:d}=a.value,{beforeTxt:c,afterTxt:u,selectionStart:b}=l.value;if(c==null||u==null||b==null)return;let i=d.length;if(d.endsWith(u))i=d.length-u.length;else if(d.startsWith(c))i=c.length;else{const y=c[b-1],S=d.indexOf(y,b-1);S!==-1&&(i=S+1)}a.value.setSelectionRange(i,i)}return[s,o]}let g;const Tt=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,At=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Ft(a){const l=window.getComputedStyle(a),s=l.getPropertyValue("box-sizing"),o=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),d=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:At.map(u=>`${u}:${l.getPropertyValue(u)}`).join(";"),paddingSize:o,borderSize:d,boxSizing:s}}function Te(a,l=1,s){var o;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:d,borderSize:c,boxSizing:u,contextStyle:b}=Ft(a);g.setAttribute("style",`${b};${Tt}`),g.value=a.value||a.placeholder||"";let i=g.scrollHeight;const y={};u==="border-box"?i=i+c:u==="content-box"&&(i=i-d),g.value="";const S=g.scrollHeight-d;if(ze(l)){let v=S*l;u==="border-box"&&(v=v+d+c),i=Math.max(v,i),y.minHeight=`${v}px`}if(ze(s)){let v=S*s;u==="border-box"&&(v=v+d+c),i=Math.min(v,i)}return y.height=`${i}px`,(o=g.parentNode)==null||o.removeChild(g),g=void 0,y}const Mt=ot({id:{type:String,default:void 0},size:st,disabled:Boolean,modelValue:{type:ee([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ee([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Pe,default:""},prefixIcon:{type:Pe,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ee([Object,Array,String]),default:()=>nt({})}}),Bt={[le]:a=>te(a),input:a=>te(a),change:a=>te(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Lt=["role"],Ot=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Rt=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Dt={name:"ElInput",inheritAttrs:!1},Ht=vt(ke(Q({},Dt),{props:Mt,emits:Bt,setup(a,{expose:l,emit:s}){const o=a,d={suffix:"append",prefix:"prepend"},c=Ae(),u=mt(),b=yt(),i=f(()=>{const e={};return o.containerRole==="combobox"&&(e["aria-haspopup"]=u["aria-haspopup"],e["aria-owns"]=u["aria-owns"],e["aria-expanded"]=u["aria-expanded"]),e}),y=Nt({excludeKeys:f(()=>Object.keys(i.value))}),{form:S,formItem:v}=It(),{inputId:re}=Et(o,{formItemContext:v}),Fe=lt(),k=rt(),n=$e("input"),ie=$e("textarea"),R=ae(),z=ae(),A=T(!1),q=T(!1),F=T(!1),D=T(!1),ue=T(),X=ae(o.inputStyle),M=f(()=>R.value||z.value),de=f(()=>{var e;return(e=S==null?void 0:S.statusIcon)!=null?e:!1}),B=f(()=>(v==null?void 0:v.validateState)||""),ce=f(()=>B.value&&it[B.value]),Me=f(()=>D.value?ut:dt),Be=f(()=>[u.style,o.inputStyle]),pe=f(()=>[o.inputStyle,X.value,{resize:o.resize}]),C=f(()=>kt(o.modelValue)?"":String(o.modelValue)),H=f(()=>o.clearable&&!k.value&&!o.readonly&&!!C.value&&(A.value||q.value)),Y=f(()=>o.showPassword&&!k.value&&!o.readonly&&!!C.value&&(!!C.value||A.value)),P=f(()=>o.showWordLimit&&!!y.value.maxlength&&(o.type==="text"||o.type==="textarea")&&!k.value&&!o.readonly&&!o.showPassword),G=f(()=>Array.from(C.value).length),Le=f(()=>!!P.value&&G.value>Number(y.value.maxlength)),Oe=f(()=>!!b.suffix||!!o.suffixIcon||H.value||o.showPassword||P.value||!!B.value&&de.value),[Re,De]=Vt(R);Je(z,e=>{if(!P.value||o.resize!=="both")return;const r=e[0],{width:I}=r.contentRect;ue.value={right:`calc(100% - ${I+15+6}px)`}});const K=()=>{const{type:e,autosize:r}=o;if(!(!tt||e!=="textarea"))if(r){const I=Ne(r)?r.minRows:void 0,E=Ne(r)?r.maxRows:void 0;X.value=Q({},Te(z.value,I,E))}else X.value={minHeight:Te(z.value).minHeight}},j=()=>{const e=M.value;!e||e.value===C.value||(e.value=C.value)},fe=e=>{const{el:r}=c.vnode;if(!r)return;const E=Array.from(r.querySelectorAll(`.${n.e(e)}`)).find(_e=>_e.parentNode===r);if(!E)return;const Ce=d[e];b[Ce]?E.style.transform=`translateX(${e==="suffix"?"-":""}${r.querySelector(`.${n.be("group",Ce)}`).offsetWidth}px)`:E.removeAttribute("style")},Z=()=>{fe("prefix"),fe("suffix")},J=e=>$(this,null,function*(){Re();let{value:r}=e.target;o.formatter&&(r=o.parser?o.parser(r):r,r=o.formatter(r)),!F.value&&r!==C.value&&(s(le,r),s("input",r),yield N(),j(),De())}),ve=e=>{s("change",e.target.value)},me=e=>{s("compositionstart",e),F.value=!0},ye=e=>{var r;s("compositionupdate",e);const I=(r=e.target)==null?void 0:r.value,E=I[I.length-1]||"";F.value=!zt(E)},he=e=>{s("compositionend",e),F.value&&(F.value=!1,J(e))},He=()=>{D.value=!D.value,be()},be=()=>$(this,null,function*(){var e;yield N(),(e=M.value)==null||e.focus()}),Ke=()=>{var e;return(e=M.value)==null?void 0:e.blur()},ge=e=>{A.value=!0,s("focus",e)},xe=e=>{var r;A.value=!1,s("blur",e),o.validateEvent&&((r=v==null?void 0:v.validate)==null||r.call(v,"blur").catch(I=>Ve()))},je=e=>{q.value=!1,s("mouseleave",e)},We=e=>{q.value=!0,s("mouseenter",e)},we=e=>{s("keydown",e)},Ue=()=>{var e;(e=M.value)==null||e.select()},Se=()=>{s(le,""),s("change",""),s("clear"),s("input","")};return oe(()=>o.modelValue,()=>{var e;N(()=>K()),o.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(r=>Ve()))}),oe(C,()=>j()),oe(()=>o.type,()=>$(this,null,function*(){yield N(),j(),K(),Z()})),ht(()=>$(this,null,function*(){!o.formatter&&o.parser,j(),Z(),yield N(),K()})),bt(()=>$(this,null,function*(){yield N(),Z()})),l({input:R,textarea:z,ref:M,textareaStyle:pe,autosize:gt(o,"autosize"),focus:be,blur:Ke,select:Ue,clear:Se,resizeTextarea:K}),(e,r)=>xt((p(),x("div",ne(t(i),{class:[e.type==="textarea"?t(ie).b():t(n).b(),t(n).m(t(Fe)),t(n).is("disabled",t(k)),t(n).is("exceed",t(Le)),{[t(n).b("group")]:e.$slots.prepend||e.$slots.append,[t(n).bm("group","append")]:e.$slots.append,[t(n).bm("group","prepend")]:e.$slots.prepend,[t(n).m("prefix")]:e.$slots.prefix||e.prefixIcon,[t(n).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[t(n).bm("suffix","password-clear")]:t(H)&&t(Y)},e.$attrs.class],style:t(Be),role:e.containerRole,onMouseenter:We,onMouseleave:je}),[m(" input "),e.type!=="textarea"?(p(),x(se,{key:0},[m(" prepend slot "),e.$slots.prepend?(p(),x("div",{key:0,class:h(t(n).be("group","prepend"))},[W(e.$slots,"prepend")],2)):m("v-if",!0),V("div",{class:h([t(n).e("wrapper"),t(n).is("focus",A.value)])},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(p(),x("span",{key:0,class:h(t(n).e("prefix"))},[V("span",{class:h(t(n).e("prefix-inner"))},[W(e.$slots,"prefix"),e.prefixIcon?(p(),w(t(L),{key:0,class:h(t(n).e("icon"))},{default:O(()=>[(p(),w(U(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),V("input",ne({id:t(re),ref_key:"input",ref:R,class:t(n).e("inner")},t(y),{type:e.showPassword?D.value?"text":"password":e.type,disabled:t(k),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:me,onCompositionupdate:ye,onCompositionend:he,onInput:J,onFocus:ge,onBlur:xe,onChange:ve,onKeydown:we}),null,16,Ot),m(" suffix slot "),t(Oe)?(p(),x("span",{key:1,class:h(t(n).e("suffix"))},[V("span",{class:h(t(n).e("suffix-inner"))},[!t(H)||!t(Y)||!t(P)?(p(),x(se,{key:0},[W(e.$slots,"suffix"),e.suffixIcon?(p(),w(t(L),{key:0,class:h(t(n).e("icon"))},{default:O(()=>[(p(),w(U(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),t(H)?(p(),w(t(L),{key:1,class:h([t(n).e("icon"),t(n).e("clear")]),onMousedown:et(t(St),["prevent"]),onClick:Se},{default:O(()=>[wt(t(ct))]),_:1},8,["class","onMousedown"])):m("v-if",!0),t(Y)?(p(),w(t(L),{key:2,class:h([t(n).e("icon"),t(n).e("password")]),onClick:He},{default:O(()=>[(p(),w(U(t(Me))))]),_:1},8,["class"])):m("v-if",!0),t(P)?(p(),x("span",{key:3,class:h(t(n).e("count"))},[V("span",{class:h(t(n).e("count-inner"))},_(t(G))+" / "+_(t(y).maxlength),3)],2)):m("v-if",!0),t(B)&&t(ce)&&t(de)?(p(),w(t(L),{key:4,class:h([t(n).e("icon"),t(n).e("validateIcon"),t(n).is("loading",t(B)==="validating")])},{default:O(()=>[(p(),w(U(t(ce))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(p(),x("div",{key:1,class:h(t(n).be("group","append"))},[W(e.$slots,"append")],2)):m("v-if",!0)],64)):(p(),x(se,{key:1},[m(" textarea "),V("textarea",ne({id:t(re),ref_key:"textarea",ref:z,class:t(ie).e("inner")},t(y),{tabindex:e.tabindex,disabled:t(k),readonly:e.readonly,autocomplete:e.autocomplete,style:t(pe),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:me,onCompositionupdate:ye,onCompositionend:he,onInput:J,onFocus:ge,onBlur:xe,onChange:ve,onKeydown:we}),null,16,Rt),t(P)?(p(),x("span",{key:0,style:Ct(ue.value),class:h(t(n).e("count"))},_(t(G))+" / "+_(t(y).maxlength),7)):m("v-if",!0)],64))],16,Lt)),[[Qe,e.type!=="hidden"]])}}));var Kt=pt(Ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Zt=ft(Kt);export{Zt as E,zt as i,Nt as u};
