var x=(e,d,l)=>new Promise((t,a)=>{var n=s=>{try{u(l.next(s))}catch(i){a(i)}},o=s=>{try{u(l.throw(s))}catch(i){a(i)}},u=s=>s.done?t(s.value):Promise.resolve(s.value).then(n,o);u((l=l.apply(e,d)).next())});import{_ as T}from"./index.9250b320.js";import{_ as R}from"./index.f0d5f031.js";import{_ as j}from"./dev-mode.acf56c3e.js";import{_ as C}from"./icon-button.74ccc970.js";import{g as V,o as L}from"./i18n.a87944a4.js";import{d as w,o as m,a as c,F as B,b7 as I,j as $,b as r,u as f,k as v,w as k,g as b,cd as M,x as Q,f as q}from"./url.4cb47a7a.js";import{u as z}from"./replace-all.56d2c1f7.js";import{a as A,u as G}from"./user-options.a77d8000.js";import{E as H}from"./index.178b9e08.js";import{E as P}from"./index.6918f0a5.js";import{E as W}from"./index.6f16842c.js";import{E as X}from"./windi.6360286d.js";import{E as Y,a as Z}from"./index.9fd79879.js";import{E as ee}from"./index.c003dfa1.js";import"./index.361e2245.js";import"./index.7b8c5aef.js";import"./main.9fdfea92.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./guid.c1a40312.js";import"./use-shortcuts.ff4b1f52.js";import"./index.fd96ea36.js";import"./error.7e8331f1.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./config.1e73f9c3.js";import"./dark.9459c47b.js";import"./page.881ec888.js";import"./validate.bb56f9e3.js";import"./index.d24a40b9.js";import"./index.f23f1e38.js";import"./index.a24f458a.js";import"./index.1fd72ea8.js";import"./index.abe211fa.js";import"./style.c350d462.js";import"./toNumber.47eea968.js";import"./_baseIsEqual.dc9e64c4.js";import"./index.f2c1b903.js";import"./index.c10802d9.js";import"./scroll.16983984.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.50a00b7f.js";import"./isNil.98bb3b88.js";import"./validator.b5df2420.js";import"./index.4d568055.js";import"./index.c86a187b.js";import"./index.d96452a6.js";import"./dropdown.86d3a7fb.js";import"./refs.3132cbdb.js";import"./use-copy-text.ec245a13.js";import"./index.269bf65e.js";import"./monaco.c080bc0a.js";import"./classCompletion.a22e38a6.js";import"./extraLib.d94bb2b4.js";import"./use-save-tip.e3dc783a.js";import"./confirm.b60b5d2f.js";import"./logo-transparent.1566007e.js";import"./index.f15f695e.js";import"./event.776e7e11.js";import"./index.7c862087.js";import"./isEqual.4cab74e3.js";import"./debounce.4e0c106e.js";import"./index.66319a92.js";import"./vuedraggable.umd.af323a53.js";import"./index.f154d010.js";import"./index.42922617.js";import"./index.b9a74c44.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.79632b7d.js";import"./index.99e769ef.js";import"./index.d878e15f.js";import"./alert.d2815716.js";import"./index.24947ed8.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.d235f69b.js";/* empty css                                                          */import"./file.a821eac5.js";import"./use-date.f1258183.js";import"./dayjs.min.ccc40d4f.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.78bd75f1.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.ec5f0705.js";import"./image-editor.a4ae94b1.js";import"./index.0e5d639d.js";import"./cloneDeep.c5011aa2.js";import"./_baseClone.b8903935.js";import"./main.esm.e26794cb.js";import"./index.16f227d6.js";import"./index.4f90a917.js";import"./index.e3f90979.js";function O(e){switch(e){case"string":return"";case"array":return[];case"boolean":return!1;case"number":return 0;case"object":return{}}}const te={class:"space-y-8"},oe=w({props:{schema:null,value:null},setup(e){const d=e,{t:l}=V();function t(n,o){n.push(O(o))}function a(n,o){d.value.splice(n,1,o)}return(n,o)=>{const u=C;return m(),c("div",te,[(m(!0),c(B,null,I(e.value,(s,i)=>(m(),$(S,{key:i,value:s,schema:{type:e.schema.arrayType,children:e.schema.children,display:e.schema.display,name:e.schema.name},deletable:!0,"onUpdate:modelValue":h=>a(i,h),onDelete:h=>e.value.splice(i,1)},null,8,["value","schema","onUpdate:modelValue","onDelete"]))),128)),r(u,{circle:"",class:"text-blue",icon:"icon-a-addto ",tip:f(l)("common.add"),onClick:o[0]||(o[0]=s=>t(e.value,e.schema.arrayType))},null,8,["tip"])])}}}),ae={key:0,class:"flex gap-4 w-full"},le={key:0},ne={key:1,class:"flex gap-4 w-full"},ie={key:0},me={key:2,class:"flex gap-4 w-full"},re={key:0},se={key:3,class:"px-24 py-12 border-l-2 border-blue/70 relative transition-all duration-300 hover:shadow-m-10 rounded-tr-normal rounded-br-normal"},ue={key:4,class:"flex items-center gap-4 w-full"},S=w({props:{schema:null,value:null,deletable:{type:Boolean}},emits:["update:model-value","delete"],setup(e){const{t:d}=V();return(l,t)=>{const a=H,n=C,o=P,u=W,s=X;return e.schema.type=="string"?(m(),c("div",ae,[r(a,{"model-value":e.value,"onUpdate:modelValue":t[0]||(t[0]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",le,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[1]||(t[1]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="boolean"?(m(),c("div",ne,[r(o,{"model-value":e.value,"onUpdate:modelValue":t[2]||(t[2]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",ie,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[3]||(t[3]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="number"?(m(),c("div",me,[r(u,{"model-value":e.value,"onUpdate:modelValue":t[4]||(t[4]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",re,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[5]||(t[5]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="object"?(m(),c("div",se,[r(U,{schemas:e.schema.children,data:e.value,deletable:e.deletable},null,8,["schemas","data","deletable"]),e.deletable?(m(),$(s,{key:0,class:"iconfont icon-delete cursor-pointer text-orange absolute top-16 right-16",onClick:t[6]||(t[6]=i=>l.$emit("delete"))})):v("",!0)])):e.schema.type=="array"?(m(),c("div",ue,[r(oe,{schema:e.schema,value:e.value},null,8,["schema","value"])])):v("",!0)}}}),U=w({props:{schemas:null,data:null,deletable:{type:Boolean}},emits:["update:model-value","delete"],setup(e){function d(t,a,n){return t[a]||(t[a]=O(n)),t[a]}function l(t,a,n){t[a]=n}return(t,a)=>{const n=Y;return m(!0),c(B,null,I(e.schemas,o=>(m(),$(n,{key:o.name,label:o.display||o.name,class:"w-504px"},{default:k(()=>[(m(),$(S,{key:o.name,schema:o,value:d(e.data,o.name,o.type),"onUpdate:modelValue":u=>l(e.data,o.name,u)},null,8,["schema","value","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128)}}}),ce={class:"p-24 mb-64"},de={class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 py-24 px-56px relative"},pe=["onKeydown"],eo=w({setup(e){const{t:d}=V(),l=b([]),t=M(),a=b({}),n=Q("id"),o=b(!1),u=b("{}");A(n).then(y=>{l.value=JSON.parse(y.schema),a.value=y.data?JSON.parse(y.data):{}});function s(){t.goBackOrTo(z({name:"useroptions"}))}function i(){return x(this,null,function*(){yield G({id:n,setting:JSON.stringify(a.value)}),s()})}function h(){u.value=JSON.stringify(a.value,null,4),o.value=!0}function E(){a.value=JSON.parse(u.value),o.value=!1}return(y,p)=>{const _=C,N=Z,D=j,F=R,J=ee,K=T;return m(),c("div",ce,[r(N,{"label-position":"top"},{default:k(()=>[q("div",de,[r(_,{icon:"icon-code",tip:f(d)("common.editCode"),class:"absolute top-24 right-24",onClick:h},null,8,["tip"]),r(U,{schemas:l.value,data:a.value},null,8,["schemas","data"])])]),_:1}),r(J,{modelValue:o.value,"onUpdate:modelValue":p[2]||(p[2]=g=>o.value=g),width:"800px","close-on-click-modal":!1,title:f(d)("common.editCode")},{footer:k(()=>[r(F,{onConfirm:E,onCancel:p[1]||(p[1]=g=>o.value=!1)})]),default:k(()=>[o.value?(m(),c("div",{key:0,onKeydown:L(E,["enter"])},[r(D,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=g=>u.value=g),language:"json"},null,8,["modelValue"])],40,pe)):v("",!0)]),_:1},8,["modelValue","title"]),r(K,{permission:{feature:"userOptions",action:"edit"},onCancel:s,onSave:i})])}}});export{eo as default};
