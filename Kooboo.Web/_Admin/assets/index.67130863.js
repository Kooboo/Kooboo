var j=(e,V,a)=>new Promise((u,p)=>{var m=d=>{try{g(a.next(d))}catch(i){p(i)}},n=d=>{try{g(a.throw(d))}catch(i){p(i)}},g=d=>d.done?u(d.value):Promise.resolve(d.value).then(m,n);g((a=a.apply(e,V)).next())});import{_ as te}from"./icon-button.3313e42d.js";import{_ as oe}from"./tooltip.28a451cc.js";import{g as q,u as Q}from"./main.ea42d807.js";import{v as ae,g as W}from"./i18n.48bd28ac.js";import{E as X}from"./index.fc90f5ad.js";import{E as _,a as ne}from"./index.6855d037.js";import{d as L,u as c,o,a as w,b6 as F,e as ue,j as f,w as $,r as A,F as h,g as B,i as de,f as C,t as N,b as S,k as M,aH as O,c as Y,h as Z,G as ie,n as se,m as me,az as re,c0 as ce}from"./url.2e6a77c4.js";import{_ as fe}from"./index.0810e95d.js";import{a as pe,b as ve}from"./index.dd130c96.js";import{_ as ye}from"./index.0f940e7f.js";import{S as ge}from"./search-input.67dfc984.js";import{_ as Ve}from"./k-table.d4486972.js";import{_ as be}from"./index.a731e53b.js";import{u as ke}from"./use-date.01b82ce0.js";import{u as $e}from"./content-effect.325a9c06.js";import{_ as we}from"./index.4a51c2b7.js";import{E as ee,a as le}from"./index.0d2684bf.js";import{E as he}from"./index.b494e80e.js";import{E as xe}from"./index.c4e9b529.js";import{b as Ee}from"./textContent.585a78c7.js";import{d as Se}from"./image-cover.5aa60066.js";import{g as Ue}from"./string.955a924b.js";import{E as Ce}from"./index.a439b087.js";import{_ as Ne}from"./key-value-editor.b270c5cd.js";import{E as Fe}from"./index.ae716322.js";import{E as Ie,a as Me}from"./index.77edae39.js";import{b as Te,a as Be}from"./index.695d0284.js";import{E as De}from"./index.cbddf8eb.js";import{E as Le}from"./index.81036e13.js";import{E as Re}from"./index.d4bbb472.js";import{f as G,g as J}from"./custom-field.74b8b7fb.js";const Oe=L({props:{defaultModel:null,multilingualModel:null,label:null,rules:null,defaultProp:null,multilingualProp:null},emits:["update:default-model"],setup(e,{emit:V}){const a=e,u=q();V("update:default-model",g());function p(d){V("update:default-model",d),a.multilingualModel[u.default]=d}function m(d,i){var v=d==u.default;v&&V("update:default-model",i),a.multilingualModel[d]=i}function n(d){var k;var i=a.multilingualModel,v=d==u.default;return(k=i[d])!=null?k:v?a.defaultModel:void 0}function g(){if(a.defaultModel!=null)return a.defaultModel;var d=a.multilingualModel;return d[u.default]}return(d,i)=>{const v=_;return c(u).visible?(o(!0),w(h,{key:0},F(c(u).cultures,(k,y)=>ue((o(),f(v,{key:y,label:c(u).appendLangText(e.label,y),prop:`${e.multilingualProp}.${y}`,rules:e.rules},{default:$(()=>[A(d.$slots,"default",{value:n(y),onchange:x=>m(y,x)})]),_:2},1032,["label","prop","rules"])),[[ae,c(u).selected.includes(y)]])),128)):(o(),f(v,{key:1,label:e.label,prop:e.defaultProp,rules:e.rules},{default:$(()=>[A(d.$slots,"default",{value:g(),onchange:p})]),_:3},8,["label","prop","rules"]))}}});function H(e){return e?e.toLowerCase().split(" ").filter(V=>V).join("-"):""}const Pe={class:"inline-flex items-center space-x-4"},_e={class:"flex items-center space-x-8 w-full"},ze={class:"text-s text-999"},je={class:"text-orange"},Nl=L({props:{title:null,seoName:null,path:null,label:null},emits:["update:seoName"],setup(e,{emit:V}){const a=e,u=B(a.seoName!=H(a.title)),p=Q(),{t:m}=W();return de([()=>a.title,()=>u.value],()=>{u.value||V("update:seoName",H(a.title))}),(n,g)=>{const d=oe,i=X,v=te,k=_;return o(),f(k,null,{label:$(()=>[C("div",Pe,[C("div",null,N(e.label||c(m)("common.seoName")),1),S(d,{tip:c(m)("common.seoNameTip"),"custom-class":"ml-4"},null,8,["tip"])])]),default:$(()=>[C("div",_e,[S(i,{"model-value":a.seoName,"onUpdate:modelValue":g[0]||(g[0]=y=>V("update:seoName",y)),onInput:g[1]||(g[1]=()=>u.value=!0)},null,8,["model-value"]),u.value?(o(),f(v,{key:0,circle:"",class:"text-blue",icon:"icon-Refresh",tip:"Sync from title",onClick:g[2]||(g[2]=()=>u.value=!1)})):M("",!0)]),C("div",ze,[O(N(c(p).site.baseUrl)+N(a.path)+"/",1),C("span",je,N(a.seoName),1)])]),_:1})}}}),Ae={class:"flex items-center pb-24 justify-between"},Ge={class:"space-x-16 flex items-center"},Je=L({props:{modelValue:{type:Boolean},folderId:null,multiple:{type:Boolean},exclude:null},emits:["update:model-value","success"],setup(e,{emit:V}){const a=e,{t:u}=W(),p=B(!0),m=B(),{list:n,columns:g,keywords:d,columnLoaded:i,pagination:v,fetchList:k,searchCategories:y,categoryOptions:x,rawList:U}=$e(a.folderId,!0,a.exclude),t=Y(()=>g.value.map(s=>({name:s.name,displayName:s.displayName,controlType:s.controlType,multipleValue:s.multipleValue,attrs:{sortable:"custom","min-width":180}})));Z(()=>j(this,null,function*(){k(1,10)}));function r(){const s=[];for(const l of m.value.selected){const E=U.value.find(I=>I.id==l.id);E&&s.push(E)}V("success",s),p.value=!1}return(s,l)=>{const E=ee,I=le,D=ge,T=he,P=xe;return o(),f(P,{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=b=>p.value=b),width:"900px","close-on-click-modal":!1,title:c(u)("common.content"),onClosed:l[5]||(l[5]=b=>V("update:model-value",!1))},{footer:$(()=>[S(be,{onConfirm:r,onCancel:l[3]||(l[3]=b=>p.value=!1)})]),default:$(()=>[C("div",Ae,[C("div",Ge,[(o(!0),w(h,null,F(c(x),b=>{var z;return o(),f(I,{key:b.id,modelValue:c(y)[b.id],"onUpdate:modelValue":R=>c(y)[b.id]=R,clearable:"",multiple:"",placeholder:(z=b.display)!=null?z:b.alias,onChange:l[0]||(l[0]=()=>c(k)(1,10))},{default:$(()=>[(o(!0),w(h,null,F(b.options,R=>(o(),f(E,{key:R.key,label:R.value,value:R.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])}),128)),S(D,{modelValue:c(d),"onUpdate:modelValue":l[1]||(l[1]=b=>ie(d)?d.value=b:null),placeholder:c(u)("common.searchContents"),class:"w-238px",clearable:"","data-cy":"search"},null,8,["modelValue","placeholder"])])]),c(i)?(o(),f(c(Ve),{key:0,ref_key:"table",ref:m,data:c(n),"show-check":"","hide-header":"","is-radio":!e.multiple,pagination:c(v),"hide-delete":"",onChange:l[2]||(l[2]=b=>c(k)(b,10))},{default:$(()=>[S(we,{columns:c(t)},null,8,["columns"]),S(T,{prop:"online",sortable:"custom",label:c(u)("content.online"),width:"120",align:"center"},{default:$(({row:b})=>[C("span",{class:se(b.online?"text-green":"text-999"),"data-cy":"online"},N(b.online?c(u)("common.yes"):c(u)("common.no")),3)]),_:1},8,["label"]),S(T,{label:c(u)("common.lastModified"),width:"180",align:"center",prop:"lastModified",sortable:"custom"},{default:$(({row:b})=>[O(N(c(ke)(b.lastModified)),1)]),_:1},8,["label"])]),_:1},8,["data","is-radio","pagination"])):M("",!0)]),_:1},8,["modelValue","title"])}}}),He={key:0,class:"w-504px"},Ke={class:"flex space-x-4"},qe={key:1},Qe=L({props:{modelValue:null,contentFolder:null,multiple:{type:Boolean},allowRepetition:{type:Boolean}},emits:["update:model-value"],setup(e,{emit:V}){var U;const a=e,u=B(!1),p=B({columns:[],list:[]});function m(){u.value=!0}Ee(a.modelValue||[],(U=a.contentFolder)!=null?U:"").then(t=>p.value=t);const n=Y(()=>{const t=[];if(!p.value)return t;for(const r of p.value.columns)r.controlType=="MediaFile"?t.unshift(r):t.push(r);return t});function g(t){let r=[...a.modelValue];if(a.multiple)for(const s of t)p.value.list.find(l=>l.id==s.id)||p.value.list.push(s),r.push(s.id);else r=t.map(s=>s.id),p.value.list=t;V("update:model-value",r)}function d(t){const r=a.modelValue.findIndex(s=>s==t);r>-1&&a.modelValue.splice(r,1),V("update:model-value",a.modelValue)}function i(t){const r=a.modelValue.splice(t.oldIndex,1)[0];a.modelValue.splice(t.newIndex,0,r),V("update:model-value",a.modelValue)}function v(t,r){var l,E;const s=(E=(l=p.value)==null?void 0:l.list)==null?void 0:E.find(I=>I.id==t);return s?Ue(s.textValues,r):""}const k=Q();function y(t){return`url("${t?ce(k.site.prUrl,t):Se}")`}function x(t,r){if(r.controlType!=="MediaFile")return[];const s=v(t,r.name);if(!s)return[];if(!r.multipleValue)return[s];try{return JSON.parse(s)}catch(l){return console.warn(["JSON parse error",l,s]),[]}}return(t,r)=>{var E,I;const s=Ce,l=ye;return(I=(E=p.value)==null?void 0:E.columns)!=null&&I.length?(o(),w("div",He,[S(l,{"wrapper-class":"space-y-4 w-full",list:e.modelValue,onAdd:m,onDelete:d,onSort:i},{default:$(({item:D})=>[S(s,null,{default:$(()=>[C("div",Ke,[(o(!0),w(h,null,F(c(n),T=>(o(),w(h,{key:T.name},[T.controlType=="MediaFile"?(o(!0),w(h,{key:0},F(x(D,T),(P,b)=>(o(),w("div",{key:b,class:"w-32 h-32 bg-contain bg-center bg-no-repeat rounded-4px overflow-hidden inline-block relative group bg-gray",style:me({backgroundImage:y(P)})},null,4))),128)):(o(),w("div",qe,N(v(D,T.name)),1))],64))),128))])]),_:2},1024)]),_:1},8,["list"]),(o(),f(re,{to:"body"},[u.value?(o(),f(Je,{key:0,modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=D=>u.value=D),"folder-id":e.contentFolder,multiple:e.multiple,exclude:e.allowRepetition?[]:e.modelValue,onSuccess:g},null,8,["modelValue","folder-id","multiple","exclude"])):M("",!0)]))])):M("",!0)}}});const K=L({props:{field:null,modelValue:null},emits:["update:model-value"],setup(e,{emit:V}){const a=e,u=B(!1);if(a.field.multiple&&!Array.isArray(a.modelValue)){var p=[];a.modelValue!==void 0&&p.push(a.modelValue),V("update:model-value",p)}return Z(()=>{u.value=!0}),(m,n)=>{const g=X,d=ee,i=le,v=Ie,k=Me,y=Te,x=Be,U=De,t=Le,r=Fe,s=Re;return u.value?(o(),w(h,{key:0},[e.field.type==="TextBox"?(o(),f(g,{key:0,style:{width:"100%"},"model-value":e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=l=>m.$emit("update:model-value",l))},null,8,["model-value"])):e.field.type==="TextArea"?(o(),f(g,{key:1,"model-value":e.modelValue,class:"break-normal",type:"textarea",autosize:{minRows:8,maxRows:15},style:{width:"100%"},"onUpdate:modelValue":n[1]||(n[1]=l=>m.$emit("update:model-value",l))},null,8,["model-value"])):e.field.type==="RichEditor"?(o(),f(fe,{key:2,"model-value":e.modelValue,min_height:385,"onUpdate:modelValue":n[2]||(n[2]=l=>m.$emit("update:model-value",l))},null,8,["model-value"])):e.field.type==="Selection"?(o(),f(i,{key:3,"model-value":e.modelValue,clearable:"","onUpdate:modelValue":n[3]||(n[3]=l=>m.$emit("update:model-value",l))},{default:$(()=>[(o(!0),w(h,null,F(e.field.selectionOptions,l=>(o(),f(d,{key:l.value,value:l.value,label:l.key},null,8,["value","label"]))),128))]),_:1},8,["model-value"])):e.field.type==="CheckBox"?(o(),f(k,{key:4,"model-value":e.modelValue,"onUpdate:modelValue":n[4]||(n[4]=l=>m.$emit("update:model-value",l))},{default:$(()=>[(o(!0),w(h,null,F(e.field.selectionOptions,l=>(o(),f(v,{key:l.value,size:"large",label:l.value},{default:$(()=>[O(N(l.key),1)]),_:2},1032,["label"]))),128))]),_:1},8,["model-value"])):e.field.type==="RadioBox"?(o(),f(x,{key:5,"model-value":e.modelValue,"onUpdate:modelValue":n[5]||(n[5]=l=>m.$emit("update:model-value",l))},{default:$(()=>[(o(!0),w(h,null,F(e.field.selectionOptions,l=>(o(),f(y,{key:l.value,size:"large",label:l.value},{default:$(()=>[O(N(l.key),1)]),_:2},1032,["label"]))),128))]),_:1},8,["model-value"])):e.field.type==="Switch"?(o(),f(U,{key:6,"model-value":e.modelValue,"onUpdate:modelValue":n[6]||(n[6]=l=>m.$emit("update:model-value",l))},null,8,["model-value"])):e.field.type==="DateTime"?(o(),f(t,{key:7,"model-value":e.modelValue,type:"datetime","popper-class":"filed-control-el-date-picker","onUpdate:modelValue":n[7]||(n[7]=l=>m.$emit("update:model-value",l))},null,8,["model-value"])):e.field.type==="ColorPicker"?(o(),f(r,{key:8,"model-value":e.modelValue,"popper-class":"filed-control-el-color-picker","show-alpha":"","onUpdate:modelValue":n[8]||(n[8]=l=>m.$emit("update:model-value",l))},null,8,["model-value"])):e.field.type==="Number"?(o(),f(s,{key:9,"model-value":e.modelValue,"controls-position":"right","onUpdate:modelValue":n[9]||(n[9]=l=>m.$emit("update:model-value",l))},null,8,["model-value"])):e.field.type==="MediaFile"?(o(),f(pe,{key:10,"model-value":e.modelValue,multiple:e.field.multiple,validations:e.field.validations,"onUpdate:modelValue":n[10]||(n[10]=l=>m.$emit("update:model-value",l))},null,8,["model-value","multiple","validations"])):e.field.type==="File"?(o(),f(ve,{key:11,"model-value":e.modelValue,multiple:e.field.multiple,"onUpdate:modelValue":n[11]||(n[11]=l=>m.$emit("update:model-value",l))},null,8,["model-value","multiple"])):e.field.type==="Content"?(o(),f(Qe,{key:12,"model-value":e.modelValue||[],"content-folder":e.field.contentFolder,multiple:e.field.multiple,"allow-repetition":e.field.allowRepetition,"onUpdate:modelValue":n[12]||(n[12]=l=>m.$emit("update:model-value",l))},null,8,["model-value","content-folder","multiple","allow-repetition"])):e.field.type==="KeyValues"?(o(),f(Ne,{key:13,"model-value":e.modelValue||[],"onUpdate:modelValue":n[13]||(n[13]=l=>m.$emit("update:model-value",l))},null,8,["model-value"])):M("",!0)],64)):M("",!0)}}}),We={key:0,class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},Fl=L({props:{data:null,customFields:null},setup(e,{expose:V}){const a=e,u=q(),p=B();function m(i){return i=Object.keys(a.data).find(v=>v.toLowerCase()==i.toLowerCase())||i,a.data[i]||(a.data[i]={}),a.data[i]}function n(i,v){return m(i)[v]}function g(i,v,k){const y=m(i);y[v]=k}function d(i){var x;if((x=G[i.type])==null?void 0:x.multilingual)return u.default;const k=m(i.name),y=Object.keys(k);return!y.length||y.includes(u.default)?u.default:y[0]}return V({form:p}),(i,v)=>{var U;const k=Oe,y=_,x=ne;return(U=e.customFields)!=null&&U.length?(o(),w("div",We,[S(x,{ref_key:"form",ref:p,"label-position":"top",model:e.data},{default:$(()=>[(o(!0),w(h,null,F(e.customFields,t=>{var r;return o(),w(h,{key:t.name},[t.editable?(o(),w(h,{key:0},[((r=c(G)[t.type])==null?void 0:r.multilingual)&&t.multilingual?(o(),f(k,{key:0,label:t.displayName||t.name,"multilingual-model":m(t.name),rules:c(J)(t.validations,t.type),"multilingual-prop":t.name},{default:$(({value:s,onchange:l})=>[S(K,{"model-value":s,field:t,"onUpdate:modelValue":E=>l(E)},null,8,["model-value","field","onUpdate:modelValue"])]),_:2},1032,["label","multilingual-model","rules","multilingual-prop"])):(o(),f(y,{key:1,label:t.displayName||t.name,rules:c(J)(t.validations,t.type),prop:`${t.name}.${d(t)}`},{default:$(()=>[S(K,{"model-value":n(t.name,d(t)),field:t,"onUpdate:modelValue":s=>g(t.name,d(t),s)},null,8,["model-value","field","onUpdate:modelValue"])]),_:2},1032,["label","rules","prop"]))],64)):M("",!0)],64)}),128))]),_:1},8,["model"])])):M("",!0)}}});export{Fl as _,Nl as a,Oe as b};
