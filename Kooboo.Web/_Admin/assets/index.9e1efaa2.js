var U=Object.defineProperty,z=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var S=(l,e,a)=>e in l?U(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a,V=(l,e)=>{for(var a in e||(e={}))P.call(e,a)&&S(l,a,e[a]);if(h)for(var a of h(e))Q.call(e,a)&&S(l,a,e[a]);return l},x=(l,e)=>z(l,M(e));var w=(l,e,a)=>new Promise((m,y)=>{var r=s=>{try{i(a.next(s))}catch(c){y(c)}},g=s=>{try{i(a.throw(s))}catch(c){y(c)}},i=s=>s.done?m(s.value):Promise.resolve(s.value).then(r,g);i((a=a.apply(l,e)).next())});import{_ as W}from"./k-table.b1a54b80.js";import{a as N}from"./replace-all.56d2c1f7.js";import{d as T}from"./main.9fdfea92.js";import{u as D}from"./use-date.f1258183.js";import{B as F}from"./breadcrumb.f4d80c95.js";import{S as j}from"./search-input.2a27ef56.js";import{g as A}from"./i18n.a87944a4.js";import{d as G,G as L,g as q,h as K,i as O,o as k,a as b,b as n,u as o,f as Y,w as d,F as C,b7 as B,j as $,aI as E,t as I,ch as H}from"./url.4cb47a7a.js";import{E as J,a as R}from"./index.7c862087.js";import{E as X}from"./index.b38edc72.js";import"./sortable.esm.a99254e8.js";import"./icon-button.74ccc970.js";import"./windi.6360286d.js";import"./index.361e2245.js";import"./index.7b8c5aef.js";import"./index.d96452a6.js";import"./focus-trap.50a00b7f.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.4f90a917.js";import"./index.4d568055.js";import"./index.c6da2706.js";import"./isEqual.4cab74e3.js";import"./_baseIsEqual.dc9e64c4.js";import"./index.178b9e08.js";import"./event.776e7e11.js";import"./error.7e8331f1.js";import"./index.42922617.js";import"./index.f15f695e.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./dayjs.min.ccc40d4f.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.fd96ea36.js";/* empty css                                                                 */import"./scroll.16983984.js";import"./debounce.4e0c106e.js";import"./toNumber.47eea968.js";import"./index.66319a92.js";import"./validator.b5df2420.js";const Z=l=>T.get(N("SqlLog/List"),l),ee=()=>T.get(N("SqlLog/weeks")),ae={class:"p-24"},te={class:"flex items-center py-24 space-x-16"},Oe=G({setup(l){const{t:e}=A(),a=L({currentPage:1,pageCount:0,pageSize:1}),m=q([]),y=[{label:"SQLite",value:"sqlite"},{label:"MySQL",value:"mysql"},{label:"SQLServer",value:"sqlserver"}],r=L({type:"",week:"",keyword:"",pageIndex:1}),g=q([]);K(()=>w(this,null,function*(){yield i(),yield s()}));function i(){return w(this,null,function*(){var u;m.value=yield ee(),r.week=(u=m.value[0])==null?void 0:u.key})}function s(u){return w(this,null,function*(){r.pageIndex=u||1;const p=yield Z(x(V({},r),{keyword:r.keyword.trim()}));g.value=p.list,a.currentPage=p.pageNr,a.pageCount=p.totalPages,a.pageSize=p.pageSize})}O(()=>r.keyword,()=>{r.keyword?c():s()});const c=H(s,1e3);return(u,p)=>{const _=J,v=R,f=X;return k(),b("div",ae,[n(F,{name:o(e)("common.sqlLogs")},null,8,["name"]),Y("div",te,[n(v,{modelValue:o(r).week,"onUpdate:modelValue":p[0]||(p[0]=t=>o(r).week=t),class:"w-240px",placeholder:o(e)("common.week"),title:o(e)("common.selectAWeek"),onChange:s},{default:d(()=>[(k(!0),b(C,null,B(m.value,t=>(k(),$(_,{key:t.key,value:t.key,label:t.value,"data-cy":"week-opt"},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","title"]),n(v,{modelValue:o(r).type,"onUpdate:modelValue":p[1]||(p[1]=t=>o(r).type=t),class:"w-200px",clearable:"",placeholder:o(e)("common.type"),onChange:s},{default:d(()=>[(k(),b(C,null,B(y,t=>n(_,{key:t.value,value:t.value,label:t.label,"data-cy":"type-opt"},null,8,["value","label"])),64))]),_:1},8,["modelValue","placeholder"]),n(j,{modelValue:o(r).keyword,"onUpdate:modelValue":p[2]||(p[2]=t=>o(r).keyword=t),class:"w-250px",placeholder:o(e)("common.enterYourKeyword"),clearable:"","data-cy":"keyword"},null,8,["modelValue","placeholder"])]),n(o(W),{data:g.value,pagination:o(a),onChange:s},{default:d(()=>[n(f,{label:o(e)("common.type"),prop:"type",width:"100"},null,8,["label"]),n(f,{label:o(e)("common.lastModified"),width:"180"},{default:d(({row:t})=>[E(I(o(D)(t.dateTime)),1)]),_:1},8,["label"]),n(f,{label:o(e)("common.content"),prop:"sql"},null,8,["label"]),n(f,{label:o(e)("common.parameters"),width:"160"},{default:d(({row:t})=>[E(I(!t.params||t.params==="null"?"":t.params),1)]),_:1},8,["label"])]),_:1},8,["data","pagination"])])}}});export{Oe as default};
