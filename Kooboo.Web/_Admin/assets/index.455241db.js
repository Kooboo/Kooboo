import{w as C,v as W}from"./i18n.bcd18f8a.js";import{d as _,o as f,a as c,f as i,E as I,r as E,k as y,n as g,t as b,u as l,e as Z,m as D,F as B,b6 as X,K as N,i as O,j as U,b as V,w as L}from"./url.8f5ec20c.js";import{P as q}from"./main.esm.6441082b.js";import{m as K,e as $,U as F}from"./editor.main.d2800f63.js";import{d as A}from"./dark.166fd971.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as J}from"./plugin-vue_export-helper.41ffa612.js";import{E as Q}from"./windi.19264205.js";const ee=_({name:"FullScreen"}),te={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},oe=i("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),le=[oe];function ne(r,v,n,p,s,a){return f(),c("svg",te,le)}var re=J(ee,[["render",ne]]);const se={class:"w-full flex items-center text-xs px-[16px] bg-[rgba(216,216,216,.3)] dark:bg-[#333]",style:{height:"40px","white-space":"nowrap"}},ie={key:0,class:"flex items-center w-full h-full text-[#1d2b4f] dark:text-fff/50"},ae={class:"flex items-center gap-[16px] text-666 dark:text-fff/50"},ue={class:"px-[16px]"},fe=i("div",{class:"w-full h-[5px] absolute z-20 rounded-full overflow-hidden",style:{"background-color":"rgba(166, 166, 166, 0.5)"}},null,-1),de={class:"w-full h-full flex items-center absolute z-30"},ce={class:"w-full h-[70%] flex items-center absolute z-10 opacity-50 list-none"},pe={class:"px-[16px]"},me=_({props:{player:null},emits:["changeTime"],setup(r,{emit:v}){const n=r;function p(a){if(!n.player)return;let e=a.offsetX/a.target.clientWidth;e<0&&(e=0),e>1&&(e=1);let t=e*n.player.totalTime;t<0&&(t=0),v("changeTime",t)}const s=I({isShow:!1,offsetX:0,time:0,isLeft:!1,show(){s.isShow=!0},hide(){s.isShow=!1},handleMove(a){s.offsetX=a.offsetX;var e=a.offsetX/a.target.clientWidth;e<0&&(e=0),e>1&&(e=1),s.isLeft=e>.7,s.time=e*n.player.totalTime}});return(a,e)=>{var t,d;return f(),c("div",se,[r.player?(f(),c("div",ie,[E(a.$slots,"before"),i("div",ae,[(t=r.player)!=null&&t.prev?(f(),c("span",{key:0,class:"icon-left iconfont text-[20px] cursor-pointer hover:text-blue player-btn",onClick:e[0]||(e[0]=o=>{var u;return(u=r.player)==null?void 0:u.prev()})})):y("",!0),i("span",{class:g(["iconfont text-[20px] cursor-pointer hover:text-blue",r.player.playStatus?"icon-stop":"icon-play1"]),onClick:e[1]||(e[1]=()=>{var o;!r.player||(r.player.currentTime>=r.player.totalTime&&!((o=r.player)!=null&&o.pollStatus)&&r.player.jumpToStart(),r.player.toggle())})},null,2),(d=r.player)!=null&&d.prev?(f(),c("span",{key:1,class:"icon-next iconfont text-[20px] cursor-pointer hover:text-blue player-btn",onClick:e[2]||(e[2]=o=>{var u;return(u=r.player)==null?void 0:u.next()})})):y("",!0)]),i("div",ue,b(r.player.formatTime(r.player.currentTime)),1),i("div",{class:"flex-1 h-full w-full flex flex-auto items-center cursor-pointer relative",onClickCapture:p},[i("div",{class:"w-full h-full absolute z-50",onMousemove:e[3]||(e[3]=C((...o)=>l(s).handleMove&&l(s).handleMove(...o),["self"])),onMouseleave:e[4]||(e[4]=C((...o)=>l(s).hide&&l(s).hide(...o),["self"])),onMouseover:e[5]||(e[5]=C((...o)=>l(s).show&&l(s).show(...o),["self"]))},null,32),Z(i("div",{class:"bg-blue absolute h-full w-[2px] transform -translate-x-[50%] pointer-events-none z-40",style:D({left:`${l(s).offsetX}px`})},[i("span",{class:g(["absolute px-4 top-0 text-[12px] text-blue transform rounded-full",{"-translate-x-[100%]":l(s).isLeft}])},b(r.player.formatTime(l(s).time)),3)],4),[[W,l(s).isShow]]),fe,i("div",{class:"h-[5px] bg-[#55b7f1] absolute z-30 rounded-full overflow-hidden",style:D({width:(r.player.getProgress(r.player.currentTime)||0)+"%"})},null,4),i("div",de,[E(a.$slots,"default")]),i("div",ce,[(f(!0),c(B,null,X(r.player.highProgressBar,(o,u)=>(f(),c("li",{key:u,class:"bg-[#55b7f1]",style:D([{"margin-left":"0.1%",width:"0.4%"},{height:`${o}%`}])},null,4))),128))])],32),i("div",pe,b(r.player.formatTime(r.player.totalTime)),1),E(a.$slots,"toolbar")])):y("",!0)])}}}),ve={class:"relative h-full w-full"},ye=_({emits:["ready"],setup(r,{emit:v}){const n=I(new q(K,(p,s,a)=>new Promise(t=>{N(()=>{t($.create(n.getDom(p),{automaticLayout:!0,fontSize:14,wordWrap:"on",fontFamily:"Monaco,Consolas,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New, monospace",minimap:{enabled:!0},lineNumbersMinChars:2,readOnly:!0,model:$.getModel(F.parse(`file:///${p}?disable_auto_close_tag=true`))||$.createModel(s,a,F.parse(`file:///${p}?disable_auto_close_tag=true`))}))})}),{isSkip:!0,skipTime:5e3}));return O(A,p=>$.setTheme(p?"vs-dark":"vs"),{immediate:!0}),v("ready",n),(p,s)=>{var a;return f(),c("div",ve,[(f(!0),c(B,null,X((a=l(n))==null?void 0:a.tabList,e=>Z((f(),c("div",{key:e.id,class:"!absolute top-0 left-0 right-0 bottom-0"},[i("div",{ref_for:!0,ref:t=>l(n).setDom(e.id,t),class:"w-full h-full min-h-300px min-w-400px monaco-editor bg-fff"},null,512)],512)),[[W,e.id===l(n).activeId]])),128))])}}});const xe={class:"h-22px flex items-center justify-end bg-[rgba(216,216,216,.3)] dark:bg-[#333] text-m px-2 text-[#1d2b4f] dark:text-fff/50"},he={key:0,class:"relative w-full preview-player-control"},we={class:"flex items-center space-x-[16px]"},ge={key:0,class:"hidden cursor-pointer lg:flex items-center relative"},be={key:0,class:"absolute top-0 left-[50%] transform -translate-y-[100%] border border-666 bg-fff -translate-x-[50%] list-none dark:bg-[#1D1E1F]"},Se=["onClick"],ke=_({emits:["ready"],setup(r,{emit:v}){const n=p();v("ready",n);function p(){const e=I({el:null,previewId:"",previewPointerEvents:!1,fullScreen:!1,isShowZoomControl:!1,setFullScreen(){e.fullScreen=!e.fullScreen,e.previewPointerEvents=e.fullScreen},zoom:4,setZoom(t){e.zoom=t,e.isShowZoomControl=!1},previewPlayerReady(t){e.el=t},jump(t){if(!e.el)return;var d=t.offsetX/t.target.clientWidth;const o=d*e.el.totalTime;e.el.jumpToTime(o)},load(t,d){if(e.previewId===t){e.centerDialog();return}e.previewId=t,e.previewPointerEvents=!1,e.isShowZoomControl=!1,e.fullScreen=!1,N(()=>{var o,u,m;(o=e.el)==null||o.load(d),(u=e.el)==null||u.play(),(m=document.getElementById("previewPlayer"))!=null&&m.style.top||e.centerDialog()})},unload(){var t;(t=e.el)==null||t.pause(),e.previewId="",e.fullScreen=!1,e.zoom=4},handleScroll(t){if(e.previewPointerEvents||e.fullScreen)return;t.preventDefault();let d=t.deltaY>0?"down":"up",o;d=="down"?o=e.zoom-1:o=e.zoom+1,!(o>5||o<1)&&e.setZoom(o)},moveDialog(t){e.previewPointerEvents||e.fullScreen||s({event:t,el:"#previewPlayer"})},centerDialog(){const t=document.getElementById("previewPlayer");t&&a(t)}});return e}function s({event:e,el:t,minLeft:d=10,minTop:o=10,margin:u=30,moveX:m=!0,moveY:P=!0,moveStart:z,moveEnd:T,click:M}){let x=document.querySelector(t);if(!x)return;let H=!0,R=e.pageX-x.offsetLeft,Y=e.pageY-x.offsetTop;z==null||z(),document.onmousemove=function(j){H=!1;let h=j.pageX-R,w=j.pageY-Y;var S=document.documentElement.clientWidth,k=document.documentElement.clientHeight;S=S-u,k=k-u,h>S&&(h=S),w>k&&(w=k),h<=d&&(h=d),w<=o&&(w=o),m&&(x.style.left=h+"px"),P&&(x.style.top=w+"px")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,H&&(M==null||M()),T==null||T()}}function a(e){const t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=e.offsetWidth,u=e.offsetHeight,m=(t-o)/2,P=(d-u)/2;e.style.position="fixed",e.style.left=m+"px",e.style.top=P+"px"}return(e,t)=>{const d=Q;return Z((f(),c("div",{id:"previewPlayer",class:g(["preview-player bg-[#f3f3f3] dark:bg-[#1e1e1e] dark:text-[#424242] border-1 border-[#e1e2e8] dark:border-444 flex flex-col overflow-hidden z-1000",`zoom-${l(n).zoom} ${l(n).fullScreen?"full-screen":""}`]),onContextmenu:t[5]||(t[5]=C((...o)=>l(n).unload&&l(n).unload(...o),["stop","prevent"])),onMousewheel:t[6]||(t[6]=(...o)=>l(n).handleScroll&&l(n).handleScroll(...o)),onMousedown:t[7]||(t[7]=(...o)=>l(n).moveDialog&&l(n).moveDialog(...o))},[i("div",xe,[i("span",{class:"iconfont icon-close cursor-pointer hover:text-blue",onClick:t[0]||(t[0]=(...o)=>l(n).unload&&l(n).unload(...o))})]),i("div",{class:g(["flex-1 preview-player-el overflow-hidden",{"no-event":!l(n).previewPointerEvents}])},[(f(),U(ye,{key:l(n).previewId,onReady:l(n).previewPlayerReady},null,8,["onReady"]))],2),l(n).el?(f(),c("div",he,[V(me,{player:l(n).el,onChangeTime:t[4]||(t[4]=o=>l(n).el.jumpToTime(o))},{toolbar:L(()=>[i("div",we,[V(d,{class:"cursor-pointer hover:text-blue","aria-hidden":"true",onClick:t[1]||(t[1]=o=>l(n).setFullScreen())},{default:L(()=>[V(l(re))]),_:1}),l(n).fullScreen?y("",!0):(f(),c("div",ge,[i("span",{onClick:t[2]||(t[2]=o=>l(n).isShowZoomControl=!l(n).isShowZoomControl)},b(l(n).zoom)+"x",1),i("span",{class:"pl-[4px] icon-pull-down iconfont text-s",onClick:t[3]||(t[3]=o=>l(n).isShowZoomControl=!l(n).isShowZoomControl)}),l(n).isShowZoomControl?(f(),c("div",be,[(f(),c(B,null,X([1,2,3,4,5],(o,u)=>i("li",{key:u,class:g(["hover:bg-gray dark:hover:bg-[#262727] py-[8px] px-[16px] select-none",o===l(n).zoom&&"bg-blue !hover:bg-blue text-fff"]),onClick:m=>l(n).setZoom(o)},b(o)+"x ",11,Se)),64))])):y("",!0)]))])]),_:1},8,["player"])])):y("",!0)],34)),[[W,l(n).previewId]])}}});var De=G(ke,[["__scopeId","data-v-5225f3a2"]]);export{De as _};
