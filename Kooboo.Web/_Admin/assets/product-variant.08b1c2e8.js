import{n as w}from"./guid.c1a40312.js";import{g as v}from"./url.8f5ec20c.js";function y(o,t){return{id:w(),active:!0,barcode:"",originalInventory:0,newInventory:0,selectedOptions:o,price:0,sku:"",weight:0,image:t,tags:[]}}function D(o,t){const a=[];for(const d of o)for(const l of d.selectedOptions)l.name==t&&(a.includes(l.value)||a.push(l.value));return a}function O(o,t=!1){return o!=null&&o.length?o.map(a=>t?a.value:`${a.name}: ${a.value}`).join(" / "):"-"}function J(){const o=v([]),t=v([]);function a(e){t.value.push(e);for(const s of e.selectedOptions)o.value.includes(s.name)||o.value.push(s.name)}function d(e,s,u){const i=[];for(const n of t.value)if(n.selectedOptions.find(f=>f.name==e)){const f=JSON.parse(JSON.stringify(n.selectedOptions));f.find(p=>p.name==e).value=s;const h=O(f);i.find(p=>O(p)==h)||i.push(f)}else n.selectedOptions.push({name:e,value:s});for(const n of i)t.value.push(y(n,u))}function l(e,s){const u=o.value.findIndex(i=>e);o.value.splice(u,1,s);for(const i of t.value){const n=i.selectedOptions.find(c=>c.name==e);n&&(n.name=s)}}function m(e,s,u){for(const i of t.value){const n=i.selectedOptions.find(c=>c.name==e);!n||n.value==s&&(n.value=u)}}function r(e,s){const u=t.value.find(i=>i.selectedOptions.find(n=>n.name==e&&n.value!=s));for(const i of[...t.value]){const n=i.selectedOptions.findIndex(c=>c.name==e);if(n!=-1&&i.selectedOptions[n].value==s)if(u){const c=t.value.findIndex(f=>f==i);t.value.splice(c,1)}else i.selectedOptions.splice(n,1)}}function I(e){const s=o.value.indexOf(e);o.value.splice(s,1);for(const u of[...t.value]){const i=u.selectedOptions.find(n=>n.name==e);!i||r(i.name,i.value)}}function x(e){o.value.push(e)}function g(e){const s=t.value.findIndex(u=>u.id==e);t.value.splice(s,1)}return{options:o,list:t,updateOptionName:l,updateOptionItem:m,addOptionItem:d,addVariant:a,deleteOptionItem:r,deleteOption:I,addOption:x,removeVariant:g}}export{O as b,y as c,D as g,J as u};
