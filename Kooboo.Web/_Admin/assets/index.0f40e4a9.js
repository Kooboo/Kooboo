var O=Object.defineProperty,z=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var T=(n,t,e)=>t in n?O(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,$=(n,t)=>{for(var e in t||(t={}))D.call(t,e)&&T(n,e,t[e]);if(I)for(var e of I(t))H.call(t,e)&&T(n,e,t[e]);return n},F=(n,t)=>z(n,A(t));var N=(n,t,e)=>new Promise((f,d)=>{var i=o=>{try{p(e.next(o))}catch(c){d(c)}},m=o=>{try{p(e.throw(o))}catch(c){d(c)}},p=o=>o.done?f(o.value):Promise.resolve(o.value).then(i,m);p((e=e.apply(n,t)).next())});import{_ as L}from"./index.051a5017.js";import{g as P}from"./i18n.48bd28ac.js";import{e as G}from"./main.ea42d807.js";import{d as J,M as Q,cd as U,g as v,bf as X,i as S,h as Y,K as Z,o as u,a as k,f as l,t as h,u as r,j as b,w,F as B,b6 as ee,k as te,aH as oe,b as V,n as W}from"./url.2e6a77c4.js";import{E as ne,a as ae}from"./index.be352e91.js";import{E as se}from"./windi.a5b0b048.js";const le={class:"h-full w-full flex flex-col"},re={class:"py-8 dark:text-[#fffffa]"},ie=["title"],ce={key:1,class:"w-full h-full text-m mt-12 dark:text-[#fffa]"},ue={class:"flex flex-wrap"},fe=["title"],ge=J({props:{context:null,messageId:null,type:null},setup(n,{expose:t}){const e=n,f=Q(),d=U(),{t:i}=P(),m=v(),p=X();N(this,null,function*(){m.value=(yield G(`/MailExtension/${e.type}?messageId=${e.messageId}`)).data});const o=v(!1),c=v(),g=v(!0),y=x=>{o.value=x,localStorage.setItem("isOpenMailModule",x?"true":"false")};S(()=>c.value,x=>{for(const a of x){if(!a||!a.element.contentWindow)return;a.element.contentWindow.k||(a.element.contentWindow.k={}),a.element.contentWindow.k.currentMail=e.context}}),S(()=>f,()=>{f.name==="compose"&&j()},{deep:!0}),Y(()=>{localStorage.getItem("isOpenMailModule")==="true"?o.value=!0:o.value=!1});const j=()=>{g.value=!1,Z(()=>{g.value=!0})};return t({open:o}),(x,a)=>{var C,E;const K=L,R=ne,q=ae,M=se;return u(),k(B,null,[l("div",{class:W(["group w-[22%] h-[calc(100vh-160px)] fixed top-72px right-[calc(-22%-15px)] bg-fff dark:bg-[#333] p-24 shadow-s-20 rounded-normal transition-all duration-500",[o.value?" !right-0":"!ml-30px",(C=r(p).height)!=null?C:"h-[calc(100vh-160px)]"]])},[l("div",le,[l("div",re,h(r(i)("common.mailModule")),1),(E=m.value)!=null&&E.length?(u(),b(q,{key:0,class:"moduleTabs flex-1","tab-position":"right"},{default:w(()=>[(u(!0),k(B,null,ee(m.value,(s,_)=>(u(),b(R,{key:_,title:s.name,class:"h-full"},{label:w(()=>[l("span",{title:s.name},h(s.name),9,ie)]),default:w(()=>[g.value?(u(),b(K,{ref_for:!0,ref_key:"frame",ref:c,key:s.name,class:"h-full w-full",content:s.content},null,8,["content"])):te("",!0)]),_:2},1032,["title"]))),128))]),_:1})):(u(),k("div",ce,[l("div",ue,[oe(h(r(i)("common.haveNotMailModuleTips"))+" ",1),l("div",{class:"cursor-pointer text-blue",onClick:a[0]||(a[0]=s=>{var _;return r(d).push({name:"mail-module",query:F($({},r(d).currentRoute.value.query),{oldFolder:(_=r(f).name)==null?void 0:_.toString()})})})},h(r(i)("common.goToCreate")),1)])]))]),l("div",{class:"group-hover:flex hidden rounded-full bg-fff shadow-s-10 w-26px flex items-center h-26px cursor-pointer dark:bg-666 absolute top-24px -left-12px flex items-center justify-center",onClick:a[1]||(a[1]=s=>y(!1))},[V(M,{class:"iconfont icon-a-nextstep2 cursor-pointer text-blue text-s"})])],2),l("div",{class:W(["fixed top-90px -right-42px bg-fff dark:bg-999 p-12 shadow-s-20 rounded-l-full cursor-pointer transition-all duration-500 flex items-center justify-center text-444 text-opacity-60 hover:text-blue",o.value?"":" !right-0"]),title:r(i)("common.mailModule"),onClick:a[2]||(a[2]=s=>y(!0))},[V(M,{class:"iconfont icon-a-Expansionmodule text-18px"})],10,fe)],64)}}});export{ge as _};
