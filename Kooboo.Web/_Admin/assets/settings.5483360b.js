import{b as E,_ as A,a as L,c as N,d as Q,e as j}from"./basic.c91a088c.js";import{g as G,u as H}from"./main.52487121.js";import{K as z,L as J}from"./dev-mode.2a667dd5.js";import{e as R}from"./guid.c1a40312.js";import{c as D,d as W,g as M,aV as X,o as p,j as U,w as u,b as c,u as r,k as P}from"./url.2e6a77c4.js";import{g as Y}from"./i18n.97105311.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{E as g,a as _}from"./index.5a459bfd.js";import{E as ee}from"./index.00cc1b15.js";import{E as te,a as se}from"./index.317a7f30.js";function ne(e){const y=G(),f=z(),a=J();e.id===R&&(e.metas=[]);const b=D(()=>{for(const t of e.metas)t.el||(t.el=E(t,y.default));return e.metas}),B=t=>{const n=e.metas.find(l=>l.el===t.el);if(n){t.el=E(t,y.default);const l=e.metas.indexOf(n);e.metas.splice(l,1,t)}else t.el=E(t,y.default),e.metas.push(t)},v=D(()=>{const t=[];if(!e.styles)return t;for(const n of e.styles){const l=f.all.find(d=>d.href===n);l?t.push({content:l.name,id:l.id}):t.push({content:n,id:""})}return t}),V=t=>{var l,d;const n=f.all.find(i=>i.id===t.id);n?e.styles=(l=e.styles)==null?void 0:l.filter(i=>i!==n.href):e.styles=(d=e.styles)==null?void 0:d.filter(i=>i!==t.content)},C=t=>{var l;const n=f.all.find(d=>d.id===t);n&&((l=e.styles)==null||l.push(n.href))},I=t=>{if(!e.styles)return;const n=e.styles.splice(t.oldIndex,1);e.styles.splice(t.newIndex,0,n[0])},x=D(()=>{const t=[];if(!e.scripts)return t;for(const n of e.scripts){const l=a.all.find(d=>d.href===n);l?t.push({content:l.name,id:l.id,position:"head"}):t.push({content:n,id:"",position:"head"})}return t});return{metas:b,addOrUpdateMeta:B,styles:v,insertStyle:C,deleteStyle:V,sortStyle:I,scripts:x,insertScript:t=>{var l;const n=a.all.find(d=>d.id===t);n&&((l=e.scripts)==null||l.push(n.href))},sortScript:t=>{if(!e.scripts)return;const n=e.scripts.splice(t.oldIndex,1);e.scripts.splice(t.newIndex,0,n[0])},deleteScript:t=>{var l,d;const n=a.all.find(i=>i.id===t.id);n?e.scripts=(l=e.scripts)==null?void 0:l.filter(i=>i!==n.href):e.scripts=(d=e.scripts)==null?void 0:d.filter(i=>i!==t.content)}}}const le=W({props:{model:null,oldUrlPath:null,layout:null,sources:null,hideStyles:{type:Boolean},hideScripts:{type:Boolean}},setup(e,{expose:y}){const f=e,{t:a}=Y(),{metas:b,addOrUpdateMeta:B,deleteScript:v,deleteStyle:V,insertScript:C,insertStyle:I,scripts:x,sortScript:T,sortStyle:k,styles:w}=ne(f.model),t=M(),n=M([]),l=M([]),d=H();return y({validate:()=>{var i;return(i=t.value)==null?void 0:i.validate()}}),X(()=>{var i;(i=f.sources)==null||i.forEach(s=>{var m,S;!s.source.metaBindings||!s.source.urlParamsBindings||(s.source.metaBindings.length&&(n.value=n.value.concat((m=s.source)==null?void 0:m.metaBindings)),s.source.urlParamsBindings.length&&(l.value=l.value.concat((S=s.source)==null?void 0:S.urlParamsBindings)))})}),(i,s)=>{const m=g,S=ee,O=te,$=se,F=_;return p(),U(F,{"model-value":"basic"},{default:u(()=>[c(m,{name:"basic",title:r(a)("common.basic")},{default:u(()=>[c(A,{ref_key:"basicForm",ref:t,url:e.model.urlPath,"onUpdate:url":s[0]||(s[0]=o=>e.model.urlPath=o),titles:e.model.contentTitle,"onUpdate:titles":s[1]||(s[1]=o=>e.model.contentTitle=o),published:e.model.published,"onUpdate:published":s[2]||(s[2]=o=>e.model.published=o),"old-url-path":e.oldUrlPath,"meta-bindings":n.value,"url-params-bindings":l.value},null,8,["url","titles","published","old-url-path","meta-bindings","url-params-bindings"])]),_:1},8,["title"]),c(m,{title:r(a)("common.HTMLMeta"),"data-cy":"meta"},{default:u(()=>[c(L,{list:r(b),"meta-bindings":n.value,onDelete:s[3]||(s[3]=o=>e.model.metas=r(b).filter(h=>h!==o)),onAddOrUpdate:r(B)},null,8,["list","meta-bindings","onAddOrUpdate"])]),_:1},8,["title"]),e.hideStyles?P("",!0):(p(),U(m,{key:0,title:r(a)("common.style"),"data-cy":"style"},{default:u(()=>{var o,h,K;return[c(N,{list:r(w),onSort:r(k),onInsert:r(I),onDelete:r(V)},null,8,["list","onSort","onInsert","onDelete"]),(K=(h=(o=r(d))==null?void 0:o.site)==null?void 0:h.unocssSettings)!=null&&K.enable?(p(),U($,{key:0,"label-position":"top",class:"px-24"},{default:u(()=>[c(O,{label:r(a)("common.disableUnocss")},{default:u(()=>[c(S,{modelValue:e.model.disableUnocss,"onUpdate:modelValue":s[4]||(s[4]=q=>e.model.disableUnocss=q)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):P("",!0)]}),_:1},8,["title"])),e.hideScripts?P("",!0):(p(),U(m,{key:1,title:r(a)("common.scripts"),"data-cy":"script"},{default:u(()=>[c(Q,{list:r(x),"hidde-body":"",onSort:r(T),onDelete:r(v),onInsert:r(C)},null,8,["list","onSort","onDelete","onInsert"])]),_:1},8,["title"])),c(m,{title:r(a)("common.cache"),"data-cy":"cache"},{default:u(()=>[c(j,{enable:e.model.enableCache,"onUpdate:enable":s[5]||(s[5]=o=>e.model.enableCache=o),enableVersion:e.model.cacheByVersion,"onUpdate:enableVersion":s[6]||(s[6]=o=>e.model.cacheByVersion=o),enableCulture:e.model.cacheByCulture,"onUpdate:enableCulture":s[7]||(s[7]=o=>e.model.cacheByCulture=o),versionType:e.model.cacheVersionType,"onUpdate:versionType":s[8]||(s[8]=o=>e.model.cacheVersionType=o),enableDevice:e.model.cacheByDevice,"onUpdate:enableDevice":s[9]||(s[9]=o=>e.model.cacheByDevice=o),minutes:e.model.cacheMinutes,"onUpdate:minutes":s[10]||(s[10]=o=>e.model.cacheMinutes=o),queryKeys:e.model.cacheQueryKeys,"onUpdate:queryKeys":s[11]||(s[11]=o=>e.model.cacheQueryKeys=o)},null,8,["enable","enableVersion","enableCulture","versionType","enableDevice","minutes","queryKeys"])]),_:1},8,["title"])]),_:1})}}});var be=Z(le,[["__scopeId","data-v-3d67dfab"]]);export{be as P};
