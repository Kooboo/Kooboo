var S=(v,s,t)=>new Promise((o,r)=>{var a=c=>{try{d(t.next(c))}catch(i){r(i)}},p=c=>{try{d(t.throw(c))}catch(i){r(i)}},d=c=>c.done?o(c.value):Promise.resolve(c.value).then(a,p);d((t=t.apply(v,s)).next())});import{_ as T}from"./light-switch.7a8b86f3.js";import{b as M}from"./main.1c3b59e3.js";import{d as X,l as Z,g as B}from"./i18n.25caaace.js";import{c as G}from"./index.ab12ea9e.js";import{E as N}from"./windi.a815125a.js";import{E as R,a as C,b as q}from"./index.a0b57910.js";import{d as y,i as V,o as l,a as h,b as u,w as m,F as K,b6 as P,j as b,f as n,u as e,t as g,n as Q,cd as F,g as D,c as j,k as x,N as W,r as _,M as J,h as $,J as ee}from"./url.8f5ec20c.js";import{_ as te}from"./avatar.3578cce6.js";import{L as H}from"./logo-transparent.1566007e.js";import{L as O}from"./index.878e2bbf.js";import{u as oe}from"./email.c84e7645.js";var L="data:image/png;base64,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",Y="data:image/png;base64,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";const ne={class:"language-list flex items-center justify-center cursor-pointer h-full border-l-1 border-r-1 border-[#e1e2e8] dark:border-opacity-50"},se={class:"flex items-center justify-center text-14px px-16 h-full"},re=["src"],ae={class:"flex items-center space-x-8"},ce=["src"],ie={class:"language__item"},le=y({setup(v){const s=M();function t(o){return S(this,null,function*(){o!==s.currentLang&&s.header&&(yield G(o),location.reload())})}return V(()=>s.header,()=>{if(s.header){const o=s.header.user.language;X.global.locale.value!=o&&location.reload()}},{deep:!0,immediate:!0}),(o,r)=>{const a=N,p=R,d=C,c=q;return l(),h("div",ne,[u(c,{trigger:"click",class:"h-full",onCommand:t},{dropdown:m(()=>[u(d,{"data-cy":"lang-dropdown"},{default:m(()=>[(l(!0),h(K,null,P(e(Z),i=>(l(),b(p,{key:i.lang,command:i.lang,class:Q({selected:e(s).currentLang===i.lang}),disabled:e(s).currentLang===i.lang},{default:m(()=>[n("div",ae,[n("img",{src:i.lang==="zh"?e(L):e(Y),class:"w-22px h-22px"},null,8,ce),n("span",ie,g(i.name),1)])]),_:2},1032,["command","class","disabled"]))),128))]),_:1})]),default:m(()=>[n("div",se,[n("img",{src:e(s).currentLang==="zh"?e(L):e(Y),class:"transform scale-60"},null,8,re),u(a,{class:"iconfont icon-pull-down text-s leading-none"})])]),_:1})])}}}),de={class:"flex items-center h-full","data-cy":"username"},ue=n("div",{class:"w-full bg-666"},null,-1),me={class:"flex space-x-4 items-center"},pe={"data-cy":"username"},fe={class:"flex space-x-4 items-center"},he={"data-cy":"organization"},ge=n("div",{class:"bg-[#e1e2e8] dark:bg-opacity-60 h-1px mx-16 my-8"},null,-1),xe={class:"flex space-x-4 items-center"},Ae={class:"flex space-x-4 items-center"},be=y({setup(v){const{t:s}=B(),t=M(),o=F(),r=D(),a=D(!1),p=j(()=>t.header.user.name.substring(0,2));function d(f){f==="login"&&t.logout(),o.push({name:f})}function c(f){a.value=f}function i(){var f,A;a.value?(f=r.value)==null||f.handleClose():(A=r.value)==null||A.handleOpen()}return t.load(),(f,A)=>{const w=N,k=R,z=C,U=q;return e(t).header?(l(),h("div",{key:0,class:"profile flex items-center justify-center cursor-pointer px-16 !mx-0 h-full border-r-1 border-[#e1e2e8] dark:border-opacity-50","data-cy":"username-dropdown",onClick:i},[u(te,{username:e(p),size:30},null,8,["username"]),u(U,{ref_key:"dropdown",ref:r,trigger:"click",class:"h-full","data-cy":"username-abbr",onCommand:d,onVisibleChange:c},{dropdown:m(()=>[u(z,null,{default:m(()=>{var I;return[u(k,{disabled:"",title:`${e(s)("common.username")}: ${e(t).header.user.name}`},{default:m(()=>[n("div",me,[u(w,{class:"iconfont icon-wode"}),n("span",pe,g(e(t).header.user.name),1)])]),_:1},8,["title"]),e(t).limitSite?x("",!0):(l(),b(k,{key:0,command:"organization",title:`${e(s)("common.currentOrganization")}: ${(I=e(t).currentOrg)==null?void 0:I.displayName}`},{default:m(()=>{var E;return[n("div",fe,[u(w,{class:"iconfont icon-organization"}),n("span",he,g((E=e(t).currentOrg)==null?void 0:E.displayName),1)])]}),_:1},8,["title"])),ge,e(t).limitSite?x("",!0):(l(),b(k,{key:1,command:"profile","data-cy":"setting"},{default:m(()=>[n("div",xe,[u(w,{class:"iconfont icon-shezhixitongshezhigongnengshezhishuxing-xian"}),n("span",null,g(e(s)("common.setting")),1)])]),_:1})),u(k,{command:"login","data-cy":"logout"},{default:m(()=>[n("div",Ae,[u(w,{class:"iconfont icon-tuichu"}),n("span",null,g(e(s)("common.logout")),1)])]),_:1})]}),_:1})]),default:m(()=>[n("span",de,[u(w,{class:"iconfont icon-pull-down text-s ml-8"})]),ue]),_:1},512)])):x("",!0)}}}),ve={class:"flex items-center bg-fff dark:bg-[#333] dark:text-[#fffa] z-100 h-48px relative shadow-s-10"},we=["innerHTML"],ke=["innerHTML"],Se={class:"flex-1 flex items-center h-full"},ye=n("div",{class:"flex-1"},null,-1),_e=n("div",{class:"flex-1"},null,-1),Me={class:"group-hover:text-blue text-m","data-cy":"current-data-center"},qe=y({setup(v){const{t:s}=B(),t=F(),o=M();return(r,a)=>{var c,i,f;const p=W("router-link"),d=T;return l(),h("nav",ve,[e(o).limitSite?(l(),h("div",{key:0,class:"flex items-center cursor-pointer w-162px",innerHTML:e(H)},null,8,we)):(l(),b(p,{key:1,to:{name:"home"},"data-cy":"logo"},{default:m(()=>[n("div",{class:"flex items-center cursor-pointer w-162px",innerHTML:e(H)},null,8,ke)]),_:1})),n("div",Se,[_(r.$slots,"left"),e(o).limitSite?x("",!0):(l(),h("a",{key:0,class:"h-full !mx-0 px-16px flex items-center justify-center cursor-pointer hover:text-blue border-l-1 border-[#e1e2e8] dark:border-opacity-50",onClick:a[0]||(a[0]=A=>e(t).push({name:"templates"}))},g(e(s)("common.market")),1)),e(o).limitSite?x("",!0):(l(),b(le,{key:1,class:"hover:bg-[#EFF6FF] dark:hover:bg-444"})),e(o).limitSite?x("",!0):(l(),b(d,{key:2})),ye,_(r.$slots,"center"),_e,_(r.$slots,"right"),((c=e(o).currentOrg)==null?void 0:c.isPartner)&&((i=e(o).currentOrg)==null?void 0:i.isAdmin)&&!e(o).limitSite?(l(),h("a",{key:3,class:"h-full !mx-0 px-16px flex items-center justify-center cursor-pointer hover:text-blue border-l-1 border-[#e1e2e8] dark:border-opacity-50","data-cy":"console",onClick:a[1]||(a[1]=A=>e(t).push({name:"partner"}))},g(e(s)("common.partner")),1)):x("",!0),e(o).limitSite?x("",!0):(l(),h("a",{key:4,class:"h-full !mx-0 px-16px flex items-center justify-center cursor-pointer hover:text-blue border-l-1 border-r-1 border-[#e1e2e8] dark:border-opacity-50","data-cy":"console",onClick:a[2]||(a[2]=A=>e(t).push({name:"kconsole"}))},g(e(s)("common.console")),1)),((f=e(o).currentOrg)==null?void 0:f.isAdmin)&&!e(o).limitSite?(l(),h("div",{key:5,class:"px-16 border-r-1 border-[#e1e2e8] dark:border-opacity-50 h-full flex items-center justify-center group cursor-pointer",onClick:a[3]||(a[3]=A=>e(t).push({name:"serviceDataCenter"}))},[n("span",Me,g(e(o).currentDataCenter),1)])):x("",!0),u(be,{class:"hover:bg-[#EFF6FF] dark:hover:bg-444"})])])}}}),Ve=y({setup(v){const s=F(),t=J(),{t:o}=B(),r=oe(),a=j(()=>r.isShowNewMessageLogo==="true"&&t.matched[0].path!=="/kmail");$(()=>S(this,null,function*(){t.matched[0].path!=="/kmail"&&(r.preLatestId=yield O())}));let p=null;return clearInterval(p),p=setInterval(()=>S(this,null,function*(){if(t.matched[0].path==="/kmail")return;let d=yield O();d>r.preLatestId&&(r.isShowNewMessageLogo="true",r.preLatestId=d)}),3e5),ee(()=>{clearInterval(p)}),V(()=>r.isShowNewMessageLogo,d=>{d==="true"?localStorage.setItem("isHasNewMessage","true"):localStorage.setItem("isHasNewMessage","false")}),(d,c)=>(l(),h("div",{class:"relative px-16 border-l-1 border-[#e1e2e8] dark:border-opacity-50 h-full flex items-center justify-center cursor-pointer group text-m hover:text-blue","data-cy":"mail",onClick:c[0]||(c[0]=i=>e(s).push({name:"inbox"}))},[n("span",null,g(e(o)("common.mail")),1),n("div",{class:Q(["rounded-full w-8 h-8 bg-[#e5574c] left-[46px] top-12",e(a)?"absolute":"hidden"])},null,2)]))}});export{Ve as _,qe as a};
