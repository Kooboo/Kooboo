var w=(C,i,x)=>new Promise((p,y)=>{var u=s=>{try{d(x.next(s))}catch(l){y(l)}},_=s=>{try{d(x.throw(s))}catch(l){y(l)}},d=s=>s.done?p(s.value):Promise.resolve(s.value).then(u,_);d((x=x.apply(C,i)).next())});import{_ as A}from"./k-table.b1a54b80.js";import{_ as I}from"./country.9dae7738.js";import{d as R,g as E,c as q,o as g,j as T,w as c,f as v,b as o,u as n,t as k,N as F,cd as G,h as H,O as Q,b8 as W,a as $,e as X,k as B,aI as D}from"./url.4cb47a7a.js";import{B as Y}from"./breadcrumb.f4d80c95.js";import{g as L}from"./i18n.a87944a4.js";import{u as N}from"./replace-all.56d2c1f7.js";import{d as Z,g as ee}from"./tax.a38e7edd.js";import{b as te}from"./confirm.b60b5d2f.js";import{S as oe}from"./search-input.2a27ef56.js";import{u as O}from"./commerce.ded2851e.js";import{s as P}from"./commerce.f69dd9fe.js";import{E as U,a as ne}from"./index.b38edc72.js";import{E as ae}from"./index.c003dfa1.js";import{E as se}from"./windi.6360286d.js";import{E as le}from"./index.361e2245.js";import{E as re}from"./index.d96452a6.js";import"./sortable.esm.a99254e8.js";import"./icon-button.74ccc970.js";import"./index.4f90a917.js";import"./index.4d568055.js";import"./main.9fdfea92.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.c6da2706.js";import"./index.7c862087.js";import"./index.178b9e08.js";import"./event.776e7e11.js";import"./index.7b8c5aef.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./index.fd96ea36.js";import"./scroll.16983984.js";import"./isEqual.4cab74e3.js";import"./_baseIsEqual.dc9e64c4.js";import"./debounce.4e0c106e.js";import"./toNumber.47eea968.js";import"./index.66319a92.js";import"./validator.b5df2420.js";import"./index.42922617.js";import"./index.f15f695e.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./logo-transparent.1566007e.js";import"./index.f2c1b903.js";import"./index.c10802d9.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.50a00b7f.js";/* empty css                                                                 */import"./refs.3132cbdb.js";const ce={class:"flex items-center pb-12 space-x-16"},me={class:"flex items-center gap-4"},ie={class:"text-black dark:text-[#cfd3dc]"},ue={class:"text-black dark:text-[#cfd3dc]"},de=R({props:{modelValue:{type:Boolean},excludes:null},emits:["update:modelValue","selected"],setup(C,{emit:i}){const x=C,{t:p}=L(),y=E(!0),u=E(""),_=O();function d(l){i("selected",l),y.value=!1}const s=q(()=>{var m,f,h,e;const l=[];for(const t of _.countries){const b=(f=(m=u.value)==null?void 0:m.toLowerCase())==null?void 0:f.trim();b&&!((h=JSON.stringify(t).toLowerCase())!=null&&h.includes(b))||(e=x.excludes)!=null&&e.find(a=>t.code==a||t.name==a)||l.push(t)}return l});return(l,m)=>{const f=oe,h=I,e=U,t=ne,b=ae;return g(),T(b,{"model-value":y.value,width:"600px",title:n(p)("common.selectCountry"),"close-on-click-modal":!1,onClosed:m[1]||(m[1]=a=>i("update:modelValue",!1))},{default:c(()=>[v("div",ce,[o(f,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=a=>u.value=a),class:"w-full",placeholder:n(p)("common.keyword")},null,8,["modelValue","placeholder"])]),o(t,{data:n(s),class:"el-table--gray mb-24",height:"400","row-class-name":"cursor-pointer",onRowClick:d},{default:c(()=>[o(e,{label:n(p)("common.name")},{default:c(({row:a})=>[v("div",me,[o(h,{"only-flag":!0,"name-or-code":a.code},null,8,["name-or-code"]),v("span",ie,k(n(P)(a.nameTranslations,a.name)),1)])]),_:1},8,["label"]),o(e,{label:n(p)("common.code")},{default:c(({row:a})=>[v("span",ue,k(a.code),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["model-value","title"])}}}),pe={class:"p-24"},_e={class:"flex items-center py-24 space-x-16"},fe={class:"flex items-center"},xe={key:0,class:"flex items-center gap-4"},ye={class:"text-black dark:text-[#cfd3dc]"},xt=R({setup(C){const{t:i}=L(),p=F().meta.title,y=G(),u=E([]),_=E(!1),d=O();function s(e){y.push(N({name:"taxes create",query:{country:e.name}}))}function l(e){return w(this,null,function*(){yield te(e.length),yield Z(e.map(t=>t.id)),m()})}function m(){return w(this,null,function*(){u.value=yield ee()})}H(()=>w(this,null,function*(){m()}));function f(e){return d==null?void 0:d.countries.find(t=>t.name==e)}const h=q(()=>u.value.map(e=>e.country));return(e,t)=>{const b=se,a=le,j=I,V=U,J=re,K=Q("router-link"),M=A,z=W("hasPermission");return g(),$("div",pe,[o(Y,{name:n(p)},null,8,["name"]),v("div",_e,[X((g(),T(a,{round:"",onClick:t[0]||(t[0]=r=>_.value=!0)},{default:c(()=>[v("div",fe,[o(b,{class:"mr-16 iconfont icon-a-addto"}),D(" "+k(n(i)("common.create")),1)])]),_:1})),[[z,{feature:"taxes",action:"edit"}]])]),o(M,{data:u.value,"show-check":"",onDelete:l},{default:c(()=>[o(V,{label:n(i)("common.country")},{default:c(({row:r})=>{var S;return[f(r.country)?(g(),$("div",xe,[o(j,{"only-flag":!0,"name-or-code":(S=f(r.country))==null?void 0:S.code},null,8,["name-or-code"]),v("span",ye,k(n(P)(f(r.country).nameTranslations,r.country)),1)])):B("",!0)]}),_:1},8,["label"]),o(V,{label:n(i)("common.baseTax"),align:"center"},{default:c(({row:r})=>[D(k(r.baseTax)+"% ",1)]),_:1},8,["label"]),o(V,{align:"right",width:"60"},{default:c(({row:r})=>[o(K,{to:n(N)({name:"taxes edit",query:{id:r.id}}),class:"mx-8"},{default:c(()=>[o(J,{placement:"top",content:n(i)("common.edit")},{default:c(()=>[o(b,{class:"iconfont icon-a-writein hover:text-blue text-l"})]),_:1},8,["content"])]),_:2},1032,["to"])]),_:1})]),_:1},8,["data"]),_.value?(g(),T(de,{key:0,modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=r=>_.value=r),excludes:n(h),onSelected:s},null,8,["modelValue","excludes"])):B("",!0)])}}});export{xt as default};
