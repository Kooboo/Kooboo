var re=Object.defineProperty;var te=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var ae=(U,n,u)=>n in U?re(U,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):U[n]=u,ne=(U,n)=>{for(var u in n||(n={}))ce.call(n,u)&&ae(U,u,n[u]);if(te)for(var u of te(n))pe.call(n,u)&&ae(U,u,n[u]);return U};var z=(U,n,u)=>new Promise((c,t)=>{var p=_=>{try{v(u.next(_))}catch(x){t(x)}},r=_=>{try{v(u.throw(_))}catch(x){t(x)}},v=_=>_.done?c(_.value):Promise.resolve(_.value).then(p,r);v((u=u.apply(U,n)).next())});import{_ as ee}from"./icon-button.74ccc970.js";import{_ as K}from"./tooltip.66155ff7.js";import{a as l,i as fe,o as ve,e as H,_ as N,b as _e,l as be}from"./request-access-limit.04cb7c98.js";import{u as Q,b as se,n as Ve,o as ye,p as ge,i as ke}from"./main.9fdfea92.js";import{g as I,w as G}from"./i18n.a87944a4.js";import{E as Y}from"./index.178b9e08.js";import{E as A,a as xe}from"./index.9fd79879.js";import{E as Z}from"./index.6918f0a5.js";import{E as j,a as W}from"./index.7c862087.js";import{E as he}from"./windi.6360286d.js";import{E as ue}from"./index.361e2245.js";import{E as Ce}from"./index.99e769ef.js";import{d as D,g as E,b8 as Se,u as e,o as f,a as w,f as d,b as o,w as i,F as T,j as y,t as g,k as C,aI as R,b7 as L,e as we,i as q,c as X,A as Ue,aA as $e,h as Pe,K as Ee,cj as Te}from"./url.4cb47a7a.js";import{_ as De}from"./key-value-editor.7ab17885.js";import{b as J,a as Le}from"./replace-all.56d2c1f7.js";import{E as ie}from"./index.6f16842c.js";import{M as Re}from"./media-dialog.69c737ad.js";import"./validate.bb56f9e3.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.ec5f0705.js";import{_ as Ie}from"./index.f0d5f031.js";import{_ as Oe,a as Ae}from"./dev-mode.acf56c3e.js";import{U as Be}from"./editor.main.d2800f63.js";import{b as Me,a as Ne}from"./index.f15f695e.js";import{E as Je}from"./index.c003dfa1.js";import{T as qe}from"./index.a55bb4ec.js";import{c as Fe}from"./country-and-region-codes.c36488d2.js";import{E as je}from"./index.42922617.js";import{E as We}from"./index.fe920a26.js";import{u as ze}from"./use-save-tip.e3dc783a.js";const Ge={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px"},Ke={class:"max-w-504px"},He={class:"font-bold dark:text-fff/86"},Ye=d("div",{class:"flex-1"},null,-1),Qe={class:"font-bold dark:text-fff/86"},Xe=d("div",{class:"flex-1"},null,-1),Ze={class:"flex items-center"},el={key:0,class:"!-ml-56px !-mr-56px !px-56px bg-[#fafafa] dark:bg-[#333]"},ll={class:"max-w-504px py-16 mb-18px"},ol={class:"space-y-8 w-full"},tl={class:"max-w-504px"},al={class:"flex items-center space-x-16"},nl=D({emits:["export","initSite"],setup(U,{emit:n}){const u=Q(),c=se(),{t}=I(),p=E();Ve().then(s=>p.value=s);const r=E({o:"private",p:"public",m:"member"}),v=s=>z(this,null,function*(){yield ve(s),n("initSite")}),_=()=>{Array.isArray(l.value.specialPath)||(l.value.specialPath=[]),l.value.specialPath.push("")},x=s=>{l.value.specialPath.splice(s,1)},m=E([{value:!0,name:"Contain",title:t("common.IncludePath")},{value:!1,name:"Exclude",title:t("common.ExcludePath")}]);return(s,a)=>{var le;const V=Y,b=A,P=Z,S=K,h=j,M=W,k=ee,F=he,O=ue,de=Ce,me=Se("hasPermission");return e(l)?(f(),w("div",Ge,[d("div",Ke,[o(b,{label:e(t)("common.displayName")},{default:i(()=>[o(V,{modelValue:e(l).displayName,"onUpdate:modelValue":a[0]||(a[0]=$=>e(l).displayName=$),"data-cy":"display-name"},null,8,["modelValue"])]),_:1},8,["label"]),((le=e(c).header)==null?void 0:le.isOnlineServer)&&!e(c).header.isPrivateServer?(f(),w(T,{key:0},[e(u).serviceLevel>0?(f(),y(b,{key:0},{default:i(()=>[d("span",He,g(e(t)("common.enableDevPassword")),1),Ye,o(P,{"model-value":e(l).status=="Development","onUpdate:modelValue":a[1]||(a[1]=$=>e(l).status=e(l).status=="Development"?"Published":"Development")},null,8,["model-value"])]),_:1})):C("",!0),e(l).status=="Development"?(f(),y(b,{key:1},{default:i(()=>[d("span",Qe,g(e(t)("common.devPassword")),1),Xe,o(V,{modelValue:e(l).devPassword,"onUpdate:modelValue":a[2]||(a[2]=$=>e(l).devPassword=$),disabled:!0,"data-cy":"dev-password"},null,8,["modelValue"])]),_:1})):C("",!0)],64)):C("",!0),o(b,null,{label:i(()=>[d("div",Ze,[R(g(e(t)("common.defaultDatabase"))+" ",1),o(S,{tip:e(t)("common.defaultDataBaseTips"),"custom-class":"ml-4"},null,8,["tip"])])]),default:i(()=>[o(M,{modelValue:e(l).defaultDatabase,"onUpdate:modelValue":a[3]||(a[3]=$=>e(l).defaultDatabase=$),class:"w-full"},{default:i(()=>[o(h,{value:"Auto",label:e(t)("common.auto"),"data-cy":"auto"},null,8,["label"]),o(h,{value:"Sqlite",label:"Sqlite","data-cy":"sqlite"}),o(h,{value:"Mysql",label:"Mysql","data-cy":"mysql"}),o(h,{value:"SqlServer",label:"SqlServer","data-cy":"sqlserver"})]),_:1},8,["modelValue"])]),_:1}),o(b,{label:e(t)("common.siteType")},{default:i(()=>[o(M,{modelValue:e(l).siteType,"onUpdate:modelValue":a[4]||(a[4]=$=>e(l).siteType=$),class:"w-full","data-cy":"site-type"},{default:i(()=>[(f(!0),w(T,null,L(p.value,($,B)=>(f(),y(h,{key:B,value:B,label:$,"data-cy":r.value[B]},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),e(l).siteType!=="p"?(f(),w("div",el,[d("div",ll,[o(b,{label:e(t)("common.PathPattern")},{default:i(()=>[o(M,{modelValue:e(l).includePath,"onUpdate:modelValue":a[5]||(a[5]=$=>e(l).includePath=$),class:"w-full","data-cy":"site-type"},{default:i(()=>[(f(!0),w(T,null,L(m.value,($,B)=>(f(),y(h,{key:B,value:$.value,label:$.title,"data-cy":$.title},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(b,{label:e(t)("common.path")},{default:i(()=>[d("div",ol,[(f(!0),w(T,null,L(e(l).specialPath,($,B)=>(f(),w("div",{key:B,class:"flex items-center space-x-8 w-full"},[o(V,{modelValue:e(l).specialPath[B],"onUpdate:modelValue":oe=>e(l).specialPath[B]=oe,placeholder:e(t)("common.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),d("div",null,[o(k,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:e(t)("common.delete"),onClick:oe=>x(B)},null,8,["tip","onClick"])])]))),128)),o(k,{circle:"",class:"text-blue",icon:"icon-a-addto ",tip:e(t)("common.add"),onClick:_},null,8,["tip"])])]),_:1},8,["label"]),o(b,{label:e(t)("common.singleSignOn")},{default:i(()=>[o(P,{modelValue:e(l).ssoLogin,"onUpdate:modelValue":a[6]||(a[6]=$=>e(l).ssoLogin=$)},null,8,["modelValue"])]),_:1},8,["label"])])])):C("",!0),d("div",tl,[o(b,{label:"Base URL"},{default:i(()=>[o(V,{modelValue:e(l).previewUrl,"onUpdate:modelValue":a[7]||(a[7]=$=>e(l).previewUrl=$),"data-cy":"base-url"},null,8,["modelValue"])]),_:1}),o(b,{label:e(t)("common.import/exportSite")},{default:i(()=>[d("div",al,[o(de,{"show-file-list":!1,action:"",accept:e(fe).join(","),"auto-upload":!1,"on-change":v,"data-cy":"import-package"},{default:i(()=>[o(O,{round:""},{default:i(()=>[o(F,{class:"iconfont icon-a-Pullin"}),R(" "+g(e(t)("common.importPackage")),1)]),_:1})]),_:1},8,["accept"]),we((f(),y(O,{round:"","data-cy":"export-site",onClick:a[8]||(a[8]=$=>s.$emit("export"))},{default:i(()=>[o(F,{class:"iconfont icon-share"}),R(" "+g(e(t)("common.exportSite")),1)]),_:1})),[[me,{feature:"site",action:"export"}]])])]),_:1},8,["label"])])])):C("",!0)}}}),sl={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 py-24 px-56px"},ul={class:"max-w-504px"},il={class:"flex items-center"},dl=D({setup(U){const{t:n}=I(),u=E([]);if(H.onCustomSettingsSave=c=>{c.customSettings=J(u.value)},l.value)for(const c in l.value.customSettings)u.value.push({key:c,value:l.value.customSettings[c]});return q(()=>u.value,()=>{l.value&&(l.value.customSettings=J(u.value))},{deep:!0}),(c,t)=>{const p=K,r=De,v=A;return e(l)?(f(),w("div",sl,[d("div",ul,[o(v,null,{label:i(()=>[d("div",il,[R(g(e(n)("common.customSettings"))+" ",1),o(p,{tip:e(n)("common.customSettingsTips"),"custom-class":"ml-4"},null,8,["tip"])])]),default:i(()=>[o(r,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=_=>u.value=_)},null,8,["modelValue"])]),_:1})])])):C("",!0)}}}),ml=D({setup(U){const{t:n}=I();return(u,c)=>{const t=j,p=W,r=A,v=ie;return e(l)?(f(),y(N,{key:0,modelValue:e(l).codeLogSettings.enable,"onUpdate:modelValue":c[2]||(c[2]=_=>e(l).codeLogSettings.enable=_),label:e(n)("common.codeLog")},{default:i(()=>[o(r,{label:e(n)("codelog.level")},{default:i(()=>[o(p,{modelValue:e(l).codeLogSettings.logLevel,"onUpdate:modelValue":c[0]||(c[0]=_=>e(l).codeLogSettings.logLevel=_),class:"w-full","data-cy":"level"},{default:i(()=>[o(t,{value:"Debug",label:e(n)("common.debug"),"data-cy":"Debug"},null,8,["label"]),o(t,{value:"Information",label:e(n)("common.information"),"data-cy":"Information"},null,8,["label"]),o(t,{value:"Warning",label:e(n)("common.warning"),"data-cy":"Warning"},null,8,["label"]),o(t,{value:"Error",label:e(n)("common.error"),"data-cy":"Error"},null,8,["label"]),o(t,{value:"Critical",label:e(n)("common.critical"),"data-cy":"Critical"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(r,{label:e(n)("common.keepDays")},{default:i(()=>[o(v,{modelValue:e(l).codeLogSettings.keepDays,"onUpdate:modelValue":c[1]||(c[1]=_=>e(l).codeLogSettings.keepDays=_),precision:0,min:1,"data-cy":"keey-days"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):C("",!0)}}}),rl=D({setup(U){const{t:n}=I();return(u,c)=>{const t=ie,p=A;return e(l)?(f(),y(N,{key:0,modelValue:e(l).enableImageBrowserCache,"onUpdate:modelValue":c[1]||(c[1]=r=>e(l).enableImageBrowserCache=r),label:e(n)("common.imageBrowserCache")},{default:i(()=>[o(p,{label:e(n)("common.numberOfExpirationDaysAndUseVersionControl")},{default:i(()=>[o(t,{modelValue:e(l).imageCacheDays,"onUpdate:modelValue":c[0]||(c[0]=r=>e(l).imageCacheDays=r),precision:0,min:-1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):C("",!0)}}}),cl={class:"flex items-center w-full"},pl={class:"mr-auto"},fl={class:"mr-12 text-666 flex items-center"},vl={key:0,class:"w-full"},_l={class:"text-666 font-bold"},bl=D({setup(U){const{t:n}=I(),u=E([]);H.onLighthouseSave=t=>{c(t)};const c=t=>{const p=[];for(const r of u.value){const v={};if(r.setting)for(const _ of r.setting)v[_.name]=_.value;p.push({name:r.name,enable:r.enable,setting:v})}t.lighthouseSettingsJson=JSON.stringify(p)};if(l.value){const t=JSON.parse(l.value.lighthouseSettingsJson||"[]");ye().then(p=>{for(const r of p){const v=t.find(_=>_.name===r.name);if(v){r.enable=v.enable;for(const _ in v.setting){const x=r.setting.find(m=>m.name===_);x&&(x.value=v[_])}}else r.enable=!0;u.value.push(r)}})}return q(()=>u.value,()=>{l.value&&l.value.lighthouseSettingsJson!==null&&c(l.value)},{deep:!0}),(t,p)=>{const r=K,v=Z,_=Y,x=A;return e(l)&&u.value.length?(f(),y(N,{key:0,modelValue:e(l).enableLighthouseOptimization,"onUpdate:modelValue":p[0]||(p[0]=m=>e(l).enableLighthouseOptimization=m),label:e(n)("common.lighthouseOptimization")},{default:i(()=>[(f(!0),w(T,null,L(u.value,m=>(f(),y(x,{key:m.name},{default:i(()=>[d("div",cl,[d("div",pl,[d("div",fl,[R(g(m.name)+" ",1),o(r,{tip:m.description,"custom-class":"ml-4"},null,8,["tip"])])]),o(v,{modelValue:m.enable,"onUpdate:modelValue":s=>m.enable=s},null,8,["modelValue","onUpdate:modelValue"])]),m.enable?(f(),w("div",vl,[(f(!0),w(T,null,L(m.setting,s=>(f(),w("div",{key:s.name,class:"mt-18px"},[d("span",_l,g(s.displayName||s.name),1),s.controlType==="Text"?(f(),y(_,{key:0,modelValue:s.value,"onUpdate:modelValue":a=>s.value=a,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0),s.controlType==="Number"?(f(),y(_,{key:1,modelValue:s.value,"onUpdate:modelValue":a=>s.value=a,modelModifiers:{number:!0},class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0),s.controlType==="Switch"?(f(),y(v,{key:2,modelValue:s.value,"onUpdate:modelValue":a=>s.value=a,class:"float-right"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0)]))),128))])):C("",!0)]),_:2},1024))),128))]),_:1},8,["modelValue","label"])):C("",!0)}}}),Vl=["src"],yl={class:"space-y-4"},gl={class:"px-12"},kl=D({setup(U){const{t:n}=I(),u=E(),c=E(),t=E(!1),p=Q();l.value&&(u.value=JSON.parse(l.value.pwa.manifest),c.value=JSON.parse(l.value.pwa.serviceWorker)),H.onPwaSave=m=>{m.pwa.manifest=JSON.stringify(u.value),m.pwa.serviceWorker=JSON.stringify(c.value)};const r=()=>{c.value.CacheSettings.push({Method:"get",Pattern:"",ExpiresIn:0})},v=m=>{c.value.CacheSettings.splice(m,1)},_=X(()=>Le(u.value.icons[0].src)),x=m=>{if(m.length===1)for(const s of u.value.icons){s.src=m[0].url;let a=m[0].height,V=m[0].width;a||(a=32),V||(V=32),s.sizes=`${a}x${V}`}t.value=!1};return q(()=>u.value,()=>{l.value&&(l.value.pwa.manifest=JSON.stringify(u.value))},{deep:!0}),q(()=>c.value,()=>{l.value&&(l.value.pwa.serviceWorker=JSON.stringify(c.value))},{deep:!0}),(m,s)=>{const a=A,V=Y,b=j,P=W,S=ee;return e(l)&&u.value?(f(),y(N,{key:0,modelValue:e(l).pwa.enable,"onUpdate:modelValue":s[7]||(s[7]=h=>e(l).pwa.enable=h),label:"PWA"},{default:i(()=>[o(a,{label:e(n)("common.icon")},{default:i(()=>[d("div",{class:"w-88px h-88px rounded-4px bg-gray flex items-center justify-center",onClick:s[0]||(s[0]=h=>t.value=!0)},[d("img",{src:e(Ue)(e(p).site.baseUrl,e(_))},null,8,Vl)])]),_:1},8,["label"]),o(a,{label:e(n)("common.name")},{default:i(()=>[o(V,{modelValue:u.value.name,"onUpdate:modelValue":s[1]||(s[1]=h=>u.value.name=h),placeholder:e(n)("common.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(a,{label:e(n)("common.themeColor")},{default:i(()=>[o(V,{modelValue:u.value.theme_color,"onUpdate:modelValue":s[2]||(s[2]=h=>u.value.theme_color=h),placeholder:e(n)("common.themeColor")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(a,{label:e(n)("common.bgColor")},{default:i(()=>[o(V,{modelValue:u.value.background_color,"onUpdate:modelValue":s[3]||(s[3]=h=>u.value.background_color=h),placeholder:e(n)("common.bgColor")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(a,{label:e(n)("common.startUrl")},{default:i(()=>[o(V,{modelValue:u.value.start_url,"onUpdate:modelValue":s[4]||(s[4]=h=>u.value.start_url=h),placeholder:e(n)("common.startUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(a,{label:e(n)("common.display")},{default:i(()=>[o(P,{modelValue:u.value.display,"onUpdate:modelValue":s[5]||(s[5]=h=>u.value.display=h),class:"w-full"},{default:i(()=>[o(b,{value:"fullscreen",label:"fullscreen"}),o(b,{value:"standalone",label:"standalone"}),o(b,{value:"minimal-ui",label:"minimal-ui"}),o(b,{value:"browser",label:"browser"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(a,{label:"Service worker"},{default:i(()=>[d("div",yl,[(f(!0),w(T,null,L(c.value.CacheSettings,(h,M)=>(f(),w("div",{key:M,class:"flex items-center space-x-4"},[o(P,{modelValue:h.Method,"onUpdate:modelValue":k=>h.Method=k,class:"w-120px"},{default:i(()=>[o(b,{value:"get",label:"GET"}),o(b,{value:"put",label:"PUT"}),o(b,{value:"post",label:"POST"}),o(b,{value:"delete",label:"DELETE"}),o(b,{value:"head",label:"HEAD"}),o(b,{value:"any",label:"ALL"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(V,{modelValue:h.Pattern,"onUpdate:modelValue":k=>h.Pattern=k,class:"w-220px",placeholder:e(n)("common.exampleUrl")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),o(V,{modelValue:h.ExpiresIn,"onUpdate:modelValue":k=>h.ExpiresIn=k,modelModifiers:{number:!0},class:"w-150px"},{append:i(()=>[d("span",gl,g(e(n)("common.minutes")),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),d("div",null,[o(S,{circle:"",class:"text-orange",icon:"icon-delete",tip:e(n)("common.delete"),onClick:k=>v(M)},null,8,["tip","onClick"])])]))),128)),o(S,{circle:"",class:"text-blue",icon:"icon-a-addto",tip:e(n)("common.add"),onClick:r},null,8,["tip"])])]),_:1}),t.value?(f(),y(e(Re),{key:0,modelValue:t.value,"onUpdate:modelValue":s[6]||(s[6]=h=>t.value=h),onChoose:x},null,8,["modelValue"])):C("",!0)]),_:1},8,["modelValue"])):C("",!0)}}}),xl={class:"space-y-4 w-full"},hl={class:"flex items-center w-full"},Cl={class:"font-bold text-666"},Sl=d("div",{class:"flex-1"},null,-1),wl={key:0,class:"space-y-4"},Ul={class:"px-12 text-999"},$l={class:"font-bold text-666"},Pl=d("div",{class:"flex-1"},null,-1),El=D({setup(U){const{t:n}=I(),u=E([]),c=E([]),t=E([]);if(H.onMultilingualSave=m=>{m.enableMultilingual||(m.enableSitePath=!1,u.value=u.value.filter(s=>{var a;return s.key===((a=l.value)==null?void 0:a.defaultCulture)}),t.value=t.value.filter(s=>{var a;return s.key===((a=l.value)==null?void 0:a.defaultCulture)})),m.culture=J(u.value),m.sitePath=J(t.value)},l.value){for(const m in l.value.sitePath)t.value.push({key:m,value:l.value.sitePath[m]});for(const m in l.value.culture)u.value.push({key:m,value:l.value.culture[m]}),t.value.find(a=>a.key===m)||t.value.push({key:m,value:m});ge().then(m=>{for(const s in m)c.value.push({key:s,value:m[s]})})}const p=X(()=>{const m=[];for(const s of c.value)u.value.find(a=>a.key===s.key)||m.push(s);return m}),r=()=>{if(!p.value.length)return;const m=p.value[0];u.value.push(ne({},m)),x()},v=m=>{u.value.splice(m,1),x()},_=m=>{var V;const s=u.value.find(b=>b.key===m);/^[a-z]{2}$/.test(m)||ke(n("common.cultureCodeTip"));const a=(V=c.value.find(b=>b.key===m))==null?void 0:V.value;a&&s&&(s.value=a),x()},x=()=>{var m;for(const s of t.value.map(a=>a.key))u.value.find(a=>a.key===s)||(t.value=t.value.filter(a=>a.key!==s));for(const s of u.value)t.value.find(a=>a.key===s.key)||t.value.push({key:s.key,value:s.key});l.value&&!u.value.find(s=>{var a;return s.key===((a=l.value)==null?void 0:a.defaultCulture)})&&(l.value.defaultCulture=(m=u.value[0])==null?void 0:m.key)};return q(()=>u.value,()=>{l.value&&(l.value.culture=J(u.value))},{deep:!0}),q(()=>t.value,()=>{l.value&&(l.value.sitePath=J(t.value))},{deep:!0}),(m,s)=>{const a=j,V=W,b=Y,P=ee,S=A,h=K,M=Z;return e(l)?(f(),y(N,{key:0,modelValue:e(l).enableMultilingual,"onUpdate:modelValue":s[3]||(s[3]=k=>e(l).enableMultilingual=k),label:e(n)("common.multilingual")},{default:i(()=>[o(S,null,{default:i(()=>[d("div",xl,[(f(!0),w(T,null,L(u.value,(k,F)=>(f(),w("div",{key:F,class:"flex items-center space-x-4"},[o(V,{modelValue:k.key,"onUpdate:modelValue":O=>k.key=O,filterable:"","allow-create":"","default-first-option":"",onChange:_},{default:i(()=>[(f(!0),w(T,null,L(e(p),O=>(f(),y(a,{key:O.key,value:O.key,label:O.key},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(b,{modelValue:k.value,"onUpdate:modelValue":O=>k.value=O,placeholder:e(n)("common.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),d("div",null,[u.value.length>1?(f(),y(P,{key:0,circle:"",class:"text-orange",icon:"icon-delete",tip:e(n)("common.delete"),onClick:O=>v(F)},null,8,["tip","onClick"])):C("",!0)])]))),128)),e(p).length?(f(),y(P,{key:0,circle:"",class:"text-blue",icon:"icon-a-addto",tip:e(n)("common.add"),onClick:r},null,8,["tip"])):C("",!0)])]),_:1}),o(S,{label:e(n)("common.defaultLanguage")},{default:i(()=>[o(V,{modelValue:e(l).defaultCulture,"onUpdate:modelValue":s[0]||(s[0]=k=>e(l).defaultCulture=k),class:"w-full"},{default:i(()=>[(f(!0),w(T,null,L(u.value,k=>(f(),y(a,{key:k.key,value:k.key,label:k.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(S,null,{default:i(()=>[d("div",hl,[d("span",Cl,g(e(n)("common.languagePath")),1),o(h,{tip:e(n)("common.languagePathTips"),"custom-class":"ml-4"},null,8,["tip"]),Sl,o(M,{modelValue:e(l).enableSitePath,"onUpdate:modelValue":s[1]||(s[1]=k=>e(l).enableSitePath=k)},null,8,["modelValue"])]),e(l).enableSitePath?(f(),w("div",wl,[(f(!0),w(T,null,L(t.value,k=>(f(),w("div",{key:k.key},[o(b,{modelValue:k.value,"onUpdate:modelValue":F=>k.value=F},{suffix:i(()=>[d("span",Ul,g(k.key),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])):C("",!0)]),_:1}),o(S,null,{default:i(()=>[d("span",$l,g(e(n)("common.autoDetectCulture")),1),Pl,o(M,{modelValue:e(l).autoDetectCulture,"onUpdate:modelValue":s[2]||(s[2]=k=>e(l).autoDetectCulture=k)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","label"])):C("",!0)}}}),Tl={class:"flex items-center justify-between w-full"},Dl=D({setup(U){const{t:n}=I(),u=E(!1),c=E("");function t(){!l.value||(l.value.sitemapSettings.code=c.value,u.value=!1)}function p(){!l.value||(u.value=!0,c.value=l.value.sitemapSettings.code)}return(r,v)=>{const _=Y,x=A,m=Me,s=Ne,a=ue,V=Ie,b=Je;return e(l)?(f(),y(N,{key:0,modelValue:e(l).sitemapSettings.enable,"onUpdate:modelValue":v[6]||(v[6]=P=>e(l).sitemapSettings.enable=P),label:e(n)("common.sitemap"),"tooltip-label":e(n)("common.sitemapTips")},{default:i(()=>[o(x,{label:e(n)("common.path")},{default:i(()=>[o(_,{modelValue:e(l).sitemapSettings.path,"onUpdate:modelValue":v[0]||(v[0]=P=>e(l).sitemapSettings.path=P)},null,8,["modelValue"])]),_:1},8,["label"]),o(x,{label:e(n)("common.generateType")},{default:i(()=>[d("div",Tl,[o(s,{modelValue:e(l).sitemapSettings.autoGenerate,"onUpdate:modelValue":v[1]||(v[1]=P=>e(l).sitemapSettings.autoGenerate=P)},{default:i(()=>[o(m,{label:!0},{default:i(()=>[R(g(e(n)("common.auto")),1)]),_:1}),o(m,{label:!1},{default:i(()=>[R(g(e(n)("common.manual")),1)]),_:1})]),_:1},8,["modelValue"]),e(l).sitemapSettings.autoGenerate?C("",!0):(f(),y(a,{key:0,type:"primary",size:"small",onClick:p},{default:i(()=>[R(g(e(n)("common.editCode")),1)]),_:1}))])]),_:1},8,["label"]),(f(),y($e,{to:"body"},[o(b,{"model-value":u.value,"custom-class":"el-dialog--zero-padding",width:"800px","close-on-click-modal":!1,title:e(n)("common.editCode"),onClosed:v[5]||(v[5]=P=>u.value=!1)},{footer:i(()=>[o(V,{onConfirm:t,onCancel:v[4]||(v[4]=P=>u.value=!1)})]),default:i(()=>[d("div",{class:"h-500px",onKeydown:v[3]||(v[3]=G(()=>{},["stop"]))},[o(Oe,{modelValue:c.value,"onUpdate:modelValue":v[2]||(v[2]=P=>c.value=P),language:"typescript","k-script":"",uri:e(Be).file(e(l).id+"sitemap")},null,8,["modelValue","uri"])],32)]),_:1},8,["model-value","title"])]))]),_:1},8,["modelValue","label","tooltip-label"])):C("",!0)}}}),Ll=D({setup(U){const{t:n}=I();function u(c){l.value.tinymceSettings[c]=void 0}return(c,t)=>{const p=A;return f(),y(N,{modelValue:e(l).enableTinymceToolbarSettings,"onUpdate:modelValue":t[1]||(t[1]=r=>e(l).enableTinymceToolbarSettings=r),label:e(n)("common.richTextEditorConfigurationForContentType")},{default:i(()=>[o(p,{class:"w-800px mb-0"},{default:i(()=>[e(l).enableTinymceToolbarSettings?(f(),y(qe,{key:0,modelValue:e(l).tinymceSettings,"onUpdate:modelValue":t[0]||(t[0]=r=>e(l).tinymceSettings=r),onReset:u},null,8,["modelValue"])):C("",!0)]),_:1})]),_:1},8,["modelValue","label"])}}}),Rl=D({setup(U){var x,m;const{locale:n,t:u}=I(),c=E([]),t=X(()=>n.value==="zh"?"nameCN":"name"),{list:p,load:r}=Ae(),v=E(p);H.onVisitorCountryRestrictionsSave=s=>{s.visitorCountryRestrictions=J(c.value.map(a=>{var V,b;return{key:a,value:(b=(V=l.value)==null?void 0:V.visitorCountryRestrictionPage)!=null?b:""}}))},Pe(()=>z(this,null,function*(){var s;(s=v.value)!=null&&s.length||(v.value=yield r())})),l.value&&(l.value.enableVisitorCountryRestriction=(x=l.value.enableVisitorCountryRestriction)!=null?x:!1,l.value.visitorCountryRestrictionPage=(m=l.value.visitorCountryRestrictionPage)!=null?m:"",l.value.visitorCountryRestrictions&&(c.value=Object.keys(l.value.visitorCountryRestrictions)));const _=X(()=>Fe.sort((s,a)=>t.value==="nameCN"?s.namePY.localeCompare(a.namePY):s.name.localeCompare(a.name)));return q(()=>c.value,()=>{l.value&&(l.value.visitorCountryRestrictions=J(c.value.map(s=>{var a,V;return{key:s,value:(V=(a=l.value)==null?void 0:a.visitorCountryRestrictionPage)!=null?V:""}})))},{deep:!0}),(s,a)=>{const V=j,b=W,P=A;return e(l)?(f(),y(N,{key:0,modelValue:e(l).enableVisitorCountryRestriction,"onUpdate:modelValue":a[2]||(a[2]=S=>e(l).enableVisitorCountryRestriction=S),label:e(u)("common.visitorCountryRestriction")},{default:i(()=>[o(P,{label:e(u)("common.countryAndRegion")},{default:i(()=>[o(b,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=S=>c.value=S),multiple:"",filterable:"","default-first-option":"",class:"w-full","data-cy":"VisitorCountryRestriction"},{default:i(()=>[(f(!0),w(T,null,L(e(_),S=>(f(),y(V,{key:S.isoCode,value:S.isoCode.toLowerCase(),label:`${S[e(t)]} (${S.isoCode})`,"data-cy":S.isoCode},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(P,{label:e(u)("common.visitorCountryRestrictionPage")},{default:i(()=>[o(b,{modelValue:e(l).visitorCountryRestrictionPage,"onUpdate:modelValue":a[1]||(a[1]=S=>e(l).visitorCountryRestrictionPage=S),class:"w-full","data-cy":"VisitorCountryRestrictionPage"},{default:i(()=>[o(V,{value:"",label:e(u)("common.default"),"data-cy":"DefaultPage"},null,8,["label"]),(f(!0),w(T,null,L(v.value,S=>(f(),y(V,{key:S.id,value:S.path,label:S.path,"data-cy":S.path},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):C("",!0)}}}),Il=D({setup(U){const{t:n}=I();function u(c){!l.value||((l.value.resourceCaches&c)>0?l.value.resourceCaches=l.value.resourceCaches-c:l.value.resourceCaches=l.value.resourceCaches+c)}return(c,t)=>{const p=je;return e(l)?(f(),y(N,{key:0,modelValue:e(l).enableResourceCache,"onUpdate:modelValue":t[4]||(t[4]=r=>e(l).enableResourceCache=r),label:e(n)("common.enableResourceCache")},{default:i(()=>[o(p,{label:e(n)("common.style"),"model-value":(e(l).resourceCaches&1)>0,onClick:t[0]||(t[0]=G(r=>u(1),["stop","prevent"]))},null,8,["label","model-value"]),o(p,{label:e(n)("common.script"),"model-value":(e(l).resourceCaches&1<<1)>0,onClick:t[1]||(t[1]=G(r=>u(1<<1),["stop","prevent"]))},null,8,["label","model-value"]),o(p,{label:e(n)("common.image"),"model-value":(e(l).resourceCaches&1<<2)>0,onClick:t[2]||(t[2]=G(r=>u(1<<2),["stop","prevent"]))},null,8,["label","model-value"]),o(p,{label:e(n)("common.content"),"model-value":(e(l).resourceCaches&1<<3)>0,onClick:t[3]||(t[3]=G(r=>u(1<<3),["stop","prevent"]))},null,8,["label","model-value"])]),_:1},8,["modelValue","label"])):C("",!0)}}}),Ol={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px"},Al={class:"max-w-504px"},Bl={class:"font-bold dark:text-fff/86"},Ml=d("div",{class:"flex-1"},null,-1),Nl={class:"font-bold dark:text-fff/86"},Jl=d("div",{class:"flex-1"},null,-1),ql={class:"max-w-504px"},Fl={class:"font-bold dark:text-fff/86"},jl=d("div",{class:"flex-1"},null,-1),Wl={class:"font-bold dark:text-fff/86"},zl=d("div",{class:"flex-1"},null,-1),Gl={class:"font-bold dark:text-fff/86"},Kl=d("div",{class:"flex-1"},null,-1),Hl={class:"font-bold dark:text-fff/86"},Yl=d("div",{class:"flex-1"},null,-1),Ql={class:"font-bold dark:text-fff/86"},Xl=d("div",{class:"flex-1"},null,-1),Zl={class:"font-bold dark:text-fff/86"},eo=d("div",{class:"flex-1"},null,-1),lo={class:"font-bold dark:text-fff/86"},oo=d("div",{class:"flex-1"},null,-1),to={class:"font-bold dark:text-fff/86"},ao=d("div",{class:"flex-1"},null,-1),no={class:"max-w-504px"},so={class:"font-bold dark:text-fff/86"},uo=d("div",{class:"flex-1"},null,-1),io=d("span",{class:"font-bold dark:text-fff/86"},"CORS",-1),mo=d("div",{class:"flex-1"},null,-1),ro=d("span",{class:"font-bold dark:text-fff/86"},"SPA",-1),co=d("div",{class:"flex-1"},null,-1),po={class:"font-bold dark:text-fff/86 text-black"},fo=R("bootstrap-v3"),vo=R("tailwind-v3.1"),_o=R("element-plus-v2.2"),bo=R("amp-v0"),Vo={class:"font-bold dark:text-fff/86"},yo=d("div",{class:"flex-1"},null,-1),go={class:"font-bold dark:text-fff/86"},ko=d("div",{class:"flex-1"},null,-1),xo={class:"font-bold dark:text-fff/86"},ho=d("div",{class:"flex-1"},null,-1),Co={class:"font-bold dark:text-fff/86"},So=d("div",{class:"flex-1"},null,-1),wo={class:"font-bold dark:text-fff/86"},Uo=d("div",{class:"flex-1"},null,-1),$o=D({setup(U){const{t:n}=I(),u=se();return(c,t)=>{var m,s;const p=Z,r=A,v=K,_=j,x=W;return e(l)?(f(),w("div",Ol,[d("div",Al,[o(r,null,{default:i(()=>[d("span",Bl,g(e(n)("common.visitorLog")),1),Ml,o(p,{modelValue:e(l).enableVisitorLog,"onUpdate:modelValue":t[0]||(t[0]=a=>e(l).enableVisitorLog=a),"data-cy":"visitor-log"},null,8,["modelValue"])]),_:1}),(m=e(u).header)!=null&&m.isOnlineServer?(f(),y(Rl,{key:0})):C("",!0),o(r,null,{default:i(()=>[d("span",Nl,g(e(n)("common.sqlLog")),1),Jl,o(p,{modelValue:e(l).enableSqlLog,"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).enableSqlLog=a),"data-cy":"sql-log"},null,8,["modelValue"])]),_:1})]),o(ml),d("div",ql,[o(r,null,{default:i(()=>[d("span",Fl,g(e(n)("common.constraintFixOnSave")),1),o(v,{tip:e(n)("common.constraintFixOnSaveTips"),"custom-class":"ml-4"},null,8,["tip"]),jl,o(p,{modelValue:e(l).enableConstraintFixOnSave,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).enableConstraintFixOnSave=a),"data-cy":"constraint-fix-on-save"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",Wl,g(e(n)("common.frontEvents")),1),o(v,{tip:e(n)("common.frontEventTips"),"custom-class":"ml-4"},null,8,["tip"]),zl,o(p,{modelValue:e(l).enableFrontEvents,"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).enableFrontEvents=a),"data-cy":"front-event"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",Gl,g(e(n)("common.backendEvents")),1),o(v,{tip:e(n)("common.backendEventTips"),"custom-class":"ml-4"},null,8,["tip"]),Kl,o(p,{modelValue:e(l).enableBackendEvents,"onUpdate:modelValue":t[4]||(t[4]=a=>e(l).enableBackendEvents=a),"data-cy":"front-event"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",Hl,g(e(n)("common.JsCssCompression")),1),Yl,o(p,{modelValue:e(l).enableJsCssCompress,"onUpdate:modelValue":t[5]||(t[5]=a=>e(l).enableJsCssCompress=a),"data-cy":"js-css-compress"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",Ql,g(e(n)("common.JsCssBrowserCache")),1),Xl,o(p,{modelValue:e(l).enableJsCssBrowerCache,"onUpdate:modelValue":t[6]||(t[6]=a=>e(l).enableJsCssBrowerCache=a),"data-cy":"js-css-cache"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",Zl,g(e(n)("common.videoBrowserCache")),1),eo,o(p,{modelValue:e(l).enableVideoBrowserCache,"onUpdate:modelValue":t[7]||(t[7]=a=>e(l).enableVideoBrowserCache=a),"data-cy":"video-cache"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",lo,g(e(n)("common.htmlCompression")),1),oo,o(p,{modelValue:e(l).enableHtmlMinifier,"onUpdate:modelValue":t[8]||(t[8]=a=>e(l).enableHtmlMinifier=a),"data-cy":"html-compress"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",to,g(e(n)("common.enableImageAlt")),1),ao,o(p,{modelValue:e(l).enableImageAlt,"onUpdate:modelValue":t[9]||(t[9]=a=>e(l).enableImageAlt=a),"data-cy":"image-alt"},null,8,["modelValue"])]),_:1})]),o(rl),o(bl),o(kl),o(El),o(Ll),o(Dl),o(_e),d("div",no,[o(r,null,{default:i(()=>[d("span",so,g(e(n)("common.blockingSeo")),1),uo,o(p,{modelValue:e(l).blockingSeo,"onUpdate:modelValue":t[10]||(t[10]=a=>e(l).blockingSeo=a)},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[io,o(v,{tip:e(n)("common.corsTips"),"custom-class":"ml-4"},null,8,["tip"]),mo,o(p,{modelValue:e(l).enableCORS,"onUpdate:modelValue":t[11]||(t[11]=a=>e(l).enableCORS=a),"data-cy":"cors"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[ro,o(v,{tip:e(n)("common.spaTips"),"custom-class":"ml-4"},null,8,["tip"]),co,o(p,{modelValue:e(l).enableSPA,"onUpdate:modelValue":t[12]||(t[12]=a=>e(l).enableSPA=a),"data-cy":"spa"},null,8,["modelValue"])]),_:1}),o(r,null,{label:i(()=>[d("span",po,g(e(n)("common.additionalCodeSuggestions")),1)]),default:i(()=>[o(x,{modelValue:e(l).codeSuggestions,"onUpdate:modelValue":t[13]||(t[13]=a=>e(l).codeSuggestions=a),multiple:"",class:"w-full"},{default:i(()=>[o(_,{value:"bootstrap-v3"},{default:i(()=>[fo]),_:1}),o(_,{value:"tailwind-v3.1"},{default:i(()=>[vo]),_:1}),o(_,{value:"element-plus-v2.2"},{default:i(()=>[_o]),_:1}),o(_,{value:"amp-v0"},{default:i(()=>[bo]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",Vo,g(e(n)("common.recordSiteLogVideo")),1),yo,o(p,{modelValue:e(l).recordSiteLogVideo,"onUpdate:modelValue":t[14]||(t[14]=a=>e(l).recordSiteLogVideo=a),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",go,g(e(n)("common.forceSSL")),1),o(v,{tip:e(n)("common.forceSSLTips"),"custom-class":"ml-4"},null,8,["tip"]),ko,o(p,{modelValue:e(l).forceSSL,"onUpdate:modelValue":t[15]||(t[15]=a=>e(l).forceSSL=a),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),e(l).continueDownload!==void 0?(f(),y(r,{key:0},{default:i(()=>[d("span",xo,g(e(n)("common.continueDownload")),1),o(v,{tip:e(n)("common.continueDownloadTips"),"custom-class":"ml-4"},null,8,["tip"]),ho,o(p,{modelValue:e(l).continueDownload,"onUpdate:modelValue":t[16]||(t[16]=a=>e(l).continueDownload=a),"data-cy":"continue-download"},null,8,["modelValue"])]),_:1})):C("",!0),o(r,null,{default:i(()=>[d("span",Co,g(e(n)("common.enableUpdateSimilarPage")),1),So,o(p,{modelValue:e(l).enableUpdateSimilarPage,"onUpdate:modelValue":t[17]||(t[17]=a=>e(l).enableUpdateSimilarPage=a),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[d("span",wo,g(e(n)("common.automateCovertImageToWebp")),1),Uo,o(p,{modelValue:e(l).automateCovertImageToWebp,"onUpdate:modelValue":t[18]||(t[18]=a=>e(l).automateCovertImageToWebp=a)},null,8,["modelValue"])]),_:1}),!((s=e(u).header)!=null&&s.isOnlineServer)||e(u).header.isPrivateServer?(f(),y(Il,{key:1})):C("",!0)])])):C("",!0)}}}),Po={key:0},st=D({setup(U,{expose:n}){const u=E(!1),c=ze(),t=Q(),p=E(+new Date);function r(){return z(this,null,function*(){l.value=void 0,yield Q().loadSite(),be(),c.init(l.value)})}const v=()=>{c.init(l.value),p.value=+new Date};return Ee(()=>{t.firstActiveMenu=""}),r(),Te((_,x,m)=>z(this,null,function*(){var s;_.name==="login"?m():(t.firstActiveMenu=(s=_.meta.activeMenu)!=null?s:_.name,yield c.check(l.value).then(()=>{m()}).catch(()=>{t.firstActiveMenu="settings",m(!1)}))})),q(()=>l.value,()=>{c.changed(l.value)},{deep:!0}),n({initSite:v}),(_,x)=>{const m=xe;return e(l)?(f(),w("div",Po,[(f(),y(m,{key:p.value,"label-position":"top"},{default:i(()=>[o(nl,{onExport:x[0]||(x[0]=s=>u.value=!0),onInitSite:v}),o($o),o(dl)]),_:1})),u.value?(f(),y(We,{key:0,modelValue:u.value,"onUpdate:modelValue":x[1]||(x[1]=s=>u.value=s),"site-id":e(l).id},null,8,["modelValue","site-id"])):C("",!0)])):C("",!0)}}});export{st as _};
