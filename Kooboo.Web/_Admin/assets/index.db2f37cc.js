var V=(U,l,E)=>new Promise((A,s)=>{var I=b=>{try{c(E.next(b))}catch(w){s(w)}},i=b=>{try{c(E.throw(b))}catch(w){s(w)}},c=b=>b.done?A(b.value):Promise.resolve(b.value).then(I,i);c((E=E.apply(U,l)).next())});import{_ as W}from"./k-table.b1a54b80.js";import{_ as X}from"./country.9dae7738.js";import{_ as Y}from"./image-cover.b0b3d25c.js";import{d as Z,N as ee,g as z,h as te,O as oe,o as d,a as y,b as t,u as o,w as a,k as D,f as m,j as x,cp as le,aI as p,t as r,F as N,b7 as P}from"./url.4cb47a7a.js";import{B as ae}from"./breadcrumb.f4d80c95.js";import{g as ne}from"./i18n.a87944a4.js";import{g as re,d as me,a as ie}from"./order.a720b157.js";import{u as se}from"./use-date.f1258183.js";import{b as ue}from"./product-variant.afdebca6.js";import{a as pe,u as de}from"./replace-all.56d2c1f7.js";import{_ as C}from"./property-item.2aae24bb.js";import{_ as R}from"./currency-amount.33cd19c7.js";import{b as ce}from"./confirm.b60b5d2f.js";import{_ as fe}from"./truncate-content.85e3d7e3.js";import{_ as _e}from"./order-status.b128b2bf.js";import{u as ve}from"./commerce.ded2851e.js";import{E as be,a as ge,c as he}from"./index.7c862087.js";import{E as ye}from"./index.76f9eac7.js";import{E as xe}from"./index.178b9e08.js";import{E as q}from"./index.361e2245.js";import{E as Ee}from"./windi.6360286d.js";import{E as we}from"./index.b38edc72.js";import{E as ke}from"./index.bec063d7.js";import{E as Ve}from"./index.d96452a6.js";import"./sortable.esm.a99254e8.js";import"./icon-button.74ccc970.js";import"./index.4f90a917.js";import"./index.4d568055.js";import"./main.9fdfea92.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.c6da2706.js";import"./isEqual.4cab74e3.js";import"./_baseIsEqual.dc9e64c4.js";import"./error.7e8331f1.js";import"./index.42922617.js";import"./index.7b8c5aef.js";import"./event.776e7e11.js";import"./index.f15f695e.js";import"./media-dialog.69c737ad.js";import"./index.f0d5f031.js";import"./media.e27599b4.js";import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.d235f69b.js";import"./index.5ed58b47.js";/* empty css                                                          */import"./plugin-vue_export-helper.21dcd24c.js";import"./search-provider.ad425b7b.js";import"./toNumber.47eea968.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./style.c350d462.js";import"./_baseUniq.d719bd5f.js";import"./use-operation-dialog.4f6d7533.js";import"./file.a821eac5.js";import"./validate.bb56f9e3.js";import"./index.d24a40b9.js";import"./index.f23f1e38.js";import"./index.a24f458a.js";import"./index.1fd72ea8.js";import"./index.abe211fa.js";import"./index.9fd79879.js";import"./_baseClone.b8903935.js";import"./index.c003dfa1.js";import"./index.c10802d9.js";import"./scroll.16983984.js";import"./focus-trap.50a00b7f.js";import"./isNil.98bb3b88.js";import"./refs.3132cbdb.js";import"./folder.8308bb9d.js";import"./relations-tag.b9cbe606.js";import"./page.881ec888.js";import"./index.f2c1b903.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./validator.b5df2420.js";import"./guid.c1a40312.js";import"./index.fd96ea36.js";import"./use-copy-text.ec245a13.js";import"./plugin-vue_export-helper.41ffa612.js";import"./caret-bottom.ddd8dd91.js";import"./index.c33743a1.js";import"./browser.aedb6977.js";import"./throttle.1f6a079c.js";import"./debounce.4e0c106e.js";import"./search-input.2a27ef56.js";/* empty css                                                                 *//* empty css                                                          */import"./layout.b686c380.js";import"./index.765084fe.js";import"./position.7590de53.js";import"./utils.aa7941f8.js";import"./index.9fc39dc8.js";import"./use-file-upload.78bd75f1.js";import"./index.99e769ef.js";import"./index.d878e15f.js";import"./index.1b4db5fb.js";import"./index.4d2ce883.js";import"./file.7f0748f1.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.ec5f0705.js";/* empty css                                                               */import"./date.3d25ac99.js";import"./dayjs.min.ccc40d4f.js";import"./logo-transparent.1566007e.js";import"./index.66319a92.js";import"./index.e3f90979.js";import"./dropdown.86d3a7fb.js";const Ce={class:"p-24"},Se={key:0,class:"flex items-center space-x-16 mt-8 text-m"},$e=m("div",{class:"flex-1"},null,-1),Ae={class:"flex items-center flex-wrap gap-8 py-16"},Ie={class:"space-y-4"},De={class:"text-s"},Ne={class:"space-y-4"},Pe={class:"px-8"},Ue={class:"px-8"},Be={class:"truncate"},To=Z({setup(U){const{t:l}=ne(),A=ee().meta.title,s=z(),I=ve(),i=z({pageIndex:1,pageSize:30,keyword:"",status:"",createdAtStart:void 0,createdAtEnd:void 0});function c(f=1){return V(this,null,function*(){i.value.pageIndex=f,s.value=yield re(i.value)})}function b(f){return V(this,null,function*(){yield ce(f.length),yield me(f.map(n=>n.id)),c()})}function w(){return V(this,null,function*(){const f=yield ie(i.value);le(pe(`/_api/v2/Order/ExportExcel?exportfile=${f.file}&name=${f.name}`))})}te(()=>V(this,null,function*(){c()}));function S(f){const n=[];f.discountAllocations&&n.push(...f.discountAllocations);for(const v of f.lines)v.discountAllocations&&n.push(...v.discountAllocations);return n}return(f,n)=>{const v=be,B=ge,O=ye,j=xe,H=q,T=Ee,K=q,_=we,k=he,L=Y,F=ke,M=X,Q=Ve,G=oe("router-link"),J=W;return d(),y("div",Ce,[t(ae,{name:o(A)},null,8,["name"]),s.value?(d(),y("div",Se,[t(C,{name:o(l)("commerce.delivered")},{default:a(()=>[p(r(s.value.stats.delivered),1)]),_:1},8,["name"]),t(C,{name:o(l)("commerce.waitPay")},{default:a(()=>[p(r(s.value.stats.waitPay),1)]),_:1},8,["name"]),t(C,{name:o(l)("commerce.waitDeliver")},{default:a(()=>[p(r(s.value.stats.waitDeliver),1)]),_:1},8,["name"]),$e,t(C,{name:o(l)("commerce.paidOrders")},{default:a(()=>[p(r(s.value.stats.order),1)]),_:1},8,["name"]),t(C,{name:o(l)("commerce.paidAmounts")},{default:a(()=>[t(R,{amount:s.value.stats.totalAmount},null,8,["amount"])]),_:1},8,["name"])])):D("",!0),m("div",Ae,[t(B,{modelValue:i.value.status,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value.status=e),placeholder:o(l)("commerce.orderStatus"),class:"w-150px",clearable:"",onClear:n[1]||(n[1]=e=>i.value.status=void 0),onChange:n[2]||(n[2]=e=>c(1))},{default:a(()=>[t(v,{label:o(l)("common.active"),value:"Normal"},null,8,["label"]),t(v,{label:o(l)("common.paid"),value:"Paid"},null,8,["label"]),t(v,{label:o(l)("common.notPaid"),value:"Unpaid"},null,8,["label"]),t(v,{label:o(l)("commerce.canceled"),value:"Canceled"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),t(B,{modelValue:i.value.deliveryStatus,"onUpdate:modelValue":n[3]||(n[3]=e=>i.value.deliveryStatus=e),placeholder:o(l)("commerce.deliveryStatus"),class:"w-170px",clearable:"",onClear:n[4]||(n[4]=e=>i.value.deliveryStatus=""),onChange:n[5]||(n[5]=e=>c(1))},{default:a(()=>[t(v,{label:o(l)("commerce.shipped"),value:"shipped"},null,8,["label"]),t(v,{label:o(l)("commerce.partialShipped"),value:"partial"},null,8,["label"]),t(v,{label:o(l)("commerce.unshipped"),value:"unshipped"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),t(O,{modelValue:i.value.createdAtStart,"onUpdate:modelValue":n[6]||(n[6]=e=>i.value.createdAtStart=e),class:"!w-170px",placeholder:o(l)("common.startDate"),onChange:n[7]||(n[7]=e=>c(1))},null,8,["modelValue","placeholder"]),t(O,{modelValue:i.value.createdAtEnd,"onUpdate:modelValue":n[8]||(n[8]=e=>i.value.createdAtEnd=e),class:"!w-170px",placeholder:o(l)("common.endDate"),onChange:n[9]||(n[9]=e=>c(1))},null,8,["modelValue","placeholder"]),t(j,{modelValue:i.value.keyword,"onUpdate:modelValue":n[10]||(n[10]=e=>i.value.keyword=e),class:"w-200px",placeholder:o(l)("common.keyword"),clearable:""},null,8,["modelValue","placeholder"]),t(H,{round:"",type:"primary",onClick:n[11]||(n[11]=e=>c(1))},{default:a(()=>[p(r(o(l)("common.search")),1)]),_:1}),t(K,{round:"",class:"!m-0",onClick:w},{default:a(()=>[t(T,{class:"iconfont icon-share"}),p(" "+r(o(l)("common.exportExcel")),1)]),_:1})]),s.value?(d(),x(J,{key:1,data:s.value.list,pagination:{currentPage:s.value.pageIndex,totalCount:s.value.count,pageSize:s.value.pageSize},"show-check":"",onDelete:b,onChange:c},{default:a(()=>[t(_,{label:o(l)("commerce.orderNumber"),width:"150"},{default:a(({row:e})=>[m("div",null,r(e.id),1)]),_:1},8,["label"]),(d(!0),y(N,null,P(o(I).settings.orderExtensionFields.filter(e=>e.isSummaryField),e=>(d(),x(_,{key:e.name,label:e.displayName||e.name,width:e.width||120},{default:a(({row:u})=>{var g,h;return[m("div",null,r((h=(g=u.extensionFields)==null?void 0:g.find($=>$.key==e.name))==null?void 0:h.value),1)]}),_:2},1032,["label","width"]))),128)),t(_,{label:o(l)("common.totalAmount"),width:"180"},{default:a(({row:e})=>[t(R,{amount:e.totalAmount,original:e.originalAmount,currency:e.currency},null,8,["amount","original","currency"])]),_:1},8,["label"]),t(_,{label:o(l)("common.createTime"),width:"180"},{default:a(({row:e})=>[p(r(o(se)(e.createdAt)),1)]),_:1},8,["label"]),t(_,{label:o(l)("common.products"),width:"100",align:"center"},{default:a(({row:e})=>[t(F,{width:"auto",trigger:"hover",placement:"left"},{reference:a(()=>[t(k,{round:"",type:"success"},{default:a(()=>[p(r(e.lines.length),1)]),_:2},1024)]),default:a(()=>[m("div",Ie,[(d(!0),y(N,null,P(e.lines,u=>(d(),y("div",{key:u.variantId,class:"flex space-x-4"},[t(L,{modelValue:u.image,"onUpdate:modelValue":g=>u.image=g,description:`x ${u.totalQuantity}`},null,8,["modelValue","onUpdate:modelValue","description"]),m("div",null,[m("div",null,r(u.title),1),m("div",De,r(o(ue)(u.options,!0)),1)])]))),128))])]),_:2},1024)]),_:1},8,["label"]),t(_,{label:o(l)("common.discount"),width:"110",align:"center"},{default:a(({row:e})=>[S(e).length?(d(),x(F,{key:0,width:"auto",trigger:"hover",disabled:!S(e).length},{reference:a(()=>[t(k,{round:"",type:"success",class:"cursor-default"},{default:a(()=>[p(r(S(e).length),1)]),_:2},1024)]),default:a(()=>[m("div",Ne,[m("table",null,[m("thead",null,[m("th",null,r(o(l)("common.title")),1),m("th",Pe,r(o(l)("commerce.discountCode")),1),m("th",null,r(o(l)("common.amount")),1)]),m("tbody",null,[(d(!0),y(N,null,P(S(e),(u,g)=>{var h;return d(),y("tr",{key:g},[m("td",null,r(u.title),1),m("td",Ue,r(u.code),1),m("td",null,"-"+r((h=u.amount)==null?void 0:h.toFixed(2)),1)])}),128))])])])]),_:2},1032,["disabled"])):D("",!0)]),_:1},8,["label"]),t(_,{label:o(l)("common.customer"),width:"300"},{default:a(({row:e})=>{var u,g;return[m("div",null,[m("div",Be,[t(fe,{tip:`${(u=e.customer)==null?void 0:u.email} ${(g=e.customer)==null?void 0:g.phone}`},{default:a(()=>{var h,$;return[p(r((h=e.customer)==null?void 0:h.email)+" "+r(($=e.customer)==null?void 0:$.phone),1)]}),_:2},1032,["tip"])])])]}),_:1},8,["label"]),t(_,{label:o(l)("common.status"),width:"140"},{default:a(({row:e})=>[t(_e,{order:e},null,8,["order"])]),_:1},8,["label"]),t(_,{label:o(l)("commerce.shippingStatus"),width:"180"},{default:a(({row:e})=>[m("div",null,[e.partialDelivered?(d(),x(k,{key:0,round:"",type:"warning"},{default:a(()=>[p(r(o(l)("commerce.partialShipped")),1)]),_:1})):e.delivered?(d(),x(k,{key:1,round:"",type:"success"},{default:a(()=>[p(r(o(l)("commerce.shipped")),1)]),_:1})):(d(),x(k,{key:2,round:"",type:"info"},{default:a(()=>[p(r(o(l)("commerce.unshipped")),1)]),_:1}))])]),_:1},8,["label"]),t(_,{label:o(l)("common.country"),width:"180",align:"center"},{default:a(({row:e})=>[t(M,{"name-or-code":e.country},null,8,["name-or-code"])]),_:1},8,["label"]),t(_,{label:o(l)("common.source"),width:"180",align:"center"},{default:a(({row:e})=>[p(r(e.source),1)]),_:1},8,["label"]),t(_,{align:"right",width:"60",fixed:"right"},{default:a(({row:e})=>[t(G,{to:o(de)({name:"order detail",query:{id:e.id}}),class:"mx-8"},{default:a(()=>[t(Q,{placement:"top",content:o(l)("common.detail")},{default:a(()=>[t(T,{class:"iconfont icon-eyes hover:text-blue text-l"})]),_:1},8,["content"])]),_:2},1032,["to"])]),_:1})]),_:1},8,["data","pagination"])):D("",!0)])}}});export{To as default};
