var w=(l,t,r)=>new Promise((o,n)=>{var i=p=>{try{a(r.next(p))}catch(u){n(u)}},c=p=>{try{a(r.throw(p))}catch(u){n(u)}},a=p=>p.done?o(p.value):Promise.resolve(p.value).then(i,c);a((r=r.apply(l,t)).next())});import{_ as I}from"./index.a731e53b.js";import{a as E}from"./replace-all.7cf5f327.js";import{d as N}from"./main.ea42d807.js";import{d as q,g as k}from"./i18n.48bd28ac.js";import{_ as H}from"./editable-tags.e8873ae5.js";import{u as L}from"./useTag.2282521e.js";import{E as M}from"./index.fc90f5ad.js";import{E as G,a as J}from"./index.6855d037.js";import{d as $,o as b,j as y,w as s,b as e,u as m,f as C,k as S,g as _,a as B,F as K,b6 as P,aH as F,t as g}from"./url.2e6a77c4.js";import{E as A}from"./index.c4e9b529.js";import{c as Q}from"./index.0d2684bf.js";import{E as R}from"./windi.a5b0b048.js";import{E as W}from"./index.379e80ad.js";import{E as X}from"./index.2bc50276.js";const T=q.global.t,$e=l=>N.post(E("Customer/list"),l),De=l=>N.get(E("Customer/GetEdit"),{id:l}),Ue=l=>N.get(E("Customer/Get"),{id:l}),Y=l=>N.post(E("Customer/create"),l,void 0,{successMessage:T("common.saveSuccess")}),we=l=>N.post(E("Customer/Edit"),l,void 0,{successMessage:T("common.saveSuccess")}),Be=l=>N.post(E("Customer/deletes"),{ids:l},void 0,{successMessage:T("common.deleteSuccess")}),Z={class:"grid grid-cols-2 gap-8"},h={class:"grid grid-cols-2 gap-8"},j=$({props:{model:null},setup(l){const{t}=k();return(r,o)=>{const n=M,i=G,c=J;return l.model?(b(),y(c,{key:0,"label-position":"top"},{default:s(()=>[e(i,{label:m(t)("common.country")},{default:s(()=>[e(n,{modelValue:l.model.country,"onUpdate:modelValue":o[0]||(o[0]=a=>l.model.country=a)},null,8,["modelValue"])]),_:1},8,["label"]),C("div",Z,[e(i,{label:m(t)("common.city")},{default:s(()=>[e(n,{modelValue:l.model.city,"onUpdate:modelValue":o[1]||(o[1]=a=>l.model.city=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:m(t)("common.province")},{default:s(()=>[e(n,{modelValue:l.model.province,"onUpdate:modelValue":o[2]||(o[2]=a=>l.model.province=a)},null,8,["modelValue"])]),_:1},8,["label"])]),e(i,{label:m(t)("common.address")},{default:s(()=>[e(n,{modelValue:l.model.address1,"onUpdate:modelValue":o[3]||(o[3]=a=>l.model.address1=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:m(t)("common.postalCode")},{default:s(()=>[e(n,{modelValue:l.model.zip,"onUpdate:modelValue":o[4]||(o[4]=a=>l.model.zip=a)},null,8,["modelValue"])]),_:1},8,["label"]),C("div",h,[e(i,{label:m(t)("common.firstName")},{default:s(()=>[e(n,{modelValue:l.model.firstName,"onUpdate:modelValue":o[5]||(o[5]=a=>l.model.firstName=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:m(t)("common.lastName")},{default:s(()=>[e(n,{modelValue:l.model.lastName,"onUpdate:modelValue":o[6]||(o[6]=a=>l.model.lastName=a)},null,8,["modelValue"])]),_:1},8,["label"])]),e(i,{label:m(t)("common.phone")},{default:s(()=>[e(n,{modelValue:l.model.phone,"onUpdate:modelValue":o[7]||(o[7]=a=>l.model.phone=a)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):S("",!0)}}}),ee=$({props:{modelValue:{type:Boolean}},emits:["update:modelValue","create"],setup(l,{emit:t}){const{t:r}=k(),o=_(!0),n=_({country:"",address1:"",address2:"",city:"",firstName:"",lastName:"",phone:"",province:"",zip:"",isDefault:!0});function i(){return w(this,null,function*(){t("create",n.value),o.value=!1})}return(c,a)=>{const p=I,u=A;return b(),y(u,{"model-value":o.value,width:"600px",title:m(r)("common.createAddress"),"close-on-click-modal":!1,onClosed:a[1]||(a[1]=f=>t("update:modelValue",!1))},{footer:s(()=>[e(p,{onConfirm:i,onCancel:a[0]||(a[0]=f=>o.value=!1)})]),default:s(()=>[e(j,{model:n.value},null,8,["model"])]),_:1},8,["model-value","title"])}}}),le=$({props:{modelValue:{type:Boolean},model:null},emits:["update:modelValue","update"],setup(l,{emit:t}){const r=l,{t:o}=k(),n=_(!0),i=_(JSON.parse(JSON.stringify(r.model)));function c(){return w(this,null,function*(){t("update",i.value),n.value=!1})}return(a,p)=>{const u=I,f=A;return b(),y(f,{"model-value":n.value,width:"600px",title:m(o)("common.createAddress"),"close-on-click-modal":!1,onClosed:p[2]||(p[2]=d=>t("update:modelValue",!1))},{footer:s(()=>[e(u,{onConfirm:c,onCancel:p[1]||(p[1]=d=>n.value=!1)})]),default:s(()=>[e(j,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=d=>i.value=d),model:i.value},null,8,["modelValue","model"])]),_:1},8,["model-value","title"])}}}),oe={class:"w-full"},te={class:"space-y-8"},ae={class:"flex items-center space-x-8"},se=C("div",{class:"flex-1"},null,-1),ne={class:"p-4"},de={class:"text-s"},ue={class:"flex items-center"},me=$({props:{list:null},setup(l){const t=l,{t:r}=k(),o=_(!1),n=_(!1),i=_();function c(f){t.list.forEach(d=>d.isDefault=!1),t.list.push(f)}function a(f){var d=t.list.indexOf(i.value);t.list.splice(d,1,f)}function p(f){t.list.forEach(d=>d.isDefault=!1),f.isDefault=!0}function u(f){t.list.splice(f,1),t.list.length&&t.list.every(d=>!d.isDefault)&&(t.list[0].isDefault=!0)}return(f,d)=>{const D=Q,x=R,U=W,V=X;return b(),B("div",oe,[C("div",te,[(b(!0),B(K,null,P(l.list,(v,O)=>(b(),B("div",{key:O,class:"border border-gray p-12 rounded-normal space-y-4"},[C("div",ae,[v.isDefault?(b(),y(D,{key:0,round:"",type:"success"},{default:s(()=>[F(g(m(r)("common.default")),1)]),_:1})):(b(),y(D,{key:1,round:"",type:"info",class:"cursor-pointer",onClick:z=>p(v)},{default:s(()=>[F(g(m(r)("common.setAsDefault")),1)]),_:2},1032,["onClick"])),se,e(U,{placement:"top",content:m(r)("common.edit")},{default:s(()=>[e(x,{class:"iconfont icon-a-writein hover:text-blue text-l",onClick:z=>{i.value=v,n.value=!0}},null,8,["onClick"])]),_:2},1032,["content"]),e(U,{placement:"top",content:m(r)("common.delete")},{default:s(()=>[e(x,{class:"iconfont icon-delete text-orange text-l",onClick:z=>u(O)},null,8,["onClick"])]),_:2},1032,["content"])]),C("div",ne,[C("div",null,g(v.firstName)+" "+g(v.lastName)+" "+g(v.phone),1),C("div",de,g(v.country)+" "+g(v.city)+" "+g(v.province)+" "+g(v.zip)+" "+g(v.address1),1)])]))),128)),e(V,{round:"",type:"primary",onClick:d[0]||(d[0]=v=>o.value=!0)},{default:s(()=>[C("div",ue,[e(x,{class:"mr-16 iconfont icon-a-addto"}),F(" "+g(m(r)("common.addAddress")),1)])]),_:1})]),o.value?(b(),y(ee,{key:0,modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=v=>o.value=v),onCreate:c},null,8,["modelValue"])):S("",!0),n.value?(b(),y(le,{key:1,modelValue:n.value,"onUpdate:modelValue":d[2]||(d[2]=v=>n.value=v),model:i.value,onUpdate:a},null,8,["modelValue","model"])):S("",!0)])}}}),re={class:"grid grid-cols-2 gap-8"},Fe=$({props:{modelValue:{type:Boolean}},emits:["update:modelValue","reload"],setup(l,{emit:t}){const{t:r}=k(),o=_(!0),{tags:n,removeTag:i}=L("Customer"),c=_({firstName:"",lastName:"",email:"",phone:"",tags:[],addresses:[]});function a(){return w(this,null,function*(){yield Y(c.value),t("reload"),o.value=!1})}return(p,u)=>{const f=M,d=G,D=J,x=I,U=A;return b(),y(U,{"model-value":o.value,width:"800px",title:m(r)("common.create"),"close-on-click-modal":!1,onClosed:u[6]||(u[6]=V=>t("update:modelValue",!1))},{footer:s(()=>[e(x,{onConfirm:a,onCancel:u[5]||(u[5]=V=>o.value=!1)})]),default:s(()=>[e(D,{"label-position":"top"},{default:s(()=>[C("div",re,[e(d,{label:m(r)("common.firstName")},{default:s(()=>[e(f,{modelValue:c.value.firstName,"onUpdate:modelValue":u[0]||(u[0]=V=>c.value.firstName=V)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:m(r)("common.lastName")},{default:s(()=>[e(f,{modelValue:c.value.lastName,"onUpdate:modelValue":u[1]||(u[1]=V=>c.value.lastName=V)},null,8,["modelValue"])]),_:1},8,["label"])]),e(d,{label:m(r)("common.email")},{default:s(()=>[e(f,{modelValue:c.value.email,"onUpdate:modelValue":u[2]||(u[2]=V=>c.value.email=V)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:m(r)("common.phone")},{default:s(()=>[e(f,{modelValue:c.value.phone,"onUpdate:modelValue":u[3]||(u[3]=V=>c.value.phone=V)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:m(r)("common.tag")},{default:s(()=>[e(H,{modelValue:c.value.tags,"onUpdate:modelValue":u[4]||(u[4]=V=>c.value.tags=V),"option-deletable":"",options:m(n),onDeleteOption:m(i)},null,8,["modelValue","options","onDeleteOption"])]),_:1},8,["label"]),e(d,{label:m(r)("common.addresses")},{default:s(()=>[e(me,{list:c.value.addresses},null,8,["list"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model-value","title"])}}});export{Fe as _,Ue as a,ee as b,De as c,me as d,we as e,Be as f,$e as g};
