import{c as E,u as x,_ as me,X,Y as se,M as Ne,b as pe,t as Ae,P as Pe,E as Ce,d as re,m as Be,a9 as Oe,w as Le,r as ve}from"./windi.a5b0b048.js";import{t as Y}from"./aria.75ec5909.js";import{a as Re,T as We,v as De,c as ye}from"./i18n.48bd28ac.js";import{d as j,o as B,j as Ie,w as ie,r as N,aT as je,c as p,B as Q,g as I,E as fe,i as J,b2 as ce,h as he,aW as ke,U as g,e as Ee,F as be,A as Me,p as D,W as Ve,K as Fe,as as qe,N as Ue,a as Z,f as de,n as ee,aH as Ge,t as He}from"./url.2e6a77c4.js";import{_ as Ke}from"./index.ad581bad.js";import{E as Se,a as Xe}from"./index.379e80ad.js";import{T as Ye}from"./index.2bc50276.js";import{t as te}from"./error.7e8331f1.js";const Je=function(e){for(const n of e){const t=n.target.__resizeListeners__||[];t.length&&t.forEach(l=>{l()})}},Qe=function(e,n){!Re||!e||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new ResizeObserver(Je),e.__ro__.observe(e)),e.__resizeListeners__.push(n))},Ze=function(e,n){var t;!e||!e.__resizeListeners__||(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(n),1),e.__resizeListeners__.length||(t=e.__ro__)==null||t.disconnect())},et={beforeMount(e,n){e._handleResize=()=>{var t;e&&((t=n.value)==null||t.call(n,e))},Qe(e,e._handleResize)},beforeUnmount(e){Ze(e,e._handleResize)}};class tt{constructor(n,t){this.parent=n,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(n){n===this.subMenuItems.length?n=0:n<0&&(n=this.subMenuItems.length-1),this.subMenuItems[n].focus(),this.subIndex=n}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",l=>{let u=!1;switch(l.code){case E.down:{this.gotoSubIndex(this.subIndex+1),u=!0;break}case E.up:{this.gotoSubIndex(this.subIndex-1),u=!0;break}case E.tab:{Y(n,"mouseleave");break}case E.enter:case E.space:{u=!0,l.currentTarget.click();break}}return u&&(l.preventDefault(),l.stopPropagation()),!1})})}}class nt{constructor(n,t){this.domNode=n,this.submenu=null,this.submenu=null,this.init(t)}init(n){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${n}-menu`);t&&(this.submenu=new tt(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",n=>{let t=!1;switch(n.code){case E.down:{Y(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case E.up:{Y(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case E.tab:{Y(n.currentTarget,"mouseleave");break}case E.enter:case E.space:{t=!0,n.currentTarget.click();break}}t&&n.preventDefault()})}}class ot{constructor(n,t){this.domNode=n,this.init(t)}init(n){const t=this.domNode.childNodes;Array.from(t).forEach(l=>{l.nodeType===1&&new nt(l,n)})}}const st=j({name:"ElMenuCollapseTransition",setup(){const e=x("menu");return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,l){X(t,`${e.namespace.value}-opacity-transition`),t.style.opacity="1",l()},onAfterEnter(t){se(t,`${e.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),Ne(t,e.m("collapse"))?(se(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),X(t,e.m("collapse"))):(X(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),se(t,e.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){X(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function at(e,n,t,l,u,_){return B(),Ie(We,je({mode:"out-in"},e.listeners),{default:ie(()=>[N(e.$slots,"default")]),_:3},16)}var lt=me(st,[["render",at],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function xe(e,n){const t=p(()=>{let u=e.parent;const _=[n.value];for(;u.type.name!=="ElMenu";)u.props.index&&_.unshift(u.props.index),u=u.parent;return _});return{parentMenu:p(()=>{let u=e.parent;for(;u&&!["ElMenu","ElSubMenu"].includes(u.type.name);)u=u.parent;return u}),indexPath:t}}function ut(e){return p(()=>{const t=e.backgroundColor;return t?new Ye(t).shade(20).toString():""})}const Te=(e,n)=>{const t=x("menu");return p(()=>t.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":ut(e).value||"","active-color":e.activeTextColor||"",level:`${n}`}))},rt=pe({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6}}),ae="ElSubMenu";var ge=j({name:ae,props:rt,setup(e,{slots:n,expose:t}){const l=Me(),{indexPath:u,parentMenu:_}=xe(l,p(()=>e.index)),d=x("menu"),M=x("sub-menu"),s=Q("rootMenu");s||te(ae,"can not inject root menu");const i=Q(`subMenu:${_.value.uid}`);i||te(ae,"can not inject sub menu");const v=I({}),y=I({});let C;const V=I(!1),O=I(),T=I(null),A=p(()=>c.value==="horizontal"&&P.value?"bottom-start":"right-start"),ne=p(()=>c.value==="horizontal"&&P.value||c.value==="vertical"&&!s.props.collapse?Ae:Pe),P=p(()=>i.level===0),L=p(()=>e.popperAppendToBody===void 0?P.value:Boolean(e.popperAppendToBody)),F=p(()=>s.props.collapse?`${d.namespace.value}-zoom-in-left`:`${d.namespace.value}-zoom-in-top`),q=p(()=>c.value==="horizontal"&&P.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),$=p(()=>s.openedMenus.includes(e.index)),o=p(()=>{let m=!1;return Object.values(v.value).forEach(h=>{h.active&&(m=!0)}),Object.values(y.value).forEach(h=>{h.active&&(m=!0)}),m}),a=p(()=>s.props.backgroundColor||""),r=p(()=>s.props.activeTextColor||""),f=p(()=>s.props.textColor||""),c=p(()=>s.props.mode),k=fe({index:e.index,indexPath:u,active:o}),U=p(()=>c.value!=="horizontal"?{color:f.value}:{borderBottomColor:o.value?s.props.activeTextColor?r.value:"":"transparent",color:o.value?r.value:f.value}),_e=()=>{var m,h,b;return(b=(h=(m=T.value)==null?void 0:m.popperRef)==null?void 0:h.popperInstanceRef)==null?void 0:b.destroy()},G=m=>{m||_e()},w=()=>{s.props.menuTrigger==="hover"&&s.props.mode==="horizontal"||s.props.collapse&&s.props.mode==="vertical"||e.disabled||s.handleSubMenuClick({index:e.index,indexPath:u.value,active:o.value})},z=(m,h=e.showTimeout)=>{var b;m.type!=="focus"&&(s.props.menuTrigger==="click"&&s.props.mode==="horizontal"||!s.props.collapse&&s.props.mode==="vertical"||e.disabled||(i.mouseInChild.value=!0,C==null||C(),{stop:C}=ye(()=>{s.openMenu(e.index,u.value)},h),L.value&&((b=_.value.vnode.el)==null||b.dispatchEvent(new MouseEvent("mouseenter")))))},R=(m=!1)=>{var h,b;s.props.menuTrigger==="click"&&s.props.mode==="horizontal"||!s.props.collapse&&s.props.mode==="vertical"||(C==null||C(),i.mouseInChild.value=!1,{stop:C}=ye(()=>!V.value&&s.closeMenu(e.index,u.value),e.hideTimeout),L.value&&m&&((h=l.parent)==null?void 0:h.type.name)==="ElSubMenu"&&((b=i.handleMouseleave)==null||b.call(i,!0)))};J(()=>s.props.collapse,m=>G(Boolean(m)));{const m=b=>{y.value[b.index]=b},h=b=>{delete y.value[b.index]};ce(`subMenu:${l.uid}`,{addSubMenu:m,removeSubMenu:h,handleMouseleave:R,mouseInChild:V,level:i.level+1})}return t({opened:$}),he(()=>{s.addSubMenu(k),i.addSubMenu(k)}),ke(()=>{i.removeSubMenu(k),s.removeSubMenu(k)}),()=>{var m;const h=[(m=n.title)==null?void 0:m.call(n),g(Ce,{class:M.e("icon-arrow")},{default:()=>g(ne.value)})],b=Te(s.props,i.level+1),H=s.isMenuPopup?g(Se,{ref:T,visible:$.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:A.value,teleported:L.value,fallbackPlacements:q.value,transition:F.value,gpuAcceleration:!1},{content:()=>{var S;return g("div",{class:[d.m(c.value),d.m("popup-container"),e.popperClass],onMouseenter:W=>z(W,100),onMouseleave:()=>R(!0),onFocus:W=>z(W,100)},[g("ul",{class:[d.b(),d.m("popup"),d.m(`popup-${A.value}`)],style:b.value},[(S=n.default)==null?void 0:S.call(n)])])},default:()=>g("div",{class:M.e("title"),style:[U.value,{backgroundColor:a.value}],onClick:w},h)}):g(be,{},[g("div",{class:M.e("title"),style:[U.value,{backgroundColor:a.value}],ref:O,onClick:w},h),g(Ke,{},{default:()=>{var S;return Ee(g("ul",{role:"menu",class:[d.b(),d.m("inline")],style:b.value},[(S=n.default)==null?void 0:S.call(n)]),[[De,$.value]])}})]);return g("li",{class:[M.b(),M.is("active",o.value),M.is("opened",$.value),M.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:$.value,onMouseenter:z,onMouseleave:()=>R(!0),onFocus:z},[H])}}});const it=pe({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:re(Array),default:()=>Be([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0}}),le=e=>Array.isArray(e)&&e.every(n=>D(n)),ct={close:(e,n)=>D(e)&&le(n),open:(e,n)=>D(e)&&le(n),select:(e,n,t,l)=>D(e)&&le(n)&&Ve(t)&&(l===void 0||l instanceof Promise)};var dt=j({name:"ElMenu",props:it,emits:ct,setup(e,{emit:n,slots:t,expose:l}){const u=Me(),_=u.appContext.config.globalProperties.$router,d=I(),M=x("menu"),s=x("sub-menu"),i=I(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),v=I(e.defaultActive),y=I({}),C=I({}),V=p(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),O=()=>{const o=v.value&&y.value[v.value];if(!o||e.mode==="horizontal"||e.collapse)return;o.indexPath.forEach(r=>{const f=C.value[r];f&&T(r,f.indexPath)})},T=(o,a)=>{i.value.includes(o)||(e.uniqueOpened&&(i.value=i.value.filter(r=>a.includes(r))),i.value.push(o),n("open",o,a))},A=(o,a)=>{const r=i.value.indexOf(o);r!==-1&&i.value.splice(r,1),n("close",o,a)},ne=({index:o,indexPath:a})=>{i.value.includes(o)?A(o,a):T(o,a)},P=o=>{(e.mode==="horizontal"||e.collapse)&&(i.value=[]);const{index:a,indexPath:r}=o;if(!(a===void 0||r===void 0))if(e.router&&_){const f=o.route||a,c=_.push(f).then(k=>(k||(v.value=a),k));n("select",a,r,{index:a,indexPath:r,route:f},c)}else v.value=a,n("select",a,r,{index:a,indexPath:r})},L=o=>{const a=y.value,r=a[o]||v.value&&a[v.value]||a[e.defaultActive];r?(v.value=r.index,O()):v.value=o},F=()=>{Fe(()=>u.proxy.$forceUpdate())};J(()=>e.defaultActive,o=>{y.value[o]||(v.value=""),L(o)}),J(y.value,()=>O()),J(()=>e.collapse,o=>{o&&(i.value=[])});{const o=c=>{C.value[c.index]=c},a=c=>{delete C.value[c.index]};ce("rootMenu",fe({props:e,openedMenus:i,items:y,subMenus:C,activeIndex:v,isMenuPopup:V,addMenuItem:c=>{y.value[c.index]=c},removeMenuItem:c=>{delete y.value[c.index]},addSubMenu:o,removeSubMenu:a,openMenu:T,closeMenu:A,handleMenuItemClick:P,handleSubMenuClick:ne})),ce(`subMenu:${u.uid}`,{addSubMenu:o,removeSubMenu:a,mouseInChild:I(!1),level:0})}he(()=>{O(),e.mode==="horizontal"&&new ot(u.vnode.el,M.namespace.value)}),l({open:a=>{const{indexPath:r}=C.value[a];r.forEach(f=>T(f,r))},close:A,handleResize:F});const q=o=>{const a=Array.isArray(o)?o:[o],r=[];return a.forEach(f=>{Array.isArray(f.children)?r.push(...q(f.children)):r.push(f)}),r},$=o=>e.mode==="horizontal"?Ee(o,[[et,F]]):o;return()=>{var o,a,r,f;let c=(a=(o=t.default)==null?void 0:o.call(t))!=null?a:[];const k=[];if(e.mode==="horizontal"&&d.value){const w=Array.from((f=(r=d.value)==null?void 0:r.childNodes)!=null?f:[]).filter(K=>K.nodeName!=="#text"||K.nodeValue),z=q(c),R=64,m=Number.parseInt(getComputedStyle(d.value).paddingLeft,10),h=Number.parseInt(getComputedStyle(d.value).paddingRight,10),b=d.value.clientWidth-m-h;let H=0,S=0;w.forEach((K,ze)=>{H+=K.offsetWidth||0,H<=b-R&&(S=ze+1)});const W=z.slice(0,S),oe=z.slice(S);(oe==null?void 0:oe.length)&&e.ellipsis&&(c=W,k.push(g(ge,{index:"sub-menu-more",class:s.e("hide-arrow")},{title:()=>g(Ce,{class:s.e("icon-more")},{default:()=>g(Oe)}),default:()=>oe})))}const U=Te(e,0),G=(w=>e.ellipsis?$(w):w)(g("ul",{key:String(e.collapse),role:"menubar",ref:d,style:U.value,class:{[M.b()]:!0,[M.m(e.mode)]:!0,[M.m("collapse")]:e.collapse}},[...c,...k]));return e.collapseTransition&&e.mode==="vertical"?g(lt,()=>G):G}}});const mt=pe({index:{type:re([String,null]),default:null},route:{type:re([String,Object])},disabled:Boolean}),pt={click:e=>D(e.index)&&Array.isArray(e.indexPath)},ue="ElMenuItem",vt=j({name:ue,components:{ElTooltip:Se},props:mt,emits:pt,setup(e,{emit:n}){const t=Me(),l=Q("rootMenu"),u=x("menu"),_=x("menu-item");l||te(ue,"can not inject root menu");const{parentMenu:d,indexPath:M}=xe(t,qe(e,"index")),s=Q(`subMenu:${d.value.uid}`);s||te(ue,"can not inject sub menu");const i=p(()=>e.index===l.activeIndex),v=fe({index:e.index,indexPath:M,active:i}),y=()=>{e.disabled||(l.handleMenuItemClick({index:e.index,indexPath:M.value,route:e.route}),n("click",v))};return he(()=>{s.addSubMenu(v),l.addMenuItem(v)}),ke(()=>{s.removeSubMenu(v),l.removeMenuItem(v)}),{Effect:Xe,parentMenu:d,rootMenu:l,active:i,nsMenu:u,nsMenuItem:_,handleClick:y}}});function ft(e,n,t,l,u,_){const d=Ue("el-tooltip");return B(),Z("li",{class:ee([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:n[0]||(n[0]=(...M)=>e.handleClick&&e.handleClick(...M))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(B(),Ie(d,{key:0,effect:e.Effect.DARK,placement:"right","fallback-placements":["left"],persistent:""},{content:ie(()=>[N(e.$slots,"title")]),default:ie(()=>[de("div",{class:ee(e.nsMenu.be("tooltip","trigger"))},[N(e.$slots,"default")],2)]),_:3},8,["effect"])):(B(),Z(be,{key:1},[N(e.$slots,"default"),N(e.$slots,"title")],64))],2)}var $e=me(vt,[["render",ft],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const ht={title:String},bt="ElMenuItemGroup",Mt=j({name:bt,props:ht,setup(){return{ns:x("menu-item-group")}}});function gt(e,n,t,l,u,_){return B(),Z("li",{class:ee(e.ns.b())},[de("div",{class:ee(e.ns.e("title"))},[e.$slots.title?N(e.$slots,"title",{key:1}):(B(),Z(be,{key:0},[Ge(He(e.title),1)],64))],2),de("ul",null,[N(e.$slots,"default")])],2)}var we=me(Mt,[["render",gt],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const Tt=Le(dt,{MenuItem:$e,MenuItemGroup:we,SubMenu:ge}),$t=ve($e);ve(we);const wt=ve(ge);export{wt as E,$t as a,Tt as b};
