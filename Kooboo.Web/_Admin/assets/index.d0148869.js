var x=(S,o,u)=>new Promise((D,h)=>{var v=s=>{try{_(u.next(s))}catch(r){h(r)}},b=s=>{try{_(u.throw(s))}catch(r){h(r)}},_=s=>s.done?D(s.value):Promise.resolve(s.value).then(v,b);_((u=u.apply(S,o)).next())});import{_ as I}from"./k-table.7d05e82e.js";import{d as P,M,cd as O,g as j,h as q,N as z,b7 as H,o as p,a as y,b as n,u as e,f as c,e as K,j as C,w as i,aH as d,t as a,k as B,F as L,b6 as G,n as N}from"./url.8f5ec20c.js";import{B as J}from"./breadcrumb.edaec300.js";import{g as Q}from"./i18n.bcd18f8a.js";import{u as w}from"./replace-all.d441bf14.js";import{d as U,a as W}from"./discount.d9c45514.js";import{u as $}from"./use-date.a1321c18.js";import{b as X}from"./confirm.eadb49f1.js";import{E as Y}from"./windi.19264205.js";import{E as Z}from"./index.aec72f69.js";import{E as tt}from"./index.b83a1079.js";import{c as et}from"./index.6d22f937.js";import{E as ot}from"./index.ec6ad7db.js";import"./sortable.esm.a99254e8.js";import"./icon-button.315b6443.js";import"./index.3a977dfb.js";import"./index.c80f5028.js";import"./main.582f9de6.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.564bc658.js";import"./isEqual.11d86bcc.js";import"./_baseIsEqual.547729d3.js";import"./index.5cbbc5d7.js";import"./event.776e7e11.js";import"./index.05e21f33.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./index.daafc4da.js";import"./index.59b1471f.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.79f78425.js";import"./dayjs.min.59f10137.js";import"./logo-transparent.1566007e.js";import"./index.10f642b2.js";import"./index.a3d8335f.js";import"./scroll.4888a9e9.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.eafcfd1f.js";import"./validator.b73911a9.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.9a83ee01.js";const nt={class:"p-24"},it={class:"flex items-center py-24 space-x-16"},at={class:"flex items-center"},st={class:"flex items-center"},rt={class:"text-black dark:text-[#cfd3dc]"},ct={class:"text-s"},mt={key:0},lt={class:"inline-flex items-center gap-4"},ie=P({setup(S){const{t:o}=Q(),D=M().meta.title,h=O(),v=j([]);function b(r){const l=new Date(r.startDate),g=new Date(r.endDate),f=new Date;return f<l?"notStart":f>l&&f<g?"active":"expire"}function _(r){return x(this,null,function*(){yield X(r.length),yield U(r.map(l=>l.id)),s()})}function s(){return x(this,null,function*(){v.value=yield W()})}return q(()=>x(this,null,function*(){s()})),(r,l)=>{const g=Y,f=Z,m=tt,k=et,F=ot,R=z("router-link"),V=I,A=H("hasPermission");return p(),y("div",nt,[n(J,{name:e(D)},null,8,["name"]),c("div",it,[K((p(),C(f,{round:"",onClick:l[0]||(l[0]=t=>e(h).push(e(w)({name:"discount create"})))},{default:i(()=>[c("div",at,[n(g,{class:"mr-16 iconfont icon-a-addto"}),d(" "+a(e(o)("common.create")),1)])]),_:1})),[[A,{feature:"discounts",action:"edit"}]])]),n(V,{data:v.value,"show-check":"",onDelete:_},{default:i(()=>[n(m,{label:e(o)("common.title")},{default:i(({row:t})=>[c("div",st,[c("span",rt,a(t.title),1)])]),_:1},8,["label"]),n(m,{label:e(o)("commerce.discountCode"),align:"center"},{default:i(({row:t})=>[t.method=="DiscountCode"?(p(),C(k,{key:0},{default:i(()=>[d(a(t.code),1)]),_:2},1024)):B("",!0)]),_:1},8,["label"]),n(m,{label:e(o)("common.condition"),align:"center"},{default:i(({row:t})=>[c("div",ct,[(p(!0),y(L,null,G(t.condition.items,(E,T)=>(p(),y("div",{key:T},[T>0?(p(),y("span",mt,a(t.condition.isAny?e(o)("common.or"):e(o)("common.and")),1)):B("",!0),d(" "+a(E.option)+" "+a(E.method)+" "+a(E.value),1)]))),128))])]),_:1},8,["label"]),n(m,{label:e(o)("common.priority"),width:"120",align:"center"},{default:i(({row:t})=>[d(a(t.priority),1)]),_:1},8,["label"]),n(m,{label:e(o)("commerce.isExclusion"),width:"120",align:"center"},{default:i(({row:t})=>[c("span",{class:N(t.isExclusion?"text-green":"")},a(t.isExclusion?e(o)("common.yes"):e(o)("common.no")),3)]),_:1},8,["label"]),n(m,{label:e(o)("common.activeDateRange"),width:"180",align:"center"},{default:i(({row:t})=>[c("div",{class:N(["text-s",{"text-orange":b(t)=="expire","text-green":b(t)=="active"}])},[c("div",null,a(e($)(t.startDate)),1),c("div",null,a(e($)(t.endDate)),1)],2)]),_:1},8,["label"]),n(m,{label:e(o)("commerce.discount"),align:"center"},{default:i(({row:t})=>[c("div",lt,[n(k,{type:"success",round:""},{default:i(()=>[d(a(t.type=="FreeShipping"?e(o)("commerce.freeShipping"):t.type=="OrderAmountOff"?e(o)("commerce.order"):e(o)("common.products")),1)]),_:2},1024),t.type!="FreeShipping"?(p(),C(k,{key:0,round:"",type:"warning"},{default:i(()=>[d(a(t.isPercent?`-${t.value}%`:`-$${t.value}`),1)]),_:2},1024)):B("",!0)])]),_:1},8,["label"]),n(m,{align:"right",width:"60"},{default:i(({row:t})=>[n(R,{to:e(w)({name:"discount edit",query:{id:t.id}}),class:"mx-8"},{default:i(()=>[n(F,{placement:"top",content:e(o)("common.edit")},{default:i(()=>[n(g,{class:"iconfont icon-a-writein hover:text-blue text-l"})]),_:1},8,["content"])]),_:2},1032,["to"])]),_:1})]),_:1},8,["data"])])}}});export{ie as default};
