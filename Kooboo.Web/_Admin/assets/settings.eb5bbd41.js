var ue=Object.defineProperty;var oe=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var te=($,a,t)=>a in $?ue($,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):$[a]=t,ae=($,a)=>{for(var t in a||(a={}))ie.call(a,t)&&te($,t,a[t]);if(oe)for(var t of oe(a))de.call(a,t)&&te($,t,a[t]);return $};var G=($,a,t)=>new Promise((c,r)=>{var i=b=>{try{p(t.next(b))}catch(V){r(V)}},f=b=>{try{p(t.throw(b))}catch(V){r(V)}},p=b=>b.done?c(b.value):Promise.resolve(b.value).then(i,f);p((t=t.apply($,a)).next())});import{_ as ee}from"./icon-button.e1f3bfd2.js";import{_ as K}from"./tooltip.7fc982a4.js";import{a as l,i as me,o as re,e as Y,_ as A,b as ce,l as pe}from"./request-access-limit.2c6b8e59.js";import{n as fe,o as ve,u as Q,p as _e,i as be,b as Ve}from"./main.52487121.js";import{g as I,w as H}from"./i18n.97105311.js";import{E as j}from"./index.4587e608.js";import{E as O,a as ye}from"./index.317a7f30.js";import{E as W,a as z}from"./index.afee24fe.js";import{E as Z}from"./index.00cc1b15.js";import{E as ge}from"./windi.539ebeab.js";import{E as ne}from"./index.b09a9f00.js";import{E as ke}from"./index.57372297.js";import{d as D,g as E,b7 as xe,u as e,o as _,a as U,f as m,b as o,w as s,aH as R,t as h,F as T,b6 as L,j as k,k as C,e as he,i as q,c as X,c0 as Ce,az as Se,h as we,J as Ue,cj as $e}from"./url.2e6a77c4.js";import{_ as Pe}from"./key-value-editor.12c3b400.js";import{b as J,a as Ee}from"./replace-all.8fa5a83d.js";import{E as se}from"./index.1d8a0bb0.js";import{M as Te}from"./media-dialog.fc4bbfea.js";import"./validate.98ddbafd.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.4f5fb1ef.js";import{_ as De}from"./index.9ffc2c80.js";import{_ as Le,a as Re}from"./dev-mode.2a667dd5.js";import{U as Ie}from"./editor.main.d2800f63.js";import{b as Oe,a as Be}from"./index.6302b2c1.js";import{E as Me}from"./index.4b289bae.js";import{T as Ae}from"./index.5ab64926.js";import{c as Ne}from"./country-and-region-codes.c36488d2.js";import{E as Je}from"./index.c1764395.js";import{E as qe}from"./index.5bcdbf0f.js";import{u as Fe}from"./use-save-tip.aeb07244.js";const je={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px"},We={class:"max-w-504px"},ze={class:"flex items-center"},Ge={key:0,class:"!-ml-56px !-mr-56px !px-56px bg-[#fafafa] dark:bg-[#333]"},He={class:"max-w-504px py-16 mb-18px"},Ke={class:"space-y-8 w-full"},Ye={class:"max-w-504px"},Qe={class:"flex items-center space-x-16"},Xe=D({emits:["export","initSite"],setup($,{emit:a}){const{t}=I(),c=E();fe().then(V=>c.value=V);const r=E({o:"private",p:"public",m:"member"}),i=V=>G(this,null,function*(){yield re(V),a("initSite")}),f=()=>{Array.isArray(l.value.specialPath)||(l.value.specialPath=[]),l.value.specialPath.push("")},p=V=>{l.value.specialPath.splice(V,1)},b=E([{value:!0,name:"Contain",title:t("common.IncludePath")},{value:!1,name:"Exclude",title:t("common.ExcludePath")}]);return(V,u)=>{const n=j,d=O,g=K,y=W,v=z,S=ee,w=Z,N=ge,x=ne,F=ke,B=xe("hasPermission");return e(l)?(_(),U("div",je,[m("div",We,[o(d,{label:e(t)("common.displayName")},{default:s(()=>[o(n,{modelValue:e(l).displayName,"onUpdate:modelValue":u[0]||(u[0]=P=>e(l).displayName=P),"data-cy":"display-name"},null,8,["modelValue"])]),_:1},8,["label"]),o(d,null,{label:s(()=>[m("div",ze,[R(h(e(t)("common.defaultDatabase"))+" ",1),o(g,{tip:e(t)("common.defaultDataBaseTips"),"custom-class":"ml-4"},null,8,["tip"])])]),default:s(()=>[o(v,{modelValue:e(l).defaultDatabase,"onUpdate:modelValue":u[1]||(u[1]=P=>e(l).defaultDatabase=P),class:"w-full"},{default:s(()=>[o(y,{value:"Auto",label:e(t)("common.auto"),"data-cy":"auto"},null,8,["label"]),o(y,{value:"Sqlite",label:"Sqlite","data-cy":"sqlite"}),o(y,{value:"Mysql",label:"Mysql","data-cy":"mysql"}),o(y,{value:"SqlServer",label:"SqlServer","data-cy":"sqlserver"})]),_:1},8,["modelValue"])]),_:1}),o(d,{label:e(t)("common.siteType")},{default:s(()=>[o(v,{modelValue:e(l).siteType,"onUpdate:modelValue":u[2]||(u[2]=P=>e(l).siteType=P),class:"w-full","data-cy":"site-type"},{default:s(()=>[(_(!0),U(T,null,L(c.value,(P,M)=>(_(),k(y,{key:M,value:M,label:P,"data-cy":r.value[M]},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),e(l).siteType!=="p"?(_(),U("div",Ge,[m("div",He,[o(d,{label:e(t)("common.PathPattern")},{default:s(()=>[o(v,{modelValue:e(l).includePath,"onUpdate:modelValue":u[3]||(u[3]=P=>e(l).includePath=P),class:"w-full","data-cy":"site-type"},{default:s(()=>[(_(!0),U(T,null,L(b.value,(P,M)=>(_(),k(y,{key:M,value:P.value,label:P.title,"data-cy":P.title},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(d,{label:e(t)("common.path")},{default:s(()=>[m("div",Ke,[(_(!0),U(T,null,L(e(l).specialPath,(P,M)=>(_(),U("div",{key:M,class:"flex items-center space-x-8 w-full"},[o(n,{modelValue:e(l).specialPath[M],"onUpdate:modelValue":le=>e(l).specialPath[M]=le,placeholder:e(t)("common.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),m("div",null,[o(S,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:e(t)("common.delete"),onClick:le=>p(M)},null,8,["tip","onClick"])])]))),128)),o(S,{circle:"",class:"text-blue",icon:"icon-a-addto ",tip:e(t)("common.add"),onClick:f},null,8,["tip"])])]),_:1},8,["label"]),o(d,{label:e(t)("common.singleSignOn")},{default:s(()=>[o(w,{modelValue:e(l).ssoLogin,"onUpdate:modelValue":u[4]||(u[4]=P=>e(l).ssoLogin=P)},null,8,["modelValue"])]),_:1},8,["label"])])])):C("",!0),m("div",Ye,[o(d,{label:"Base URL"},{default:s(()=>[o(n,{modelValue:e(l).previewUrl,"onUpdate:modelValue":u[5]||(u[5]=P=>e(l).previewUrl=P),"data-cy":"base-url"},null,8,["modelValue"])]),_:1}),o(d,{label:e(t)("common.import/exportSite")},{default:s(()=>[m("div",Qe,[o(F,{"show-file-list":!1,action:"",accept:e(me).join(","),"auto-upload":!1,"on-change":i,"data-cy":"import-package"},{default:s(()=>[o(x,{round:""},{default:s(()=>[o(N,{class:"iconfont icon-a-Pullin"}),R(" "+h(e(t)("common.importPackage")),1)]),_:1})]),_:1},8,["accept"]),he((_(),k(x,{round:"","data-cy":"export-site",onClick:u[6]||(u[6]=P=>V.$emit("export"))},{default:s(()=>[o(N,{class:"iconfont icon-share"}),R(" "+h(e(t)("common.exportSite")),1)]),_:1})),[[B,{feature:"site",action:"export"}]])])]),_:1},8,["label"])])])):C("",!0)}}}),Ze={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 py-24 px-56px"},el={class:"max-w-504px"},ll={class:"flex items-center"},ol=D({setup($){const{t:a}=I(),t=E([]);if(Y.onCustomSettingsSave=c=>{c.customSettings=J(t.value)},l.value)for(const c in l.value.customSettings)t.value.push({key:c,value:l.value.customSettings[c]});return q(()=>t.value,()=>{l.value&&(l.value.customSettings=J(t.value))},{deep:!0}),(c,r)=>{const i=K,f=Pe,p=O;return e(l)?(_(),U("div",Ze,[m("div",el,[o(p,null,{label:s(()=>[m("div",ll,[R(h(e(a)("common.customSettings"))+" ",1),o(i,{tip:e(a)("common.customSettingsTips"),"custom-class":"ml-4"},null,8,["tip"])])]),default:s(()=>[o(f,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=b=>t.value=b)},null,8,["modelValue"])]),_:1})])])):C("",!0)}}}),tl=D({setup($){const{t:a}=I();return(t,c)=>{const r=W,i=z,f=O,p=se;return e(l)?(_(),k(A,{key:0,modelValue:e(l).codeLogSettings.enable,"onUpdate:modelValue":c[2]||(c[2]=b=>e(l).codeLogSettings.enable=b),label:e(a)("common.codeLog")},{default:s(()=>[o(f,{label:e(a)("codelog.level")},{default:s(()=>[o(i,{modelValue:e(l).codeLogSettings.logLevel,"onUpdate:modelValue":c[0]||(c[0]=b=>e(l).codeLogSettings.logLevel=b),class:"w-full","data-cy":"level"},{default:s(()=>[o(r,{value:"Debug",label:e(a)("common.debug"),"data-cy":"Debug"},null,8,["label"]),o(r,{value:"Information",label:e(a)("common.information"),"data-cy":"Information"},null,8,["label"]),o(r,{value:"Warning",label:e(a)("common.warning"),"data-cy":"Warning"},null,8,["label"]),o(r,{value:"Error",label:e(a)("common.error"),"data-cy":"Error"},null,8,["label"]),o(r,{value:"Critical",label:e(a)("common.critical"),"data-cy":"Critical"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(f,{label:e(a)("common.keepDays")},{default:s(()=>[o(p,{modelValue:e(l).codeLogSettings.keepDays,"onUpdate:modelValue":c[1]||(c[1]=b=>e(l).codeLogSettings.keepDays=b),precision:0,min:1,"data-cy":"keey-days"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):C("",!0)}}}),al=D({setup($){const{t:a}=I();return(t,c)=>{const r=se,i=O;return e(l)?(_(),k(A,{key:0,modelValue:e(l).enableImageBrowserCache,"onUpdate:modelValue":c[1]||(c[1]=f=>e(l).enableImageBrowserCache=f),label:e(a)("common.imageBrowserCache")},{default:s(()=>[o(i,{label:e(a)("common.numberOfExpirationDaysAndUseVersionControl")},{default:s(()=>[o(r,{modelValue:e(l).imageCacheDays,"onUpdate:modelValue":c[0]||(c[0]=f=>e(l).imageCacheDays=f),precision:0,min:-1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):C("",!0)}}}),nl={class:"flex items-center w-full"},sl={class:"mr-auto"},ul={class:"mr-12 text-666 flex items-center"},il={key:0,class:"w-full"},dl={class:"text-666 font-bold"},ml=D({setup($){const{t:a}=I(),t=E([]);Y.onLighthouseSave=r=>{c(r)};const c=r=>{const i=[];for(const f of t.value){const p={};if(f.setting)for(const b of f.setting)p[b.name]=b.value;i.push({name:f.name,enable:f.enable,setting:p})}r.lighthouseSettingsJson=JSON.stringify(i)};if(l.value){const r=JSON.parse(l.value.lighthouseSettingsJson||"[]");ve().then(i=>{for(const f of i){const p=r.find(b=>b.name===f.name);if(p){f.enable=p.enable;for(const b in p.setting){const V=f.setting.find(u=>u.name===b);V&&(V.value=p[b])}}else f.enable=!0;t.value.push(f)}})}return q(()=>t.value,()=>{l.value&&l.value.lighthouseSettingsJson!==null&&c(l.value)},{deep:!0}),(r,i)=>{const f=K,p=Z,b=j,V=O;return e(l)&&t.value.length?(_(),k(A,{key:0,modelValue:e(l).enableLighthouseOptimization,"onUpdate:modelValue":i[0]||(i[0]=u=>e(l).enableLighthouseOptimization=u),label:e(a)("common.lighthouseOptimization")},{default:s(()=>[(_(!0),U(T,null,L(t.value,u=>(_(),k(V,{key:u.name},{default:s(()=>[m("div",nl,[m("div",sl,[m("div",ul,[R(h(u.name)+" ",1),o(f,{tip:u.description,"custom-class":"ml-4"},null,8,["tip"])])]),o(p,{modelValue:u.enable,"onUpdate:modelValue":n=>u.enable=n},null,8,["modelValue","onUpdate:modelValue"])]),u.enable?(_(),U("div",il,[(_(!0),U(T,null,L(u.setting,n=>(_(),U("div",{key:n.name,class:"mt-18px"},[m("span",dl,h(n.displayName||n.name),1),n.controlType==="Text"?(_(),k(b,{key:0,modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0),n.controlType==="Number"?(_(),k(b,{key:1,modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,modelModifiers:{number:!0},class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0),n.controlType==="Switch"?(_(),k(p,{key:2,modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,class:"float-right"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0)]))),128))])):C("",!0)]),_:2},1024))),128))]),_:1},8,["modelValue","label"])):C("",!0)}}}),rl=["src"],cl={class:"space-y-4"},pl={class:"px-12"},fl=D({setup($){const{t:a}=I(),t=E(),c=E(),r=E(!1),i=Q();l.value&&(t.value=JSON.parse(l.value.pwa.manifest),c.value=JSON.parse(l.value.pwa.serviceWorker)),Y.onPwaSave=u=>{u.pwa.manifest=JSON.stringify(t.value),u.pwa.serviceWorker=JSON.stringify(c.value)};const f=()=>{c.value.CacheSettings.push({Method:"get",Pattern:"",ExpiresIn:0})},p=u=>{c.value.CacheSettings.splice(u,1)},b=X(()=>Ee(t.value.icons[0].src)),V=u=>{if(u.length===1)for(const n of t.value.icons){n.src=u[0].url;let d=u[0].height,g=u[0].width;d||(d=32),g||(g=32),n.sizes=`${d}x${g}`}r.value=!1};return q(()=>t.value,()=>{l.value&&(l.value.pwa.manifest=JSON.stringify(t.value))},{deep:!0}),q(()=>c.value,()=>{l.value&&(l.value.pwa.serviceWorker=JSON.stringify(c.value))},{deep:!0}),(u,n)=>{const d=O,g=j,y=W,v=z,S=ee;return e(l)&&t.value?(_(),k(A,{key:0,modelValue:e(l).pwa.enable,"onUpdate:modelValue":n[7]||(n[7]=w=>e(l).pwa.enable=w),label:"PWA"},{default:s(()=>[o(d,{label:e(a)("common.icon")},{default:s(()=>[m("div",{class:"w-88px h-88px rounded-4px bg-gray flex items-center justify-center",onClick:n[0]||(n[0]=w=>r.value=!0)},[m("img",{src:e(Ce)(e(i).site.baseUrl,e(b))},null,8,rl)])]),_:1},8,["label"]),o(d,{label:e(a)("common.name")},{default:s(()=>[o(g,{modelValue:t.value.name,"onUpdate:modelValue":n[1]||(n[1]=w=>t.value.name=w),placeholder:e(a)("common.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(d,{label:e(a)("common.themeColor")},{default:s(()=>[o(g,{modelValue:t.value.theme_color,"onUpdate:modelValue":n[2]||(n[2]=w=>t.value.theme_color=w),placeholder:e(a)("common.themeColor")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(d,{label:e(a)("common.bgColor")},{default:s(()=>[o(g,{modelValue:t.value.background_color,"onUpdate:modelValue":n[3]||(n[3]=w=>t.value.background_color=w),placeholder:e(a)("common.bgColor")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(d,{label:e(a)("common.startUrl")},{default:s(()=>[o(g,{modelValue:t.value.start_url,"onUpdate:modelValue":n[4]||(n[4]=w=>t.value.start_url=w),placeholder:e(a)("common.startUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(d,{label:e(a)("common.display")},{default:s(()=>[o(v,{modelValue:t.value.display,"onUpdate:modelValue":n[5]||(n[5]=w=>t.value.display=w),class:"w-full"},{default:s(()=>[o(y,{value:"fullscreen",label:"fullscreen"}),o(y,{value:"standalone",label:"standalone"}),o(y,{value:"minimal-ui",label:"minimal-ui"}),o(y,{value:"browser",label:"browser"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(d,{label:"Service worker"},{default:s(()=>[m("div",cl,[(_(!0),U(T,null,L(c.value.CacheSettings,(w,N)=>(_(),U("div",{key:N,class:"flex items-center space-x-4"},[o(v,{modelValue:w.Method,"onUpdate:modelValue":x=>w.Method=x,class:"w-120px"},{default:s(()=>[o(y,{value:"get",label:"GET"}),o(y,{value:"put",label:"PUT"}),o(y,{value:"post",label:"POST"}),o(y,{value:"delete",label:"DELETE"}),o(y,{value:"head",label:"HEAD"}),o(y,{value:"any",label:"ALL"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(g,{modelValue:w.Pattern,"onUpdate:modelValue":x=>w.Pattern=x,class:"w-220px",placeholder:e(a)("common.exampleUrl")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),o(g,{modelValue:w.ExpiresIn,"onUpdate:modelValue":x=>w.ExpiresIn=x,modelModifiers:{number:!0},class:"w-150px"},{append:s(()=>[m("span",pl,h(e(a)("common.minutes")),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),m("div",null,[o(S,{circle:"",class:"text-orange",icon:"icon-delete",tip:e(a)("common.delete"),onClick:x=>p(N)},null,8,["tip","onClick"])])]))),128)),o(S,{circle:"",class:"text-blue",icon:"icon-a-addto",tip:e(a)("common.add"),onClick:f},null,8,["tip"])])]),_:1}),r.value?(_(),k(e(Te),{key:0,modelValue:r.value,"onUpdate:modelValue":n[6]||(n[6]=w=>r.value=w),onChoose:V},null,8,["modelValue"])):C("",!0)]),_:1},8,["modelValue"])):C("",!0)}}}),vl={class:"space-y-4 w-full"},_l={class:"flex items-center w-full"},bl={class:"font-bold text-666"},Vl=m("div",{class:"flex-1"},null,-1),yl={key:0,class:"space-y-4"},gl={class:"px-12 text-999"},kl={class:"font-bold text-666"},xl=m("div",{class:"flex-1"},null,-1),hl=D({setup($){const{t:a}=I(),t=E([]),c=E([]),r=E([]);if(Y.onMultilingualSave=u=>{u.enableMultilingual||(u.enableSitePath=!1,t.value=t.value.filter(n=>{var d;return n.key===((d=l.value)==null?void 0:d.defaultCulture)}),r.value=r.value.filter(n=>{var d;return n.key===((d=l.value)==null?void 0:d.defaultCulture)})),u.culture=J(t.value),u.sitePath=J(r.value)},l.value){for(const u in l.value.sitePath)r.value.push({key:u,value:l.value.sitePath[u]});for(const u in l.value.culture)t.value.push({key:u,value:l.value.culture[u]}),r.value.find(d=>d.key===u)||r.value.push({key:u,value:u});_e().then(u=>{for(const n in u)c.value.push({key:n,value:u[n]})})}const i=X(()=>{const u=[];for(const n of c.value)t.value.find(d=>d.key===n.key)||u.push(n);return u}),f=()=>{if(!i.value.length)return;const u=i.value[0];t.value.push(ae({},u)),V()},p=u=>{t.value.splice(u,1),V()},b=u=>{var g;const n=t.value.find(y=>y.key===u);/^[a-z]{2}$/.test(u)||be(a("common.cultureCodeTip"));const d=(g=c.value.find(y=>y.key===u))==null?void 0:g.value;d&&n&&(n.value=d),V()},V=()=>{var u;for(const n of r.value.map(d=>d.key))t.value.find(d=>d.key===n)||(r.value=r.value.filter(d=>d.key!==n));for(const n of t.value)r.value.find(d=>d.key===n.key)||r.value.push({key:n.key,value:n.key});l.value&&!t.value.find(n=>{var d;return n.key===((d=l.value)==null?void 0:d.defaultCulture)})&&(l.value.defaultCulture=(u=t.value[0])==null?void 0:u.key)};return q(()=>t.value,()=>{l.value&&(l.value.culture=J(t.value))},{deep:!0}),q(()=>r.value,()=>{l.value&&(l.value.sitePath=J(r.value))},{deep:!0}),(u,n)=>{const d=W,g=z,y=j,v=ee,S=O,w=K,N=Z;return e(l)?(_(),k(A,{key:0,modelValue:e(l).enableMultilingual,"onUpdate:modelValue":n[3]||(n[3]=x=>e(l).enableMultilingual=x),label:e(a)("common.multilingual")},{default:s(()=>[o(S,null,{default:s(()=>[m("div",vl,[(_(!0),U(T,null,L(t.value,(x,F)=>(_(),U("div",{key:F,class:"flex items-center space-x-4"},[o(g,{modelValue:x.key,"onUpdate:modelValue":B=>x.key=B,filterable:"","allow-create":"","default-first-option":"",onChange:b},{default:s(()=>[(_(!0),U(T,null,L(e(i),B=>(_(),k(d,{key:B.key,value:B.key,label:B.key},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(y,{modelValue:x.value,"onUpdate:modelValue":B=>x.value=B,placeholder:e(a)("common.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),m("div",null,[t.value.length>1?(_(),k(v,{key:0,circle:"",class:"text-orange",icon:"icon-delete",tip:e(a)("common.delete"),onClick:B=>p(F)},null,8,["tip","onClick"])):C("",!0)])]))),128)),e(i).length?(_(),k(v,{key:0,circle:"",class:"text-blue",icon:"icon-a-addto",tip:e(a)("common.add"),onClick:f},null,8,["tip"])):C("",!0)])]),_:1}),o(S,{label:e(a)("common.defaultLanguage")},{default:s(()=>[o(g,{modelValue:e(l).defaultCulture,"onUpdate:modelValue":n[0]||(n[0]=x=>e(l).defaultCulture=x),class:"w-full"},{default:s(()=>[(_(!0),U(T,null,L(t.value,x=>(_(),k(d,{key:x.key,value:x.key,label:x.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(S,null,{default:s(()=>[m("div",_l,[m("span",bl,h(e(a)("common.languagePath")),1),o(w,{tip:e(a)("common.languagePathTips"),"custom-class":"ml-4"},null,8,["tip"]),Vl,o(N,{modelValue:e(l).enableSitePath,"onUpdate:modelValue":n[1]||(n[1]=x=>e(l).enableSitePath=x)},null,8,["modelValue"])]),e(l).enableSitePath?(_(),U("div",yl,[(_(!0),U(T,null,L(r.value,x=>(_(),U("div",{key:x.key},[o(y,{modelValue:x.value,"onUpdate:modelValue":F=>x.value=F},{suffix:s(()=>[m("span",gl,h(x.key),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])):C("",!0)]),_:1}),o(S,null,{default:s(()=>[m("span",kl,h(e(a)("common.autoDetectCulture")),1),xl,o(N,{modelValue:e(l).autoDetectCulture,"onUpdate:modelValue":n[2]||(n[2]=x=>e(l).autoDetectCulture=x)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","label"])):C("",!0)}}}),Cl={class:"flex items-center justify-between w-full"},Sl=D({setup($){const{t:a}=I(),t=E(!1),c=E("");function r(){!l.value||(l.value.sitemapSettings.code=c.value,t.value=!1)}function i(){!l.value||(t.value=!0,c.value=l.value.sitemapSettings.code)}return(f,p)=>{const b=j,V=O,u=Oe,n=Be,d=ne,g=De,y=Me;return e(l)?(_(),k(A,{key:0,modelValue:e(l).sitemapSettings.enable,"onUpdate:modelValue":p[6]||(p[6]=v=>e(l).sitemapSettings.enable=v),label:e(a)("common.sitemap"),"tooltip-label":e(a)("common.sitemapTips")},{default:s(()=>[o(V,{label:e(a)("common.path")},{default:s(()=>[o(b,{modelValue:e(l).sitemapSettings.path,"onUpdate:modelValue":p[0]||(p[0]=v=>e(l).sitemapSettings.path=v)},null,8,["modelValue"])]),_:1},8,["label"]),o(V,{label:e(a)("common.generateType")},{default:s(()=>[m("div",Cl,[o(n,{modelValue:e(l).sitemapSettings.autoGenerate,"onUpdate:modelValue":p[1]||(p[1]=v=>e(l).sitemapSettings.autoGenerate=v)},{default:s(()=>[o(u,{label:!0},{default:s(()=>[R(h(e(a)("common.auto")),1)]),_:1}),o(u,{label:!1},{default:s(()=>[R(h(e(a)("common.manual")),1)]),_:1})]),_:1},8,["modelValue"]),e(l).sitemapSettings.autoGenerate?C("",!0):(_(),k(d,{key:0,type:"primary",size:"small",onClick:i},{default:s(()=>[R(h(e(a)("common.editCode")),1)]),_:1}))])]),_:1},8,["label"]),(_(),k(Se,{to:"body"},[o(y,{"model-value":t.value,"custom-class":"el-dialog--zero-padding",width:"800px","close-on-click-modal":!1,title:e(a)("common.editCode"),onClosed:p[5]||(p[5]=v=>t.value=!1)},{footer:s(()=>[o(g,{onConfirm:r,onCancel:p[4]||(p[4]=v=>t.value=!1)})]),default:s(()=>[m("div",{class:"h-500px",onKeydown:p[3]||(p[3]=H(()=>{},["stop"]))},[o(Le,{modelValue:c.value,"onUpdate:modelValue":p[2]||(p[2]=v=>c.value=v),language:"typescript","k-script":"",uri:e(Ie).file(e(l).id+"sitemap")},null,8,["modelValue","uri"])],32)]),_:1},8,["model-value","title"])]))]),_:1},8,["modelValue","label","tooltip-label"])):C("",!0)}}}),wl=D({setup($){const{t:a}=I();function t(c){l.value.tinymceSettings[c]=void 0}return(c,r)=>{const i=O;return _(),k(A,{modelValue:e(l).enableTinymceToolbarSettings,"onUpdate:modelValue":r[1]||(r[1]=f=>e(l).enableTinymceToolbarSettings=f),label:e(a)("common.richTextEditorConfigurationForContentType")},{default:s(()=>[o(i,{class:"w-800px mb-0"},{default:s(()=>[e(l).enableTinymceToolbarSettings?(_(),k(Ae,{key:0,modelValue:e(l).tinymceSettings,"onUpdate:modelValue":r[0]||(r[0]=f=>e(l).tinymceSettings=f),onReset:t},null,8,["modelValue"])):C("",!0)]),_:1})]),_:1},8,["modelValue","label"])}}}),Ul=D({setup($){var V,u;const{locale:a,t}=I(),c=E([]),r=X(()=>a.value==="zh"?"nameCN":"name"),{list:i,load:f}=Re(),p=E(i);Y.onVisitorCountryRestrictionsSave=n=>{n.visitorCountryRestrictions=J(c.value.map(d=>{var g,y;return{key:d,value:(y=(g=l.value)==null?void 0:g.visitorCountryRestrictionPage)!=null?y:""}}))},we(()=>G(this,null,function*(){var n;(n=p.value)!=null&&n.length||(p.value=yield f())})),l.value&&(l.value.enableVisitorCountryRestriction=(V=l.value.enableVisitorCountryRestriction)!=null?V:!1,l.value.visitorCountryRestrictionPage=(u=l.value.visitorCountryRestrictionPage)!=null?u:"",l.value.visitorCountryRestrictions&&(c.value=Object.keys(l.value.visitorCountryRestrictions)));const b=X(()=>Ne.sort((n,d)=>r.value==="nameCN"?n.namePY.localeCompare(d.namePY):n.name.localeCompare(d.name)));return q(()=>c.value,()=>{l.value&&(l.value.visitorCountryRestrictions=J(c.value.map(n=>{var d,g;return{key:n,value:(g=(d=l.value)==null?void 0:d.visitorCountryRestrictionPage)!=null?g:""}})))},{deep:!0}),(n,d)=>{const g=W,y=z,v=O;return e(l)?(_(),k(A,{key:0,modelValue:e(l).enableVisitorCountryRestriction,"onUpdate:modelValue":d[2]||(d[2]=S=>e(l).enableVisitorCountryRestriction=S),label:e(t)("common.visitorCountryRestriction")},{default:s(()=>[o(v,{label:e(t)("common.countryAndRegion")},{default:s(()=>[o(y,{modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=S=>c.value=S),multiple:"",filterable:"","default-first-option":"",class:"w-full","data-cy":"VisitorCountryRestriction"},{default:s(()=>[(_(!0),U(T,null,L(e(b),S=>(_(),k(g,{key:S.isoCode,value:S.isoCode.toLowerCase(),label:`${S[e(r)]} (${S.isoCode})`,"data-cy":S.isoCode},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(v,{label:e(t)("common.visitorCountryRestrictionPage")},{default:s(()=>[o(y,{modelValue:e(l).visitorCountryRestrictionPage,"onUpdate:modelValue":d[1]||(d[1]=S=>e(l).visitorCountryRestrictionPage=S),class:"w-full","data-cy":"VisitorCountryRestrictionPage"},{default:s(()=>[o(g,{value:"",label:e(t)("common.default"),"data-cy":"DefaultPage"},null,8,["label"]),(_(!0),U(T,null,L(p.value,S=>(_(),k(g,{key:S.id,value:S.path,label:S.path,"data-cy":S.path},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):C("",!0)}}}),$l=D({setup($){const{t:a}=I();function t(c){!l.value||((l.value.resourceCaches&c)>0?l.value.resourceCaches=l.value.resourceCaches-c:l.value.resourceCaches=l.value.resourceCaches+c)}return(c,r)=>{const i=Je;return e(l)?(_(),k(A,{key:0,modelValue:e(l).enableResourceCache,"onUpdate:modelValue":r[4]||(r[4]=f=>e(l).enableResourceCache=f),label:e(a)("common.enableResourceCache")},{default:s(()=>[o(i,{label:e(a)("common.style"),"model-value":(e(l).resourceCaches&1)>0,onClick:r[0]||(r[0]=H(f=>t(1),["stop","prevent"]))},null,8,["label","model-value"]),o(i,{label:e(a)("common.script"),"model-value":(e(l).resourceCaches&1<<1)>0,onClick:r[1]||(r[1]=H(f=>t(1<<1),["stop","prevent"]))},null,8,["label","model-value"]),o(i,{label:e(a)("common.image"),"model-value":(e(l).resourceCaches&1<<2)>0,onClick:r[2]||(r[2]=H(f=>t(1<<2),["stop","prevent"]))},null,8,["label","model-value"]),o(i,{label:e(a)("common.content"),"model-value":(e(l).resourceCaches&1<<3)>0,onClick:r[3]||(r[3]=H(f=>t(1<<3),["stop","prevent"]))},null,8,["label","model-value"])]),_:1},8,["modelValue","label"])):C("",!0)}}}),Pl={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px"},El={class:"max-w-504px"},Tl={class:"font-bold dark:text-fff/86"},Dl=m("div",{class:"flex-1"},null,-1),Ll={class:"font-bold dark:text-fff/86"},Rl=m("div",{class:"flex-1"},null,-1),Il={class:"max-w-504px"},Ol={class:"font-bold dark:text-fff/86"},Bl=m("div",{class:"flex-1"},null,-1),Ml={class:"font-bold dark:text-fff/86"},Al=m("div",{class:"flex-1"},null,-1),Nl={class:"font-bold dark:text-fff/86"},Jl=m("div",{class:"flex-1"},null,-1),ql={class:"font-bold dark:text-fff/86"},Fl=m("div",{class:"flex-1"},null,-1),jl={class:"font-bold dark:text-fff/86"},Wl=m("div",{class:"flex-1"},null,-1),zl={class:"font-bold dark:text-fff/86"},Gl=m("div",{class:"flex-1"},null,-1),Hl={class:"font-bold dark:text-fff/86"},Kl=m("div",{class:"flex-1"},null,-1),Yl={class:"font-bold dark:text-fff/86"},Ql=m("div",{class:"flex-1"},null,-1),Xl={class:"max-w-504px"},Zl=m("span",{class:"font-bold dark:text-fff/86"},"CORS",-1),eo=m("div",{class:"flex-1"},null,-1),lo=m("span",{class:"font-bold dark:text-fff/86"},"SPA",-1),oo=m("div",{class:"flex-1"},null,-1),to={class:"font-bold dark:text-fff/86 text-black"},ao=R("bootstrap-v3"),no=R("tailwind-v3.1"),so=R("element-plus-v2.2"),uo=R("amp-v0"),io={class:"font-bold dark:text-fff/86"},mo=m("div",{class:"flex-1"},null,-1),ro={class:"font-bold dark:text-fff/86"},co=m("div",{class:"flex-1"},null,-1),po={class:"font-bold dark:text-fff/86"},fo=m("div",{class:"flex-1"},null,-1),vo={class:"font-bold dark:text-fff/86"},_o=m("div",{class:"flex-1"},null,-1),bo={class:"font-bold dark:text-fff/86"},Vo=m("div",{class:"flex-1"},null,-1),yo={class:"font-bold dark:text-fff/86"},go=m("div",{class:"flex-1"},null,-1),ko={class:"font-bold dark:text-fff/86"},xo=m("div",{class:"flex-1"},null,-1),ho=D({setup($){const{t:a}=I(),t=Q(),c=Ve();return(r,i)=>{var d,g,y;const f=Z,p=O,b=K,V=W,u=z,n=j;return e(l)?(_(),U("div",Pl,[m("div",El,[o(p,null,{default:s(()=>[m("span",Tl,h(e(a)("common.visitorLog")),1),Dl,o(f,{modelValue:e(l).enableVisitorLog,"onUpdate:modelValue":i[0]||(i[0]=v=>e(l).enableVisitorLog=v),"data-cy":"visitor-log"},null,8,["modelValue"])]),_:1}),(d=e(c).header)!=null&&d.isOnlineServer?(_(),k(Ul,{key:0})):C("",!0),o(p,null,{default:s(()=>[m("span",Ll,h(e(a)("common.sqlLog")),1),Rl,o(f,{modelValue:e(l).enableSqlLog,"onUpdate:modelValue":i[1]||(i[1]=v=>e(l).enableSqlLog=v),"data-cy":"sql-log"},null,8,["modelValue"])]),_:1})]),o(tl),m("div",Il,[o(p,null,{default:s(()=>[m("span",Ol,h(e(a)("common.constraintFixOnSave")),1),o(b,{tip:e(a)("common.constraintFixOnSaveTips"),"custom-class":"ml-4"},null,8,["tip"]),Bl,o(f,{modelValue:e(l).enableConstraintFixOnSave,"onUpdate:modelValue":i[2]||(i[2]=v=>e(l).enableConstraintFixOnSave=v),"data-cy":"constraint-fix-on-save"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",Ml,h(e(a)("common.frontEvents")),1),o(b,{tip:e(a)("common.frontEventTips"),"custom-class":"ml-4"},null,8,["tip"]),Al,o(f,{modelValue:e(l).enableFrontEvents,"onUpdate:modelValue":i[3]||(i[3]=v=>e(l).enableFrontEvents=v),"data-cy":"front-event"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",Nl,h(e(a)("common.backendEvents")),1),o(b,{tip:e(a)("common.backendEventTips"),"custom-class":"ml-4"},null,8,["tip"]),Jl,o(f,{modelValue:e(l).enableBackendEvents,"onUpdate:modelValue":i[4]||(i[4]=v=>e(l).enableBackendEvents=v),"data-cy":"front-event"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",ql,h(e(a)("common.JsCssCompression")),1),Fl,o(f,{modelValue:e(l).enableJsCssCompress,"onUpdate:modelValue":i[5]||(i[5]=v=>e(l).enableJsCssCompress=v),"data-cy":"js-css-compress"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",jl,h(e(a)("common.JsCssBrowserCache")),1),Wl,o(f,{modelValue:e(l).enableJsCssBrowerCache,"onUpdate:modelValue":i[6]||(i[6]=v=>e(l).enableJsCssBrowerCache=v),"data-cy":"js-css-cache"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",zl,h(e(a)("common.videoBrowserCache")),1),Gl,o(f,{modelValue:e(l).enableVideoBrowserCache,"onUpdate:modelValue":i[7]||(i[7]=v=>e(l).enableVideoBrowserCache=v),"data-cy":"video-cache"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",Hl,h(e(a)("common.htmlCompression")),1),Kl,o(f,{modelValue:e(l).enableHtmlMinifier,"onUpdate:modelValue":i[8]||(i[8]=v=>e(l).enableHtmlMinifier=v),"data-cy":"html-compress"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",Yl,h(e(a)("common.enableImageAlt")),1),Ql,o(f,{modelValue:e(l).enableImageAlt,"onUpdate:modelValue":i[9]||(i[9]=v=>e(l).enableImageAlt=v),"data-cy":"image-alt"},null,8,["modelValue"])]),_:1})]),o(al),o(ml),o(fl),o(hl),o(wl),o(Sl),o(ce),m("div",Xl,[o(p,null,{default:s(()=>[Zl,o(b,{tip:e(a)("common.corsTips"),"custom-class":"ml-4"},null,8,["tip"]),eo,o(f,{modelValue:e(l).enableCORS,"onUpdate:modelValue":i[10]||(i[10]=v=>e(l).enableCORS=v),"data-cy":"cors"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[lo,o(b,{tip:e(a)("common.spaTips"),"custom-class":"ml-4"},null,8,["tip"]),oo,o(f,{modelValue:e(l).enableSPA,"onUpdate:modelValue":i[11]||(i[11]=v=>e(l).enableSPA=v),"data-cy":"spa"},null,8,["modelValue"])]),_:1}),o(p,null,{label:s(()=>[m("span",to,h(e(a)("common.additionalCodeSuggestions")),1)]),default:s(()=>[o(u,{modelValue:e(l).codeSuggestions,"onUpdate:modelValue":i[12]||(i[12]=v=>e(l).codeSuggestions=v),multiple:"",class:"w-full"},{default:s(()=>[o(V,{value:"bootstrap-v3"},{default:s(()=>[ao]),_:1}),o(V,{value:"tailwind-v3.1"},{default:s(()=>[no]),_:1}),o(V,{value:"element-plus-v2.2"},{default:s(()=>[so]),_:1}),o(V,{value:"amp-v0"},{default:s(()=>[uo]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",io,h(e(a)("common.recordSiteLogVideo")),1),mo,o(f,{modelValue:e(l).recordSiteLogVideo,"onUpdate:modelValue":i[13]||(i[13]=v=>e(l).recordSiteLogVideo=v),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",ro,h(e(a)("common.forceSSL")),1),o(b,{tip:e(a)("common.forceSSLTips"),"custom-class":"ml-4"},null,8,["tip"]),co,o(f,{modelValue:e(l).forceSSL,"onUpdate:modelValue":i[14]||(i[14]=v=>e(l).forceSSL=v),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),e(l).continueDownload!==void 0?(_(),k(p,{key:0},{default:s(()=>[m("span",po,h(e(a)("common.continueDownload")),1),o(b,{tip:e(a)("common.continueDownloadTips"),"custom-class":"ml-4"},null,8,["tip"]),fo,o(f,{modelValue:e(l).continueDownload,"onUpdate:modelValue":i[15]||(i[15]=v=>e(l).continueDownload=v),"data-cy":"continue-download"},null,8,["modelValue"])]),_:1})):C("",!0),o(p,null,{default:s(()=>[m("span",vo,h(e(a)("common.enableUpdateSimilarPage")),1),_o,o(f,{modelValue:e(l).enableUpdateSimilarPage,"onUpdate:modelValue":i[16]||(i[16]=v=>e(l).enableUpdateSimilarPage=v),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[m("span",bo,h(e(a)("common.automateCovertImageToWebp")),1),Vo,o(f,{modelValue:e(l).automateCovertImageToWebp,"onUpdate:modelValue":i[17]||(i[17]=v=>e(l).automateCovertImageToWebp=v)},null,8,["modelValue"])]),_:1}),!((g=e(c).header)!=null&&g.isOnlineServer)||e(c).header.isPrivateServer?(_(),k($l,{key:1})):C("",!0),((y=e(c).header)==null?void 0:y.isOnlineServer)&&!e(c).header.isPrivateServer?(_(),U(T,{key:2},[e(t).serviceLevel>0?(_(),k(p,{key:0},{default:s(()=>[m("span",yo,h(e(a)("common.enableDevPassword")),1),go,o(f,{"model-value":e(l).status=="Development","onUpdate:modelValue":i[18]||(i[18]=v=>e(l).status=e(l).status=="Development"?"Published":"Development")},null,8,["model-value"])]),_:1})):C("",!0),e(l).status=="Development"?(_(),k(p,{key:1},{default:s(()=>[m("span",ko,h(e(a)("common.devPassword")),1),xo,o(n,{modelValue:e(l).devPassword,"onUpdate:modelValue":i[19]||(i[19]=v=>e(l).devPassword=v),disabled:!0,"data-cy":"dev-password"},null,8,["modelValue"])]),_:1})):C("",!0)],64)):C("",!0)])])):C("",!0)}}}),Co={key:0},lt=D({setup($,{expose:a}){const t=E(!1),c=Fe(),r=Q(),i=E(+new Date);function f(){return G(this,null,function*(){l.value=void 0,yield Q().loadSite(),pe(),c.init(l.value)})}const p=()=>{c.init(l.value),i.value=+new Date};return Ue(()=>{r.firstActiveMenu=""}),f(),$e((b,V,u)=>G(this,null,function*(){var n;b.name==="login"?u():(r.firstActiveMenu=(n=b.meta.activeMenu)!=null?n:b.name,yield c.check(l.value).then(()=>{u()}).catch(()=>{r.firstActiveMenu="settings",u(!1)}))})),q(()=>l.value,()=>{c.changed(l.value)},{deep:!0}),a({initSite:p}),(b,V)=>{const u=ye;return e(l)?(_(),U("div",Co,[(_(),k(u,{key:i.value,"label-position":"top"},{default:s(()=>[o(Xe,{onExport:V[0]||(V[0]=n=>t.value=!0),onInitSite:p}),o(ho),o(ol)]),_:1})),t.value?(_(),k(qe,{key:0,modelValue:t.value,"onUpdate:modelValue":V[1]||(V[1]=n=>t.value=n),"site-id":e(l).id},null,8,["modelValue","site-id"])):C("",!0)])):C("",!0)}}});export{lt as _};
