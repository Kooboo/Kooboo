var P=(B,m,e)=>new Promise((v,u)=>{var f=p=>{try{C(e.next(p))}catch(s){u(s)}},b=p=>{try{C(e.throw(p))}catch(s){u(s)}},C=p=>p.done?v(p.value):Promise.resolve(p.value).then(f,b);C((e=e.apply(B,m)).next())});import{g as $,d as N}from"./index.8b9adb1d.js";import{u as I}from"./template.4eb641b9.js";import{g as U}from"./i18n.25caaace.js";import{d as L,g as w,N as O,o as l,a as r,f as a,b as y,w as d,F as g,b6 as h,j as i,u as t,t as c,k,n as S,m as F,x as q}from"./url.8f5ec20c.js";import{E as D,a as G}from"./index.960b9732.js";import{E as Q,a as W}from"./index.2e51d36e.js";import{E as H}from"./index.85ace6fa.js";import{E as J}from"./windi.a815125a.js";import{E as K}from"./index.a9a077b4.js";import"./replace-all.b35629e7.js";import"./main.1c3b59e3.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.f571dfc9.js";import"./event.776e7e11.js";import"./index.1e7e06b8.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./index.158cdd11.js";import"./focus-trap.81e4fb05.js";import"./event.53b2ad83.js";import"./index.c6488b3c.js";import"./index.f9c89813.js";import"./scroll.0cf77af8.js";import"./isEqual.2e410d13.js";import"./_baseIsEqual.0a4e01e5.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.c93fe8e7.js";import"./validator.9b0d789f.js";var M="/_Admin/assets/no_template@2x.152a53c3.png";const R=["loading"],X={class:"max-w-1120px mx-auto py-16px dark:text-999 flex items-center gap-16px template-header"},Y={class:"text-16px font-normal text-[#192845] dark:text-[#cfd3dc]"},Z={class:"flex items-center h-21px"},ee={class:"text-blue text-sm font-normal text-#0087C2"},te={class:"ml-4 text-[#8BA5B0] text-sm font-normal"},oe={class:"text-16px font-normal text-[#192845] dark:text-[#cfd3dc]"},ae={class:"flex items-center h-21px"},le={class:"ml-4 text-[#8BA5B0] text-sm font-normal"},se={class:"max-w-1120px mx-auto py-16px flex flex-wrap items-center gap-8px"},ne={class:"text-[#8BA5B0] text-m"},re={class:"text-m text-[#2F2E41] dark:text-[#fffa]"},ce={class:"text-[#8BA5B0] text-m"},pe={class:"text-m text-[#2F2E41] dark:text-[#fffa]"},de={class:"w-full"},ie={key:0,class:"w-full grid gap-16 grid-cols-4 py-8"},me={class:"bg-fff dark:bg-666 dark:text-fff p-8"},ue={class:"px-4 py-4 flex justify-between items-center"},xe=["title"],ge={class:"ml-4 text-s text-666 dark:text-fff","data-cy":"downloads"},fe={key:1,class:"flex items-center justify-center mt-100px","data-cy":"no-matching-template"},_e=a("img",{src:M,class:"w-360px h-230px"},null,-1),ye={class:"text-center text-m text-999 mt-36px"},he={key:0,class:"my-24"},Xe=L({setup(B){const{t:m}=U(),e=I(),v=w(),u=w(),f=w(),b=w(!1);return(()=>P(this,null,function*(){var p,s;try{e.changePage(e.pagedTemplate.pageNr),v.value=yield $();const{facets:_}=yield N();u.value=(p=_.find(x=>x.name==="category"))==null?void 0:p.labels,f.value=(s=_.find(x=>x.name==="color"))==null?void 0:s.labels}catch(_){console.error(_)}finally{b.value=!0}}))(),(p,s)=>{const _=D,x=G,T=Q,A=W,V=H,E=J,j=O("router-link"),z=K;return l(),r(g,null,[a("div",{class:"w-full bg-fff dark:bg-[#333] shadow-s-10",loading:b.value},[a("header",X,[y(x,{modelValue:t(e).currentType,"onUpdate:modelValue":[s[0]||(s[0]=o=>t(e).currentType=o),s[1]||(s[1]=o=>t(e).changePage(1))]},{default:d(()=>[(l(!0),r(g,null,h(v.value,o=>(l(),i(_,{key:o.key,label:o.value,value:o.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),["","Site"].includes(t(e).currentType)?(l(),i(x,{key:0,class:"hidden-input"},{prefix:d(()=>[a("span",Y,c(t(m)("common.topics")),1)]),empty:d(()=>{var o;return[u.value&&((o=Object.keys(u.value))==null?void 0:o.length)?(l(),i(A,{key:0,modelValue:t(e).category,"onUpdate:modelValue":[s[2]||(s[2]=n=>t(e).category=n),s[3]||(s[3]=n=>t(e).changePage(1))],class:"p-24px flex-1 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-16px k-checkbox-group"},{default:d(()=>[(l(!0),r(g,null,h(u.value,n=>(l(),i(T,{key:n.name,label:n.name},{default:d(()=>[a("div",Z,[a("span",ee,c(n.name),1),a("span",te,"("+c(n.count)+")",1)])]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])):(l(),i(V,{key:1,class:"w-min-700px"}))]}),_:1})):k("",!0),["","Site"].includes(t(e).currentType)?(l(),i(x,{key:1,class:"hidden-input"},{prefix:d(()=>[a("span",oe,c(t(m)("common.color")),1)]),empty:d(()=>{var o;return[f.value&&((o=Object.keys(f.value))==null?void 0:o.length)?(l(),i(A,{key:0,modelValue:t(e).color,"onUpdate:modelValue":[s[4]||(s[4]=n=>t(e).color=n),s[5]||(s[5]=n=>t(e).changePage(1))],class:"p-24px flex-1 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-16px k-checkbox-group"},{default:d(()=>[(l(!0),r(g,null,h(f.value,n=>(l(),i(T,{key:n.name,label:n.name},{default:d(()=>[a("div",ae,[a("div",{class:S(["w-[20px] h-[20px] rounded-full",{"border border-[#B1C5CE]":n.name=="White"}]),style:F({background:n.name})},null,6),a("span",le,"("+c(n.count)+")",1)])]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])):(l(),i(V,{key:1,class:"w-min-700px"}))]}),_:1})):k("",!0)])],8,R),a("div",se,[t(e).category.length?(l(!0),r(g,{key:0},h(t(e).category,o=>(l(),r("div",{key:o,class:"h-42px px-[32px] bg-fff dark:bg-[#333] rounded-[21px] border border-[#8CA6B1] flex items-center gap-8px"},[a("span",ne,c(t(m)("common.topics"))+" : ",1),a("span",re,c(o),1),y(E,{class:"iconfont icon-close text-16px cursor-pointer ml-auto text-[#8CA6B1] hover:text-[#2F2E41] dark:text-[#fffa] dark:hover:text-[#fffd]",onClick:n=>t(e).removeCategory(o)},null,8,["onClick"])]))),128)):k("",!0),t(e).color.length?(l(!0),r(g,{key:1},h(t(e).color,o=>(l(),r("div",{key:o,class:"h-42px px-[32px] bg-fff dark:bg-[#333] rounded-[21px] border border-[#8CA6B1] flex items-center gap-8px"},[a("span",ce,c(t(m)("common.color"))+" : ",1),a("span",pe,c(o),1),y(E,{class:"iconfont icon-close text-16px cursor-pointer ml-auto text-[#8CA6B1] hover:text-[#2F2E41] dark:text-[#fffa] dark:hover:text-[#fffd]",onClick:n=>t(e).removeColor(o)},null,8,["onClick"])]))),128)):k("",!0),t(e).category.length||t(e).color.length?(l(),r("div",{key:2,class:"text-sm text-[#8CA6B1] cursor-pointer hover:text-blue ml-[12px] h-[42px] flex items-center",onClick:s[6]||(s[6]=o=>t(e).clearAll())},c(t(m)("common.clearAll")),1)):k("",!0)]),a("div",de,[a("div",{class:S(["max-w-1120px mx-auto",t(e).pagedTemplate.totalPages>1?"":"mb-24"])},[t(e).pagedTemplate.list.length?(l(),r("div",ie,[(l(!0),r(g,null,h(t(e).pagedTemplate.list,o=>(l(),r("div",{key:o.id,class:"w-full h-214px"},[y(j,{class:"h-full w-full flex flex-col shadow-s-10 overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-m-20 rounded-xl",to:{name:"template-detail",query:{templateId:o.id,currentFolder:t(q)("currentFolder")}},"data-cy":"template"},{default:d(()=>[a("div",{class:"dark:bg-666 bg-fff flex-1 bg-no-repeat bg-cover",style:F({backgroundImage:`url(${o.thunbnailUrl})`})},null,4),a("div",me,[a("div",ue,[a("span",{class:"text-m max-w-150px ellipsis",title:o.name,"data-cy":"template-name"},c(o.name),9,xe),a("div",null,[y(E,{class:"iconfont icon-xiazai-wenjianxiazai-05 h-full"}),a("span",ge,c(o.downloadCount),1)])])])]),_:2},1032,["to"])]))),128))])):(l(),r("div",fe,[a("div",null,[_e,a("div",ye,c(t(m)("common.noTemplate")),1)])]))],2)]),t(e).pagedTemplate.totalPages>1?(l(),r("div",he,[y(z,{layout:"prev, pager, next,jumper","page-size":t(e).pagedTemplate.pageSize,"page-count":t(e).pagedTemplate.totalPages,"current-page":t(e).pagedTemplate.pageNr,onCurrentChange:t(e).changePage},null,8,["page-size","page-count","current-page","onCurrentChange"])])):k("",!0)],64)}}});export{Xe as default};
