var b=(h,a,m)=>new Promise((d,c)=>{var y=t=>{try{o(m.next(t))}catch(e){c(e)}},_=t=>{try{o(m.throw(t))}catch(e){c(e)}},o=t=>t.done?d(t.value):Promise.resolve(t.value).then(y,_);o((m=m.apply(h,a)).next())});import{_ as P}from"./icon-button.0e134c9b.js";import{g as $,a as F}from"./index.1be51314.js";import{_ as M}from"./k-table.c13bd7f5.js";import{d as R,cd as S,g as x,aV as j,c as q,b7 as z,o as l,a as f,b as n,u as i,f as v,w as r,F as w,b6 as k,t as g,j as B,e as H,aH as C}from"./url.8f5ec20c.js";import{u as A}from"./replace-all.b35629e7.js";import{B as G}from"./breadcrumb.bcaeaf75.js";import{g as J}from"./i18n.25caaace.js";import{E as K}from"./windi.a815125a.js";import{E as O}from"./index.e9f8834a.js";import{E as Q,a as U,b as W}from"./index.a0b57910.js";import{E as X}from"./index.5388dbc8.js";import{c as Y}from"./index.960b9732.js";import"./index.158cdd11.js";import"./focus-trap.81e4fb05.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.1e7e06b8.js";import"./index.0c2ced08.js";import"./index.f9c89813.js";import"./main.1c3b59e3.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./sortable.esm.a99254e8.js";import"./index.a9a077b4.js";import"./isEqual.2e410d13.js";import"./_baseIsEqual.0a4e01e5.js";import"./index.f571dfc9.js";import"./event.776e7e11.js";import"./error.7e8331f1.js";import"./index.2e51d36e.js";import"./index.5b499f72.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.c6488b3c.js";import"./dropdown.fed924b2.js";import"./refs.d2253dd4.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.c93fe8e7.js";import"./scroll.0cf77af8.js";import"./validator.9b0d789f.js";const Z={class:"p-24"},tt={class:"flex items-center py-24 space-x-16"},ot={class:"flex items-center"},et={class:"p-4 dark:text-fff/86"},Kt=R({setup(h){const{t:a}=J(),m=S(),d=x([]),c=x([]);j(()=>b(this,null,function*(){const o=yield Promise.all([$(),F()]);d.value=o[0],c.value=o[1]}));const y=q(()=>{const o=[];for(const t of d.value){if(c.value.some(p=>p.name===t.name))continue;let e=o.find(p=>p.group===t.category);e?e.list.push(t.name):(e={group:t.category,list:[t.name]},o.push(e))}return o}),_=o=>{m.push(A({name:"frontevents-edit",query:{name:o}}))};return(o,t)=>{const e=K,p=O,D=Q,T=U,I=W,E=X,L=Y,V=P,N=z("hasPermission");return l(),f("div",Z,[n(G,{name:i(a)("common.frontEvents")},null,8,["name"]),v("div",tt,[n(I,{trigger:"click",onCommand:_},{dropdown:r(()=>[n(T,null,{default:r(()=>[(l(!0),f(w,null,k(i(y),s=>(l(),f(w,{key:s.group},[v("h3",et,g(s.group),1),(l(!0),f(w,null,k(s.list,u=>(l(),B(D,{key:u,command:u,"data-cy":u},{default:r(()=>[v("span",null,g(u),1)]),_:2},1032,["command","data-cy"]))),128))],64))),128))]),_:1})]),default:r(()=>[H((l(),B(p,{round:"","data-cy":"new-event"},{default:r(()=>[v("div",ot,[C(g(i(a)("common.newEvent"))+" ",1),n(e,{class:"iconfont icon-pull-down text-12px ml-8 !mr-0"})])]),_:1})),[[N,{feature:"frontEvents",action:"edit"}]])]),_:1})]),n(i(M),{data:c.value},{default:r(()=>[n(E,{label:i(a)("common.type"),prop:"name"},null,8,["label"]),n(E,{label:i(a)("common.rulesCount")},{default:r(({row:s})=>[n(L,{type:"success",size:"small",class:"rounded-full","data-cy":"rules-count"},{default:r(()=>[C(g(s.count),1)]),_:2},1024)]),_:1},8,["label"]),n(E,{width:"100px",align:"right"},{default:r(({row:s})=>[n(V,{icon:"icon-a-writein",tip:i(a)("common.edit"),"data-cy":"edit",onClick:u=>_(s.name)},null,8,["tip","onClick"])]),_:1})]),_:1},8,["data"])])}}});export{Kt as default};
