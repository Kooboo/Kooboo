var Me=Object.defineProperty,Oe=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var $e=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var Ee=(m,y,b)=>y in m?Me(m,y,{enumerable:!0,configurable:!0,writable:!0,value:b}):m[y]=b,H=(m,y)=>{for(var b in y||(y={}))Pe.call(y,b)&&Ee(m,b,y[b]);if($e)for(var b of $e(y))Ke.call(y,b)&&Ee(m,b,y[b]);return m},W=(m,y)=>Oe(m,Re(y));var P=(m,y,b)=>new Promise((n,h)=>{var f=d=>{try{D(b.next(d))}catch(w){h(w)}},g=d=>{try{D(b.throw(d))}catch(w){h(w)}},D=d=>d.done?n(d.value):Promise.resolve(d.value).then(f,g);D((b=b.apply(m,y)).next())});import{_ as ze}from"./index.9250b320.js";import{_ as fe}from"./index.f0d5f031.js";import{_ as Le}from"./truncate-content.85e3d7e3.js";import{_ as je}from"./country.9dae7738.js";import{d as L,g as A,o as i,j as r,w as e,b as a,u as o,k as _,a as $,aA as Qe,f as k,H as Je,t as s,F as U,b7 as K,h as qe,aI as u,x as Ge,cd as He,c as We,A as Xe,cg as Ye}from"./url.4cb47a7a.js";import{B as Ze}from"./breadcrumb.f4d80c95.js";import{g as j,w as el}from"./i18n.a87944a4.js";import{u as ll}from"./replace-all.56d2c1f7.js";import{b as tl,e as ol,p as al,f as nl,u as il,h as sl}from"./order.a720b157.js";import{u as pe}from"./use-date.f1258183.js";import{b as Ne}from"./product-variant.afdebca6.js";import{_ as z}from"./property-item.2aae24bb.js";import{E as te}from"./index.178b9e08.js";import{E as oe,a as ae}from"./index.9fd79879.js";import{E as X}from"./index.c003dfa1.js";import{_ as ul}from"./image-cover.b0b3d25c.js";import{k as Ae,u as rl}from"./main.9fdfea92.js";import{_ as ml}from"./icon-button.74ccc970.js";import{_ as dl}from"./digital-items-editor.7d617798.js";import{E as De}from"./index.42922617.js";import{g as cl}from"./shipping.703667dc.js";import{_ as pl}from"./dropdown-input.f2d4a501.js";import{E as vl}from"./index.a7b376b1.js";import{E as le}from"./index.361e2245.js";import{b as fl,a as _l}from"./index.f15f695e.js";import{_ as yl}from"./index.85105f22.js";import{u as gl}from"./useFields.23cc2d07.js";import{_ as F}from"./currency-amount.33cd19c7.js";import{_ as bl}from"./tooltip.66155ff7.js";import{c as Ie}from"./index.7c862087.js";import{E as Be,a as Ue}from"./index.13e2c781.js";import{E as kl}from"./index.bec063d7.js";import{_ as hl}from"./order-status.b128b2bf.js";import{u as xl,p as Vl}from"./commerce.ded2851e.js";import{s as ve}from"./commerce.f69dd9fe.js";import{E as Cl}from"./windi.6360286d.js";import{E as $l,a as El}from"./index.b38edc72.js";import{E as wl}from"./index.d96452a6.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.fd96ea36.js";import"./error.7e8331f1.js";import"./date.3d25ac99.js";import"./dayjs.min.ccc40d4f.js";import"./guid.c1a40312.js";import"./event.776e7e11.js";import"./index.7b8c5aef.js";import"./isNil.98bb3b88.js";import"./_baseClone.b8903935.js";import"./_baseIsEqual.dc9e64c4.js";import"./isEqual.4cab74e3.js";import"./index.c10802d9.js";import"./scroll.16983984.js";import"./index.4d568055.js";import"./focus-trap.50a00b7f.js";import"./refs.3132cbdb.js";import"./media-dialog.69c737ad.js";import"./media.e27599b4.js";import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.d235f69b.js";import"./index.5ed58b47.js";/* empty css                                                          */import"./search-provider.ad425b7b.js";import"./toNumber.47eea968.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./style.c350d462.js";import"./_baseUniq.d719bd5f.js";import"./use-operation-dialog.4f6d7533.js";import"./file.a821eac5.js";import"./validate.bb56f9e3.js";import"./index.d24a40b9.js";import"./index.f23f1e38.js";import"./index.a24f458a.js";import"./index.1fd72ea8.js";import"./index.abe211fa.js";import"./folder.8308bb9d.js";import"./relations-tag.b9cbe606.js";import"./page.881ec888.js";import"./index.f2c1b903.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./validator.b5df2420.js";import"./use-copy-text.ec245a13.js";import"./caret-bottom.ddd8dd91.js";import"./index.c33743a1.js";import"./browser.aedb6977.js";import"./throttle.1f6a079c.js";import"./debounce.4e0c106e.js";import"./index.c6da2706.js";import"./search-input.2a27ef56.js";/* empty css                                                                 *//* empty css                                                          */import"./layout.b686c380.js";import"./index.765084fe.js";import"./position.7590de53.js";import"./utils.aa7941f8.js";import"./confirm.b60b5d2f.js";import"./logo-transparent.1566007e.js";import"./index.9fc39dc8.js";import"./use-file-upload.78bd75f1.js";import"./index.99e769ef.js";import"./index.d878e15f.js";import"./index.1b4db5fb.js";import"./index.4d2ce883.js";import"./file.7f0748f1.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.ec5f0705.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.4f90a917.js";import"./product.9d71c7fc.js";import"./index.c86a187b.js";import"./dropdown.86d3a7fb.js";import"./_createCompounder.89b53ff3.js";import"./color-picker.2ebabb03.js";import"./index.f43a3c1f.js";import"./index.66319a92.js";import"./string.955a924b.js";import"./useLabels.aeaf94fa.js";import"./isEmpty.8a500dd9.js";const Nl=L({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue","reload"],setup(m,{emit:y}){const b=m,{t:n}=j(),h=A(!0),f=A({id:b.id,reason:""});function g(){return P(this,null,function*(){yield tl(f.value),y("reload"),h.value=!1})}return(D,d)=>{const w=te,M=oe,I=ae,T=fe,R=X;return i(),r(R,{"model-value":h.value,width:"600px",title:o(n)("commerce.cancelOrder"),"close-on-click-modal":!1,onClosed:d[2]||(d[2]=l=>y("update:modelValue",!1))},{footer:e(()=>[a(T,{onConfirm:g,onCancel:d[1]||(d[1]=l=>h.value=!1)})]),default:e(()=>[f.value?(i(),r(I,{key:0,"label-position":"top"},{default:e(()=>[a(M,{label:o(n)("common.cancelReason")},{default:e(()=>[a(w,{modelValue:f.value.reason,"onUpdate:modelValue":d[0]||(d[0]=l=>f.value.reason=l),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):_("",!0)]),_:1},8,["model-value","title"])}}}),Al=L({props:{line:null},emits:["update:modelValue"],setup(m,{emit:y}){const{t:b}=j(),n=A(!0);return(h,f)=>{const g=X;return i(),$("div",null,[(i(),r(Qe,{to:"body"},[a(g,{"model-value":n.value,width:"600px",title:o(b)("common.digitalItems"),"close-on-click-modal":!1,onClosed:f[1]||(f[1]=D=>y("update:modelValue",!1))},{default:e(()=>[a(dl,{id:m.line.id,items:m.line.digitalItems,"onUpdate:items":f[0]||(f[0]=D=>m.line.digitalItems=D)},null,8,["id","items"])]),_:1},8,["model-value","title"])]))])}}}),Dl={class:"bg-gray/50 rounded-normal"},Il={class:"p-8 flex"},Bl={class:"flex-1 flex justify-between items-center"},Ul={class:"text-s"},Tl={key:0,class:"text-s p-8 flex items-center"},Sl={key:0,class:"flex-1"},Fl={class:"truncate"},Ml={key:1,class:"flex-1"},Ol={class:"flex-shrink-0 w-32"},we=L({props:{line:null,showSelected:{type:Boolean},selected:{type:Boolean}},emits:["update:selected"],setup(m){const{t:y}=j(),b=A(!1);return(n,h)=>{const f=De;return i(),$("div",Dl,[k("div",Il,[m.showSelected?(i(),r(f,{key:0,modelValue:m.selected,"onUpdate:modelValue":h[0]||(h[0]=g=>Je(selected)?selected.value=g:null),class:"w-24",onClick:h[1]||(h[1]=el(g=>n.$emit("update:selected"),["stop","prevent"]))},null,8,["modelValue"])):_("",!0),k("div",Bl,[a(ul,{"model-value":m.line.image,size:"small"},null,8,["model-value"]),k("div",null,[k("div",null,s(m.line.title),1),k("div",Ul,s(o(Ne)(m.line.options)),1)]),k("div",null,"x"+s(m.line.totalQuantity),1)])]),m.line.isDigital?(i(),$("div",Tl,[m.line.digitalItems.length?(i(),$("div",Sl,[(i(!0),$(U,null,K(m.line.digitalItems,g=>(i(),$("div",{key:g.id},[k("p",Fl,s(g.name)+" : "+s(g.type=="file"?o(Ae)(g.size):g.value),1)]))),128))])):(i(),$("div",Ml,"-")),k("div",Ol,[a(ml,{icon:"icon-a-writein",tip:o(y)("common.editDigitalItems"),onClick:h[2]||(h[2]=g=>b.value=!0)},null,8,["tip"])])])):_("",!0),b.value?(i(),r(Al,{key:1,modelValue:b.value,"onUpdate:modelValue":h[3]||(h[3]=g=>b.value=g),line:m.line},null,8,["modelValue","line"])):_("",!0)])}}}),Rl={class:"grid grid-cols-2 gap-8"},Pl={class:"space-y-4"},Kl={class:"space-y-4"},zl={class:"flex"},Ll=k("div",{class:"flex-1"},null,-1),jl=L({props:{modelValue:{type:Boolean},id:null,lines:null},emits:["update:modelValue","reload"],setup(m,{emit:y}){const b=m,{t:n}=j(),h=A(!0),f=A([]);qe(()=>P(this,null,function*(){f.value=yield cl()}));const g=A([]),D=A(!1),d=JSON.parse(JSON.stringify(b.lines.filter(E=>!E.delivered))),w=A(d.filter(E=>!E.isDigital)),M=A(d.filter(E=>E.isDigital)),I=A({id:b.id,shippingCarrier:"",trackingNumber:""});function T(){return P(this,null,function*(){const E={id:I.value.id,items:[]};for(const v of d)D.value&&!g.value.includes(v.id)||E.items.push({id:v.id,shippingCarrier:I.value.shippingCarrier,trackingNumber:I.value.trackingNumber,digitalItems:v.digitalItems});yield ol(E),y("reload"),h.value=!1})}function R(E){g.value.includes(E)?g.value=g.value.filter(v=>v!=E):g.value.push(E)}function l(E){var v;for(const O of f.value){if(!O.trackingNumberMatching)return;new RegExp((v=O.trackingNumberMatching)==null?void 0:v.toLowerCase()).test(E==null?void 0:E.toLowerCase())&&(I.value.shippingCarrier=O.name)}}return(E,v)=>{const O=vl,ne=te,Q=oe,ie=ae,Y=De,se=X;return i(),r(se,{"model-value":h.value,width:"800px",title:o(n)("commerce.delivery"),"close-on-click-modal":!1,onClosed:v[4]||(v[4]=V=>y("update:modelValue",!1))},{footer:e(()=>[k("div",zl,[o(d).length>1?(i(),r(Y,{key:0,modelValue:D.value,"onUpdate:modelValue":v[2]||(v[2]=V=>D.value=V),label:o(n)("commerce.partialDelivery")},null,8,["modelValue","label"])):_("",!0),Ll,a(o(le),{onClick:v[3]||(v[3]=V=>h.value=!1)},{default:e(()=>[u(s(o(n)("common.cancel")),1)]),_:1}),a(o(le),{type:"primary",onClick:T},{default:e(()=>[u(s(o(n)("commerce.delivery")),1)]),_:1})])]),default:e(()=>[I.value?(i(),r(ie,{key:0,"label-position":"top"},{default:e(()=>[w.value.length?(i(),$(U,{key:0},[M.value.length?(i(),r(O,{key:0,class:"mt-0"},{default:e(()=>[u(s(o(n)("common.physicalProduct")),1)]),_:1})):_("",!0),k("div",Rl,[a(Q,{label:o(n)("commerce.trackingNumber")},{default:e(()=>[a(ne,{modelValue:I.value.trackingNumber,"onUpdate:modelValue":v[0]||(v[0]=V=>I.value.trackingNumber=V),onChange:l},null,8,["modelValue"])]),_:1},8,["label"]),a(Q,{label:o(n)("commerce.shippingCarrier")},{default:e(()=>[a(pl,{modelValue:I.value.shippingCarrier,"onUpdate:modelValue":v[1]||(v[1]=V=>I.value.shippingCarrier=V),options:f.value.map(V=>V.name)},null,8,["modelValue","options"])]),_:1},8,["label"])]),k("div",Pl,[(i(!0),$(U,null,K(w.value,V=>(i(),r(we,{key:V.id,line:V,"show-selected":D.value,selected:g.value.includes(V.id),"onUpdate:selected":ue=>R(V.id)},null,8,["line","show-selected","selected","onUpdate:selected"]))),128))])],64)):_("",!0),M.value.length?(i(),$(U,{key:1},[a(O,null,{default:e(()=>[u(s(o(n)("common.digitalProduct")),1)]),_:1}),k("div",Kl,[(i(!0),$(U,null,K(M.value,V=>(i(),r(we,{key:V.id,line:V,"show-selected":D.value,selected:g.value.includes(V.id),"onUpdate:selected":ue=>R(V.id)},null,8,["line","show-selected","selected","onUpdate:selected"]))),128))])],64)):_("",!0)]),_:1})):_("",!0)]),_:1},8,["model-value","title"])}}}),Ql={class:"space-y-8"},Jl=u("Cash"),ql=u("Credit card"),Gl={class:"grid grid-cols-2 gap-8"},Hl=L({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue","reload"],setup(m,{emit:y}){const b=m,{t:n}=j(),h=A(!0),f=A({orderId:b.id,method:"Cash",cardNumber:"",expirationDate:"",cvc:"",nameOnCard:""});function g(){return P(this,null,function*(){yield al(f.value),y("reload"),h.value=!1})}return(D,d)=>{const w=fl,M=_l,I=te,T=oe,R=ae,l=fe,E=X;return i(),r(E,{"model-value":h.value,width:"600px",title:o(n)("common.pay"),"close-on-click-modal":!1,onClosed:d[6]||(d[6]=v=>y("update:modelValue",!1))},{footer:e(()=>[a(l,{"confirm-label":o(n)("common.pay"),onConfirm:g,onCancel:d[5]||(d[5]=v=>h.value=!1)},null,8,["confirm-label"])]),default:e(()=>[k("div",Ql,[a(M,{modelValue:f.value.method,"onUpdate:modelValue":d[0]||(d[0]=v=>f.value.method=v)},{default:e(()=>[a(w,{label:"Cash"},{default:e(()=>[Jl]),_:1}),a(w,{label:"CreditCard",disabled:""},{default:e(()=>[ql]),_:1})]),_:1},8,["modelValue"]),f.value.method=="CreditCard"?(i(),r(R,{key:0,"label-position":"top"},{default:e(()=>[a(T,{label:o(n)("common.cardNumber")},{default:e(()=>[a(I,{modelValue:f.value.cardNumber,"onUpdate:modelValue":d[1]||(d[1]=v=>f.value.cardNumber=v)},null,8,["modelValue"])]),_:1},8,["label"]),k("div",Gl,[a(T,{label:o(n)("common.expirationDate")},{default:e(()=>[a(I,{modelValue:f.value.expirationDate,"onUpdate:modelValue":d[2]||(d[2]=v=>f.value.expirationDate=v)},null,8,["modelValue"])]),_:1},8,["label"]),a(T,{label:o(n)("common.cvc")},{default:e(()=>[a(I,{modelValue:f.value.cvc,"onUpdate:modelValue":d[3]||(d[3]=v=>f.value.cvc=v)},null,8,["modelValue"])]),_:1},8,["label"])]),a(T,{label:o(n)("common.nameOnCard")},{default:e(()=>[a(I,{modelValue:f.value.nameOnCard,"onUpdate:modelValue":d[4]||(d[4]=v=>f.value.nameOnCard=v)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):_("",!0)])]),_:1},8,["model-value","title"])}}}),Wl=L({props:{line:null},setup(m){const{t:y}=j();return(b,n)=>{const h=Ie,f=bl,g=Be,D=Ue,d=kl;return i(),$("div",null,[a(d,{placement:"left",width:"600",disabled:!m.line.delivered},{reference:e(()=>[m.line.delivered?(i(),r(h,{key:0,round:"",type:"success",class:"cursor-default"},{default:e(()=>[u(s(o(y)("commerce.shipped")),1)]),_:1})):m.line.errorMessage?(i(),r(h,{key:1,round:"",type:"danger"},{default:e(()=>[u(s(o(y)("common.failed"))+" ",1),a(f,{tip:m.line.errorMessage,"custom-class":"ml-4"},null,8,["tip"])]),_:1})):(i(),r(h,{key:2,round:"",type:"info"},{default:e(()=>[u(s(o(y)("commerce.unshipped")),1)]),_:1}))]),default:e(()=>[a(D,{title:o(y)("common.detail"),column:1,border:""},{default:e(()=>[m.line.isDigital?(i(!0),$(U,{key:0},K(m.line.digitalItems,w=>(i(),r(g,{key:w.id,label:w.name},{default:e(()=>[u(s(w.type=="file"?o(Ae)(w.size):w.value),1)]),_:2},1032,["label"]))),128)):(i(),$(U,{key:1},[a(g,{label:o(y)("commerce.shippingCarrier")},{default:e(()=>[u(s(m.line.shippingCarrier),1)]),_:1},8,["label"]),a(g,{label:o(y)("commerce.trackingNumber")},{default:e(()=>[u(s(m.line.trackingNumber),1)]),_:1},8,["label"])],64))]),_:1},8,["title"])]),_:1},8,["disabled"])])}}}),Xl={key:0,class:"px-24 pt-0 pb-84px space-y-12"},Yl={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal relative"},Zl={key:0,class:"text-s inline-flex space-x-4 items-center"},et=["title"],lt={class:"max-w-150px inline-flex items-center gap-x-4"},tt={class:"text-s"},ot={class:"inline-flex flex-wrap gap-4"},at={class:"text-s mt-12"},nt={class:"relative flex"},it={class:"flex gap-4"},st={class:"absolute right-0 space-y-4"},ut={key:0,class:"flex items-center gap-4 text-s justify-end"},rt={class:"flex items-center gap-8"},mt={key:0,class:"flex items-center gap-4"},dt=u(" ( "),ct={key:0},pt=u(" ) "),vt={key:0,class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},ft={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},_t=k("div",null,null,-1),yt={class:"text-m text-999"},Ua=L({setup(m){const{getColumns:y}=gl(),b=Ge("id"),{t:n}=j(),h=He(),f=A(!1),g=A(!1),D=A(!1),d=A(!1),w=A(!1),M=rl(),I=A(""),T=xl(),R=y([{name:"featuredImage",prop:"image",attrs:{width:80,align:"center"}},{name:"title"},{name:"price",displayName:n("common.price")},{name:"totalQuantity",displayName:n("common.quantity"),attrs:{align:"center"}},{name:"totalAmount",displayName:n("common.totalAmount")},{name:"taxAmount",displayName:n("common.tax")},{name:"discounts",displayName:n("common.discount"),attrs:{align:"center"}}]),l=A(),E=A();function v(){return P(this,null,function*(){l.value=yield nl(b),l.value.shippingAddress&&Vl([l.value.shippingAddress]).then(C=>E.value=C[0])})}function O(C){var c,p,S,N,ee;return`${C.clientInfo.os||""} ${((c=C.clientInfo)==null?void 0:c.platform)||""} ${((S=(p=C.clientInfo)==null?void 0:p.application)==null?void 0:S.name)||""} ${((ee=(N=C.clientInfo)==null?void 0:N.application)==null?void 0:ee.version)||""} ${(C==null?void 0:C.userAgent)||""}`}v();function ne(){h.goBackOrTo(ll({name:"orders"}))}const Q=We(()=>{var c;const C=[];if(!((c=l.value)!=null&&c.lines))return C;for(const p of l.value.lines)if(!p.groupName)C.push(W(H({},p),{rowKey:p.variantId+p.groupName}));else if(p.isMain){const S=l.value.lines.filter(N=>N.groupName==p.groupName&&!N.isMain).map(N=>W(H({},N),{rowKey:N.variantId+N.groupName,isChild:!0}));C.push(W(H({},p),{rowKey:p.variantId+p.groupName,children:S}))}else l.value.lines.find(N=>N.groupName==p.groupName&&N.isMain)||C.push(W(H({},p),{rowKey:p.variantId+p.groupName}));return C});function ie({row:C}){if(!!C.isChild)return"text-999 text-s !bg-gray/20"}function Y(C){if(!C.url)return;let c=Xe(M.site.baseUrl,C.url);Ye(c)}function se(){return P(this,null,function*(){yield il({note:I.value,id:b}),v(),d.value=!1})}const V=A();function ue(){return P(this,null,function*(){var C,c;yield sl({id:b,key:(C=V.value)==null?void 0:C.key,value:(c=V.value)==null?void 0:c.value}),v(),w.value=!1})}function Z(C){var c,p,S;return(S=(p=(c=l.value)==null?void 0:c.extensionFields)==null?void 0:p.find(N=>N.key==C))==null?void 0:S.value}return(C,c)=>{var Ve,Ce;const p=Be,S=je,N=Ie,ee=Le,_e=Cl,re=Ue,me=$l,ye=le,Te=El,Se=wl,ge=te,be=oe,ke=ae,he=fe,xe=X,de=le,Fe=ze;return i(),$(U,null,[a(Ze,{class:"p-24","crumb-path":[{name:o(n)("common.orders"),route:{name:"orders"}},{name:o(n)("common.orderDetail")}]},null,8,["crumb-path"]),l.value?(i(),$("div",Xl,[k("div",Yl,[a(re,{title:o(n)("common.basicInfo")},{default:e(()=>[a(p,{label:o(n)("commerce.orderNumber")},{default:e(()=>[u(s(l.value.id)+" ",1),a(hl,{order:l.value},null,8,["order"])]),_:1},8,["label"]),a(p,{label:o(n)("common.createTime")},{default:e(()=>[u(s(o(pe)(l.value.createdAt)),1)]),_:1},8,["label"]),a(p,{label:o(n)("common.lastModified")},{default:e(()=>[u(s(o(pe)(l.value.updatedAt)),1)]),_:1},8,["label"]),a(p,{label:o(n)("common.contact")},{default:e(()=>[u(s(l.value.customer.firstName)+" "+s(l.value.customer.lastName),1)]),_:1},8,["label"]),a(p,{label:o(n)("common.email")},{default:e(()=>[u(s(l.value.customer.email),1)]),_:1},8,["label"]),a(p,{label:o(n)("common.phone")},{default:e(()=>[u(s(l.value.customer.phone),1)]),_:1},8,["label"]),a(p,{label:"IP"},{default:e(()=>[u(s(l.value.ip),1)]),_:1}),a(p,{label:o(n)("common.country")},{default:e(()=>[a(S,{"name-or-code":l.value.country},null,8,["name-or-code"])]),_:1},8,["label"]),l.value.source?(i(),r(p,{key:0,label:o(n)("common.source")},{default:e(()=>[u(s(l.value.source),1)]),_:1},8,["label"])):_("",!0),l.value.scheduledDeliveryTime?(i(),r(p,{key:1,label:o(n)("common.scheduledDeliveryTime")},{default:e(()=>[u(s(o(pe)(l.value.scheduledDeliveryTime)),1)]),_:1},8,["label"])):_("",!0),a(p,{label:o(n)("common.clientInfo")},{default:e(()=>{var t,x;return[l.value.clientInfo?(i(),$("div",Zl,[(x=(t=l.value.clientInfo)==null?void 0:t.application)!=null&&x.isWebBrowser?(i(),r(N,{key:0,round:"",size:"small"},{default:e(()=>[u(s(o(n)("common.webBrowser")),1)]),_:1})):_("",!0),k("div",{class:"ellipsis",title:O(l.value)},s(O(l.value)),9,et)])):_("",!0)]}),_:1},8,["label"]),l.value.paymentMethod?(i(),r(p,{key:2,label:o(n)("common.paymentMethod")},{default:e(()=>[a(N,{round:"",type:"success"},{default:e(()=>[u(s(l.value.paymentMethod),1)]),_:1})]),_:1},8,["label"])):_("",!0),a(p,{label:o(n)("commerce.shippingStatus")},{default:e(()=>[l.value.partialDelivered?(i(),r(N,{key:0,round:"",type:"warning"},{default:e(()=>[u(s(o(n)("commerce.partialShipped")),1)]),_:1})):l.value.delivered?(i(),r(N,{key:1,round:"",type:"success"},{default:e(()=>[u(s(o(n)("commerce.shipped")),1)]),_:1})):(i(),r(N,{key:2,round:"",type:"info"},{default:e(()=>[u(s(o(n)("commerce.unshipped")),1)]),_:1}))]),_:1},8,["label"]),o(T).settings.orderExtensionFields?(i(!0),$(U,{key:3},K(o(T).settings.orderExtensionFields,(t,x)=>(i(),r(p,{key:x,label:t.displayName||t.name},{default:e(()=>[k("div",lt,[Z(t.name)?(i(),r(ee,{key:0,tip:Z(t.name)},{default:e(()=>[u(s(Z(t.name)),1)]),_:2},1032,["tip"])):_("",!0),t.editable?(i(),r(_e,{key:1,class:"cursor-pointer iconfont icon-a-writein text-blue",onClick:B=>{V.value={key:t.name,value:Z(t.name)||""},w.value=!0}},null,8,["onClick"])):_("",!0)])]),_:2},1032,["label"]))),128)):_("",!0)]),_:1},8,["title"]),a(Te,{data:o(Q),"row-key":"rowKey",class:"el-table--gray","default-expand-all":"","row-class-name":ie},{default:e(()=>[o(Q).some(t=>{var x;return(x=t.children)==null?void 0:x.length})?(i(),r(me,{key:0,width:"25"})):_("",!0),a(yl,{columns:o(R)},{title:e(({row:t})=>[k("div",null,[k("div",null,s(t.title),1),k("div",tt,s(o(Ne)(t.options)),1)])]),price:e(({row:t})=>[a(F,{currency:l.value.currency,original:t.originalPrice,amount:t.price},null,8,["currency","original","amount"])]),totalAmount:e(({row:t})=>[a(F,{currency:l.value.currency,amount:t.totalAmount,original:t.originalAmount},null,8,["currency","amount","original"])]),taxAmount:e(({row:t})=>[a(F,{currency:l.value.currency,amount:t.taxAmount},null,8,["currency","amount"])]),discounts:e(({row:t})=>[k("div",ot,[(i(!0),$(U,null,K(t.discountAllocations,(x,B)=>(i(),r(N,{key:B},{default:e(()=>[u(s(x.title),1)]),_:2},1024))),128))])]),_:1},8,["columns"]),a(me,{label:o(n)("commerce.deliveryStatus")},{default:e(({row:t})=>[a(Wl,{line:t},null,8,["line"])]),_:1},8,["label"]),a(me,{align:"right"},{default:e(({row:t})=>[t.extensionButton?(i(),r(ye,{key:0,type:"primary",size:"small",onClick:x=>Y(t.extensionButton)},{default:e(()=>[u(s(t.extensionButton.text),1)]),_:2},1032,["onClick"])):_("",!0)]),_:1})]),_:1},8,["data"]),k("div",at,[k("div",nt,[l.value.discountAllocations.length?(i(),r(z,{key:0,name:o(n)("common.discount")},{default:e(()=>[k("div",it,[(i(!0),$(U,null,K(l.value.discountAllocations,(t,x)=>(i(),r(N,{key:x},{default:e(()=>[u(s(t.title),1)]),_:2},1024))),128))])]),_:1},8,["name"])):_("",!0),k("div",st,[l.value.earnPoints>0?(i(),$("div",ut,[k("span",null,s(o(n)("common.earn")),1),k("span",null,s(l.value.earnPoints),1),k("span",null,s(o(n)("commerce.points")),1)])):_("",!0)])]),a(z,{name:o(n)("commerce.subtotalAmount")},{default:e(()=>{var t;return[a(F,{amount:(t=l.value)==null?void 0:t.subtotalAmount,currency:l.value.currency,original:l.value.originalSubtotalAmount},null,8,["amount","currency","original"])]}),_:1},8,["name"]),a(z,{name:o(n)("common.tax")},{default:e(()=>{var t;return[a(F,{amount:(t=l.value)==null?void 0:t.taxAmount,currency:l.value.currency},null,8,["amount","currency"])]}),_:1},8,["name"]),(Ve=l.value)!=null&&Ve.insuranceAmount?(i(),r(z,{key:0,name:o(n)("commerce.insuranceAmount")},{default:e(()=>{var t;return[a(F,{amount:(t=l.value)==null?void 0:t.insuranceAmount,currency:l.value.currency},null,8,["amount","currency"])]}),_:1},8,["name"])):_("",!0),(Ce=l.value)!=null&&Ce.pointsDeductionAmount?(i(),r(z,{key:1,name:o(n)("commerce.points")},{default:e(()=>{var t;return[a(F,{amount:-((t=l.value)==null?void 0:t.pointsDeductionAmount)},null,8,["amount"]),u(" ("+s(l.value.redeemPoints)+" "+s(o(n)("commerce.points"))+") ",1)]}),_:1},8,["name"])):_("",!0),a(z,{name:o(n)("commerce.shippingAmount")},{default:e(()=>{var t,x,B,J;return[k("div",rt,[a(F,{amount:(t=l.value)==null?void 0:t.shippingAmount,currency:l.value.currency},null,8,["amount","currency"]),((J=(B=(x=l.value)==null?void 0:x.shippingAllocations)==null?void 0:B.length)!=null?J:0)>1?(i(),$("div",mt,[dt,(i(!0),$(U,null,K(l.value.shippingAllocations,(q,G)=>(i(),$("div",{key:G,class:"flex items-center gap-4"},[a(Se,{placement:"top",content:q.title},{default:e(()=>[a(F,{amount:q.cost,currency:l.value.currency},null,8,["amount","currency"])]),_:2},1032,["content"]),G!=l.value.shippingAllocations.length-1?(i(),$("span",ct,"+")):_("",!0)]))),128)),pt])):_("",!0)])]}),_:1},8,["name"]),a(z,{name:o(n)("common.total")},{default:e(()=>[a(F,{currency:l.value.currency,amount:l.value.totalAmount,original:l.value.originalAmount},null,8,["currency","amount","original"])]),_:1},8,["name"])])]),l.value.shippingAddress?(i(),$("div",vt,[a(re,{title:o(n)("commerce.shippingAddress")},{default:e(()=>[a(p,{label:o(n)("common.country")},{default:e(()=>{var t,x,B;return[u(s(o(ve)((x=(t=E.value)==null?void 0:t.countryDetail)==null?void 0:x.nameTranslations,(B=l.value.shippingAddress)==null?void 0:B.country)),1)]}),_:1},8,["label"]),a(p,{label:o(n)("common.contact")},{default:e(()=>{var t,x;return[u(s((t=l.value.shippingAddress)==null?void 0:t.firstName)+" "+s((x=l.value.shippingAddress)==null?void 0:x.lastName),1)]}),_:1},8,["label"]),a(p,{label:o(n)("common.phone")},{default:e(()=>{var t;return[u(s((t=l.value.shippingAddress)==null?void 0:t.phone),1)]}),_:1},8,["label"]),a(p,{label:o(n)("common.province")},{default:e(()=>{var t,x,B;return[u(s(o(ve)((x=(t=E.value)==null?void 0:t.provinceDetail)==null?void 0:x.nameTranslations,(B=l.value.shippingAddress)==null?void 0:B.province)),1)]}),_:1},8,["label"]),a(p,{label:o(n)("common.city")},{default:e(()=>{var t,x,B;return[u(s(o(ve)((x=(t=E.value)==null?void 0:t.cityDetail)==null?void 0:x.nameTranslations,(B=l.value.shippingAddress)==null?void 0:B.city)),1)]}),_:1},8,["label"]),a(p,{label:o(n)("common.postalCode")},{default:e(()=>{var t;return[u(s((t=l.value.shippingAddress)==null?void 0:t.zip),1)]}),_:1},8,["label"]),a(p,{label:o(n)("common.address"),span:3},{default:e(()=>{var t;return[u(s((t=l.value.shippingAddress)==null?void 0:t.address1),1)]}),_:1},8,["label"])]),_:1},8,["title"])])):_("",!0),k("div",ft,[a(re,{title:o(n)("commerce.note")},{extra:e(()=>[a(_e,{class:"cursor-pointer iconfont icon-a-writein text-blue text-l",onClick:c[0]||(c[0]=t=>{I.value=l.value.note,d.value=!0})})]),default:e(()=>[_t]),_:1},8,["title"]),k("div",yt,s(l.value.note),1)]),f.value?(i(),r(Nl,{key:1,id:l.value.id,modelValue:f.value,"onUpdate:modelValue":c[1]||(c[1]=t=>f.value=t),onReload:v},null,8,["id","modelValue"])):_("",!0),g.value?(i(),r(jl,{key:2,id:l.value.id,modelValue:g.value,"onUpdate:modelValue":c[2]||(c[2]=t=>g.value=t),lines:l.value.lines,onReload:v},null,8,["id","modelValue","lines"])):_("",!0),D.value?(i(),r(Hl,{key:3,id:l.value.id,modelValue:D.value,"onUpdate:modelValue":c[3]||(c[3]=t=>D.value=t),onReload:v},null,8,["id","modelValue"])):_("",!0),a(xe,{modelValue:d.value,"onUpdate:modelValue":c[6]||(c[6]=t=>d.value=t),title:o(n)("commerce.note")},{footer:e(()=>[a(he,{onConfirm:se,onCancel:c[5]||(c[5]=t=>d.value=!1)})]),default:e(()=>[a(ke,{"label-position":"top"},{default:e(()=>[a(be,null,{default:e(()=>[a(ge,{modelValue:I.value,"onUpdate:modelValue":c[4]||(c[4]=t=>I.value=t),type:"textarea",rows:5},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),V.value?(i(),r(xe,{key:4,modelValue:w.value,"onUpdate:modelValue":c[9]||(c[9]=t=>w.value=t),title:V.value.key},{footer:e(()=>[a(he,{onConfirm:ue,onCancel:c[8]||(c[8]=t=>w.value=!1)})]),default:e(()=>[a(ke,{"label-position":"top"},{default:e(()=>[a(be,null,{default:e(()=>[a(ge,{modelValue:V.value.value,"onUpdate:modelValue":c[7]||(c[7]=t=>V.value.value=t),type:"textarea",rows:5},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])):_("",!0)])):_("",!0),l.value?(i(),r(Fe,{key:1,permission:{feature:"orders",action:"edit"},back:"","hidden-confirm":"",onCancel:ne},{"extra-buttons":e(()=>{var t,x,B,J,q,G;return[l.value.extensionButton?(i(),r(ye,{key:0,type:"primary",round:"",onClick:c[10]||(c[10]=ce=>Y(l.value.extensionButton))},{default:e(()=>[u(s(l.value.extensionButton.text),1)]),_:1})):_("",!0),!((t=l.value)!=null&&t.paid)&&!((x=l.value)!=null&&x.canceled)?(i(),r(de,{key:1,round:"",type:"primary",onClick:c[11]||(c[11]=ce=>D.value=!0)},{default:e(()=>[u(s(o(n)("common.pay")),1)]),_:1})):_("",!0),((B=l.value)==null?void 0:B.paid)&&!((J=l.value)!=null&&J.canceled)&&(!((q=l.value)!=null&&q.delivered)||l.value.partialDelivered)?(i(),r(de,{key:2,round:"",type:"primary",onClick:c[12]||(c[12]=ce=>g.value=!0)},{default:e(()=>[u(s(o(n)("commerce.delivery")),1)]),_:1})):_("",!0),(G=l.value)!=null&&G.canceled?_("",!0):(i(),r(de,{key:3,round:"",type:"danger",onClick:c[13]||(c[13]=ce=>f.value=!0)},{default:e(()=>[u(s(o(n)("common.cancel")),1)]),_:1}))]}),_:1})):_("",!0)],64)}}});export{Ua as default};
