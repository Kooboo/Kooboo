var F=(a,s,g)=>new Promise((w,d)=>{var o=c=>{try{p(g.next(c))}catch(f){d(f)}},m=c=>{try{p(g.throw(c))}catch(f){d(f)}},p=c=>c.done?w(c.value):Promise.resolve(c.value).then(o,m);p((g=g.apply(a,s)).next())});import{a as H}from"./replace-all.7cf5f327.js";import{d as K,j as Q,u as G}from"./main.ea42d807.js";import{d as T,o as r,j as C,w as u,f as e,t,u as l,a as h,F as N,b6 as P,b as i,n as B,aH as I,ck as J,k as W,g as y,i as X,x as Y}from"./url.2e6a77c4.js";import{g as R}from"./i18n.48bd28ac.js";import{_ as M}from"./chart-js.8991e1aa.js";import{E as ee}from"./windi.a5b0b048.js";import{E as j}from"./index.73bdefdb.js";import{_ as te}from"./tooltip.28a451cc.js";import{c as se}from"./index.0d2684bf.js";import{E as ae}from"./index.a439b087.js";import{_ as oe}from"./k-table.d4486972.js";import{_ as le}from"./action-tag.26bc97c0.js";import{u as O}from"./use-date.01b82ce0.js";import{_ as ne}from"./object-type-tag.d88b7d53.js";import{E as ce}from"./index.b494e80e.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./dark.ddf8665a.js";import"./cloneDeep.ff43c1f8.js";import"./_baseClone.adbc92f5.js";import"./_baseIsEqual.c0d7e77a.js";import"./index.379e80ad.js";import"./focus-trap.23f44899.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.ff0264f3.js";import"./index.fc90f5ad.js";import"./event.776e7e11.js";import"./error.7e8331f1.js";import"./index.fcc3ea42.js";import"./scroll.f51de5d8.js";import"./isEqual.f1ae9fb3.js";import"./debounce.61c67278.js";import"./toNumber.574be4f1.js";import"./index.064c7de9.js";import"./validator.e2869aba.js";import"./sortable.esm.a99254e8.js";import"./icon-button.3313e42d.js";import"./index.2bc50276.js";import"./index.8262f5ef.js";import"./index.7034978e.js";import"./index.77edae39.js";import"./index.695d0284.js";import"./dayjs.min.0a66969b.js";const ie=()=>K.get(H("dashboard/info")),re={class:"mb-16 text-18px"},de={key:0,class:"grid grid-cols-4 gap-12"},ue={class:"ellipsis leading-4"},pe={key:1,class:"flex items-center justify-center text-s text-999"},_e=T({props:{list:null},setup(a){const{t:s}=R();return(g,w)=>{const d=ee,o=j;return r(),C(o,{shadow:"always"},{default:u(()=>[e("div",re,t(l(s)("common.recentVisits")),1),a.list.length?(r(),h("ul",de,[(r(!0),h(N,null,P(a.list,(m,p)=>(r(),h("li",{key:p,class:"px-12 py-8 rounded-normal bg-[#e9eaf0] dark:bg-[#555] dark:bg-[#303030]"},[i(l(J),{to:m.url},{default:u(()=>[e("div",ue,[i(d,{class:B(["iconfont text-16px",m.icon||"icon-Datacenter"])},null,8,["class"]),I(" "+t(l(s)(m.name)),1)])]),_:2},1032,["to"])]))),128))])):(r(),h("div",pe,t(l(s)("common.notRecentVisits")),1))]),_:1})}}}),me={class:"mb-16 text-18px"},fe={id:"myResource",class:"w-full border-collapse"},xe={key:0},he={class:"border-1 border-[#e1e2e8] dark:border-666 px-12 py-8 leading-24px"},ve={class:"flex justify-between"},be={class:"leading-24px w-100px"},ge={class:"flex space-x-16"},we={class:"flex items-center space-x-8 w-70px"},ye={class:"text-999"},$e={class:"font-bold"},ke={class:"flex items-center space-x-8 w-110px"},Te={class:"text-999"},Ce={class:"font-bold"},je={class:"border-1 border-[#e1e2e8] dark:border-666 px-12 py-8 leading-24px"},Ee={class:"flex justify-between"},Ne={class:"leading-24px w-100px"},Re={class:"flex space-x-16"},De={class:"flex items-center space-x-8 w-70px"},Pe={class:"text-999"},Le={class:"font-bold"},Se={class:"flex items-center space-x-8 w-110px"},Ie={class:"text-999"},Ve={class:"font-bold"},ze=T({props:{list:null},setup(a){const{t:s}=R();return(g,w)=>{const d=te,o=se,m=ae,p=j;return r(),C(p,{shadow:"always"},{default:u(()=>[e("div",me,[e("span",null,t(l(s)("common.myResource")),1),i(d,{tip:l(s)("common.myResourceTips"),"custom-class":"ml-4"},null,8,["tip"])]),i(m,{class:"overflow-x-auto"},{default:u(()=>[e("table",fe,[(r(!0),h(N,null,P(a.list,(c,f)=>(r(),h(N,{key:c.name},[f%2==0||f==0?(r(),h("tr",xe,[e("td",he,[e("div",ve,[e("span",be,[i(o,{class:"rounded-full",size:"small"},{default:u(()=>[I(t(a.list[f].name),1)]),_:2},1024)]),e("div",ge,[e("div",we,[e("span",ye,t(l(s)("common.count")),1),e("span",$e,t(a.list[f].count),1)]),e("div",ke,[e("span",Te,t(l(s)("common.size")),1),e("span",Ce,t(a.list[f].sizeString),1)])])])]),e("td",je,[e("div",Ee,[e("span",Ne,[i(o,{class:"rounded-full",size:"small"},{default:u(()=>[I(t(a.list[f+1].name),1)]),_:2},1024)]),e("div",Re,[e("div",De,[e("span",Pe,t(l(s)("common.count")),1),e("span",Le,t(a.list[f+1].count),1)]),e("div",Se,[e("span",Ie,t(l(s)("common.size")),1),e("span",Ve,t(a.list[f+1].sizeString),1)])])])])])):W("",!0)],64))),128))])]),_:1})]),_:1})}}}),Ae={class:"mb-16 text-18px"},Fe={class:"ellipsis"},Me=T({props:{list:null},setup(a){const{t:s}=R();return(g,w)=>{const d=ce,o=le,m=oe,p=j;return r(),C(p,{shadow:"always"},{default:u(()=>[e("div",Ae,t(l(s)("common.editLog")),1),i(m,{data:a.list},{default:u(()=>[i(d,{label:l(s)("common.name"),"min-width":"150"},{default:u(({row:c})=>[I(t(c.displayName),1)]),_:1},8,["label"]),i(d,{label:l(s)("common.objectType"),width:"110",align:"center"},{default:u(({row:c})=>[i(ne,{type:c.storeName},null,8,["type"])]),_:1},8,["label"]),i(d,{label:l(s)("common.action"),width:"90",align:"center"},{default:u(({row:c})=>[i(o,{type:c.actionType},null,8,["type"])]),_:1},8,["label"]),i(d,{label:l(s)("common.user")},{default:u(({row:c})=>[e("span",Fe,t(c.userName),1)]),_:1},8,["label"]),i(d,{label:l(s)("common.lastModified"),width:"180"},{default:u(({row:c})=>[I(t(l(O)(c.lastModify)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})}}}),We={class:"flex space-x-4"},Be={class:"bg-blue h-60px text-30px w-60px rounded-full flex justify-center items-center text-fff uppercase overflow-hidden mr-16"},Oe={class:"flex-1 space-y-12 overflow-hidden"},Ue={class:"flex space-x-4"},Ze={class:"w-60px text-999"},qe=["title"],He={class:"flex space-x-4"},Ke={class:"w-60px text-999"},Qe={class:"flex-1"},Ge={class:"flex space-x-4"},Je={class:"w-60px text-999"},Xe={class:"flex-1 ellipsis"},Ye={class:"space-y-18px mt-36px"},et={class:"flex space-x-4"},tt={class:"w-76px text-999"},st={class:"flex-1 overflow-hidden"},at=["title"],ot={class:"flex space-x-4"},lt={class:"w-76px text-999"},nt={class:"flex-1 space-y-4 overflow-hidden"},ct=["title"],it={class:"ellipsis max-w-1/2"},rt={class:"flex space-x-4"},dt={class:"w-76px text-999"},ut=["href","title"],pt=T({props:{info:null},setup(a){const{t:s}=R();return(g,w)=>{const d=j;return r(),C(d,{shadow:"always"},{default:u(()=>{var o,m,p,c,f,x,E,D,L,S;return[e("div",We,[e("div",Be,t((o=a.info)==null?void 0:o.siteName.substring(0,1)),1),e("ul",Oe,[e("li",Ue,[e("span",Ze,t(l(s)("common.name")),1),e("span",{class:"flex-1 ellipsis overflow-hidden",title:(m=a.info)==null?void 0:m.siteName},t((p=a.info)==null?void 0:p.siteName),9,qe)]),e("li",He,[e("span",Ke,t(l(s)("common.type")),1),e("span",Qe,t((c=a.info)==null?void 0:c.type),1)]),e("li",Ge,[e("span",Je,t(l(s)("common.created")),1),e("span",Xe,t(l(O)((f=a.info)==null?void 0:f.creationDate)),1)])])]),e("ul",Ye,[e("li",et,[e("span",tt,t(l(s)("common.domain")),1),e("div",st,[(r(!0),h(N,null,P((x=a.info)==null?void 0:x.domains,$=>(r(),h("div",{key:$,class:"overflow-hidden ellipsis",title:$},t($),9,at))),128))])]),e("li",ot,[e("span",lt,t(l(s)("common.user")),1),e("div",nt,[(r(!0),h(N,null,P((E=a.info)==null?void 0:E.users,$=>(r(),h("div",{key:$.userName,class:"flex space-x-32 h-16 leading-16px"},[e("span",{class:"ellipsis max-w-1/2",title:$.userName},t($.userName),9,ct),e("span",it,t($.role),1)]))),128))])]),e("li",rt,[e("span",dt,t(l(s)("common.url")),1),e("a",{class:"flex-1 text-blue overflow-hidden ellipsis",href:(D=a.info)==null?void 0:D.previewUrl,title:(L=a.info)==null?void 0:L.previewUrl,target:"_blank"},t((S=a.info)==null?void 0:S.previewUrl),9,ut)])])]}),_:1})}}}),_t={class:"mb-16 text-18px"},mt={class:"grid grid-cols-2 gap-12"},ft=["href"],xt=["src"],ht=["title"],vt=T({props:{list:null},setup(a){const{t:s}=R();return(g,w)=>{const d=j;return r(),C(d,{shadow:"always"},{default:u(()=>[e("div",_t,t(l(s)("common.document")),1),e("div",mt,[(r(!0),h(N,null,P(a.list,o=>(r(),h("a",{key:o.name,href:o.url,target:"_blank",class:"cursor-pointer px-12 py-8 border-1 border-[#e1e2e8] dark:border-666 rounded-5px flex items-center leading-6 space-x-4 dark:hover:bg-[#444] hover:bg-[#eff6ff]"},[e("img",{src:o.ico,class:"w-24 h-24"},null,8,xt),e("span",{class:"ellipsis",title:o.name},t(o.name),9,ht)],8,ft))),128))])]),_:1})}}}),bt={class:"mb-12 text-000 dark:text-gray text-18px"},gt={class:"my-12 text-12px dark:text-999"},wt=["href"],yt=T({props:{info:null},setup(a){return(s,g)=>{const w=j;return r(),C(w,{shadow:"always"},{default:u(()=>{var d,o,m,p;return[e("div",bt,t((d=a.info)==null?void 0:d.title),1),e("p",gt,t((o=a.info)==null?void 0:o.summary),1),e("a",{class:"text-blue underline mt-16 block",href:(m=a.info)==null?void 0:m.url,target:"_blank"},t((p=a.info)==null?void 0:p.linkText),9,wt)]}),_:1})}}}),$t={class:"mb-16 text-18px flex items-center justify-between"},kt={class:"text-blue text-14px cursor-pointer w-80px",href:"https://www.kooboo.com/",target:"_blank"},Tt={class:"space-y-20px text-999"},Ct=["src"],jt={class:"flex-1 overflow-hidden"},Et={class:"mb-12 text-18px flex items-center space-x-24"},Nt=["href","title"],Rt={class:"text-12px cursor-pointer w-80px ellipsis"},Dt={class:"text-12px leading-4"},Pt=T({props:{list:null},setup(a){const{t:s}=R();return(g,w)=>{const d=j;return r(),C(d,{shadow:"always"},{default:u(()=>[e("div",$t,[e("span",null,t(l(s)("common.productNews")),1),e("a",kt,t(l(s)("common.viewMore")),1)]),e("ul",Tt,[(r(!0),h(N,null,P(a.list,o=>(r(),h("li",{key:o.title,class:"flex space-x-8"},[o.image?(r(),h("img",{key:0,src:o.image,class:"w-85px shadow-s-10"},null,8,Ct)):W("",!0),e("div",jt,[e("div",Et,[e("a",{class:B(["dark:text-gray hover:text-blue text-16px ellipsis text-666 flex-1",o.image?"w-150px":"w-250px"]),href:o.url,title:o.title,target:"_blank"},t(o.title),11,Nt),e("span",Rt,t(o.date),1)]),e("p",Dt,t(o.summary),1)])]))),128))])]),_:1})}}}),Lt={class:"p-24 text-14px"},St={class:"flex space-x-16"},It={class:"w-2/3 flex flex-col gap-16"},Vt={class:"mb-20px text-18px"},zt={class:"mb-20px text-18px"},At={class:"mb-20px text-18px"},Ft={class:"flex-1 flex flex-col gap-16 overflow-hidden"},Mt=T({setup(a){const{t:s}=R(),g=y([]),w=y([]),d=Q();y([{orderId:"1231231241412",amount:100,status:"\u5DF2\u652F\u4ED8",lastModified:"2023-09-25T05:39:52.3228284Z"},{orderId:"1231231241412",amount:100,status:"\u5DF2\u652F\u4ED8",lastModified:"2023-09-25T05:39:52.3228284Z"},{orderId:"1231231241412",amount:100,status:"\u5DF2\u652F\u4ED8",lastModified:"2023-09-25T05:39:52.3228284Z"}]);const o=y([]),m=y([]),p=y(),c=y([]),f=y(),x=y();function E(n,v="16px"){var z;const b=document.createElement("canvas").getContext("2d");return b.font=`${v} Arial`,(z=b.measureText(n))==null?void 0:z.width}function D({text:n,width:v,fontSize:_,isEllipsis:b=!1}){const k=E(n,_)+(b?E("\u2026",_):0);if(k<=v)return n+(b?"\u2026":"");{const z=E("\u2026",_),Z=k+(b?0:E("\u2026",_))-v,q=n.length-Math.ceil(Z/z);return D({text:n.slice(0,q),width:v,fontSize:_,isEllipsis:!0})}}const L=y({type:"bar",data:{labels:[],datasets:[{label:s("common.pageView"),data:[],backgroundColor:"#2296f3",borderWidth:1,fill:!1,barPercentage:c.value.map(n=>n.name).length<10?.4:.7,categoryPercentage:c.value.map(n=>n.name).length<10?.4:.7}]},options:{maintainAspectRatio:!1,scales:{y:{},x:{offset:!0,grid:{display:!1},ticks:{callback:function(n,v,_){var b;return(b=c.value.map(k=>k.name)[v])==null?void 0:b.substring(5)}}}},plugins:{legend:{display:!1}}}}),S=y({type:"bar",data:{labels:[],datasets:[{label:s("dashboard.count"),data:[],backgroundColor:"#2296f3",borderWidth:1,fill:!1,barPercentage:.7,categoryPercentage:.7}]},options:{maintainAspectRatio:!1,indexAxis:"y",scales:{y:{ticks:{stepSize:250,callback:function(n,v,_){var b,k;return D({text:(k=Object.keys((b=x.value)==null?void 0:b.top.topPages)[v])!=null?k:"",fontSize:"12px",width:100})}}},x:{grid:{display:!1},ticks:{stepSize:3}}},plugins:{legend:{display:!1}}}}),$=y({type:"bar",data:{labels:[],datasets:[{label:s("dashboard.count"),data:[],borderWidth:1,backgroundColor:"#2296f3",barPercentage:.7,categoryPercentage:.7}]},options:{maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{stepSize:400}},y:{ticks:{callback:function(n,v,_){var b,k;return D({text:(k=Object.keys((b=x.value)==null?void 0:b.top.topReferrer)[v])!=null?k:"",fontSize:"12px",width:100})}}}},plugins:{legend:{display:!1}}}}),V=G();function A(n,v){if(n.value.data.labels=v.labels,n.value.data.labels.length<5)for(let _=n.value.data.labels.length;_<5;_++)n.value.data.labels.push("");if(n.value.data.datasets[0].data=v.values,n.value.data.datasets[0].data.length<5)for(let _=n.value.data.datasets[0].data.length;_<5;_++)n.value.data.datasets[0].data.push(0)}const U=()=>F(this,null,function*(){V.hasAccess("dashboard")&&(x.value=yield ie(),w.value=x.value.editLog,m.value=x.value.info.doc,g.value=x.value.resource,o.value=x.value.info.news,p.value=x.value.info.banner,c.value=x.value.visitors,f.value=x.value.site,A(L,{labels:c.value.map(n=>n.name),values:c.value.map(n=>n.count)}),A(S,{labels:Object.keys(x.value.top.topPages),values:Object.values(x.value.top.topPages)}),A($,{labels:Object.keys(x.value.top.topReferrer),values:Object.values(x.value.top.topReferrer)}))});return X(()=>V.site,()=>F(this,null,function*(){var n;Y("siteId")==((n=V.site)==null?void 0:n.id)&&V.site&&U()}),{immediate:!0}),(n,v)=>{const _=j;return r(),h("div",Lt,[e("div",St,[e("div",It,[i(_e,{list:l(d)},null,8,["list"]),i(ze,{list:g.value},null,8,["list"]),i(_,{shadow:"always"},{default:u(()=>[e("div",null,[e("div",Vt,t(l(s)("common.visitorLog")),1),e("div",null,[i(M,{class:"h-300px",options:L.value},null,8,["options"])])])]),_:1}),i(_,{shadow:"always"},{default:u(()=>[e("div",zt,t(l(s)("common.topPage")),1),e("div",null,[i(M,{class:"h-300px",options:S.value},null,8,["options"])])]),_:1}),i(_,{shadow:"always"},{default:u(()=>[e("div",null,[e("div",At,t(l(s)("common.topReference")),1),e("div",null,[i(M,{class:"h-300px",options:$.value},null,8,["options"])])])]),_:1}),i(Me,{list:w.value},null,8,["list"])]),e("div",Ft,[i(pt,{info:f.value},null,8,["info"]),i(vt,{list:m.value},null,8,["list"]),p.value?(r(),C(yt,{key:0,info:p.value},null,8,["info"])):W("",!0),i(Pt,{list:o.value},null,8,["list"])])])])}}});var Ps=Mt;const Ls={};export{Ls as components,Ps as default};
