var U=Object.defineProperty,z=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var S=(l,e,a)=>e in l?U(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a,V=(l,e)=>{for(var a in e||(e={}))M.call(e,a)&&S(l,a,e[a]);if(h)for(var a of h(e))P.call(e,a)&&S(l,a,e[a]);return l},x=(l,e)=>z(l,D(e));var y=(l,e,a)=>new Promise((n,d)=>{var r=s=>{try{i(a.next(s))}catch(c){d(c)}},g=s=>{try{i(a.throw(s))}catch(c){d(c)}},i=s=>s.done?n(s.value):Promise.resolve(s.value).then(r,g);i((a=a.apply(l,e)).next())});import{_ as Q}from"./k-table.c13bd7f5.js";import{a as T}from"./replace-all.b35629e7.js";import{d as N}from"./main.1c3b59e3.js";import{u as W}from"./use-date.55b953fa.js";import{B as F}from"./breadcrumb.bcaeaf75.js";import{S as j}from"./search-input.9d340a13.js";import{g as A}from"./i18n.25caaace.js";import{w as H}from"./date.b90b8627.js";import{d as K,E as L,g as q,h as O,i as Y,o as f,a as k,b as m,u as t,f as $,w as u,F as C,b6 as E,j as G,aH as B,t as I,ch as J}from"./url.8f5ec20c.js";import{E as R,a as X}from"./index.960b9732.js";import{E as Z}from"./index.5388dbc8.js";import"./sortable.esm.a99254e8.js";import"./icon-button.0e134c9b.js";import"./windi.a815125a.js";import"./index.e9f8834a.js";import"./index.1e7e06b8.js";import"./index.158cdd11.js";import"./focus-trap.81e4fb05.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.0c2ced08.js";import"./index.f9c89813.js";import"./index.a9a077b4.js";import"./isEqual.2e410d13.js";import"./_baseIsEqual.0a4e01e5.js";import"./index.f571dfc9.js";import"./event.776e7e11.js";import"./error.7e8331f1.js";import"./index.2e51d36e.js";import"./index.5b499f72.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./dayjs.min.2044f1dd.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.c6488b3c.js";/* empty css                                                                 */import"./scroll.0cf77af8.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.c93fe8e7.js";import"./validator.9b0d789f.js";const ee=l=>N.get(T("SqlLog/List"),l),ae=()=>N.get(T("SqlLog/weeks")),oe={class:"p-24"},te={class:"flex items-center py-24 space-x-16"},$e=K({setup(l){const{t:e}=A(),a=L({currentPage:1,pageCount:0,pageSize:1}),n=q([]),d=[{label:"SQLite",value:"sqlite"},{label:"MySQL",value:"mysql"},{label:"SQLServer",value:"sqlserver"}],r=L({type:"",week:"",keyword:"",pageIndex:1}),g=q([]);O(()=>y(this,null,function*(){yield i(),yield s()}));function i(){return y(this,null,function*(){n.value=yield ae(),r.week=n.value[0]})}function s(b){return y(this,null,function*(){r.pageIndex=b||1;const p=yield ee(x(V({},r),{keyword:r.keyword.trim()}));g.value=p.list,a.currentPage=p.pageNr,a.pageCount=p.totalPages,a.pageSize=p.pageSize})}Y(()=>r.keyword,()=>{r.keyword?c():s()});const c=J(s,1e3);return(b,p)=>{const _=R,v=X,w=Z;return f(),k("div",oe,[m(F,{name:t(e)("common.sqlLogs")},null,8,["name"]),$("div",te,[m(v,{modelValue:t(r).week,"onUpdate:modelValue":p[0]||(p[0]=o=>t(r).week=o),class:"w-240px",placeholder:t(e)("common.week"),title:t(e)("common.selectAWeek"),onChange:s},{default:u(()=>[(f(!0),k(C,null,E(n.value,o=>(f(),G(_,{key:o,value:o,label:t(H)(o),"data-cy":"week-opt"},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","title"]),m(v,{modelValue:t(r).type,"onUpdate:modelValue":p[1]||(p[1]=o=>t(r).type=o),class:"w-200px",clearable:"",placeholder:t(e)("common.type"),onChange:s},{default:u(()=>[(f(),k(C,null,E(d,o=>m(_,{key:o.value,value:o.value,label:o.label,"data-cy":"type-opt"},null,8,["value","label"])),64))]),_:1},8,["modelValue","placeholder"]),m(j,{modelValue:t(r).keyword,"onUpdate:modelValue":p[2]||(p[2]=o=>t(r).keyword=o),class:"w-250px",placeholder:t(e)("common.enterYourKeyword"),clearable:"","data-cy":"keyword"},null,8,["modelValue","placeholder"])]),m(t(Q),{data:g.value,pagination:t(a),onChange:s},{default:u(()=>[m(w,{label:t(e)("common.type"),prop:"type",width:"100"},null,8,["label"]),m(w,{label:t(e)("common.lastModified"),width:"180"},{default:u(({row:o})=>[B(I(t(W)(o.dateTime)),1)]),_:1},8,["label"]),m(w,{label:t(e)("common.content"),prop:"sql"},null,8,["label"]),m(w,{label:t(e)("common.parameters"),width:"160"},{default:u(({row:o})=>[B(I(!o.params||o.params==="null"?"":o.params),1)]),_:1},8,["label"])]),_:1},8,["data","pagination"])])}}});export{$e as default};
