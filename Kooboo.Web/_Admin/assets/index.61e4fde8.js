var L=(S,f,r)=>new Promise((o,t)=>{var b=i=>{try{x(r.next(i))}catch(c){t(c)}},u=i=>{try{x(r.throw(i))}catch(c){t(c)}},x=i=>i.done?o(i.value):Promise.resolve(i.value).then(b,u);x((r=r.apply(S,f)).next())});import{_ as _e}from"./tooltip.7fc982a4.js";import{g as F,w as P}from"./i18n.97105311.js";import{_ as be}from"./index.5f37a601.js";import{B as ye}from"./breadcrumb.0ef7e7c4.js";import{u as Ve}from"./use-shortcuts.21ce2d8e.js";import{J as ge,K as ke,L as xe,u as we,M as Se,N as Ee,G as Te}from"./commerce.c633c6e0.js";import{r as $e}from"./monaco.6a3362ef.js";import{u as Ce}from"./email.aaec640d.js";import{_ as ue}from"./index.051a5017.js";import{_ as le}from"./index.9ffc2c80.js";import{a as q,u as he,b as Ue,q as Ne}from"./validate.98ddbafd.js";import{_ as Ae,R as De}from"./dev-mode.2a667dd5.js";import{_ as Be}from"./index.75f855ef.js";import{E as oe,a as te,c as me}from"./index.afee24fe.js";import{E as X,a as Q}from"./index.317a7f30.js";import{E as Re}from"./index.c1764395.js";import{E as re,a as ie}from"./index.6302b2c1.js";import{E as je}from"./index.6ebaed6b.js";import{E as ae}from"./index.4587e608.js";import{E as W}from"./index.4b289bae.js";import{d as M,g as V,i as J,K as Ie,o as p,j as $,w as l,b as e,u as m,a as U,b6 as O,F as D,f as _,k as A,aH as j,t as E}from"./url.2e6a77c4.js";import{E as K}from"./windi.539ebeab.js";import{E as ne}from"./index.b09a9f00.js";import{E as Le}from"./index.1d8a0bb0.js";import{E as de}from"./index.00cc1b15.js";import{_ as pe}from"./k-table.e9121736.js";import{u as ce}from"./use-date.88693eba.js";import{E as ve}from"./index.f3d28a97.js";import{E as fe}from"./index.9589f7cf.js";import{E as Me,a as Oe}from"./index.01204c98.js";import{E as qe}from"./index.795c7a65.js";import"./replace-all.8fa5a83d.js";import"./main.52487121.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.f997a738.js";import"./error.7e8331f1.js";import"./classCompletion.a22e38a6.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./index.99641a60.js";import"./index.934159ee.js";import"./index.77759eed.js";import"./index.b1fe55d8.js";import"./index.51a59403.js";import"./index.29d7c76d.js";import"./style.f835519e.js";import"./toNumber.574be4f1.js";import"./_baseIsEqual.abb55a3a.js";import"./guid.c1a40312.js";import"./config.97fa1cfe.js";import"./dark.ea14b486.js";import"./page.d86e40bb.js";import"./index.d267cbe6.js";import"./index.07e210fb.js";import"./scroll.8babc10c.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.de18cf8f.js";import"./isNil.98bb3b88.js";import"./validator.1d438d08.js";import"./index.bc93d068.js";import"./index.9e96921b.js";import"./index.3fcd2f53.js";import"./dropdown.87a7678e.js";import"./refs.4001ce17.js";import"./use-copy-text.81d01785.js";import"./index.f03e2503.js";import"./extraLib.d94bb2b4.js";import"./use-save-tip.aeb07244.js";import"./confirm.46f27373.js";import"./logo-transparent.1566007e.js";import"./icon-button.e1f3bfd2.js";import"./index.975a8825.js";import"./vuedraggable.umd.e0027d17.js";import"./index.56d91124.js";import"./index.232e741a.js";import"./index.a163a028.js";import"./index.57372297.js";import"./index.fbe2a003.js";import"./alert.583ccfe6.js";import"./index.b1dc9dfd.js";import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.3ed42952.js";/* empty css                                                          */import"./file.c7952a49.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.f6d4a33c.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.4f5fb1ef.js";import"./image-editor.3291a85e.js";import"./index.cdaadc8a.js";import"./cloneDeep.5cd857a3.js";import"./_baseClone.f10ff33c.js";import"./main.esm.319d8703.js";import"./index.e98ba728.js";import"./_baseUniq.c477b8f6.js";import"./_baseIndexOf.4d7985be.js";import"./event.776e7e11.js";import"./isEqual.3700b7f1.js";import"./debounce.61c67278.js";import"./index.a46fa52c.js";import"./index.e3f90979.js";import"./sortable.esm.a99254e8.js";import"./index.7a88a6b5.js";import"./dayjs.min.378b3d72.js";const Fe={class:"flex items-center space-x-8 w-full"},Je={key:0,class:"border border-line rounded-normal p-8"},Pe=M({props:{modelValue:{type:Boolean},events:null,model:null},emits:["update:model-value","success"],setup(S,{emit:f}){var a,T,k;const r=S,o=V(),{t}=F(),b=V(!0),u=V(!!((T=(a=r.model)==null?void 0:a.sendToAddresses)!=null&&T.length)),x=V("preview"),i=V(),c=[{key:"preview",value:t("common.preview")},{key:"code",value:t("common.code")}],d=V(JSON.parse(JSON.stringify((k=r.model)!=null?k:{event:"",subjectTemplate:"",bodyTemplate:"",sendToCustomer:!0,sendToAddresses:[]}))),n={event:[q(t("common.eventRequiredTips"))]};function g(){return L(this,null,function*(){yield o.value.validate(),f("success",d.value),b.value=!1})}return J([()=>x.value,()=>d.value.event],()=>L(this,null,function*(){x.value!="preview"||!d.value.event||(yield Ie(),i.value=yield ge(d.value))}),{immediate:!0}),J(()=>d.value.event,()=>{const y=r.events.find(s=>s.name==d.value.event);y&&(d.value.subjectTemplate=y.mailSubjectTemplate,d.value.bodyTemplate=y.mailBodyTemplate)}),J(()=>u.value,()=>{u.value||(d.value.sendToAddresses=[])}),(y,s)=>{const v=oe,h=te,B=X,N=Re,z=re,H=ie,Y=je,Z=ue,ee=ae,I=Q,G=W;return p(),$(G,{modelValue:b.value,"onUpdate:modelValue":s[8]||(s[8]=R=>b.value=R),width:"800px","close-on-click-modal":!1,title:m(t)("common.emailNotifications"),onClosed:s[9]||(s[9]=R=>f("update:model-value",!1))},{footer:l(()=>[e(le,{onConfirm:g,onCancel:s[7]||(s[7]=R=>b.value=!1)})]),default:l(()=>[e(I,{ref_key:"form",ref:o,model:d.value,"label-position":"top",rules:n,class:"space-y-12"},{default:l(()=>{var R,w,se;return[e(B,{label:m(t)("common.event"),prop:"event"},{default:l(()=>[e(h,{modelValue:d.value.event,"onUpdate:modelValue":s[0]||(s[0]=C=>d.value.event=C),placeholder:m(t)("common.pleaseSelect"),class:"w-full"},{default:l(()=>[(p(!0),U(D,null,O(S.events,C=>(p(),$(v,{key:C.name,value:C.name,label:C.display},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(B,{label:m(t)("common.sendTo")},{default:l(()=>[_("div",Fe,[e(N,{modelValue:d.value.sendToCustomer,"onUpdate:modelValue":s[1]||(s[1]=C=>d.value.sendToCustomer=C),class:"flex-shrink-0",label:m(t)("common.customer")},null,8,["modelValue","label"]),e(N,{modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=C=>u.value=C),class:"flex-shrink-0",label:m(t)("common.partner")},null,8,["modelValue","label"]),u.value?(p(),$(Be,{key:0,modelValue:d.value.sendToAddresses,"onUpdate:modelValue":s[3]||(s[3]=C=>d.value.sendToAddresses=C),class:"flex-1 w-full","disable-query":"","input-value":d.value.sendToAddresses,"data-cy":"bcc"},null,8,["modelValue","input-value"])):A("",!0)])]),_:1},8,["label"]),d.value.event?(p(),U(D,{key:0},[e(H,{modelValue:x.value,"onUpdate:modelValue":s[4]||(s[4]=C=>x.value=C),class:"el-radio-group--rounded"},{default:l(()=>[(p(),U(D,null,O(c,C=>e(z,{key:C.key,label:C.key},{default:l(()=>[j(E(C.value),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"]),x.value=="preview"?(p(),U("div",Je,[_("h1",null,"Subject: "+E((R=i.value)==null?void 0:R.subjectTemplate),1),e(Y,{class:"my-12"}),e(Z,{class:"h-300px",content:(se=(w=i.value)==null?void 0:w.bodyTemplate)!=null?se:""},null,8,["content"])])):(p(),U(D,{key:1},[e(B,{label:m(t)("common.subject"),prop:"subjectTemplate"},{default:l(()=>[e(ee,{modelValue:d.value.subjectTemplate,"onUpdate:modelValue":s[5]||(s[5]=C=>d.value.subjectTemplate=C)},null,8,["modelValue"])]),_:1},8,["label"]),e(B,{label:m(t)("common.content"),prop:"bodyTemplate"},{default:l(()=>[e(Ae,{modelValue:d.value.bodyTemplate,"onUpdate:modelValue":s[6]||(s[6]=C=>d.value.bodyTemplate=C),class:"border border-999",language:"html","k-script":""},null,8,["modelValue"])]),_:1},8,["label"])],64))],64)):A("",!0)]}),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),We={class:"space-y-4 w-full"},Ke={class:"text-666 dark:text-fff/67 flex items-center pl-16 pr-8 w-full border-line dark:border-666 rounded-normal border border-solid ellipsis bg-fff dark:bg-[#333]","data-cy":"added-item"},ze={class:"overflow-hidden leading-40px flex-1 mr-8 ellipsis","data-cy":"text"},He={class:"p-4"},Ge={class:"p-4"},Xe=M({props:{items:null,events:null},setup(S){const f=S,r=V(!1),o=V();function t(){o.value=void 0,r.value=!0}function b(i){if(o.value){const c=f.items.indexOf(o.value);f.items.splice(c,1,i)}else f.items.push(i)}function u(i){o.value=i,r.value=!0}function x(i){f.items.splice(i,1)}return(i,c)=>{const d=me,n=K,g=ne;return p(),U("div",We,[(p(!0),U(D,null,O(S.items,(a,T)=>{var k;return p(),U("div",{key:T},[_("div",Ke,[_("div",ze,E((k=S.events.find(y=>y.name==a.event))==null?void 0:k.description),1),_("div",null,[e(d,{round:""},{default:l(()=>{var y;return[j(E((y=S.events.find(s=>s.name==a.event))==null?void 0:y.display),1)]}),_:2},1024)]),_("div",He,[e(n,{class:"iconfont icon-a-setup cursor-pointer","data-cy":"edit",onClick:P(y=>u(a),["stop"])},null,8,["onClick"])]),_("div",Ge,[e(n,{class:"text-orange iconfont icon-delete cursor-pointer",color:"#fab6b6","data-cy":"remove",onClick:P(y=>x(T),["stop"])},null,8,["onClick"])])])])}),128)),e(g,{circle:"","data-cy":"add",onClick:t},{default:l(()=>[e(n,{class:"text-blue iconfont icon-a-addto"})]),_:1}),_("div",null,[r.value?(p(),$(Pe,{key:0,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=a=>r.value=a),events:S.events,model:o.value,onSuccess:b},null,8,["modelValue","events","model"])):A("",!0)])])}}}),Qe=M({props:{modelValue:{type:Boolean},model:null},emits:["update:model-value","success"],setup(S,{emit:f}){var c;const r=S,o=V(),{t}=F(),b=V(!0),u=V(JSON.parse(JSON.stringify((c=r.model)!=null?c:{server:"",port:"",ssl:!1,userName:"",password:"",from:""}))),x={server:[he(t("common.serverUrlInvalid")),q(t("common.serverUrlRequiredTips"))],port:[Ue()],userName:[q(t("common.inputAccountTips"))],password:[q(t("common.inputPasswordTips"))]};function i(){return L(this,null,function*(){yield o.value.validate(),f("success",u.value),b.value=!1})}return(d,n)=>{const g=ae,a=X,T=Le,k=de,y=Q,s=W;return p(),$(s,{modelValue:b.value,"onUpdate:modelValue":n[7]||(n[7]=v=>b.value=v),width:"600px","close-on-click-modal":!1,title:m(t)("common.sendingServerSettings"),onClosed:n[8]||(n[8]=v=>f("update:model-value",!1))},{footer:l(()=>[e(le,{onConfirm:i,onCancel:n[6]||(n[6]=v=>b.value=!1)})]),default:l(()=>[e(y,{ref_key:"form",ref:o,model:u.value,"label-position":"top",rules:x,class:"space-y-12"},{default:l(()=>[e(a,{label:m(t)("common.server"),prop:"server"},{default:l(()=>[e(g,{modelValue:u.value.server,"onUpdate:modelValue":n[0]||(n[0]=v=>u.value.server=v),placeholder:"smtp.qq.com"},null,8,["modelValue"])]),_:1},8,["label"]),e(a,{label:m(t)("common.port")},{default:l(()=>[e(T,{modelValue:u.value.port,"onUpdate:modelValue":n[1]||(n[1]=v=>u.value.port=v),modelModifiers:{number:!0},placeholder:"587"},null,8,["modelValue"])]),_:1},8,["label"]),e(a,{label:"SSL"},{default:l(()=>[e(k,{modelValue:u.value.ssl,"onUpdate:modelValue":n[2]||(n[2]=v=>u.value.ssl=v)},null,8,["modelValue"])]),_:1}),e(a,{label:m(t)("common.account"),prop:"userName"},{default:l(()=>[e(g,{modelValue:u.value.userName,"onUpdate:modelValue":n[3]||(n[3]=v=>u.value.userName=v),placeholder:"name@example.com"},null,8,["modelValue"])]),_:1},8,["label"]),e(a,{label:m(t)("common.password"),prop:"password"},{default:l(()=>[e(g,{modelValue:u.value.password,"onUpdate:modelValue":n[4]||(n[4]=v=>u.value.password=v),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),e(a,{label:m(t)("common.fromAddress")},{default:l(()=>[e(g,{modelValue:u.value.from,"onUpdate:modelValue":n[5]||(n[5]=v=>u.value.from=v),placeholder:"name@example.com"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Ye=M({props:{modelValue:{type:Boolean},events:null,model:null},emits:["update:model-value","success"],setup(S,{emit:f}){var c;const r=S,o=V(),{t}=F(),b=V(!0),u=V(JSON.parse(JSON.stringify((c=r.model)!=null?c:{event:"",url:""}))),x={url:[Ne(t("common.urlInvalid")),q(t("common.urlRequiredTips"))],event:[q(t("common.eventRequiredTips"))]};function i(){return L(this,null,function*(){yield o.value.validate(),f("success",u.value),b.value=!1})}return(d,n)=>{const g=oe,a=te,T=X,k=ae,y=Q,s=W;return p(),$(s,{modelValue:b.value,"onUpdate:modelValue":n[3]||(n[3]=v=>b.value=v),width:"600px","close-on-click-modal":!1,title:"Webhook",onClosed:n[4]||(n[4]=v=>f("update:model-value",!1))},{footer:l(()=>[e(le,{onConfirm:i,onCancel:n[2]||(n[2]=v=>b.value=!1)})]),default:l(()=>[e(y,{ref_key:"form",ref:o,model:u.value,"label-position":"top",rules:x,class:"space-y-12"},{default:l(()=>[e(T,{label:m(t)("common.event"),prop:"event"},{default:l(()=>[e(a,{modelValue:u.value.event,"onUpdate:modelValue":n[0]||(n[0]=v=>u.value.event=v),placeholder:m(t)("common.pleaseSelect"),class:"w-full"},{default:l(()=>[(p(!0),U(D,null,O(S.events,v=>(p(),$(g,{key:v.name,value:v.name,label:v.display},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(T,{label:"URL",prop:"url"},{default:l(()=>[e(k,{modelValue:u.value.url,"onUpdate:modelValue":n[1]||(n[1]=v=>u.value.url=v)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Ze={class:"space-y-4 w-full"},el={class:"text-666 dark:text-fff/67 flex items-center pl-16 pr-8 w-full border-line dark:border-666 rounded-normal border border-solid ellipsis bg-fff dark:bg-[#333]","data-cy":"added-item"},ll={class:"overflow-hidden leading-40px flex-1 mr-8 ellipsis","data-cy":"text"},ol={class:"p-4"},tl={class:"p-4"},al=M({props:{items:null,events:null},setup(S){const f=S,r=V(!1),o=V();function t(){o.value=void 0,r.value=!0}function b(i){if(o.value){const c=f.items.indexOf(o.value);f.items.splice(c,1,i)}else f.items.push(i)}function u(i){o.value=i,r.value=!0}function x(i){f.items.splice(i,1)}return(i,c)=>{const d=me,n=K,g=ne;return p(),U("div",Ze,[(p(!0),U(D,null,O(S.items,(a,T)=>{var k;return p(),U("div",{key:T},[_("div",el,[_("div",ll,E((k=S.events.find(y=>y.name==a.event))==null?void 0:k.description),1),_("div",null,[e(d,{round:""},{default:l(()=>{var y;return[j(E((y=S.events.find(s=>s.name==a.event))==null?void 0:y.display),1)]}),_:2},1024)]),_("div",ol,[e(n,{class:"iconfont icon-a-setup cursor-pointer","data-cy":"edit",onClick:P(y=>u(a),["stop"])},null,8,["onClick"])]),_("div",tl,[e(n,{class:"text-orange iconfont icon-delete cursor-pointer",color:"#fab6b6","data-cy":"remove",onClick:P(y=>x(T),["stop"])},null,8,["onClick"])])])])}),128)),e(g,{circle:"","data-cy":"add",onClick:t},{default:l(()=>[e(n,{class:"text-blue iconfont icon-a-addto"})]),_:1}),_("div",null,[r.value?(p(),$(Ye,{key:0,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=a=>r.value=a),events:S.events,model:o.value,onSuccess:b},null,8,["modelValue","events","model"])):A("",!0)])])}}}),nl=["onClick"],sl=M({props:{modelValue:{type:Boolean}},emits:["update:model-value"],setup(S,{emit:f}){const{t:r}=F(),o=V(!0),t=V(),b=V(!1),u=V(),x=i=>L(this,null,function*(){t.value=yield ke({pagenr:i})});return x(),(i,c)=>{var y;const d=ve,n=K,g=fe,a=pe,T=W,k=ue;return p(),U(D,null,[e(T,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=s=>o.value=s),width:"1000px","close-on-click-modal":!1,title:m(r)("common.log"),onClosed:c[1]||(c[1]=s=>f("update:model-value",!1))},{default:l(()=>{var s,v,h,B;return[t.value?(p(),$(a,{key:0,data:(s=t.value)==null?void 0:s.dataList,pagination:{currentPage:(v=t.value)==null?void 0:v.pageNr,pageCount:(h=t.value)==null?void 0:h.totalPages,pageSize:(B=t.value)==null?void 0:B.pageSize},onChange:x},{default:l(()=>[e(d,{label:m(r)("common.email")},{default:l(({row:N})=>[_("span",null,E(N.address),1)]),_:1},8,["label"]),e(d,{label:m(r)("common.event"),width:"180"},{default:l(({row:N})=>[_("span",null,E(N.event),1)]),_:1},8,["label"]),e(d,{label:m(r)("common.content")},{default:l(({row:N})=>[_("span",{class:"text-blue cursor-pointer",onClick:z=>{u.value=N,b.value=!0}},E(N.subject),9,nl)]),_:1},8,["label"]),e(d,{label:m(r)("common.dateTime"),width:"180"},{default:l(({row:N})=>[_("span",null,E(m(ce)(new Date(N.timestamp))),1)]),_:1},8,["label"]),e(d,{label:m(r)("common.status"),width:"80",align:"center"},{default:l(({row:N})=>[!N.sent&&N.errorCount?(p(),$(g,{key:0,placement:"top-start",content:N.error},{default:l(()=>[e(n,{class:"iconfont icon-fasongshibai text-orange"})]),_:2},1032,["content"])):A("",!0),N.sent?(p(),$(g,{key:1,placement:"top-start",content:m(r)("common.deliverySuccessful")},{default:l(()=>[e(n,{class:"iconfont icon-fasongchenggong text-green"})]),_:1},8,["content"])):A("",!0)]),_:1},8,["label"])]),_:1},8,["data","pagination"])):A("",!0)]}),_:1},8,["modelValue","title"]),u.value?(p(),$(T,{key:0,modelValue:b.value,"onUpdate:modelValue":c[2]||(c[2]=s=>b.value=s),title:(y=u.value)==null?void 0:y.subject,width:"1200px"},{default:l(()=>{var s;return[e(k,{class:"h-600px",content:(s=u.value)==null?void 0:s.content},null,8,["content"])]}),_:1},8,["modelValue","title"])):A("",!0)],64)}}}),ul=["onClick"],ml={class:"max-h-600px overflow-auto"},rl=M({props:{modelValue:{type:Boolean}},emits:["update:model-value"],setup(S,{emit:f}){const{t:r}=F(),o=V(!0),t=V(),b=V(!1),u=V(),x=i=>L(this,null,function*(){t.value=yield xe({pagenr:i})});return x(),(i,c)=>{const d=ve,n=K,g=fe,a=pe,T=W;return p(),U(D,null,[e(T,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=k=>o.value=k),width:"1000px","close-on-click-modal":!1,title:m(r)("common.log"),onClosed:c[1]||(c[1]=k=>f("update:model-value",!1))},{default:l(()=>{var k,y,s,v;return[t.value?(p(),$(a,{key:0,data:(k=t.value)==null?void 0:k.dataList,pagination:{currentPage:(y=t.value)==null?void 0:y.pageNr,pageCount:(s=t.value)==null?void 0:s.totalPages,pageSize:(v=t.value)==null?void 0:v.pageSize},onChange:x},{default:l(()=>[e(d,{label:"URL"},{default:l(({row:h})=>[_("span",null,E(h.address),1)]),_:1}),e(d,{label:m(r)("common.event"),width:"180"},{default:l(({row:h})=>[_("span",null,E(h.event),1)]),_:1},8,["label"]),e(d,{label:m(r)("common.content")},{default:l(({row:h})=>[_("span",{class:"text-blue cursor-pointer truncate",onClick:B=>{u.value=h,b.value=!0}},E(h.content),9,ul)]),_:1},8,["label"]),e(d,{label:m(r)("common.dateTime"),width:"180"},{default:l(({row:h})=>[_("span",null,E(m(ce)(new Date(h.timestamp))),1)]),_:1},8,["label"]),e(d,{label:m(r)("common.status"),width:"80",align:"center"},{default:l(({row:h})=>[!h.sent&&h.errorCount?(p(),$(g,{key:0,placement:"top-start",content:h.error},{default:l(()=>[e(n,{class:"iconfont icon-fasongshibai text-orange"})]),_:2},1032,["content"])):A("",!0),h.sent?(p(),$(g,{key:1,placement:"top-start",content:m(r)("common.success")},{default:l(()=>[e(n,{class:"iconfont icon-fasongchenggong text-green"})]),_:1},8,["content"])):A("",!0)]),_:1},8,["label"])]),_:1},8,["data","pagination"])):A("",!0)]}),_:1},8,["modelValue","title"]),u.value?(p(),$(T,{key:0,modelValue:b.value,"onUpdate:modelValue":c[2]||(c[2]=k=>b.value=k),title:m(r)("common.content"),width:"1200px"},{default:l(()=>[_("div",ml,[e(De,{data:JSON.parse(u.value.content)},null,8,["data"])])]),_:1},8,["modelValue","title"])):A("",!0)],64)}}}),il={class:"p-24 pb-150px"},dl={class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px relative"},pl={class:"max-w-504px"},cl={key:0,class:"flex items-center space-x-8 mb-12"},vl={class:"text-s text-999"},fl={class:"text-s text-999"},_l={class:"text-s text-999"},bl={class:"inline-flex items-center space-x-4"},yl={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px relative"},Vl={class:"max-w-504px"},gl={class:"flex items-center"},kl=_("span",null,"Webhooks",-1),xl=j('SHA256Hash(request.body+secret)== request.header["X-Kooboo-Hmac-SHA256"]'),Tt=M({setup(S){const{t:f}=F(),r=we(),o=V(),t=V([]),b=V([]),u=Ce(),x=V(!1),i=V(!1),c=V(!1);Se().then(g=>t.value=g),Ee().then(g=>b.value=g);const d=[{key:"kooboo",value:"Kooboo"},{key:"custom",value:f("common.custom")}],n=()=>L(this,null,function*(){yield Te(o.value),r.loadSettings(),$e()});return J(()=>r.settings,()=>{o.value=JSON.parse(JSON.stringify(r.settings))},{immediate:!0}),J(()=>{var g;return(g=o.value)==null?void 0:g.mailServerType},()=>{var g;((g=o.value)==null?void 0:g.mailServerType)=="kooboo"&&u.loadAddress("addresses")},{immediate:!0}),Ve("save",n),(g,a)=>{const T=de,k=X,y=re,s=ie,v=ne,h=_e,B=oe,N=te,z=K,H=Me,Y=Oe,Z=qe,ee=Q;return p(),U("div",il,[e(ye,{name:m(f)("commerce.notification")},null,8,["name"]),o.value?(p(),$(ee,{key:0,"label-position":"top"},{default:l(()=>{var I,G,R;return[_("div",dl,[_("div",pl,[e(k,{label:m(f)("common.enableEmailNotification")},{default:l(()=>[e(T,{modelValue:o.value.enableEmailNotification,"onUpdate:modelValue":a[0]||(a[0]=w=>o.value.enableEmailNotification=w)},null,8,["modelValue"])]),_:1},8,["label"]),e(k,{label:m(f)("common.mailServer")},{default:l(()=>[e(s,{modelValue:o.value.mailServerType,"onUpdate:modelValue":a[1]||(a[1]=w=>o.value.mailServerType=w),class:"el-radio-group--rounded"},{default:l(()=>[(p(),U(D,null,O(d,w=>e(y,{key:w.key,label:w.key},{default:l(()=>[j(E(w.value),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o.value.mailServerType=="custom"?(p(),U("div",cl,[e(v,{type:"primary",size:"small",round:"",onClick:a[2]||(a[2]=w=>x.value=!0)},{default:l(()=>[j(E(m(f)("common.setServerInfo")),1)]),_:1}),_("span",vl,E((I=o.value.customMailServer)==null?void 0:I.server),1),_("span",fl,E((G=o.value.customMailServer)==null?void 0:G.port),1),_("span",_l,E((R=o.value.customMailServer)==null?void 0:R.userName),1)])):(p(),$(k,{key:1},{label:l(()=>[_("div",bl,[_("div",null,E(m(f)("common.fromAddress")),1),e(h,{tip:m(f)("common.koobooEmailAddressTip"),"custom-class":"ml-4"},null,8,["tip"])])]),default:l(()=>[e(N,{modelValue:o.value.koobooEmailAddress,"onUpdate:modelValue":a[3]||(a[3]=w=>o.value.koobooEmailAddress=w),placeholder:m(f)("common.pleaseSelect"),class:"w-250px"},{default:l(()=>[(p(!0),U(D,null,O(m(u).addressList.filter(w=>w.addressType!=="Wildcard"),w=>(p(),$(B,{key:w.id,value:w.address,label:w.address},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1})),e(k,{label:m(f)("common.event")},{default:l(()=>[e(Xe,{items:o.value.emailNotifications,events:t.value},null,8,["items","events"])]),_:1},8,["label"])]),e(v,{round:"",size:"small",type:"primary",class:"absolute top-24 right-32",plain:"",onClick:a[4]||(a[4]=w=>i.value=!0)},{default:l(()=>[j(E(m(f)("common.logs")),1)]),_:1}),x.value?(p(),$(Qe,{key:0,modelValue:x.value,"onUpdate:modelValue":a[5]||(a[5]=w=>x.value=w),model:o.value.customMailServer,onSuccess:a[6]||(a[6]=w=>o.value.customMailServer=w)},null,8,["modelValue","model"])):A("",!0)]),o.value?(p(),U("div",yl,[_("div",Vl,[e(k,{label:m(f)("common.enableWebhook")},{default:l(()=>[e(T,{modelValue:o.value.enableWebhook,"onUpdate:modelValue":a[7]||(a[7]=w=>o.value.enableWebhook=w)},null,8,["modelValue"])]),_:1},8,["label"]),e(k,null,{label:l(()=>[_("div",gl,[kl,e(Z,{placement:"top-start",width:"600"},{reference:l(()=>[e(z,{class:"ml-4 iconfont icon-problem",onClick:a[8]||(a[8]=P(()=>{},["prevent"]))})]),default:l(()=>[e(Y,{title:m(f)("common.webhookDescription"),column:1,border:""},{default:l(()=>[e(H,{label:"secret"},{default:l(()=>[j(E(o.value.webhookSecret),1)]),_:1}),e(H,{label:"Verification"},{default:l(()=>[xl]),_:1})]),_:1},8,["title"])]),_:1})])]),default:l(()=>[e(al,{events:b.value,items:o.value.webhooks},null,8,["events","items"])]),_:1})]),e(v,{round:"",size:"small",type:"primary",class:"absolute top-24 right-32",plain:"",onClick:a[9]||(a[9]=w=>c.value=!0)},{default:l(()=>[j(E(m(f)("common.logs")),1)]),_:1})])):A("",!0)]}),_:1})):A("",!0),i.value?(p(),$(sl,{key:1,modelValue:i.value,"onUpdate:modelValue":a[10]||(a[10]=I=>i.value=I)},null,8,["modelValue"])):A("",!0),c.value?(p(),$(rl,{key:2,modelValue:c.value,"onUpdate:modelValue":a[11]||(a[11]=I=>c.value=I)},null,8,["modelValue"])):A("",!0),e(be,{"hidden-cancel":"",onSave:n})])}}});export{Tt as default};
