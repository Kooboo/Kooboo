var U=Object.defineProperty;var w=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var V=(n,s,t)=>s in n?U(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t,E=(n,s)=>{for(var t in s||(s={}))$.call(s,t)&&V(n,t,s[t]);if(w)for(var t of w(s))A.call(s,t)&&V(n,t,s[t]);return n};var b=(n,s,t)=>new Promise((u,p)=>{var _=i=>{try{e(t.next(i))}catch(a){p(a)}},f=i=>{try{e(t.throw(i))}catch(a){p(a)}},e=i=>i.done?u(i.value):Promise.resolve(i.value).then(_,f);e((t=t.apply(n,s)).next())});import{g as B}from"./i18n.bcd18f8a.js";import{a as P,e as S}from"./product.9a7c7001.js";import{u as z}from"./commerce.733e9edf.js";import{_ as M,a as j,V as q}from"./option-group-editor.ce3e28ca.js";import{_ as G}from"./key-value-editor.958730ca.js";import{u as H}from"./product-variant.08b1c2e8.js";import{_ as J}from"./index.84fe3ce9.js";import{z as K}from"./main.582f9de6.js";import{u as L}from"./useFields.4b33b4c8.js";import{E as Q,a as R}from"./index.6d63eb53.js";import{d as T,g as v,h as W,o as X,a as Y,b as r,u as o,f as D,w as y,k as Z}from"./url.8f5ec20c.js";const tt={key:0,class:"px-24 pt-0 pb-84px space-y-12"},at={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},et={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},vt=T({props:{id:null},setup(n,{expose:s}){const t=n,u=v([]),{t:p}=B(),_=z(),f=v();_.loadCategories();let e=H();const i=v(),a=v(),{fields:F,customFields:N}=L();W(()=>b(this,null,function*(){a.value=yield P(t.id),a.value.tags||(a.value.tags=[]),u.value=a.value.attributes.map(l=>({key:l.key,value:l.value,options:[]}));for(const l of a.value.variants)e.addVariant(l)}));function h(){return b(this,null,function*(){var m,c;try{yield f.value.form.validate(),yield(c=(m=i.value)==null?void 0:m.form)==null?void 0:c.validate()}catch(d){throw K(),d}const l=E({},a.value);l.attributes=u.value.map(d=>({key:d.key,value:d.value})),l.variants=e.list.value,yield S(l)})}return s({onSave:h}),(l,m)=>{var I,g;const c=Q,d=R;return a.value?(X(),Y("div",tt,[r(M,{ref_key:"basicInfo",ref:f,model:a.value,fields:o(F)},null,8,["model","fields"]),r(J,{ref_key:"customData",ref:i,data:a.value.customData,"custom-fields":o(N)},null,8,["data","custom-fields"]),D("div",at,[r(d,{"label-position":"top"},{default:y(()=>[r(c,{label:o(p)("common.attributes")},{default:y(()=>[r(G,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=O=>u.value=O),"key-input-attributes":{placeholder:o(p)("common.name")},class:"max-w-600px space-y-8 w-full"},null,8,["modelValue","key-input-attributes"])]),_:1},8,["label"]),r(c,{label:o(p)("commerce.variantOptions")},{default:y(()=>[r(j,{options:o(e).options.value,variants:o(e).list.value,"variant-options":a.value.variantOptions,class:"max-w-600px",onUpdateOptionItem:o(e).updateOptionItem,onUpdateOptionName:o(e).updateOptionName,onAddOptionItem:m[1]||(m[1]=(O,C)=>{var k,x;return o(e).addOptionItem(O,C,(x=(k=a.value)==null?void 0:k.featuredImage)!=null?x:"")}),onDeleteOptionItem:o(e).deleteOptionItem,onDeleteOption:o(e).deleteOption,onAddOption:o(e).addOption},null,8,["options","variants","variant-options","onUpdateOptionItem","onUpdateOptionName","onDeleteOptionItem","onDeleteOption","onAddOption"])]),_:1},8,["label"])]),_:1})]),D("div",et,[r(q,{"variant-options":a.value.variantOptions,variants:o(e).list.value,options:o(e).options.value,"default-image":(g=(I=a.value)==null?void 0:I.featuredImage)!=null?g:""},null,8,["variant-options","variants","options","default-image"])])])):Z("",!0)}}});export{vt as _};
