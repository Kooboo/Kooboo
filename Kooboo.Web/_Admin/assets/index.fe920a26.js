var b=(c,k,n)=>new Promise((a,d)=>{var v=t=>{try{u(n.next(t))}catch(r){d(r)}},f=t=>{try{u(n.throw(t))}catch(r){d(r)}},u=t=>t.done?a(t.value):Promise.resolve(t.value).then(v,f);u((n=n.apply(c,k)).next())});import{q,t as G,v as H,E as L}from"./main.9fdfea92.js";import{g as P}from"./i18n.a87944a4.js";import{_ as W}from"./index.f0d5f031.js";import{d as A,g as _,i as J,c as K,o as p,j as E,w as s,b as i,u as m,f as w,a as x,b7 as I,aI as M,t as S,F as V,n as O,k as h,b4 as Q,b2 as X,cp as N}from"./url.4cb47a7a.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{a as Z,E as ee}from"./index.9fd79879.js";import{E as oe,a as te,b as ae}from"./index.f15f695e.js";import{E as le}from"./index.c003dfa1.js";const se=c=>(Q("data-v-5d6521c0"),c=c(),X(),c),ne={class:"export-site"},re={class:"export-site__tags"},de=se(()=>w("div",{class:"arrow-up absolute"},null,-1)),ue=["onClick"],ce=A({props:{modelValue:{type:Boolean},siteId:null},emits:["update:modelValue"],setup(c,{emit:k}){const n=c,{t:a}=P(),d=_(!0),v=[{key:"complete",value:a("export.complete")},{key:"custom",value:a("common.custom")}],f=[{key:"normal",value:a("common.normalMode")},{key:"fast",value:a("common.fullMode")}],u=_(v[0]),t=_(u.value.key),r=_(f[0].key),y=_([]),B=J(()=>u.value.key,o=>b(this,null,function*(){if(y.value.length>0){B();return}o==="custom"&&(y.value=yield q())})),C=K(()=>y.value.filter(o=>o.selected).map(o=>o.name));function T(o){u.value=o}function F(o){o.selected=!o.selected}function D(){return b(this,null,function*(){if(u.value.key==="complete"){var o=yield G({siteId:n.siteId,copyMode:r.value});N(`/_api/v2/Site/export?siteId=${n.siteId}&exportfile=${o}`),d.value=!1;return}else C.value.length>0?(o=yield H({siteId:n.siteId,stores:C.value.join(","),copyMode:r.value}),N(`/_api/v2/Site/ExportStore?siteId=${n.siteId}&copyMode=${r.value}&exportfile=${o}`),d.value=!1):L.warning("Please select the content you want before exporting.")})}return(o,l)=>{const R=oe,$=te,g=ee,U=ae,j=le;return p(),E(j,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),width:"600px","close-on-click-modal":!1,"custom-class":"el-dialog--zero-padding",title:m(a)("common.pleaseSelectExportWay"),onClosed:l[4]||(l[4]=e=>k("update:modelValue",!1))},{footer:s(()=>[i(W,{"confirm-label":m(a)("common.export"),onConfirm:D,onCancel:l[2]||(l[2]=e=>d.value=!1)},null,8,["confirm-label"])]),default:s(()=>[w("div",ne,[i(m(Z),{ref:"form"},{default:s(()=>[i(g,{label:m(a)("common.exportType"),class:"flex--middle"},{default:s(()=>[i($,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),class:"el-radio-group--rounded"},{default:s(()=>[(p(),x(V,null,I(v,e=>i(R,{key:e.key,label:e.key,onClick:z=>T(e)},{default:s(()=>[M(S(e.value),1)]),_:2},1032,["label","onClick"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t.value==="custom"?(p(),E(g,{key:0,label:m(a)("common.exportContent"),class:"export-site__tags-row",prop:"selectedStores"},{default:s(()=>[w("div",re,[de,(p(!0),x(V,null,I(y.value,e=>(p(),x("div",{key:e.name,class:O(["export-site__tags__item",{"export-site__tags__item--selected":e.selected}]),onClick:z=>F(e)},S(e.displayName),11,ue))),128))])]),_:1},8,["label"])):h("",!0),t.value=="complete"?(p(),E(g,{key:1,label:m(a)("common.copyMode")},{default:s(()=>[i($,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e)},{default:s(()=>[(p(),x(V,null,I(f,e=>i(U,{key:e.key,label:e.key},{default:s(()=>[M(S(e.value),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])):h("",!0)]),_:1},512)])]),_:1},8,["modelValue","title"])}}});var ge=Y(ce,[["__scopeId","data-v-5d6521c0"]]);export{ge as E};
