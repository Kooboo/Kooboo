var Se=Object.defineProperty,Fe=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var Ce=(r,f,g)=>f in r?Se(r,f,{enumerable:!0,configurable:!0,writable:!0,value:g}):r[f]=g,H=(r,f)=>{for(var g in f||(f={}))Oe.call(f,g)&&Ce(r,g,f[g]);if(Ve)for(var g of Ve(f))Re.call(f,g)&&Ce(r,g,f[g]);return r},W=(r,f)=>Fe(r,Me(f));var P=(r,f,g)=>new Promise((n,h)=>{var v=m=>{try{D(g.next(m))}catch(E){h(E)}},_=m=>{try{D(g.throw(m))}catch(E){h(E)}},D=m=>m.done?n(m.value):Promise.resolve(m.value).then(v,_);D((g=g.apply(r,f)).next())});import{_ as Pe}from"./index.5f37a601.js";import{_ as pe}from"./index.9ffc2c80.js";import{_ as Ke}from"./truncate-content.b4da0a61.js";import{_ as ze}from"./country.01b632e9.js";import{d as j,g as w,o as i,j as d,w as e,b as o,u as a,k as y,a as $,az as Le,f as k,G as je,t as u,F as T,b6 as K,h as Qe,aH as s,x as Ge,cd as Je,c as qe,c0 as He,cg as We}from"./url.2e6a77c4.js";import{B as Xe}from"./breadcrumb.0ef7e7c4.js";import{g as Q,w as Ye}from"./i18n.97105311.js";import{u as Ze}from"./replace-all.8fa5a83d.js";import{b as el,e as ll,p as tl,f as ol,u as al,h as nl}from"./order.6ceacb3d.js";import{u as de}from"./use-date.88693eba.js";import{b as Ee}from"./product-variant.9535432a.js";import{_ as L}from"./property-item.c8a41109.js";import{E as oe}from"./index.4587e608.js";import{E as ae,a as ne}from"./index.317a7f30.js";import{E as X}from"./index.4b289bae.js";import{_ as il}from"./image-cover.dadeb856.js";import{k as we,u as ul}from"./main.52487121.js";import{_ as sl}from"./icon-button.e1f3bfd2.js";import{_ as rl}from"./digital-items-editor.e051fafb.js";import{E as De}from"./index.c1764395.js";import{g as ml}from"./shipping.160ec43f.js";import{_ as dl}from"./dropdown-input.7bd605f7.js";import{E as cl}from"./index.6ebaed6b.js";import{E as te}from"./index.b09a9f00.js";import{b as pl,a as vl}from"./index.6302b2c1.js";import{_ as fl}from"./index.aea1b33f.js";import{u as _l}from"./useFields.b5861b0a.js";import{_ as F}from"./currency-amount.ef7bc6db.js";import{_ as yl}from"./tooltip.7fc982a4.js";import{c as Ne}from"./index.afee24fe.js";import{E as Ae,a as Ie}from"./index.01204c98.js";import{E as gl}from"./index.795c7a65.js";import{_ as bl}from"./order-status.42f6b4b8.js";import{p as kl}from"./commerce.c633c6e0.js";import{s as ce}from"./commerce.5a632190.js";import{E as hl}from"./windi.539ebeab.js";import{E as xl,a as Vl}from"./index.f3d28a97.js";import{E as Cl}from"./index.9589f7cf.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.f997a738.js";import"./error.7e8331f1.js";import"./date.48fcf038.js";import"./dayjs.min.378b3d72.js";import"./guid.c1a40312.js";import"./event.776e7e11.js";import"./index.9e96921b.js";import"./isNil.98bb3b88.js";import"./_baseClone.f10ff33c.js";import"./_baseIsEqual.abb55a3a.js";import"./isEqual.3700b7f1.js";import"./index.07e210fb.js";import"./scroll.8babc10c.js";import"./index.bc93d068.js";import"./focus-trap.de18cf8f.js";import"./refs.4001ce17.js";import"./media-dialog.fc4bbfea.js";import"./media.a886aaea.js";import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.3ed42952.js";import"./index.f1409b26.js";/* empty css                                                          */import"./search-provider.675d8cd3.js";import"./toNumber.574be4f1.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./style.f835519e.js";import"./_baseUniq.c477b8f6.js";import"./use-operation-dialog.6127483f.js";import"./file.c7952a49.js";import"./validate.98ddbafd.js";import"./index.99641a60.js";import"./index.77759eed.js";import"./index.b1fe55d8.js";import"./index.51a59403.js";import"./index.29d7c76d.js";import"./folder.8308bb9d.js";import"./relations-tag.64683fac.js";import"./page.d86e40bb.js";import"./index.d267cbe6.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./validator.1d438d08.js";import"./use-copy-text.81d01785.js";import"./index.0f4f13de.js";import"./browser.dd2c8c17.js";import"./throttle.041b2553.js";import"./debounce.61c67278.js";import"./index.7a88a6b5.js";import"./search-input.1597a477.js";/* empty css                                                                 *//* empty css                                                          */import"./layout.89b59bcc.js";import"./index.6137c0c9.js";import"./position.b1ced824.js";import"./utils.fb6ded14.js";import"./confirm.46f27373.js";import"./logo-transparent.1566007e.js";import"./index.069e95d0.js";import"./use-file-upload.f6d4a33c.js";import"./index.57372297.js";import"./index.fbe2a003.js";import"./index.0187f789.js";import"./index.13bfae9f.js";import"./file.5d2fc29a.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.4f5fb1ef.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.975a8825.js";import"./product.b50cc736.js";import"./index.3fcd2f53.js";import"./dropdown.87a7678e.js";import"./_createCompounder.591d8488.js";import"./color-picker.f11d48f2.js";import"./index.a34c327d.js";import"./index.a46fa52c.js";import"./string.955a924b.js";import"./useLabels.14342caf.js";import"./isEmpty.fff03236.js";const $l=j({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue","reload"],setup(r,{emit:f}){const g=r,{t:n}=Q(),h=w(!0),v=w({id:g.id,reason:""});function _(){return P(this,null,function*(){yield el(v.value),f("reload"),h.value=!1})}return(D,m)=>{const E=oe,M=ae,N=ne,S=pe,l=X;return i(),d(l,{"model-value":h.value,width:"600px",title:a(n)("commerce.cancelOrder"),"close-on-click-modal":!1,onClosed:m[2]||(m[2]=U=>f("update:modelValue",!1))},{footer:e(()=>[o(S,{onConfirm:_,onCancel:m[1]||(m[1]=U=>h.value=!1)})]),default:e(()=>[v.value?(i(),d(N,{key:0,"label-position":"top"},{default:e(()=>[o(M,{label:a(n)("common.cancelReason")},{default:e(()=>[o(E,{modelValue:v.value.reason,"onUpdate:modelValue":m[0]||(m[0]=U=>v.value.reason=U),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):y("",!0)]),_:1},8,["model-value","title"])}}}),El=j({props:{line:null},emits:["update:modelValue"],setup(r,{emit:f}){const{t:g}=Q(),n=w(!0);return(h,v)=>{const _=X;return i(),$("div",null,[(i(),d(Le,{to:"body"},[o(_,{"model-value":n.value,width:"600px",title:a(g)("common.digitalItems"),"close-on-click-modal":!1,onClosed:v[1]||(v[1]=D=>f("update:modelValue",!1))},{default:e(()=>[o(rl,{id:r.line.id,items:r.line.digitalItems,"onUpdate:items":v[0]||(v[0]=D=>r.line.digitalItems=D)},null,8,["id","items"])]),_:1},8,["model-value","title"])]))])}}}),wl={class:"bg-gray/50 rounded-normal"},Dl={class:"p-8 flex"},Nl={class:"flex-1 flex justify-between items-center"},Al={class:"text-s"},Il={key:0,class:"text-s p-8 flex items-center"},Bl={key:0,class:"flex-1"},Ul={class:"truncate"},Tl={key:1,class:"flex-1"},Sl={class:"flex-shrink-0 w-32"},$e=j({props:{line:null,showSelected:{type:Boolean},selected:{type:Boolean}},emits:["update:selected"],setup(r){const{t:f}=Q(),g=w(!1);return(n,h)=>{const v=De;return i(),$("div",wl,[k("div",Dl,[r.showSelected?(i(),d(v,{key:0,modelValue:r.selected,"onUpdate:modelValue":h[0]||(h[0]=_=>je(selected)?selected.value=_:null),class:"w-24",onClick:h[1]||(h[1]=Ye(_=>n.$emit("update:selected"),["stop","prevent"]))},null,8,["modelValue"])):y("",!0),k("div",Nl,[o(il,{"model-value":r.line.image,size:"small"},null,8,["model-value"]),k("div",null,[k("div",null,u(r.line.title),1),k("div",Al,u(a(Ee)(r.line.options)),1)]),k("div",null,"x"+u(r.line.totalQuantity),1)])]),r.line.isDigital?(i(),$("div",Il,[r.line.digitalItems.length?(i(),$("div",Bl,[(i(!0),$(T,null,K(r.line.digitalItems,_=>(i(),$("div",{key:_.id},[k("p",Ul,u(_.name)+" : "+u(_.type=="file"?a(we)(_.size):_.value),1)]))),128))])):(i(),$("div",Tl,"-")),k("div",Sl,[o(sl,{icon:"icon-a-writein",tip:a(f)("common.editDigitalItems"),onClick:h[2]||(h[2]=_=>g.value=!0)},null,8,["tip"])])])):y("",!0),g.value?(i(),d(El,{key:1,modelValue:g.value,"onUpdate:modelValue":h[3]||(h[3]=_=>g.value=_),line:r.line},null,8,["modelValue","line"])):y("",!0)])}}}),Fl={class:"grid grid-cols-2 gap-8"},Ml={class:"space-y-4"},Ol={class:"space-y-4"},Rl={class:"flex"},Pl=k("div",{class:"flex-1"},null,-1),Kl=j({props:{modelValue:{type:Boolean},id:null,lines:null},emits:["update:modelValue","reload"],setup(r,{emit:f}){const g=r,{t:n}=Q(),h=w(!0),v=w([]);Qe(()=>P(this,null,function*(){v.value=yield ml()}));const _=w([]),D=w(!1),m=JSON.parse(JSON.stringify(g.lines.filter(V=>!V.delivered))),E=w(m.filter(V=>!V.isDigital)),M=w(m.filter(V=>V.isDigital)),N=w({id:g.id,shippingCarrier:"",trackingNumber:""});function S(){return P(this,null,function*(){const V={id:N.value.id,items:[]};for(const b of m)D.value&&!_.value.includes(b.id)||V.items.push({id:b.id,shippingCarrier:N.value.shippingCarrier,trackingNumber:N.value.trackingNumber,digitalItems:b.digitalItems});yield ll(V),f("reload"),h.value=!1})}function l(V){_.value.includes(V)?_.value=_.value.filter(b=>b!=V):_.value.push(V)}function U(V){var b;for(const R of v.value){if(!R.trackingNumberMatching)return;new RegExp((b=R.trackingNumberMatching)==null?void 0:b.toLowerCase()).test(V==null?void 0:V.toLowerCase())&&(N.value.shippingCarrier=R.name)}}return(V,b)=>{const R=cl,Y=oe,Z=ae,ee=ne,ie=De,O=X;return i(),d(O,{"model-value":h.value,width:"800px",title:a(n)("commerce.delivery"),"close-on-click-modal":!1,onClosed:b[4]||(b[4]=A=>f("update:modelValue",!1))},{footer:e(()=>[k("div",Rl,[a(m).length>1?(i(),d(ie,{key:0,modelValue:D.value,"onUpdate:modelValue":b[2]||(b[2]=A=>D.value=A),label:a(n)("commerce.partialDelivery")},null,8,["modelValue","label"])):y("",!0),Pl,o(a(te),{onClick:b[3]||(b[3]=A=>h.value=!1)},{default:e(()=>[s(u(a(n)("common.cancel")),1)]),_:1}),o(a(te),{type:"primary",onClick:S},{default:e(()=>[s(u(a(n)("commerce.delivery")),1)]),_:1})])]),default:e(()=>[N.value?(i(),d(ee,{key:0,"label-position":"top"},{default:e(()=>[E.value.length?(i(),$(T,{key:0},[M.value.length?(i(),d(R,{key:0,class:"mt-0"},{default:e(()=>[s(u(a(n)("common.physicalProduct")),1)]),_:1})):y("",!0),k("div",Fl,[o(Z,{label:a(n)("commerce.trackingNumber")},{default:e(()=>[o(Y,{modelValue:N.value.trackingNumber,"onUpdate:modelValue":b[0]||(b[0]=A=>N.value.trackingNumber=A),onChange:U},null,8,["modelValue"])]),_:1},8,["label"]),o(Z,{label:a(n)("commerce.shippingCarrier")},{default:e(()=>[o(dl,{modelValue:N.value.shippingCarrier,"onUpdate:modelValue":b[1]||(b[1]=A=>N.value.shippingCarrier=A),options:v.value.map(A=>A.name)},null,8,["modelValue","options"])]),_:1},8,["label"])]),k("div",Ml,[(i(!0),$(T,null,K(E.value,A=>(i(),d($e,{key:A.id,line:A,"show-selected":D.value,selected:_.value.includes(A.id),"onUpdate:selected":C=>l(A.id)},null,8,["line","show-selected","selected","onUpdate:selected"]))),128))])],64)):y("",!0),M.value.length?(i(),$(T,{key:1},[o(R,null,{default:e(()=>[s(u(a(n)("common.digitalProduct")),1)]),_:1}),k("div",Ol,[(i(!0),$(T,null,K(M.value,A=>(i(),d($e,{key:A.id,line:A,"show-selected":D.value,selected:_.value.includes(A.id),"onUpdate:selected":C=>l(A.id)},null,8,["line","show-selected","selected","onUpdate:selected"]))),128))])],64)):y("",!0)]),_:1})):y("",!0)]),_:1},8,["model-value","title"])}}}),zl={class:"space-y-8"},Ll=s("Cash"),jl=s("Credit card"),Ql={class:"grid grid-cols-2 gap-8"},Gl=j({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue","reload"],setup(r,{emit:f}){const g=r,{t:n}=Q(),h=w(!0),v=w({orderId:g.id,method:"Cash",cardNumber:"",expirationDate:"",cvc:"",nameOnCard:""});function _(){return P(this,null,function*(){yield tl(v.value),f("reload"),h.value=!1})}return(D,m)=>{const E=pl,M=vl,N=oe,S=ae,l=ne,U=pe,V=X;return i(),d(V,{"model-value":h.value,width:"600px",title:a(n)("common.pay"),"close-on-click-modal":!1,onClosed:m[6]||(m[6]=b=>f("update:modelValue",!1))},{footer:e(()=>[o(U,{"confirm-label":a(n)("common.pay"),onConfirm:_,onCancel:m[5]||(m[5]=b=>h.value=!1)},null,8,["confirm-label"])]),default:e(()=>[k("div",zl,[o(M,{modelValue:v.value.method,"onUpdate:modelValue":m[0]||(m[0]=b=>v.value.method=b)},{default:e(()=>[o(E,{label:"Cash"},{default:e(()=>[Ll]),_:1}),o(E,{label:"CreditCard",disabled:""},{default:e(()=>[jl]),_:1})]),_:1},8,["modelValue"]),v.value.method=="CreditCard"?(i(),d(l,{key:0,"label-position":"top"},{default:e(()=>[o(S,{label:a(n)("common.cardNumber")},{default:e(()=>[o(N,{modelValue:v.value.cardNumber,"onUpdate:modelValue":m[1]||(m[1]=b=>v.value.cardNumber=b)},null,8,["modelValue"])]),_:1},8,["label"]),k("div",Ql,[o(S,{label:a(n)("common.expirationDate")},{default:e(()=>[o(N,{modelValue:v.value.expirationDate,"onUpdate:modelValue":m[2]||(m[2]=b=>v.value.expirationDate=b)},null,8,["modelValue"])]),_:1},8,["label"]),o(S,{label:a(n)("common.cvc")},{default:e(()=>[o(N,{modelValue:v.value.cvc,"onUpdate:modelValue":m[3]||(m[3]=b=>v.value.cvc=b)},null,8,["modelValue"])]),_:1},8,["label"])]),o(S,{label:a(n)("common.nameOnCard")},{default:e(()=>[o(N,{modelValue:v.value.nameOnCard,"onUpdate:modelValue":m[4]||(m[4]=b=>v.value.nameOnCard=b)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):y("",!0)])]),_:1},8,["model-value","title"])}}}),Jl=j({props:{line:null},setup(r){const{t:f}=Q();return(g,n)=>{const h=Ne,v=yl,_=Ae,D=Ie,m=gl;return i(),$("div",null,[o(m,{placement:"left",width:"600",disabled:!r.line.delivered},{reference:e(()=>[r.line.delivered?(i(),d(h,{key:0,round:"",type:"success",class:"cursor-default"},{default:e(()=>[s(u(a(f)("commerce.shipped")),1)]),_:1})):r.line.errorMessage?(i(),d(h,{key:1,round:"",type:"danger"},{default:e(()=>[s(u(a(f)("common.failed"))+" ",1),o(v,{tip:r.line.errorMessage,"custom-class":"ml-4"},null,8,["tip"])]),_:1})):(i(),d(h,{key:2,round:"",type:"info"},{default:e(()=>[s(u(a(f)("commerce.unshipped")),1)]),_:1}))]),default:e(()=>[o(D,{title:a(f)("common.detail"),column:1,border:""},{default:e(()=>[r.line.isDigital?(i(!0),$(T,{key:0},K(r.line.digitalItems,E=>(i(),d(_,{key:E.id,label:E.name},{default:e(()=>[s(u(E.type=="file"?a(we)(E.size):E.value),1)]),_:2},1032,["label"]))),128)):(i(),$(T,{key:1},[o(_,{label:a(f)("commerce.shippingCarrier")},{default:e(()=>[s(u(r.line.shippingCarrier),1)]),_:1},8,["label"]),o(_,{label:a(f)("commerce.trackingNumber")},{default:e(()=>[s(u(r.line.trackingNumber),1)]),_:1},8,["label"])],64))]),_:1},8,["title"])]),_:1},8,["disabled"])])}}}),ql={key:0,class:"px-24 pt-0 pb-84px space-y-12"},Hl={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal relative"},Wl={key:0,class:"text-s inline-flex space-x-4 items-center"},Xl=["title"],Yl={class:"max-w-150px inline-flex items-center gap-4"},Zl={class:"text-s"},et={class:"inline-flex flex-wrap gap-4"},lt={class:"text-s mt-12"},tt={class:"relative flex"},ot={class:"flex gap-4"},at={class:"absolute right-0 space-y-4"},nt={key:0,class:"flex items-center gap-4 text-s justify-end"},it={class:"flex items-center gap-8"},ut={key:0,class:"flex items-center gap-4"},st=s(" ( "),rt={key:0},mt=s(" ) "),dt={key:0,class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},ct={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},pt=k("div",null,null,-1),vt={class:"text-m text-999"},Na=j({setup(r){const{getColumns:f}=_l(),g=Ge("id"),{t:n}=Q(),h=Je(),v=w(!1),_=w(!1),D=w(!1),m=w(!1),E=w(!1),M=ul(),N=w(""),S=f([{name:"featuredImage",prop:"image",attrs:{width:80,align:"center"}},{name:"title"},{name:"price",displayName:n("common.price")},{name:"totalQuantity",displayName:n("common.quantity"),attrs:{align:"center"}},{name:"totalAmount",displayName:n("common.totalAmount")},{name:"taxAmount",displayName:n("common.tax")},{name:"discounts",displayName:n("common.discount"),attrs:{align:"center"}}]),l=w(),U=w();function V(){return P(this,null,function*(){l.value=yield ol(g),l.value.shippingAddress&&kl([l.value.shippingAddress]).then(C=>U.value=C[0])})}function b(C){var c,p,z,I,le;return`${C.clientInfo.os||""} ${((c=C.clientInfo)==null?void 0:c.platform)||""} ${((z=(p=C.clientInfo)==null?void 0:p.application)==null?void 0:z.name)||""} ${((le=(I=C.clientInfo)==null?void 0:I.application)==null?void 0:le.version)||""} ${(C==null?void 0:C.userAgent)||""}`}V();function R(){h.goBackOrTo(Ze({name:"orders"}))}const Y=qe(()=>{var c;const C=[];if(!((c=l.value)!=null&&c.lines))return C;for(const p of l.value.lines)if(!p.groupName)C.push(W(H({},p),{rowKey:p.variantId+p.groupName}));else if(p.isMain){const z=l.value.lines.filter(I=>I.groupName==p.groupName&&!I.isMain).map(I=>W(H({},I),{rowKey:I.variantId+I.groupName,isChild:!0}));C.push(W(H({},p),{rowKey:p.variantId+p.groupName,children:z}))}else l.value.lines.find(I=>I.groupName==p.groupName&&I.isMain)||C.push(W(H({},p),{rowKey:p.variantId+p.groupName}));return C});function Z({row:C}){if(!!C.isChild)return"text-999 text-s !bg-gray/20"}function ee(C){if(!C.url)return;let c=He(M.site.baseUrl,C.url);We(c)}function ie(){return P(this,null,function*(){yield al({note:N.value,id:g}),V(),m.value=!1})}const O=w();function A(){return P(this,null,function*(){var C,c;yield nl({id:g,key:(C=O.value)==null?void 0:C.key,value:(c=O.value)==null?void 0:c.value}),V(),E.value=!1})}return(C,c)=>{var he,xe;const p=Ae,z=ze,I=Ne,le=Ke,ve=hl,ue=Ie,se=xl,fe=te,Be=Vl,Ue=Cl,_e=oe,ye=ae,ge=ne,be=pe,ke=X,re=te,Te=Pe;return i(),$(T,null,[o(Xe,{class:"p-24","crumb-path":[{name:a(n)("common.orders"),route:{name:"orders"}},{name:a(n)("common.orderDetail")}]},null,8,["crumb-path"]),l.value?(i(),$("div",ql,[k("div",Hl,[o(ue,{title:a(n)("common.basicInfo")},{default:e(()=>[o(p,{label:a(n)("commerce.orderNumber")},{default:e(()=>[s(u(l.value.id)+" ",1),o(bl,{order:l.value},null,8,["order"])]),_:1},8,["label"]),o(p,{label:a(n)("common.createTime")},{default:e(()=>[s(u(a(de)(l.value.createdAt)),1)]),_:1},8,["label"]),o(p,{label:a(n)("common.lastModified")},{default:e(()=>[s(u(a(de)(l.value.updatedAt)),1)]),_:1},8,["label"]),o(p,{label:a(n)("common.contact")},{default:e(()=>[s(u(l.value.customer.firstName)+" "+u(l.value.customer.lastName),1)]),_:1},8,["label"]),o(p,{label:a(n)("common.email")},{default:e(()=>[s(u(l.value.customer.email),1)]),_:1},8,["label"]),o(p,{label:a(n)("common.phone")},{default:e(()=>[s(u(l.value.customer.phone),1)]),_:1},8,["label"]),o(p,{label:"IP"},{default:e(()=>[s(u(l.value.ip),1)]),_:1}),o(p,{label:a(n)("common.country")},{default:e(()=>[o(z,{"name-or-code":l.value.country},null,8,["name-or-code"])]),_:1},8,["label"]),l.value.source?(i(),d(p,{key:0,label:a(n)("common.source")},{default:e(()=>[s(u(l.value.source),1)]),_:1},8,["label"])):y("",!0),l.value.scheduledDeliveryTime?(i(),d(p,{key:1,label:a(n)("common.scheduledDeliveryTime")},{default:e(()=>[s(u(a(de)(l.value.scheduledDeliveryTime)),1)]),_:1},8,["label"])):y("",!0),o(p,{label:a(n)("common.clientInfo")},{default:e(()=>{var t,x;return[l.value.clientInfo?(i(),$("div",Wl,[(x=(t=l.value.clientInfo)==null?void 0:t.application)!=null&&x.isWebBrowser?(i(),d(I,{key:0,round:"",size:"small"},{default:e(()=>[s(u(a(n)("common.webBrowser")),1)]),_:1})):y("",!0),k("div",{class:"ellipsis",title:b(l.value)},u(b(l.value)),9,Xl)])):y("",!0)]}),_:1},8,["label"]),l.value.paymentMethod?(i(),d(p,{key:2,label:a(n)("common.paymentMethod")},{default:e(()=>[o(I,{round:"",type:"success"},{default:e(()=>[s(u(l.value.paymentMethod),1)]),_:1})]),_:1},8,["label"])):y("",!0),o(p,{label:a(n)("commerce.shippingStatus")},{default:e(()=>[l.value.partialDelivered?(i(),d(I,{key:0,round:"",type:"warning"},{default:e(()=>[s(u(a(n)("commerce.partialShipped")),1)]),_:1})):l.value.delivered?(i(),d(I,{key:1,round:"",type:"success"},{default:e(()=>[s(u(a(n)("commerce.shipped")),1)]),_:1})):(i(),d(I,{key:2,round:"",type:"info"},{default:e(()=>[s(u(a(n)("commerce.unshipped")),1)]),_:1}))]),_:1},8,["label"]),l.value.extensionFields?(i(!0),$(T,{key:3},K(l.value.extensionFields,(t,x)=>(i(),d(p,{key:x,label:t.key},{default:e(()=>[k("div",Yl,[o(le,{tip:t.value},{default:e(()=>[s(u(t.value),1)]),_:2},1032,["tip"]),o(ve,{class:"cursor-pointer iconfont icon-a-writein text-blue",onClick:B=>{O.value={key:t.key,value:t.value},E.value=!0}},null,8,["onClick"])])]),_:2},1032,["label"]))),128)):y("",!0)]),_:1},8,["title"]),o(Be,{data:a(Y),"row-key":"rowKey",class:"el-table--gray","default-expand-all":"","row-class-name":Z},{default:e(()=>[a(Y).some(t=>{var x;return(x=t.children)==null?void 0:x.length})?(i(),d(se,{key:0,width:"25"})):y("",!0),o(fl,{columns:a(S)},{title:e(({row:t})=>[k("div",null,[k("div",null,u(t.title),1),k("div",Zl,u(a(Ee)(t.options)),1)])]),price:e(({row:t})=>[o(F,{currency:l.value.currency,original:t.originalPrice,amount:t.price},null,8,["currency","original","amount"])]),totalAmount:e(({row:t})=>[o(F,{currency:l.value.currency,amount:t.totalAmount,original:t.originalAmount},null,8,["currency","amount","original"])]),taxAmount:e(({row:t})=>[o(F,{currency:l.value.currency,amount:t.taxAmount},null,8,["currency","amount"])]),discounts:e(({row:t})=>[k("div",et,[(i(!0),$(T,null,K(t.discountAllocations,(x,B)=>(i(),d(I,{key:B},{default:e(()=>[s(u(x.title),1)]),_:2},1024))),128))])]),_:1},8,["columns"]),o(se,{label:a(n)("commerce.deliveryStatus")},{default:e(({row:t})=>[o(Jl,{line:t},null,8,["line"])]),_:1},8,["label"]),o(se,{align:"right"},{default:e(({row:t})=>[t.extensionButton?(i(),d(fe,{key:0,type:"primary",size:"small",onClick:x=>ee(t.extensionButton)},{default:e(()=>[s(u(t.extensionButton.text),1)]),_:2},1032,["onClick"])):y("",!0)]),_:1})]),_:1},8,["data"]),k("div",lt,[k("div",tt,[l.value.discountAllocations.length?(i(),d(L,{key:0,name:a(n)("common.discount")},{default:e(()=>[k("div",ot,[(i(!0),$(T,null,K(l.value.discountAllocations,(t,x)=>(i(),d(I,{key:x},{default:e(()=>[s(u(t.title),1)]),_:2},1024))),128))])]),_:1},8,["name"])):y("",!0),k("div",at,[l.value.earnPoints>0?(i(),$("div",nt,[k("span",null,u(a(n)("common.earn")),1),k("span",null,u(l.value.earnPoints),1),k("span",null,u(a(n)("commerce.points")),1)])):y("",!0)])]),o(L,{name:a(n)("commerce.subtotalAmount")},{default:e(()=>{var t;return[o(F,{amount:(t=l.value)==null?void 0:t.subtotalAmount,currency:l.value.currency,original:l.value.originalSubtotalAmount},null,8,["amount","currency","original"])]}),_:1},8,["name"]),o(L,{name:a(n)("common.tax")},{default:e(()=>{var t;return[o(F,{amount:(t=l.value)==null?void 0:t.taxAmount,currency:l.value.currency},null,8,["amount","currency"])]}),_:1},8,["name"]),(he=l.value)!=null&&he.insuranceAmount?(i(),d(L,{key:0,name:a(n)("commerce.insuranceAmount")},{default:e(()=>{var t;return[o(F,{amount:(t=l.value)==null?void 0:t.insuranceAmount,currency:l.value.currency},null,8,["amount","currency"])]}),_:1},8,["name"])):y("",!0),(xe=l.value)!=null&&xe.pointsDeductionAmount?(i(),d(L,{key:1,name:a(n)("commerce.points")},{default:e(()=>{var t;return[o(F,{amount:-((t=l.value)==null?void 0:t.pointsDeductionAmount)},null,8,["amount"]),s(" ("+u(l.value.redeemPoints)+" "+u(a(n)("commerce.points"))+") ",1)]}),_:1},8,["name"])):y("",!0),o(L,{name:a(n)("commerce.shippingAmount")},{default:e(()=>{var t,x,B,G;return[k("div",it,[o(F,{amount:(t=l.value)==null?void 0:t.shippingAmount,currency:l.value.currency},null,8,["amount","currency"]),((G=(B=(x=l.value)==null?void 0:x.shippingAllocations)==null?void 0:B.length)!=null?G:0)>1?(i(),$("div",ut,[st,(i(!0),$(T,null,K(l.value.shippingAllocations,(J,q)=>(i(),$("div",{key:q,class:"flex items-center gap-4"},[o(Ue,{placement:"top",content:J.title},{default:e(()=>[o(F,{amount:J.cost,currency:l.value.currency},null,8,["amount","currency"])]),_:2},1032,["content"]),q!=l.value.shippingAllocations.length-1?(i(),$("span",rt,"+")):y("",!0)]))),128)),mt])):y("",!0)])]}),_:1},8,["name"]),o(L,{name:a(n)("common.total")},{default:e(()=>[o(F,{currency:l.value.currency,amount:l.value.totalAmount,original:l.value.originalAmount},null,8,["currency","amount","original"])]),_:1},8,["name"])])]),l.value.shippingAddress?(i(),$("div",dt,[o(ue,{title:a(n)("commerce.shippingAddress")},{default:e(()=>[o(p,{label:a(n)("common.country")},{default:e(()=>{var t,x,B;return[s(u(a(ce)((x=(t=U.value)==null?void 0:t.countryDetail)==null?void 0:x.nameTranslations,(B=l.value.shippingAddress)==null?void 0:B.country)),1)]}),_:1},8,["label"]),o(p,{label:a(n)("common.contact")},{default:e(()=>{var t,x;return[s(u((t=l.value.shippingAddress)==null?void 0:t.firstName)+" "+u((x=l.value.shippingAddress)==null?void 0:x.lastName),1)]}),_:1},8,["label"]),o(p,{label:a(n)("common.phone")},{default:e(()=>{var t;return[s(u((t=l.value.shippingAddress)==null?void 0:t.phone),1)]}),_:1},8,["label"]),o(p,{label:a(n)("common.province")},{default:e(()=>{var t,x,B;return[s(u(a(ce)((x=(t=U.value)==null?void 0:t.provinceDetail)==null?void 0:x.nameTranslations,(B=l.value.shippingAddress)==null?void 0:B.province)),1)]}),_:1},8,["label"]),o(p,{label:a(n)("common.city")},{default:e(()=>{var t,x,B;return[s(u(a(ce)((x=(t=U.value)==null?void 0:t.cityDetail)==null?void 0:x.nameTranslations,(B=l.value.shippingAddress)==null?void 0:B.city)),1)]}),_:1},8,["label"]),o(p,{label:a(n)("common.postalCode")},{default:e(()=>{var t;return[s(u((t=l.value.shippingAddress)==null?void 0:t.zip),1)]}),_:1},8,["label"]),o(p,{label:a(n)("common.address"),span:3},{default:e(()=>{var t;return[s(u((t=l.value.shippingAddress)==null?void 0:t.address1),1)]}),_:1},8,["label"])]),_:1},8,["title"])])):y("",!0),k("div",ct,[o(ue,{title:a(n)("commerce.note")},{extra:e(()=>[o(ve,{class:"cursor-pointer iconfont icon-a-writein text-blue text-l",onClick:c[0]||(c[0]=t=>{N.value=l.value.note,m.value=!0})})]),default:e(()=>[pt]),_:1},8,["title"]),k("div",vt,u(l.value.note),1)]),v.value?(i(),d($l,{key:1,id:l.value.id,modelValue:v.value,"onUpdate:modelValue":c[1]||(c[1]=t=>v.value=t),onReload:V},null,8,["id","modelValue"])):y("",!0),_.value?(i(),d(Kl,{key:2,id:l.value.id,modelValue:_.value,"onUpdate:modelValue":c[2]||(c[2]=t=>_.value=t),lines:l.value.lines,onReload:V},null,8,["id","modelValue","lines"])):y("",!0),D.value?(i(),d(Gl,{key:3,id:l.value.id,modelValue:D.value,"onUpdate:modelValue":c[3]||(c[3]=t=>D.value=t),onReload:V},null,8,["id","modelValue"])):y("",!0),o(ke,{modelValue:m.value,"onUpdate:modelValue":c[6]||(c[6]=t=>m.value=t),title:a(n)("commerce.note")},{footer:e(()=>[o(be,{onConfirm:ie,onCancel:c[5]||(c[5]=t=>m.value=!1)})]),default:e(()=>[o(ge,{"label-position":"top"},{default:e(()=>[o(ye,null,{default:e(()=>[o(_e,{modelValue:N.value,"onUpdate:modelValue":c[4]||(c[4]=t=>N.value=t),type:"textarea",rows:5},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),O.value?(i(),d(ke,{key:4,modelValue:E.value,"onUpdate:modelValue":c[9]||(c[9]=t=>E.value=t),title:O.value.key},{footer:e(()=>[o(be,{onConfirm:A,onCancel:c[8]||(c[8]=t=>E.value=!1)})]),default:e(()=>[o(ge,{"label-position":"top"},{default:e(()=>[o(ye,null,{default:e(()=>[o(_e,{modelValue:O.value.value,"onUpdate:modelValue":c[7]||(c[7]=t=>O.value.value=t),type:"textarea",rows:5},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])):y("",!0)])):y("",!0),l.value?(i(),d(Te,{key:1,permission:{feature:"orders",action:"edit"},back:"","hidden-confirm":"",onCancel:R},{"extra-buttons":e(()=>{var t,x,B,G,J,q;return[l.value.extensionButton?(i(),d(fe,{key:0,type:"primary",round:"",onClick:c[10]||(c[10]=me=>ee(l.value.extensionButton))},{default:e(()=>[s(u(l.value.extensionButton.text),1)]),_:1})):y("",!0),!((t=l.value)!=null&&t.paid)&&!((x=l.value)!=null&&x.canceled)?(i(),d(re,{key:1,round:"",type:"primary",onClick:c[11]||(c[11]=me=>D.value=!0)},{default:e(()=>[s(u(a(n)("common.pay")),1)]),_:1})):y("",!0),((B=l.value)==null?void 0:B.paid)&&!((G=l.value)!=null&&G.canceled)&&(!((J=l.value)!=null&&J.delivered)||l.value.partialDelivered)?(i(),d(re,{key:2,round:"",type:"primary",onClick:c[12]||(c[12]=me=>_.value=!0)},{default:e(()=>[s(u(a(n)("commerce.delivery")),1)]),_:1})):y("",!0),(q=l.value)!=null&&q.canceled?y("",!0):(i(),d(re,{key:3,round:"",type:"danger",onClick:c[13]||(c[13]=me=>v.value=!0)},{default:e(()=>[s(u(a(n)("common.cancel")),1)]),_:1}))]}),_:1})):y("",!0)],64)}}});export{Na as default};
