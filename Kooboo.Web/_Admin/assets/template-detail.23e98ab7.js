var S=(_,e,c)=>new Promise((b,p)=>{var k=s=>{try{y(c.next(s))}catch(t){p(t)}},w=s=>{try{y(c.throw(s))}catch(t){p(t)}},y=s=>s.done?b(s.value):Promise.resolve(s.value).then(k,w);y((c=c.apply(_,e)).next())});import{g as ie,o as re}from"./i18n.48bd28ac.js";import{u as me}from"./use-date.01b82ce0.js";import{x as ue,H as de}from"./main.ea42d807.js";import{d as ce,cd as pe,M as fe,g as d,x as ve,c as _e,i as Z,o as r,a as m,f as a,b as u,u as l,t as n,w as v,F as C,b6 as F,j as I,aH as ee,n as ye,k as V,m as xe,b3 as he,b1 as ge}from"./url.2e6a77c4.js";import{a as be}from"./index.8b079f71.js";import{a as q,r as te,D as ke,d as we,s as De,i as Ne}from"./validate.efc4a5c0.js";import{d as Ee,u as Ce}from"./index.b7fc4543.js";import{_ as Se}from"./plugin-vue_export-helper.21dcd24c.js";import{E as Fe}from"./windi.a5b0b048.js";import{E as Ie}from"./index.fc90f5ad.js";import{E as Ve,a as qe}from"./index.6855d037.js";import{E as Re,a as Ue,c as Be}from"./index.0d2684bf.js";import{E as Te}from"./index.2bc50276.js";import"./dayjs.min.0a66969b.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./replace-all.7cf5f327.js";import"./index.d75a71d9.js";import"./index.aba77680.js";import"./index.6d45a031.js";import"./index.31f26a0f.js";import"./index.60af85f4.js";import"./style.19d0c187.js";import"./toNumber.574be4f1.js";import"./_baseIsEqual.c0d7e77a.js";import"./event.776e7e11.js";import"./index.ff0264f3.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./_baseClone.adbc92f5.js";import"./isEqual.f1ae9fb3.js";import"./index.379e80ad.js";import"./focus-trap.23f44899.js";import"./event.53b2ad83.js";import"./index.a439b087.js";import"./index.fcc3ea42.js";import"./scroll.f51de5d8.js";import"./debounce.61c67278.js";import"./index.064c7de9.js";import"./validator.e2869aba.js";const ze=_=>(he("data-v-7f5dc832"),_=_(),ge(),_),Me={class:"max-w-1120px mx-auto mt-16 mb-24 bg-fff rounded-normal pt-21px px-24 pb-12 relative dark:bg-[#333333]"},je={class:"flex"},Ae={class:"flex items-center justify-center text-2l text-blue mr-12"},$e={class:"flex justify-between h-38px flex-1"},Ke=["title"],He={class:"flex items-center space-x-8"},Le={class:"flex items-center space-x-12"},Pe=ze(()=>a("div",{class:"w-full bg-[#E9EAF0] h-1px my-16 dark:bg-666"},null,-1)),Oe={key:0,class:"w-full h-[60px] bg-[#F3F5F5] dark:bg-[#545454] flex items-center justify-center gap-6 mb-[16px]"},Qe=["src"],Ge=["src"],Je={class:"space-y-12 my-24 px-24 py-16 rounded-normal text-m bg-[#f3f5f5] dark:bg-[#545454] bg-opacity-50"},We={class:"flex space-x-32"},Xe={class:"text-999 mr-8 dark:text-gray"},Ye={class:"dark:text-fff","data-cy":"author"},Ze={class:"text-999 mr-8 dark:text-gray"},et={class:"dark:text-fff","data-cy":"category"},tt={class:"text-999 mr-8 dark:text-gray"},ot={class:"dark:text-fff","data-cy":"size"},at={class:"text-999 mr-8 dark:text-gray"},st={class:"dark:text-fff","data-cy":"downloads"},lt={class:"text-999 mr-8 dark:text-gray"},nt={key:0,class:"dark:text-fff","data-cy":"last-modified"},it={class:"flex"},rt={class:"text-999 mr-8 leading-5 dark:text-gray"},mt={key:0},ut={key:1,class:"space-x-4 -ml-4"},dt=ce({setup(_){const{t:e}=ie(),c=pe(),b=fe(),p=d(),k=d(),w=d(!1),y=d(!1),s=d({rootDomain:"",subDomain:"",siteName:"",id:""}),t=d(),D=ve("currentFolder"),R=d([{name:"pc",title:e("common.fullScreen"),icon:"icon-iMac",width:"100%",height:""},{name:"pad",title:e("common.pad"),icon:"icon-iPad",width:"820px",height:"1180px"},{name:"phone",title:e("inlineDesign.phone"),icon:"icon-iPhone",width:"390px",height:"844px"}]),N=d(R.value[0]),oe={subDomain:[q(e("common.subDomainRequiredTips")),te(1,63),ke,we(s.value)],rootDomain:q(e("common.rootDomainRequiredTips")),siteName:[te(1,50),q(e("common.nameRequiredTips")),De(),Ne(ue,e("common.siteNameExistsTips"))]};(()=>S(this,null,function*(){!b.query.templateId||(t.value=yield Ee(b.query.templateId),s.value.id=t.value.id,be().then(f=>{p.value=f,p.value.length&&(s.value.rootDomain=p.value[0].domainName)}))}))();const U=()=>S(this,null,function*(){yield k.value.validate();const f=yield Ce(s.value);D&&(yield de({siteIds:[f],folderName:D})),c.push({name:"home",query:{currentFolder:D}})}),B=_e(()=>{var f,i,h,g,x,E;return[{property:(f=t.value)==null?void 0:f.layoutCount,display:e("common.layout")},{property:(i=t.value)==null?void 0:i.menuCount,display:e("common.menu")},{property:(h=t.value)==null?void 0:h.pageCount,display:e("common.page")},{property:(g=t.value)==null?void 0:g.viewCount,display:e("common.view")},{property:(x=t.value)==null?void 0:x.imageCount,display:e("common.image")},{property:(E=t.value)==null?void 0:E.contentCount,display:e("common.content")}]});return Z(()=>s.value.subDomain,()=>{w.value||(s.value.siteName=s.value.subDomain)}),Z(()=>s.value.siteName,()=>{y.value||(s.value.subDomain=s.value.siteName)}),(f,i)=>{var T,z,M,j,A,$,K,H,L,P,O,Q,G,J,W,X;const h=Fe,g=Ie,x=Ve,E=Re,ae=Ue,se=Te,le=qe,ne=Be;return r(),m("div",Me,[a("div",je,[a("div",Ae,[u(h,{class:"iconfont icon-fanhui1 cursor-pointer",title:l(e)("common.back"),"data-cy":"back",onClick:i[0]||(i[0]=o=>l(c).replace({name:"templates",query:{currentFolder:l(D)}}))},null,8,["title"])]),a("div",$e,[a("div",{class:"text-3l h-38px leading-38px dark:text-fff ellipsis max-w-260px",title:(T=t.value)==null?void 0:T.name,"data-cy":"template-name"},n((z=t.value)==null?void 0:z.name),9,Ke),u(le,{ref_key:"form",ref:k,model:s.value,rules:l(oe),onKeydown:re(U,["enter"])},{default:v(()=>[a("div",He,[u(x,{label:l(e)("common.siteName"),prop:"siteName"},{default:v(()=>[u(g,{modelValue:s.value.siteName,"onUpdate:modelValue":i[1]||(i[1]=o=>s.value.siteName=o),class:"w-185px","data-cy":"siteName",onInput:i[2]||(i[2]=o=>w.value=!0)},null,8,["modelValue"])]),_:1},8,["label"]),u(x,{prop:"subDomain",label:l(e)("common.domain")},{default:v(()=>[u(g,{modelValue:s.value.subDomain,"onUpdate:modelValue":i[3]||(i[3]=o=>s.value.subDomain=o),class:"w-185px","data-cy":"subdomain",onInput:i[4]||(i[4]=o=>y.value=!0)},null,8,["modelValue"])]),_:1},8,["label"]),u(x,{prop:"rootDomain"},{default:v(()=>[a("div",Le,[u(ae,{modelValue:s.value.rootDomain,"onUpdate:modelValue":i[5]||(i[5]=o=>s.value.rootDomain=o),"data-cy":"root-domain",class:"w-185px"},{default:v(()=>[(r(!0),m(C,null,F(p.value,o=>(r(),I(E,{key:o.domainName,value:o.domainName,label:o.domainName,"data-cy":"root-domain-opt"},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),a("div",null,[u(se,{type:"primary",round:"","data-cy":"start-create",onClick:U},{default:v(()=>[ee(n(l(e)("common.startCreate")),1)]),_:1})])])]),_:1})])]),_:1},8,["model","rules","onKeydown"])])]),Pe,((M=t.value)==null?void 0:M.screenShotUrl)&&((A=(j=t.value)==null?void 0:j.type)==null?void 0:A.value)!==1?V("",!0):(r(),m("div",Oe,[(r(!0),m(C,null,F(R.value,o=>(r(),I(h,{key:o.name,class:ye(["iconfont text-[32px] text-[#8BA5B0] hover:text-[#4EABF5] cursor-pointer",{[o.icon]:!0,"text-[#2296F3]":N.value.name===o.name}]),title:o.title,onClick:Y=>N.value=o},null,8,["class","title","onClick"]))),128))])),(($=t.value)==null?void 0:$.screenShotUrl)&&((H=(K=t.value)==null?void 0:K.type)==null?void 0:H.value)!==1?(r(),m("img",{key:1,class:"w-full",src:(L=t.value)==null?void 0:L.screenShotUrl},null,8,Qe)):(r(),m("iframe",{key:2,ref:"iframe",src:(P=t.value)==null?void 0:P.previewUrl,class:"origin-top-left h-500px w-full mx-auto border-gray border-1 border-solid shadow-blue-md iframe dark:border-666",style:xe([{transform:"scale(1)"},{width:N.value.width,height:N.value.height}])},null,12,Ge)),a("div",Je,[a("div",We,[a("div",null,[a("span",Xe,n(l(e)("common.author"))+":",1),a("span",Ye,n((O=t.value)==null?void 0:O.userName),1)]),a("div",null,[a("span",Ze,n(l(e)("common.category"))+":",1),a("span",et,n((G=(Q=t.value)==null?void 0:Q.type.name)!=null?G:l(e)("common.noCategory")),1)]),a("div",null,[a("span",tt,n(l(e)("common.size"))+":",1),a("span",ot,n((J=t.value)==null?void 0:J.sizeString),1)]),a("div",null,[a("span",at,n(l(e)("common.downloads"))+":",1),a("span",st,n((W=t.value)==null?void 0:W.downloadCount),1)]),a("div",null,[a("span",lt,n(l(e)("common.lastModified"))+":",1),(X=t.value)!=null&&X.lastModified?(r(),m("span",nt,n(l(me)(t.value.lastModified)),1)):V("",!0)])]),a("div",it,[a("span",rt,n(l(e)("pickTemplate.contents"))+":",1),l(B).map(o=>o.property).every(o=>o===0)?(r(),m("div",mt,n(l(e)("common.noContent")),1)):(r(),m("div",ut,[(r(!0),m(C,null,F(l(B),(o,Y)=>(r(),m(C,null,[o.property?(r(),I(ne,{key:Y,size:"small",class:"rounded-full cursor-pointer ml-4","data-cy":"content"},{default:v(()=>[ee(n(o.property)+" "+n(o.display),1)]),_:2},1024)):V("",!0)],64))),256))]))])])])}}});var eo=Se(dt,[["__scopeId","data-v-7f5dc832"]]);export{eo as default};
