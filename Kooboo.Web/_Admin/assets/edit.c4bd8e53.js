var x=(e,d,l)=>new Promise((t,a)=>{var n=s=>{try{u(l.next(s))}catch(i){a(i)}},o=s=>{try{u(l.throw(s))}catch(i){a(i)}},u=s=>s.done?t(s.value):Promise.resolve(s.value).then(n,o);u((l=l.apply(e,d)).next())});import{_ as T}from"./index.f237f871.js";import{_ as R}from"./index.a731e53b.js";import{_ as j}from"./dev-mode.c4133b5a.js";import{_ as C}from"./icon-button.3313e42d.js";import{g as V,o as L}from"./i18n.48bd28ac.js";import{d as w,o as m,a as c,F as B,b6 as I,j as $,b as r,u as f,k as v,w as k,g as b,cd as M,x as Q,f as q}from"./url.2e6a77c4.js";import{u as z}from"./replace-all.7cf5f327.js";import{a as A,u as G}from"./user-options.2c08b61d.js";import{E as H}from"./index.fc90f5ad.js";import{E as P}from"./index.cbddf8eb.js";import{E as W}from"./index.d4bbb472.js";import{E as X}from"./windi.a5b0b048.js";import{E as Y,a as Z}from"./index.6855d037.js";import{E as ee}from"./index.c4e9b529.js";import"./index.2bc50276.js";import"./index.ff0264f3.js";import"./main.ea42d807.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./guid.c1a40312.js";import"./use-shortcuts.21ce2d8e.js";import"./index.a439b087.js";import"./error.7e8331f1.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./config.9fb52765.js";import"./dark.ddf8665a.js";import"./page.831d1a45.js";import"./validate.efc4a5c0.js";import"./index.d75a71d9.js";import"./index.aba77680.js";import"./index.6d45a031.js";import"./index.31f26a0f.js";import"./index.60af85f4.js";import"./style.19d0c187.js";import"./toNumber.574be4f1.js";import"./_baseIsEqual.c0d7e77a.js";import"./index.99c4f65d.js";import"./index.603c1365.js";import"./scroll.f51de5d8.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.23f44899.js";import"./isNil.98bb3b88.js";import"./validator.e2869aba.js";import"./index.fcc3ea42.js";import"./index.f5a869bb.js";import"./index.379e80ad.js";import"./dropdown.0507a1c7.js";import"./refs.4001ce17.js";import"./use-copy-text.a346ed23.js";import"./index.c6df1b45.js";import"./index.0f940e7f.js";import"./classCompletion.a22e38a6.js";import"./vuedraggable.umd.5840ebc7.js";import"./cloneDeep.ff43c1f8.js";import"./_baseClone.adbc92f5.js";import"./toggleComment.5b29ca87.js";import"./use-save-tip.04d9878f.js";import"./confirm.e2c924ff.js";import"./logo-transparent.1566007e.js";import"./index.695d0284.js";import"./event.776e7e11.js";import"./index.0d2684bf.js";import"./isEqual.f1ae9fb3.js";import"./debounce.61c67278.js";import"./index.064c7de9.js";import"./index.66d5d547.js";import"./index.77edae39.js";import"./index.232e741a.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.af90dc36.js";import"./index.470f0e7e.js";import"./index.deca86b5.js";import"./alert.583ccfe6.js";import"./index.fafb14b3.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.118b18f5.js";/* empty css                                                          */import"./file.b0d4cc6e.js";import"./use-date.01b82ce0.js";import"./dayjs.min.0a66969b.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.82732353.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.f6d26366.js";import"./image-editor.846c8dc6.js";import"./main.esm.5190fb65.js";import"./index.f01d4ffd.js";import"./index.8262f5ef.js";import"./index.e3f90979.js";function O(e){switch(e){case"string":return"";case"array":return[];case"boolean":return!1;case"number":return 0;case"object":return{}}}const te={class:"space-y-8"},oe=w({props:{schema:null,value:null},setup(e){const d=e,{t:l}=V();function t(n,o){n.push(O(o))}function a(n,o){d.value.splice(n,1,o)}return(n,o)=>{const u=C;return m(),c("div",te,[(m(!0),c(B,null,I(e.value,(s,i)=>(m(),$(S,{key:i,value:s,schema:{type:e.schema.arrayType,children:e.schema.children,display:e.schema.display,name:e.schema.name},deletable:!0,"onUpdate:modelValue":h=>a(i,h),onDelete:h=>e.value.splice(i,1)},null,8,["value","schema","onUpdate:modelValue","onDelete"]))),128)),r(u,{circle:"",class:"text-blue",icon:"icon-a-addto ",tip:f(l)("common.add"),onClick:o[0]||(o[0]=s=>t(e.value,e.schema.arrayType))},null,8,["tip"])])}}}),ae={key:0,class:"flex gap-4 w-full"},le={key:0},ne={key:1,class:"flex gap-4 w-full"},ie={key:0},me={key:2,class:"flex gap-4 w-full"},re={key:0},se={key:3,class:"px-24 py-12 border-l-2 border-blue/70 relative transition-all duration-300 hover:shadow-m-10 rounded-tr-normal rounded-br-normal"},ue={key:4,class:"flex items-center gap-4 w-full"},S=w({props:{schema:null,value:null,deletable:{type:Boolean}},emits:["update:model-value","delete"],setup(e){const{t:d}=V();return(l,t)=>{const a=H,n=C,o=P,u=W,s=X;return e.schema.type=="string"?(m(),c("div",ae,[r(a,{"model-value":e.value,"onUpdate:modelValue":t[0]||(t[0]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",le,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[1]||(t[1]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="boolean"?(m(),c("div",ne,[r(o,{"model-value":e.value,"onUpdate:modelValue":t[2]||(t[2]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",ie,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[3]||(t[3]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="number"?(m(),c("div",me,[r(u,{"model-value":e.value,"onUpdate:modelValue":t[4]||(t[4]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",re,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[5]||(t[5]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="object"?(m(),c("div",se,[r(U,{schemas:e.schema.children,data:e.value,deletable:e.deletable},null,8,["schemas","data","deletable"]),e.deletable?(m(),$(s,{key:0,class:"iconfont icon-delete cursor-pointer text-orange absolute top-16 right-16",onClick:t[6]||(t[6]=i=>l.$emit("delete"))})):v("",!0)])):e.schema.type=="array"?(m(),c("div",ue,[r(oe,{schema:e.schema,value:e.value},null,8,["schema","value"])])):v("",!0)}}}),U=w({props:{schemas:null,data:null,deletable:{type:Boolean}},emits:["update:model-value","delete"],setup(e){function d(t,a,n){return t[a]||(t[a]=O(n)),t[a]}function l(t,a,n){t[a]=n}return(t,a)=>{const n=Y;return m(!0),c(B,null,I(e.schemas,o=>(m(),$(n,{key:o.name,label:o.display||o.name,class:"w-504px"},{default:k(()=>[(m(),$(S,{key:o.name,schema:o,value:d(e.data,o.name,o.type),"onUpdate:modelValue":u=>l(e.data,o.name,u)},null,8,["schema","value","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128)}}}),ce={class:"p-24 mb-64"},de={class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 py-24 px-56px relative"},pe=["onKeydown"],Zt=w({setup(e){const{t:d}=V(),l=b([]),t=M(),a=b({}),n=Q("id"),o=b(!1),u=b("{}");A(n).then(y=>{l.value=JSON.parse(y.schema),a.value=y.data?JSON.parse(y.data):{}});function s(){t.goBackOrTo(z({name:"useroptions"}))}function i(){return x(this,null,function*(){yield G({id:n,setting:JSON.stringify(a.value)}),s()})}function h(){u.value=JSON.stringify(a.value,null,4),o.value=!0}function E(){a.value=JSON.parse(u.value),o.value=!1}return(y,p)=>{const _=C,N=Z,D=j,F=R,J=ee,K=T;return m(),c("div",ce,[r(N,{"label-position":"top"},{default:k(()=>[q("div",de,[r(_,{icon:"icon-code",tip:f(d)("common.editCode"),class:"absolute top-24 right-24",onClick:h},null,8,["tip"]),r(U,{schemas:l.value,data:a.value},null,8,["schemas","data"])])]),_:1}),r(J,{modelValue:o.value,"onUpdate:modelValue":p[2]||(p[2]=g=>o.value=g),width:"800px","close-on-click-modal":!1,title:f(d)("common.editCode")},{footer:k(()=>[r(F,{onConfirm:E,onCancel:p[1]||(p[1]=g=>o.value=!1)})]),default:k(()=>[o.value?(m(),c("div",{key:0,onKeydown:L(E,["enter"])},[r(D,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=g=>u.value=g),language:"json"},null,8,["modelValue"])],40,pe)):v("",!0)]),_:1},8,["modelValue","title"]),r(K,{permission:{feature:"userOptions",action:"edit"},onCancel:s,onSave:i})])}}});export{Zt as default};
