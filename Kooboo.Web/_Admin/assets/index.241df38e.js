var x=(S,o,u)=>new Promise((D,h)=>{var v=s=>{try{_(u.next(s))}catch(r){h(r)}},b=s=>{try{_(u.throw(s))}catch(r){h(r)}},_=s=>s.done?D(s.value):Promise.resolve(s.value).then(v,b);_((u=u.apply(S,o)).next())});import{_ as A}from"./k-table.b1a54b80.js";import{d as O,N as P,cd as j,g as q,h as z,O as K,b8 as L,o as p,a as y,b as n,u as e,f as c,e as M,j as C,w as i,aI as d,t as a,k as B,F as G,b7 as H,n as N}from"./url.4cb47a7a.js";import{B as J}from"./breadcrumb.f4d80c95.js";import{g as Q}from"./i18n.a87944a4.js";import{u as w}from"./replace-all.56d2c1f7.js";import{d as U,a as W}from"./discount.10fc789d.js";import{u as $}from"./use-date.f1258183.js";import{b as X}from"./confirm.b60b5d2f.js";import{E as Y}from"./windi.6360286d.js";import{E as Z}from"./index.361e2245.js";import{E as tt}from"./index.b38edc72.js";import{c as et}from"./index.7c862087.js";import{E as ot}from"./index.d96452a6.js";import"./sortable.esm.a99254e8.js";import"./icon-button.74ccc970.js";import"./index.4f90a917.js";import"./index.4d568055.js";import"./main.9fdfea92.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.c6da2706.js";import"./isEqual.4cab74e3.js";import"./_baseIsEqual.dc9e64c4.js";import"./index.178b9e08.js";import"./event.776e7e11.js";import"./index.7b8c5aef.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./index.42922617.js";import"./index.f15f695e.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.fd96ea36.js";import"./dayjs.min.ccc40d4f.js";import"./logo-transparent.1566007e.js";import"./index.f2c1b903.js";import"./index.c10802d9.js";import"./scroll.16983984.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.50a00b7f.js";import"./validator.b5df2420.js";import"./debounce.4e0c106e.js";import"./toNumber.47eea968.js";import"./index.66319a92.js";const nt={class:"p-24"},it={class:"flex items-center py-24 space-x-16"},at={class:"flex items-center"},st={class:"flex items-center"},rt={class:"text-black dark:text-[#cfd3dc]"},ct={class:"text-s"},mt={key:0},lt={class:"inline-flex items-center gap-4"},ie=O({setup(S){const{t:o}=Q(),D=P().meta.title,h=j(),v=q([]);function b(r){const l=new Date(r.startDate),g=new Date(r.endDate),f=new Date;return f<l?"notStart":f>l&&f<g?"active":"expire"}function _(r){return x(this,null,function*(){yield X(r.length),yield U(r.map(l=>l.id)),s()})}function s(){return x(this,null,function*(){v.value=yield W()})}return z(()=>x(this,null,function*(){s()})),(r,l)=>{const g=Y,f=Z,m=tt,k=et,F=ot,I=K("router-link"),R=A,V=L("hasPermission");return p(),y("div",nt,[n(J,{name:e(D)},null,8,["name"]),c("div",it,[M((p(),C(f,{round:"",onClick:l[0]||(l[0]=t=>e(h).push(e(w)({name:"discount create"})))},{default:i(()=>[c("div",at,[n(g,{class:"mr-16 iconfont icon-a-addto"}),d(" "+a(e(o)("common.create")),1)])]),_:1})),[[V,{feature:"discounts",action:"edit"}]])]),n(R,{data:v.value,"show-check":"",onDelete:_},{default:i(()=>[n(m,{label:e(o)("common.title")},{default:i(({row:t})=>[c("div",st,[c("span",rt,a(t.title),1)])]),_:1},8,["label"]),n(m,{label:e(o)("commerce.discountCode"),align:"center"},{default:i(({row:t})=>[t.method=="DiscountCode"?(p(),C(k,{key:0},{default:i(()=>[d(a(t.code),1)]),_:2},1024)):B("",!0)]),_:1},8,["label"]),n(m,{label:e(o)("common.condition"),align:"center"},{default:i(({row:t})=>[c("div",ct,[(p(!0),y(G,null,H(t.condition.items,(E,T)=>(p(),y("div",{key:T},[T>0?(p(),y("span",mt,a(t.condition.isAny?e(o)("common.or"):e(o)("common.and")),1)):B("",!0),d(" "+a(E.option)+" "+a(E.method)+" "+a(E.value),1)]))),128))])]),_:1},8,["label"]),n(m,{label:e(o)("common.priority"),width:"120",align:"center"},{default:i(({row:t})=>[d(a(t.priority),1)]),_:1},8,["label"]),n(m,{label:e(o)("commerce.isExclusion"),width:"120",align:"center"},{default:i(({row:t})=>[c("span",{class:N(t.isExclusion?"text-green":"")},a(t.isExclusion?e(o)("common.yes"):e(o)("common.no")),3)]),_:1},8,["label"]),n(m,{label:e(o)("common.activeDateRange"),width:"180",align:"center"},{default:i(({row:t})=>[c("div",{class:N(["text-s",{"text-orange":b(t)=="expire","text-green":b(t)=="active"}])},[c("div",null,a(e($)(t.startDate)),1),c("div",null,a(e($)(t.endDate)),1)],2)]),_:1},8,["label"]),n(m,{label:e(o)("common.detail"),align:"center"},{default:i(({row:t})=>[c("div",lt,[n(k,{type:"success",round:""},{default:i(()=>[d(a(t.type=="FreeShipping"?e(o)("commerce.freeShipping"):t.type=="OrderAmountOff"?e(o)("commerce.order"):e(o)("common.products")),1)]),_:2},1024),t.type!="FreeShipping"?(p(),C(k,{key:0,round:"",type:"warning"},{default:i(()=>[d(a(t.isPercent?`-${t.value}%`:`-$${t.value}`),1)]),_:2},1024)):B("",!0)])]),_:1},8,["label"]),n(m,{align:"right",width:"60"},{default:i(({row:t})=>[n(I,{to:e(w)({name:"discount edit",query:{id:t.id}}),class:"mx-8"},{default:i(()=>[n(F,{placement:"top",content:e(o)("common.edit")},{default:i(()=>[n(g,{class:"iconfont icon-a-writein hover:text-blue text-l"})]),_:1},8,["content"])]),_:2},1032,["to"])]),_:1})]),_:1},8,["data"])])}}});export{ie as default};
