var g=(k,i,r)=>new Promise((y,u)=>{var f=e=>{try{p(r.next(e))}catch(s){u(s)}},_=e=>{try{p(r.throw(e))}catch(s){u(s)}},p=e=>e.done?y(e.value):Promise.resolve(e.value).then(f,_);p((r=r.apply(k,i)).next())});import{d as B,N as q,g as d,o as c,j as w,w as a,b as t,u as m,aI as R,t as V,a as D,b7 as N,F as $,k as I,cd as h,f as E}from"./url.4cb47a7a.js";import{g as F,w as G}from"./i18n.a87944a4.js";import{_ as O}from"./k-table.b1a54b80.js";import{a as U,S as X}from"./validate.bb56f9e3.js";import{n as z}from"./guid.c1a40312.js";import{i as A,j as H,k as J,l as K,m as P}from"./index.d2657986.js";import{_ as Q}from"./index.f0d5f031.js";import{_ as W}from"./plugin-vue_export-helper.21dcd24c.js";import{E as Y}from"./index.178b9e08.js";import{E as Z,a as ee}from"./index.9fd79879.js";import{E as oe,a as le}from"./index.7c862087.js";import{E as te}from"./index.c003dfa1.js";import{_ as ae}from"./index.9250b320.js";import{E as re}from"./index.361e2245.js";import{E as se}from"./index.b38edc72.js";import"./sortable.esm.a99254e8.js";import"./icon-button.74ccc970.js";import"./windi.6360286d.js";import"./index.d96452a6.js";import"./focus-trap.50a00b7f.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.7b8c5aef.js";import"./index.4f90a917.js";import"./index.4d568055.js";import"./main.9fdfea92.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./replace-all.56d2c1f7.js";import"./index.c6da2706.js";import"./isEqual.4cab74e3.js";import"./_baseIsEqual.dc9e64c4.js";import"./error.7e8331f1.js";import"./index.42922617.js";import"./event.776e7e11.js";import"./index.f15f695e.js";import"./index.d24a40b9.js";import"./index.f23f1e38.js";import"./index.a24f458a.js";import"./index.1fd72ea8.js";import"./index.abe211fa.js";import"./style.c350d462.js";import"./toNumber.47eea968.js";import"./_baseClone.b8903935.js";import"./index.fd96ea36.js";import"./scroll.16983984.js";import"./debounce.4e0c106e.js";import"./index.66319a92.js";import"./validator.b5df2420.js";import"./index.c10802d9.js";import"./refs.3132cbdb.js";const ne=B({props:{modelValue:{type:Boolean}},emits:["update:modelValue","createSuccess"],setup(k,{emit:i}){const{t:r}=F(),y=q(),u=d(!0),f=d(),_={TTL:[U(r("common.valueRequiredTips"))],value:[U(r("common.valueRequiredTips"))],host:[X]},p=d(),e=d({id:z(),domain:f.value,type:"",host:"",value:"",priority:0,TTL:10}),s=d(),v=d(),b=()=>g(this,null,function*(){e.value.domain=y.query.domainName,v.value=yield A(),s.value=yield H()}),n=()=>g(this,null,function*(){var x;yield(x=p.value)==null?void 0:x.validate(),yield J(e.value),i("createSuccess"),u.value=!1});return b(),(x,l)=>{const L=Y,T=Z,C=oe,S=le,j=ee,M=te;return c(),w(M,{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=o=>u.value=o),width:"600px","close-on-click-modal":!1,title:m(r)("common.addRecord"),onClosed:l[8]||(l[8]=o=>i("update:modelValue",!1))},{footer:a(()=>[t(Q,{"confirm-label":m(r)("common.create"),onConfirm:n,onCancel:l[6]||(l[6]=o=>u.value=!1)},null,8,["confirm-label"])]),default:a(()=>[t(j,{ref_key:"form",ref:p,class:"el-form--label-normal",model:e.value,rules:m(_),"label-position":"top",onSubmit:l[5]||(l[5]=G(()=>{},["prevent"]))},{default:a(()=>[t(T,{label:m(r)("common.hostRecord"),prop:"host"},{default:a(()=>[t(L,{modelValue:e.value.host,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.host=o)},{append:a(()=>[R(V(e.value.domain),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(T,{label:m(r)("common.recordType")},{default:a(()=>[t(S,{modelValue:e.value.type,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.type=o),class:"w-full",placeholder:" "},{default:a(()=>[(c(!0),D($,null,N(v.value,o=>(c(),w(C,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(T,{prop:"value",label:m(r)("common.recordValue")},{default:a(()=>[t(L,{modelValue:e.value.value,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.value=o)},null,8,["modelValue"])]),_:1},8,["label"]),e.value.type==="MX"?(c(),w(T,{key:0,prop:"priority",label:m(r)("common.priority")},{default:a(()=>[t(L,{modelValue:e.value.priority,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.priority=o)},null,8,["modelValue"])]),_:1},8,["label"])):I("",!0),t(T,{prop:"TTL",label:"TTL"},{default:a(()=>[t(S,{modelValue:e.value.TTL,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.TTL=o),class:"w-full"},{default:a(()=>[(c(!0),D($,null,N(s.value,o=>(c(),w(C,{key:o.value,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});var me=W(ne,[["__scopeId","data-v-7cd455ec"]]);const ue={class:"p-24"},ie={class:"flex items-center pb-24 space-x-16"},pe={class:"flex items-center"},de={class:"text-blue ellipsis"},ce={class:"text-blue cursor-pointer"},co=B({setup(k){const{t:i}=F(),r=q(),y=h(),u=d(!1),f=d(),_=()=>g(this,null,function*(){f.value=yield K(r.query.domainName)}),p=e=>g(this,null,function*(){const s=e.map(v=>v.id);yield P(s),_()});return _(),(e,s)=>{const v=re,b=se;return c(),D("div",ue,[E("div",ie,[t(v,{round:"",onClick:s[0]||(s[0]=n=>u.value=!0)},{default:a(()=>[E("div",pe,V(m(i)("common.add")),1)]),_:1})]),t(m(O),{data:f.value,"show-check":"",onDelete:p},{default:a(()=>[t(b,{label:m(i)("common.host"),width:"200"},{default:a(({row:n})=>[E("span",de,V(n.host),1)]),_:1},8,["label"]),t(b,{label:m(i)("common.recordType"),width:"200",align:"center"},{default:a(({row:n})=>[R(V(n.type),1)]),_:1},8,["label"]),t(b,{label:m(i)("common.recordValue"),align:"center"},{default:a(({row:n})=>[R(V(n.value),1)]),_:1},8,["label"]),t(b,{label:"TTL",width:"100",align:"center"},{default:a(({row:n})=>[E("span",ce,V(n.ttl),1)]),_:1})]),_:1},8,["data"]),u.value?(c(),w(me,{key:0,modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=n=>u.value=n),onCreateSuccess:_},null,8,["modelValue"])):I("",!0),t(ae,{onCancel:s[2]||(s[2]=n=>m(y).back())})])}}});export{co as default};
