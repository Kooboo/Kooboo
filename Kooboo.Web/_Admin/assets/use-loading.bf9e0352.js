var C=(e,p,r)=>new Promise((k,s)=>{var a=o=>{try{c(r.next(o))}catch(n){s(n)}},l=o=>{try{c(r.throw(o))}catch(n){s(n)}},c=o=>o.done?k(o.value):Promise.resolve(o.value).then(a,l);c((r=r.apply(e,p)).next())});import{g as V}from"./i18n.48bd28ac.js";import{d as D,M as S,N as j,o as t,a as i,b as N,w as f,f as g,t as w,m as E,u as d,F as v,b6 as I,j as x,c as F,k as b,n as h}from"./url.2e6a77c4.js";import{u as z}from"./email.196eb60e.js";import{E as $,a as A,b as R}from"./index.f5a869bb.js";import{E as _,j as G}from"./windi.a5b0b048.js";var oe="/_Admin/assets/attachment.e77439fe.svg";const H={key:0},J=["title"],K=["title"],O=D({props:{dropdownItem:null},emits:["moveMessage"],setup(e,{emit:p}){const r=S();return(k,s)=>{var c,o;const a=$,l=j("SubDropdown",!0);return(c=e.dropdownItem.items)!=null&&c.length?(t(),i("div",H,[N(a,{style:E({paddingLeft:16+e.dropdownItem.floor*10+"px"}),disabled:e.dropdownItem.name===d(r).query.folderName,onClick:s[0]||(s[0]=n=>p("moveMessage",e.dropdownItem.name))},{default:f(()=>[g("span",{class:"ellipsis",title:e.dropdownItem.displayName},w(e.dropdownItem.displayName),9,J)]),_:1},8,["style","disabled"]),(t(!0),i(v,null,I((o=e.dropdownItem)==null?void 0:o.items,n=>(t(),x(l,{key:n.name,"dropdown-item":n,onMoveMessage:s[1]||(s[1]=m=>p("moveMessage",m))},null,8,["dropdown-item"]))),128))])):(t(),x(a,{key:1,style:E({paddingLeft:16+e.dropdownItem.floor*10+"px"}),disabled:e.dropdownItem.name===d(r).query.folderName,onClick:s[2]||(s[2]=n=>p("moveMessage",e.dropdownItem.name))},{default:f(()=>[g("span",{class:"ellipsis",title:e.dropdownItem.displayName},w(e.dropdownItem.displayName),9,K)]),_:1},8,["style","disabled"]))}}}),P={key:0},Q={key:1,"data-cy":"move-to"},te=D({props:{selected:null,folderName:null},emits:["move-success"],setup(e,{emit:p}){const r=e,k=S(),s=z(),{t:a}=V(),l=F(()=>{var n;return(n=r.folderName)!=null?n:s.folder}),c=F(()=>[{name:"inbox",displayName:a("common.inbox"),show:l.value!=="inbox"},{name:"sent",displayName:a("mail.sent"),show:l.value!=="sent"},{name:"drafts",displayName:a("common.drafts"),show:l.value==="trash"},{name:"spam",displayName:a("common.spam"),show:l.value!=="spam"&&l.value!=="sent"}]),o=(n,m)=>C(this,null,function*(){k.query.folderName!==m&&p("move-success",m)});return(n,m)=>{const L=_,B=$,q=A,T=R;return t(),i(v,null,[d(l)!=="spam"?(t(),x(T,{key:0,trigger:"click","max-height":"50vh","popper-class":"max-w-200px",disabled:!e.selected.length},{dropdown:f(()=>[N(q,null,{default:f(()=>[(t(!0),i(v,null,I(d(c),u=>(t(),i(v,{key:u.name},[u.show?(t(),x(B,{key:0,onClick:M=>o(e.selected,u.name)},{default:f(()=>[g("span",null,w(u.displayName),1)]),_:2},1032,["onClick"])):b("",!0)],64))),128)),(t(!0),i(v,null,I(d(s).folderMenuTree,u=>(t(),x(O,{key:u.name,"dropdown-item":u,onMoveMessage:m[0]||(m[0]=M=>o(e.selected,M))},null,8,["dropdown-item"]))),128))]),_:1})]),default:f(()=>[g("div",{class:h(["inline-flex rounded-full bg-[#F3F5F5] flex items-center h-30px px-16 cursor-pointer dark:bg-444 text-black dark:text-[#ffffffaa]",e.selected.length?"":"cursor-not-allowed text-999 text-opacity-60 dark:text-opacity-20"])},[d(l)==="trash"?(t(),i("span",P,w(d(a)("common.restoreTo")),1)):(t(),i("span",Q,w(d(a)("common.moveTo")),1)),N(L,{class:"ml-8 iconfont icon-pull-down"})],2)]),_:1},8,["disabled"])):b("",!0),d(l)==="spam"?(t(),i("div",{key:1,class:h(["inline-flex rounded-full bg-[#F3F5F5] flex items-center h-30px px-16 dark:bg-444 ml-10px",e.selected.length?"cursor-pointer":"cursor-not-allowed "])},[g("span",{class:h(e.selected.length?"":"text-999 text-opacity-60 pointer-events-none cursor-not-allowed"),"data-cy":"not-spam",onClick:m[1]||(m[1]=u=>o(e.selected,"inbox"))},w(d(a)("common.notSpam")),3)],2)):b("",!0)],64)}}});let y;function ne(){y||(y=G.service({background:"rgba(0, 0, 0, 0.5)"}))}function se(){y==null||y.close(),y=void 0}export{te as _,oe as a,se as h,ne as s};
