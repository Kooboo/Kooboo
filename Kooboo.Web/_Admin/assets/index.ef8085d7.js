var Q=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var F=(u,e,o)=>e in u?Q(u,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[e]=o,I=(u,e)=>{for(var o in e||(e={}))G.call(e,o)&&F(u,o,e[o]);if(q)for(var o of q(e))J.call(e,o)&&F(u,o,e[o]);return u},w=(u,e)=>W(u,X(e));var $=(u,e,o)=>new Promise((p,c)=>{var _=n=>{try{r(o.next(n))}catch(s){c(s)}},d=n=>{try{r(o.throw(n))}catch(s){c(s)}},r=n=>n.done?p(n.value):Promise.resolve(n.value).then(_,d);r((o=o.apply(u,e)).next())});import{_ as M}from"./k-table.b1a54b80.js";import{_ as P}from"./relations-tag.b9cbe606.js";import{u as R}from"./use-date.f1258183.js";import{W as E,X as U}from"./dev-mode.acf56c3e.js";import{_ as D}from"./icon-button.74ccc970.js";import{u as k}from"./replace-all.56d2c1f7.js";import{g as S}from"./i18n.a87944a4.js";import{b as j}from"./confirm.b60b5d2f.js";import{E as K}from"./windi.6360286d.js";import{E as Y}from"./index.361e2245.js";import{E as z}from"./index.b38edc72.js";import{c as A}from"./index.7c862087.js";import{d as N,g as C,O as H,b8 as Z,o as v,a as x,f as g,e as ee,j as V,w as m,b as t,aI as h,t as b,u as a,k as B,F as T,cd as te,N as oe,x as ae,b7 as ie,l as me}from"./url.4cb47a7a.js";import{B as le}from"./breadcrumb.f4d80c95.js";import{E as re,a as ne}from"./index.4d2ce883.js";import"./sortable.esm.a99254e8.js";import"./main.9fdfea92.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.c6da2706.js";import"./index.4d568055.js";import"./isEqual.4cab74e3.js";import"./_baseIsEqual.dc9e64c4.js";import"./index.178b9e08.js";import"./event.776e7e11.js";import"./index.7b8c5aef.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./index.42922617.js";import"./index.f15f695e.js";import"./page.881ec888.js";import"./validate.bb56f9e3.js";import"./index.d24a40b9.js";import"./index.f23f1e38.js";import"./index.a24f458a.js";import"./index.1fd72ea8.js";import"./index.abe211fa.js";import"./style.c350d462.js";import"./toNumber.47eea968.js";import"./index.9fd79879.js";import"./_baseClone.b8903935.js";import"./index.f2c1b903.js";import"./index.c10802d9.js";import"./scroll.16983984.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.50a00b7f.js";import"./validator.b5df2420.js";import"./guid.c1a40312.js";import"./index.fd96ea36.js";import"./index.c003dfa1.js";import"./refs.3132cbdb.js";import"./dayjs.min.ccc40d4f.js";import"./use-shortcuts.ff4b1f52.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./config.1e73f9c3.js";import"./dark.9459c47b.js";import"./index.c86a187b.js";import"./index.d96452a6.js";import"./dropdown.86d3a7fb.js";import"./use-copy-text.ec245a13.js";import"./index.269bf65e.js";import"./monaco.c080bc0a.js";import"./classCompletion.a22e38a6.js";import"./extraLib.d94bb2b4.js";import"./use-save-tip.e3dc783a.js";import"./index.f0d5f031.js";import"./index.6918f0a5.js";import"./vuedraggable.umd.af323a53.js";import"./index.f154d010.js";import"./index.b9a74c44.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.79632b7d.js";import"./index.99e769ef.js";import"./index.d878e15f.js";import"./alert.d2815716.js";import"./index.24947ed8.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.d235f69b.js";/* empty css                                                          */import"./file.a821eac5.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.78bd75f1.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.ec5f0705.js";import"./image-editor.a4ae94b1.js";import"./index.0e5d639d.js";import"./cloneDeep.c5011aa2.js";import"./main.esm.e26794cb.js";import"./index.16f227d6.js";import"./index.4f90a917.js";import"./logo-transparent.1566007e.js";import"./debounce.4e0c106e.js";import"./index.66319a92.js";import"./plugin-vue_export-helper.41ffa612.js";const se={class:"flex items-center space-x-16 pb-12"},pe={class:"flex items-center"},ue=["title"],de={class:"flex justify-between items-center"},ce=N({setup(u){const{t:e}=S(),o=E(),p=C(!1),c=C(),_=d=>$(this,null,function*(){yield j(d.length),yield o.deleteForms(d.map(r=>r.id))});return(d,r)=>{const n=K,s=Y,y=H("router-link"),i=z,f=A,L=Z("hasPermission");return v(),x(T,null,[g("div",se,[ee((v(),V(s,{round:"","data-cy":"create-form",onClick:r[0]||(r[0]=l=>d.$router.push(a(k)({name:"form-edit"})))},{default:m(()=>[g("div",pe,[t(n,{class:"iconfont icon-a-addto"}),h(" "+b(a(e)("common.createForm")),1)])]),_:1})),[[L,{feature:"form",action:"edit"}]])]),t(a(M),{data:a(o).external,"show-check":"",permission:{feature:"form",action:"delete"},onDelete:_},{default:m(()=>[t(i,{label:a(e)("common.name")},{default:m(({row:l})=>[t(y,{to:a(k)({name:"form-edit",query:{id:l.id}}),"data-cy":"name"},{default:m(()=>[g("span",{title:l.name,class:"ellipsis text-blue cursor-pointer"},b(l.name),9,ue)]),_:2},1032,["to"])]),_:1},8,["label"]),t(i,{label:a(e)("common.data")},{default:m(({row:l})=>[t(y,{to:a(k)({name:"form-values",query:{id:l.id}}),"data-cy":"data"},{default:m(()=>[t(f,{class:"rounded-full",size:"small"},{default:m(()=>[h(b(l.valueCount),1)]),_:2},1024)]),_:2},1032,["to"])]),_:1},8,["label"]),t(i,{label:a(e)("common.usedBy")},{default:m(({row:l})=>[t(P,{id:l.id,relations:l.references,type:"form"},null,8,["id","relations"])]),_:1},8,["label"]),t(i,{label:a(e)("common.lastModified"),"data-cy":"last-modified"},{default:m(({row:l})=>[h(b(a(R)(l.lastModified)),1)]),_:1},8,["label"]),t(i,{width:"90",align:"right"},{default:m(({row:l})=>[g("div",de,[t(D,{icon:"icon-a-setup",tip:a(e)("common.setting"),"data-cy":"setting",onClick:O=>{c.value=l,p.value=!0}},null,8,["tip","onClick"]),t(D,{class:"inline-flex",icon:"icon-time",permission:{feature:"site",action:"log"},tip:a(e)("common.version"),"data-cy":"versions",onClick:O=>d.$router.goLogVersions(l.keyHash,l.storeNameHash)},null,8,["tip","onClick"])])]),_:1})]),_:1},8,["data"]),p.value?(v(),V(U,{key:0,id:c.value.id,modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=l=>p.value=l)},null,8,["id","modelValue"])):B("",!0)],64)}}}),fe=["title"],_e=N({setup(u){const{t:e}=S(),o=E(),p=C(!1),c=C(),_=d=>$(this,null,function*(){yield j(d.length),o.deleteForms(d.map(r=>r.id))});return(d,r)=>{const n=H("router-link"),s=z,y=A;return v(),x(T,null,[t(a(M),{data:a(o).embedded,"show-check":"",permission:{feature:"form",action:"delete"},onDelete:_},{default:m(()=>[t(s,{label:a(e)("common.name")},{default:m(({row:i})=>[t(n,{to:a(k)({name:"form-edit",query:{id:i.id,type:"embedded"}}),"data-cy":"name"},{default:m(()=>[g("span",{title:i.name,class:"ellipsis text-blue cursor-pointer"},b(i.name),9,fe)]),_:2},1032,["to"])]),_:1},8,["label"]),t(s,{label:a(e)("common.data")},{default:m(({row:i})=>[t(n,{to:a(k)({name:"form-values",query:{id:i.id}})},{default:m(()=>[t(y,{class:"rounded-full",size:"small"},{default:m(()=>[h(b(i.valueCount),1)]),_:2},1024)]),_:2},1032,["to"])]),_:1},8,["label"]),t(s,{label:a(e)("common.usedBy")},{default:m(({row:i})=>[t(P,{id:i.id,relations:i.references,type:"form"},null,8,["id","relations"])]),_:1},8,["label"]),t(s,{label:a(e)("common.lastModified")},{default:m(({row:i})=>[h(b(a(R)(i.lastModified)),1)]),_:1},8,["label"]),t(s,{width:"80px",align:"right"},{default:m(({row:i})=>[t(D,{icon:"icon-a-setup",tip:a(e)("common.setting"),"data-cy":"setting",onClick:f=>{c.value=i,p.value=!0}},null,8,["tip","onClick"])]),_:1})]),_:1},8,["data"]),p.value?(v(),V(U,{key:0,id:c.value.id,modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=i=>p.value=i)},null,8,["id","modelValue"])):B("",!0)],64)}}}),lo=N({setup(u){const e=te(),o=oe(),{t:p}=S(),c=[{displayName:p("common.external"),value:"external",component:ce},{displayName:p("common.embedded"),value:"embedded",component:_e}],_=C(ae("name")||c[0].value);E().loadAll();const r=()=>{var n;e.push({name:(n=o.name)==null?void 0:n.toString(),query:w(I({},o.query),{name:_.value})})};return(n,s)=>{const y=re,i=ne;return v(),x("div",null,[t(le,{name:a(p)("common.form"),class:"p-24"},null,8,["name"]),t(i,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=f=>_.value=f),onTabChange:s[1]||(s[1]=f=>r())},{default:m(()=>[(v(),x(T,null,ie(c,f=>t(y,{key:f.value,label:f.displayName,name:f.value},{default:m(()=>[_.value===f.value?(v(),V(me(f.component),{key:0})):B("",!0)]),_:2},1032,["label","name"])),64))]),_:1},8,["modelValue"])])}}});export{lo as default};
