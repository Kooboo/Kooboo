var w=(x,m,r)=>new Promise((d,t)=>{var c=l=>{try{p(r.next(l))}catch(f){t(f)}},b=l=>{try{p(r.throw(l))}catch(f){t(f)}},p=l=>l.done?d(l.value):Promise.resolve(l.value).then(c,b);p((r=r.apply(x,m)).next())});import{_ as H}from"./k-table.c13bd7f5.js";import{d as D,o as i,a as V,F as T,b6 as h,f as C,b as e,j as E,w as o,k as $,u as s,g,M as K,h as L,b7 as q,e as z,aH as F,t as S}from"./url.8f5ec20c.js";import{B as G}from"./breadcrumb.bcaeaf75.js";import{g as I}from"./i18n.25caaace.js";import{c as Q,e as W,u as X,d as Y}from"./commerce.9fdd3168.js";import{b as Z}from"./confirm.629bcef4.js";import{_ as O}from"./index.50326354.js";import{_ as ee}from"./icon-button.0e134c9b.js";import{_ as oe}from"./editable-tags.b9955dfc.js";import{E as U}from"./index.f571dfc9.js";import{E as te,a as le,c as ne}from"./index.960b9732.js";import{E as P,a as j}from"./index.94998415.js";import{E as M}from"./index.a5d96e5a.js";import{E as ae}from"./windi.a815125a.js";import{E as se}from"./index.e9f8834a.js";import{E as me}from"./index.5388dbc8.js";import{E as ie}from"./index.158cdd11.js";import"./sortable.esm.a99254e8.js";import"./main.1c3b59e3.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./replace-all.b35629e7.js";import"./index.a9a077b4.js";import"./index.f9c89813.js";import"./isEqual.2e410d13.js";import"./_baseIsEqual.0a4e01e5.js";import"./error.7e8331f1.js";import"./index.2e51d36e.js";import"./index.1e7e06b8.js";import"./event.776e7e11.js";import"./index.5b499f72.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.c6488b3c.js";import"./logo-transparent.1566007e.js";import"./index.60799c00.js";import"./index.1d16d007.js";import"./scroll.0cf77af8.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./focus-trap.81e4fb05.js";import"./isNil.98bb3b88.js";import"./validator.9b0d789f.js";import"./index.0c2ced08.js";import"./index.92411976.js";import"./dropdown.fed924b2.js";import"./_baseIndexOf.4d7985be.js";import"./_baseClone.885c975f.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.c93fe8e7.js";import"./refs.d2253dd4.js";const re={class:"space-y-8 w-full"},ce={class:"flex items-center space-x-4"},B=D({props:{model:null,forceSelection:{type:Boolean}},setup(x){const m=x,{t:r}=I(),d=[{name:"Selection",display:r("common.selection")},{name:"Custom",display:r("common.custom")}];function t(b){m.model.splice(b,1)}function c(){m.model.push({name:"",type:m.forceSelection?"Selection":"Custom",options:[]})}return(b,p)=>{const l=U,f=te,v=le,n=ee;return i(),V("div",re,[(i(!0),V(T,null,h(m.model,(_,y)=>(i(),V("div",{key:y},[C("div",ce,[e(l,{modelValue:_.name,"onUpdate:modelValue":a=>_.name=a},null,8,["modelValue","onUpdate:modelValue"]),x.forceSelection?$("",!0):(i(),E(v,{key:0,modelValue:_.type,"onUpdate:modelValue":a=>_.type=a,class:"w-220px"},{default:o(()=>[(i(),V(T,null,h(d,a=>e(f,{key:a.name,label:a.display,value:a.name},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])),C("div",null,[e(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:s(r)("common.delete"),onClick:a=>t(y)},null,8,["tip","onClick"])])]),_.type=="Selection"?(i(),E(oe,{key:0,modelValue:_.options,"onUpdate:modelValue":a=>_.options=a,class:"mt-4 mb-12 mr-44px"},null,8,["modelValue","onUpdate:modelValue"])):$("",!0)]))),128)),e(n,{circle:"",class:"text-blue",icon:"icon-a-addto",tip:s(r)("common.add"),onClick:c},null,8,["tip"])])}}}),ue=D({props:{modelValue:{type:Boolean}},emits:["update:modelValue","reload"],setup(x,{emit:m}){const{t:r}=I(),d=g(!0),t=g({name:"",attributes:[],options:[]});function c(){return w(this,null,function*(){yield Q(t.value),m("reload"),d.value=!1})}return(b,p)=>{const l=U,f=P,v=j,n=O,_=M;return i(),E(_,{"model-value":d.value,width:"600px",title:s(r)("common.create"),"close-on-click-modal":!1,onClosed:p[2]||(p[2]=y=>m("update:modelValue",!1))},{footer:o(()=>[e(n,{onConfirm:c,onCancel:p[1]||(p[1]=y=>d.value=!1)})]),default:o(()=>[e(v,{"label-position":"top"},{default:o(()=>[e(f,{label:s(r)("common.name")},{default:o(()=>[e(l,{modelValue:t.value.name,"onUpdate:modelValue":p[0]||(p[0]=y=>t.value.name=y)},null,8,["modelValue"])]),_:1},8,["label"]),e(f,{label:s(r)("common.attributes")},{default:o(()=>[e(B,{model:t.value.attributes},null,8,["model"])]),_:1},8,["label"]),e(f,{label:s(r)("commerce.variantOptions")},{default:o(()=>[e(B,{model:t.value.options,"force-selection":""},null,8,["model"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model-value","title"])}}}),pe=D({props:{modelValue:{type:Boolean},model:null},emits:["update:modelValue","reload"],setup(x,{emit:m}){const r=x,{t:d}=I(),t=g(!0),c=g(JSON.parse(JSON.stringify(r.model)));function b(){return w(this,null,function*(){yield W(c.value),m("reload"),t.value=!1})}return(p,l)=>{const f=U,v=P,n=j,_=O,y=M;return i(),E(y,{"model-value":t.value,width:"600px",title:s(d)("common.edit"),"close-on-click-modal":!1,onClosed:l[2]||(l[2]=a=>m("update:modelValue",!1))},{footer:o(()=>[e(_,{onConfirm:b,onCancel:l[1]||(l[1]=a=>t.value=!1)})]),default:o(()=>[e(n,{"label-position":"top"},{default:o(()=>[e(v,{label:s(d)("common.name")},{default:o(()=>[e(f,{modelValue:c.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>c.value.name=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(v,{label:s(d)("common.attributes")},{default:o(()=>[e(B,{model:c.value.attributes},null,8,["model"])]),_:1},8,["label"]),e(v,{label:s(d)("commerce.variantOptions")},{default:o(()=>[e(B,{model:c.value.options,"force-selection":""},null,8,["model"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model-value","title"])}}}),de={class:"p-24"},_e={class:"flex items-center py-24"},fe={class:"flex items-center"},ve={class:"flex items-center"},be={class:"text-black dark:text-[#cfd3dc]"},ye={key:0,class:"flex items-center space-x-4 justify-center"},Ve={key:0,class:"flex items-center space-x-4 justify-center"},xo=D({setup(x){const{t:m}=I(),d=K().meta.title,t=X(),c=g(!1),b=g(!1),p=g();function l(v){return w(this,null,function*(){yield Z(v.length),yield Y(v.map(n=>n.id)),t.loadTypes()})}L(()=>w(this,null,function*(){t.loadTypes()}));function f(v){p.value=v,b.value=!0}return(v,n)=>{const _=ae,y=se,a=me,N=ne,R=ie,J=H,A=q("hasPermission");return i(),V("div",de,[e(G,{name:s(d)},null,8,["name"]),C("div",_e,[z((i(),E(y,{round:"",onClick:n[0]||(n[0]=u=>c.value=!0)},{default:o(()=>[C("div",fe,[e(_,{class:"mr-16 iconfont icon-a-addto"}),F(" "+S(s(m)("common.create")),1)])]),_:1})),[[A,{feature:"productTypes",action:"edit"}]])]),e(J,{data:s(t).types,"show-check":"",onDelete:l},{default:o(()=>[e(a,{label:s(m)("common.name")},{default:o(({row:u})=>[C("div",ve,[C("span",be,S(u.name),1)])]),_:1},8,["label"]),e(a,{label:s(m)("common.attributes"),align:"center"},{default:o(({row:u})=>[u.attributes.length?(i(),V("div",ye,[(i(!0),V(T,null,h(u.attributes,k=>(i(),E(N,{key:k.name,round:"",type:"warning"},{default:o(()=>[F(S(k.name),1)]),_:2},1024))),128))])):$("",!0)]),_:1},8,["label"]),e(a,{label:s(m)("commerce.variantOptions"),align:"center"},{default:o(({row:u})=>[u.options.length?(i(),V("div",Ve,[(i(!0),V(T,null,h(u.options,k=>(i(),E(N,{key:k.name,round:"",type:"success"},{default:o(()=>[F(S(k.name),1)]),_:2},1024))),128))])):$("",!0)]),_:1},8,["label"]),e(a,{align:"right",width:"60"},{default:o(({row:u})=>[e(R,{placement:"top",content:s(m)("common.edit")},{default:o(()=>[e(_,{class:"iconfont icon-a-writein hover:text-blue text-l",onClick:k=>f(u)},null,8,["onClick"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"]),c.value?(i(),E(ue,{key:0,modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=u=>c.value=u),onReload:n[2]||(n[2]=u=>s(t).loadTypes())},null,8,["modelValue"])):$("",!0),b.value?(i(),E(pe,{key:1,modelValue:b.value,"onUpdate:modelValue":n[3]||(n[3]=u=>b.value=u),model:p.value,onReload:n[4]||(n[4]=u=>s(t).loadTypes())},null,8,["modelValue","model"])):$("",!0)])}}});export{xo as default};
