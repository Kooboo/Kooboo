var x=(e,d,l)=>new Promise((t,a)=>{var n=s=>{try{u(l.next(s))}catch(i){a(i)}},o=s=>{try{u(l.throw(s))}catch(i){a(i)}},u=s=>s.done?t(s.value):Promise.resolve(s.value).then(n,o);u((l=l.apply(e,d)).next())});import{_ as T}from"./index.026f772c.js";import{_ as R}from"./index.ed88cf90.js";import{_ as j}from"./dev-mode.e5eea554.js";import{_ as C}from"./icon-button.e30c79ea.js";import{g as V,o as L}from"./i18n.2d8b30eb.js";import{d as w,o as m,a as c,F as B,b6 as I,j as $,b as r,u as f,k as v,w as k,g as b,cd as M,x as Q,f as q}from"./url.8f5ec20c.js";import{u as z}from"./replace-all.dd6016f2.js";import{a as A,u as G}from"./user-options.9ded5f51.js";import{E as H}from"./index.bb5499e2.js";import{E as P}from"./index.745dc8e0.js";import{E as W}from"./index.21d7e739.js";import{E as X}from"./windi.bf752d69.js";import{E as Y,a as Z}from"./index.a141884f.js";import{E as ee}from"./index.a4ff385c.js";import"./index.96970839.js";import"./index.a595fe6d.js";import"./main.d8c6ef59.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./guid.c1a40312.js";import"./index.8143a7f0.js";import"./classCompletion.a22e38a6.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./vuedraggable.umd.8a5464a3.js";import"./index.ec785feb.js";import"./focus-trap.3f074800.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./cloneDeep.b77ba92c.js";import"./_baseClone.29a8cd97.js";import"./_baseIsEqual.2f38f7c3.js";import"./index.593106e3.js";import"./error.7e8331f1.js";import"./config.589cc0cd.js";import"./dark.7c26a0d3.js";import"./page.c26fc024.js";import"./validate.348f94d6.js";import"./index.37979027.js";import"./index.3dc39d21.js";import"./index.832f2769.js";import"./index.b3e4ff8e.js";import"./index.5af167df.js";import"./style.ad574a57.js";import"./toNumber.6efebd6a.js";import"./index.80a4dc1a.js";import"./index.bf8ed8c6.js";import"./scroll.54c27fbd.js";import"./aria.75ec5909.js";import"./validator.1bcd6e6a.js";import"./index.0535d5fe.js";import"./index.35ae15db.js";import"./dropdown.d7a15792.js";import"./refs.d2253dd4.js";import"./use-copy-text.67d6617b.js";import"./index.68d24a68.js";import"./toggleComment.5b29ca87.js";import"./use-save-tip.ee41ca28.js";import"./confirm.617d359f.js";import"./logo-transparent.1566007e.js";import"./index.0a83bb10.js";import"./event.776e7e11.js";import"./index.ab4ed870.js";import"./isEqual.c3e9e9f4.js";import"./debounce.730e1961.js";import"./index.b68af8a1.js";import"./index.b3d1cf25.js";import"./index.4c9af567.js";import"./index.3be79fd5.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.5f2a659f.js";import"./index.06224119.js";import"./index.14aabd47.js";import"./alert.8fe5500a.js";import"./index.b4ac73b5.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.a31db113.js";/* empty css                                                          */import"./file.52d8e05a.js";import"./use-date.28e9a8a3.js";import"./dayjs.min.35b12e7a.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.1cd07d1f.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.7c6ede25.js";import"./image-editor.404a4df5.js";import"./main.esm.f3ac04a5.js";import"./index.a330b59f.js";import"./index.e87fdc52.js";import"./index.e3f90979.js";function O(e){switch(e){case"string":return"";case"array":return[];case"boolean":return!1;case"number":return 0;case"object":return{}}}const te={class:"space-y-8"},oe=w({props:{schema:null,value:null},setup(e){const d=e,{t:l}=V();function t(n,o){n.push(O(o))}function a(n,o){d.value.splice(n,1,o)}return(n,o)=>{const u=C;return m(),c("div",te,[(m(!0),c(B,null,I(e.value,(s,i)=>(m(),$(S,{key:i,value:s,schema:{type:e.schema.arrayType,children:e.schema.children,display:e.schema.display,name:e.schema.name},deletable:!0,"onUpdate:modelValue":h=>a(i,h),onDelete:h=>e.value.splice(i,1)},null,8,["value","schema","onUpdate:modelValue","onDelete"]))),128)),r(u,{circle:"",class:"text-blue",icon:"icon-a-addto ",tip:f(l)("common.add"),onClick:o[0]||(o[0]=s=>t(e.value,e.schema.arrayType))},null,8,["tip"])])}}}),ae={key:0,class:"flex gap-4 w-full"},le={key:0},ne={key:1,class:"flex gap-4 w-full"},ie={key:0},me={key:2,class:"flex gap-4 w-full"},re={key:0},se={key:3,class:"px-24 py-12 border-l-2 border-blue/70 relative transition-all duration-300 hover:shadow-m-10 rounded-tr-normal rounded-br-normal"},ue={key:4,class:"flex items-center gap-4 w-full"},S=w({props:{schema:null,value:null,deletable:{type:Boolean}},emits:["update:model-value","delete"],setup(e){const{t:d}=V();return(l,t)=>{const a=H,n=C,o=P,u=W,s=X;return e.schema.type=="string"?(m(),c("div",ae,[r(a,{"model-value":e.value,"onUpdate:modelValue":t[0]||(t[0]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",le,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[1]||(t[1]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="boolean"?(m(),c("div",ne,[r(o,{"model-value":e.value,"onUpdate:modelValue":t[2]||(t[2]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",ie,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[3]||(t[3]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="number"?(m(),c("div",me,[r(u,{"model-value":e.value,"onUpdate:modelValue":t[4]||(t[4]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",re,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[5]||(t[5]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="object"?(m(),c("div",se,[r(U,{schemas:e.schema.children,data:e.value,deletable:e.deletable},null,8,["schemas","data","deletable"]),e.deletable?(m(),$(s,{key:0,class:"iconfont icon-delete cursor-pointer text-orange absolute top-16 right-16",onClick:t[6]||(t[6]=i=>l.$emit("delete"))})):v("",!0)])):e.schema.type=="array"?(m(),c("div",ue,[r(oe,{schema:e.schema,value:e.value},null,8,["schema","value"])])):v("",!0)}}}),U=w({props:{schemas:null,data:null,deletable:{type:Boolean}},emits:["update:model-value","delete"],setup(e){function d(t,a,n){return t[a]||(t[a]=O(n)),t[a]}function l(t,a,n){t[a]=n}return(t,a)=>{const n=Y;return m(!0),c(B,null,I(e.schemas,o=>(m(),$(n,{key:o.name,label:o.display||o.name,class:"w-504px"},{default:k(()=>[(m(),$(S,{key:o.name,schema:o,value:d(e.data,o.name,o.type),"onUpdate:modelValue":u=>l(e.data,o.name,u)},null,8,["schema","value","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128)}}}),ce={class:"p-24 mb-64"},de={class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 py-24 px-56px relative"},pe=["onKeydown"],Yt=w({setup(e){const{t:d}=V(),l=b([]),t=M(),a=b({}),n=Q("id"),o=b(!1),u=b("{}");A(n).then(y=>{l.value=JSON.parse(y.schema),a.value=y.data?JSON.parse(y.data):{}});function s(){t.goBackOrTo(z({name:"useroptions"}))}function i(){return x(this,null,function*(){yield G({id:n,setting:JSON.stringify(a.value)}),s()})}function h(){u.value=JSON.stringify(a.value,null,4),o.value=!0}function E(){a.value=JSON.parse(u.value),o.value=!1}return(y,p)=>{const _=C,N=Z,D=j,F=R,J=ee,K=T;return m(),c("div",ce,[r(N,{"label-position":"top"},{default:k(()=>[q("div",de,[r(_,{icon:"icon-code",tip:f(d)("common.editCode"),class:"absolute top-24 right-24",onClick:h},null,8,["tip"]),r(U,{schemas:l.value,data:a.value},null,8,["schemas","data"])])]),_:1}),r(J,{modelValue:o.value,"onUpdate:modelValue":p[2]||(p[2]=g=>o.value=g),width:"800px","close-on-click-modal":!1,title:f(d)("common.editCode")},{footer:k(()=>[r(F,{onConfirm:E,onCancel:p[1]||(p[1]=g=>o.value=!1)})]),default:k(()=>[o.value?(m(),c("div",{key:0,onKeydown:L(E,["enter"])},[r(D,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=g=>u.value=g),language:"json"},null,8,["modelValue"])],40,pe)):v("",!0)]),_:1},8,["modelValue","title"]),r(K,{permission:{feature:"userOptions",action:"edit"},onCancel:s,onSave:i})])}}});export{Yt as default};
