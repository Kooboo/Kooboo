var I=(x,t,f)=>new Promise((b,c)=>{var k=e=>{try{h(f.next(e))}catch(a){c(a)}},w=e=>{try{h(f.throw(e))}catch(a){c(a)}},h=e=>e.done?b(e.value):Promise.resolve(e.value).then(k,w);h((f=f.apply(x,t)).next())});import{g as ie,o as re}from"./i18n.a87944a4.js";import{u as me}from"./use-date.f1258183.js";import{x as ue,H as de}from"./main.9fdfea92.js";import{d as ce,cd as pe,N as ve,g as v,x as fe,c as _e,i as S,o as r,a as m,f as s,b as d,u as n,t as i,w as y,F as C,b7 as F,j as U,aI as ee,n as ye,k as V,m as xe,b4 as he,b2 as ge}from"./url.4cb47a7a.js";import{a as be}from"./index.d2657986.js";import{a as q,r as te,b as ke,d as we,s as De,i as Ne}from"./validate.bb56f9e3.js";import{d as Ee,u as Ce}from"./index.04cfd6b3.js";import{_ as Ie}from"./plugin-vue_export-helper.21dcd24c.js";import{E as Se}from"./windi.6360286d.js";import{E as Fe}from"./index.178b9e08.js";import{E as Ue,a as Ve}from"./index.9fd79879.js";import{E as qe,a as Re,c as Be}from"./index.7c862087.js";import{E as Te}from"./index.361e2245.js";import"./dayjs.min.ccc40d4f.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./replace-all.56d2c1f7.js";import"./index.d24a40b9.js";import"./index.f23f1e38.js";import"./index.a24f458a.js";import"./index.1fd72ea8.js";import"./index.abe211fa.js";import"./style.c350d462.js";import"./toNumber.47eea968.js";import"./_baseIsEqual.dc9e64c4.js";import"./event.776e7e11.js";import"./index.7b8c5aef.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./_baseClone.b8903935.js";import"./isEqual.4cab74e3.js";import"./index.d96452a6.js";import"./focus-trap.50a00b7f.js";import"./event.53b2ad83.js";import"./index.fd96ea36.js";import"./index.4d568055.js";import"./scroll.16983984.js";import"./debounce.4e0c106e.js";import"./index.66319a92.js";import"./validator.b5df2420.js";const ze=x=>(he("data-v-75eb3046"),x=x(),ge(),x),je={class:"max-w-1120px mx-auto mt-16 mb-24 bg-fff rounded-normal pt-21px px-24 pb-12 relative dark:bg-[#333333]"},Ae={class:"flex"},Me={class:"flex items-center justify-center text-2l text-blue mr-12"},$e={class:"flex justify-between h-38px flex-1"},Ke=["title"],Le={class:"flex items-center space-x-8"},Pe={class:"flex items-center space-x-12"},He=ze(()=>s("div",{class:"w-full bg-[#E9EAF0] h-1px my-16 dark:bg-666"},null,-1)),Oe={key:0,class:"w-full h-[60px] bg-[#F3F5F5] dark:bg-[#545454] flex items-center justify-center gap-6 mb-[16px]"},Qe=["src"],Ge=["src"],Je={class:"space-y-12 my-24 px-24 py-16 rounded-normal text-m bg-[#f3f5f5] dark:bg-[#545454] bg-opacity-50"},We={class:"flex space-x-32"},Xe={class:"text-999 mr-8 dark:text-gray"},Ye={class:"dark:text-fff","data-cy":"author"},Ze={class:"text-999 mr-8 dark:text-gray"},et={class:"dark:text-fff","data-cy":"category"},tt={class:"text-999 mr-8 dark:text-gray"},ot={class:"dark:text-fff","data-cy":"size"},at={class:"text-999 mr-8 dark:text-gray"},st={class:"dark:text-fff","data-cy":"downloads"},lt={class:"text-999 mr-8 dark:text-gray"},nt={key:0,class:"dark:text-fff","data-cy":"last-modified"},it={class:"flex"},rt={class:"text-999 mr-8 leading-5 dark:text-gray"},mt={key:0},ut={key:1,class:"space-x-4 -ml-4"},dt=ce({setup(x){const{t}=ie(),f=pe(),b=ve(),c=v(),k=v(),w=v(!1),h=v(!1),e=v({rootDomain:"",subDomain:"",siteName:"",id:""}),a=v(),D=fe("currentFolder"),R=v([{name:"pc",title:t("common.fullScreen"),icon:"icon-iMac",width:"100%",height:""},{name:"pad",title:t("common.pad"),icon:"icon-iPad",width:"820px",height:"1180px"},{name:"phone",title:t("inlineDesign.phone"),icon:"icon-iPhone",width:"390px",height:"844px"}]),N=v(R.value[0]),oe={subDomain:[q(t("common.subDomainRequiredTips")),te(1,63),ke,we(e.value)],rootDomain:q(t("common.rootDomainRequiredTips")),siteName:[te(1,50),q(t("common.nameRequiredTips")),De(),Ne(ue,t("common.siteNameExistsTips"))]};(()=>I(this,null,function*(){!b.query.templateId||(a.value=yield Ee(b.query.templateId),e.value.id=a.value.id,be().then(u=>{c.value=u,c.value.length&&(e.value.rootDomain=c.value[0].domainName)}))}))();const B=()=>I(this,null,function*(){yield k.value.validate();const u=yield Ce(e.value);D&&(yield de({siteIds:[u],folderName:D})),f.push({name:"home",query:{currentFolder:D}})}),T=_e(()=>{var u,l,p,_,g,E;return[{property:(u=a.value)==null?void 0:u.layoutCount,display:t("common.layout")},{property:(l=a.value)==null?void 0:l.menuCount,display:t("common.menu")},{property:(p=a.value)==null?void 0:p.pageCount,display:t("common.page")},{property:(_=a.value)==null?void 0:_.viewCount,display:t("common.view")},{property:(g=a.value)==null?void 0:g.imageCount,display:t("common.image")},{property:(E=a.value)==null?void 0:E.contentCount,display:t("common.content")}]});return S(()=>e.value.subDomain,()=>{w.value||(e.value.siteName=e.value.subDomain)}),S(()=>e.value.siteName,()=>{h.value||(e.value.subDomain=e.value.siteName)}),S(()=>e.value.rootDomain,()=>{var u,l,p;e.value.sudDomainUseDash=(p=(l=(u=c.value)==null?void 0:u.find(_=>_.domainName==e.value.rootDomain))==null?void 0:l.sudDomainUseDash)!=null?p:!1}),(u,l)=>{var z,j,A,M,$,K,L,P,H,O,Q,G,J,W,X,Y;const p=Se,_=Fe,g=Ue,E=qe,ae=Re,se=Te,le=Ve,ne=Be;return r(),m("div",je,[s("div",Ae,[s("div",Me,[d(p,{class:"iconfont icon-fanhui1 cursor-pointer",title:n(t)("common.back"),"data-cy":"back",onClick:l[0]||(l[0]=o=>n(f).replace({name:"templates",query:{currentFolder:n(D)}}))},null,8,["title"])]),s("div",$e,[s("div",{class:"text-3l h-38px leading-38px dark:text-fff ellipsis max-w-260px",title:(z=a.value)==null?void 0:z.name,"data-cy":"template-name"},i((j=a.value)==null?void 0:j.name),9,Ke),d(le,{ref_key:"form",ref:k,model:e.value,rules:n(oe),onKeydown:re(B,["enter"])},{default:y(()=>[s("div",Le,[d(g,{label:n(t)("common.siteName"),prop:"siteName"},{default:y(()=>[d(_,{modelValue:e.value.siteName,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.siteName=o),class:"w-185px","data-cy":"siteName",onInput:l[2]||(l[2]=o=>w.value=!0)},null,8,["modelValue"])]),_:1},8,["label"]),d(g,{prop:"subDomain",label:n(t)("common.domain")},{default:y(()=>[d(_,{modelValue:e.value.subDomain,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.subDomain=o),class:"w-185px","data-cy":"subdomain",onInput:l[4]||(l[4]=o=>h.value=!0)},null,8,["modelValue"])]),_:1},8,["label"]),d(g,{prop:"rootDomain"},{default:y(()=>[s("div",Pe,[d(ae,{modelValue:e.value.rootDomain,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.rootDomain=o),"data-cy":"root-domain",class:"w-185px"},{default:y(()=>[(r(!0),m(C,null,F(c.value,o=>(r(),U(E,{key:o.domainName,value:o.domainName,label:(o.sudDomainUseDash?"-":".")+o.domainName,"data-cy":"root-domain-opt"},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),s("div",null,[d(se,{type:"primary",round:"","data-cy":"start-create",onClick:B},{default:y(()=>[ee(i(n(t)("common.startCreate")),1)]),_:1})])])]),_:1})])]),_:1},8,["model","rules","onKeydown"])])]),He,((A=a.value)==null?void 0:A.screenShotUrl)&&(($=(M=a.value)==null?void 0:M.type)==null?void 0:$.value)!==1?V("",!0):(r(),m("div",Oe,[(r(!0),m(C,null,F(R.value,o=>(r(),U(p,{key:o.name,class:ye(["iconfont text-[32px] text-[#8BA5B0] hover:text-[#4EABF5] cursor-pointer",{[o.icon]:!0,"text-[#2296F3]":N.value.name===o.name}]),title:o.title,onClick:Z=>N.value=o},null,8,["class","title","onClick"]))),128))])),((K=a.value)==null?void 0:K.screenShotUrl)&&((P=(L=a.value)==null?void 0:L.type)==null?void 0:P.value)!==1?(r(),m("img",{key:1,class:"w-full",src:(H=a.value)==null?void 0:H.screenShotUrl},null,8,Qe)):(r(),m("iframe",{key:2,ref:"iframe",src:(O=a.value)==null?void 0:O.previewUrl,class:"origin-top-left h-500px w-full mx-auto border-gray border-1 border-solid shadow-blue-md iframe dark:border-666",style:xe([{transform:"scale(1)"},{width:N.value.width,height:N.value.height}])},null,12,Ge)),s("div",Je,[s("div",We,[s("div",null,[s("span",Xe,i(n(t)("common.author"))+":",1),s("span",Ye,i((Q=a.value)==null?void 0:Q.userName),1)]),s("div",null,[s("span",Ze,i(n(t)("common.category"))+":",1),s("span",et,i((J=(G=a.value)==null?void 0:G.type.name)!=null?J:n(t)("common.noCategory")),1)]),s("div",null,[s("span",tt,i(n(t)("common.size"))+":",1),s("span",ot,i((W=a.value)==null?void 0:W.sizeString),1)]),s("div",null,[s("span",at,i(n(t)("common.downloads"))+":",1),s("span",st,i((X=a.value)==null?void 0:X.downloadCount),1)]),s("div",null,[s("span",lt,i(n(t)("common.lastModified"))+":",1),(Y=a.value)!=null&&Y.lastModified?(r(),m("span",nt,i(n(me)(a.value.lastModified)),1)):V("",!0)])]),s("div",it,[s("span",rt,i(n(t)("pickTemplate.contents"))+":",1),n(T).map(o=>o.property).every(o=>o===0)?(r(),m("div",mt,i(n(t)("common.noContent")),1)):(r(),m("div",ut,[(r(!0),m(C,null,F(n(T),(o,Z)=>(r(),m(C,null,[o.property?(r(),U(ne,{key:Z,size:"small",class:"rounded-full cursor-pointer ml-4","data-cy":"content"},{default:y(()=>[ee(i(o.property)+" "+i(o.display),1)]),_:2},1024)):V("",!0)],64))),256))]))])])])}}});var eo=Ie(dt,[["__scopeId","data-v-75eb3046"]]);export{eo as default};
