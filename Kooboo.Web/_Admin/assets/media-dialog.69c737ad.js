import{_ as L}from"./index.f0d5f031.js";import{B as P}from"./breadcrumb.f4d80c95.js";import{M as T}from"./media.e27599b4.js";import{F as E}from"./file.7f0748f1.js";import{g as M}from"./i18n.a87944a4.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.ec5f0705.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import{E as S}from"./index.361e2245.js";import{E as j}from"./index.c003dfa1.js";import{d as q,g as m,c as h,b3 as z,b8 as H,o as c,j as f,w as u,f as t,t as x,u as e,b as w,n as U,e as A,aI as G,L as J}from"./url.4cb47a7a.js";const K={class:"flex items-center mr-8 h-28px font-bold dark:text-[#fffa]"},O={class:"flex-1 mt-4 overflow-hidden"},Q={class:"flex justify-between items-center"},R=q({props:{modelValue:{type:Boolean},multiple:{type:Boolean},folderType:null,permission:null,infinite:{type:Boolean}},emits:["update:modelValue","choose"],setup(C,{emit:B}){const _=C,{t:i}=M(),s=m(!0),n=h(()=>_.folderType==="File"),d=m(),b=h(()=>({multiple:!!_.multiple})),y=m(""),p=m([]);z("dialogInfo",b);const g=h(()=>d.value?d.value.selectedFiles:[]);function V(){B("choose",g.value),s.value=!1}function F(){const o=document.querySelector(".media-dialog .el-upload button");o==null||o.click()}function k(o){var l;y.value=o.keyword,p.value=(l=o.providers)!=null?l:[],o.infinite||J(()=>{const r=document.querySelector(".k-media-dialog .el-dialog__body");r&&(r.scrollTop=0)})}return(o,l)=>{const r=S,D=L,$=j,I=H("hasPermission");return c(),f($,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),"append-to-body":"",width:"850px","close-on-click-modal":!1,"custom-class":"el-dialog--fixed-footer k-media-dialog",title:e(n)?e(i)("common.file"):e(i)("common.mediaLibrary"),onClosed:l[2]||(l[2]=a=>o.$emit("update:modelValue",!1))},{header:u(()=>{var a,v;return[t("div",{class:U(["flex items-center overflow-hidden",{"w-500px":p.value.length<=1,"w-330px":p.value.length>1}])},[t("div",K,x(e(n)?e(i)("common.file"):e(i)("common.mediaLibrary")),1),t("div",O,[w(P,{size:"small","hide-header":!!e(b),"crumb-path":((a=o.$refs.media)==null?void 0:a.getCrumbPath)||[],onHandleClickPath:(v=o.$refs.media)==null?void 0:v.handleClickBreadcrumb},null,8,["hide-header","crumb-path","onHandleClickPath"])])],2)]}),footer:u(()=>{var a;return[t("div",Q,[A((c(),f(r,{type:"primary",disabled:!!y.value,onClick:F},{default:u(()=>[G(x(e(i)("common.uploadFiles")),1)]),_:1},8,["disabled"])),[[I,{feature:e(n)?"file":"mediaLibrary",action:"edit"}]]),t("div",null,[w(D,{disabled:((a=e(g))==null?void 0:a.length)===0,"confirm-label":e(i)("common.choose"),onConfirm:V,onCancel:l[0]||(l[0]=v=>s.value=!1)},null,8,["disabled","confirm-label"])])])]}),default:u(()=>[e(n)?(c(),f(E,{key:0,ref_key:"media",ref:d,class:"media-dialog",onLoaded:k},null,512)):(c(),f(T,{key:1,ref_key:"media",ref:d,class:"media-dialog","grid-col":4,onLoaded:k},null,512))]),_:1},8,["modelValue","title"])}}});var se=N(R,[["__scopeId","data-v-7e2ae6b2"]]);export{se as M};
