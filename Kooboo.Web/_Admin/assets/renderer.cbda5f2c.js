var Oe=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var ue=(e,o,t)=>o in e?Oe(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,K=(e,o)=>{for(var t in o||(o={}))Ne.call(o,t)&&ue(e,t,o[t]);if(ie)for(var t of ie(o))Ue.call(o,t)&&ue(e,t,o[t]);return e};var P=(e,o,t)=>new Promise((l,r)=>{var a=p=>{try{m(t.next(p))}catch(i){r(i)}},n=p=>{try{m(t.throw(p))}catch(i){r(i)}},m=p=>p.done?l(p.value):Promise.resolve(p.value).then(a,n);m((t=t.apply(e,o)).next())});import{g as J,w as R,k as me}from"./i18n.48bd28ac.js";import{_ as $e}from"./index.a731e53b.js";import{n as fe}from"./guid.c1a40312.js";import{V as pe}from"./vuedraggable.umd.5840ebc7.js";import{s as je,r as qe,_ as Pe}from"./index.0810e95d.js";import{m as ve,n as De,o as Me,q as Be,t as Ie,v as ze,w as Le,b as Fe,j as Re,x as Ae,i as ye,y as be,z as Je}from"./index.4fa52eca.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import{c as le}from"./cloneDeep.ff43c1f8.js";import{E as ge}from"./windi.a5b0b048.js";import{E as _e}from"./index.2bc50276.js";import{E as B,a as Ve}from"./index.6855d037.js";import{E as We}from"./index.c4e9b529.js";import{bq as He,c5 as Ge,d as q,g as C,c as D,i as oe,o as y,j as w,w as d,b as s,f as _,a as T,t as x,k as j,u,aT as A,n as W,B as re,h as ke,F as O,b6 as M,K as we,aW as Ke,aH as U,m as Qe,l as Xe}from"./url.2e6a77c4.js";import{e as Ye,a as Y,p as Ze}from"./validate.efc4a5c0.js";import{E as te,a as ne,c as el}from"./index.0d2684bf.js";import{E as Ce}from"./index.fc90f5ad.js";import{E as he}from"./index.d4bbb472.js";import{E as xe}from"./index.cbddf8eb.js";import{M as ll}from"./media-dialog.00ce8f4f.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.f6d26366.js";import{b as ol,r as tl,a as nl,o as al,q as sl}from"./style.19d0c187.js";import{E as il,a as ul}from"./index.695d0284.js";import{E as rl}from"./index.968f79fd.js";import{_ as dl}from"./color-picker.770bc088.js";import{E as cl,a as ml}from"./index.6a6b77f3.js";import{u as Te,_ as fl,g as pl}from"./index.453b96b0.js";import{g as vl}from"./string.955a924b.js";import{g as yl,a as bl}from"./index.15ec68ba.js";function Se(e,o){var t=He(e)?Ge:tl;return t(e,ol(o))}function gl(e,o){return nl(Se(e,o),1)}const _l={class:"mb-8 text-666 dark:text-fff/67 flex items-center pl-16 pr-8 w-full border-line dark:border-666 rounded-normal border border-solid ellipsis bg-fff dark:bg-[#333]","data-cy":"added-item"},Vl={key:0,class:"pr-8"},kl={class:"ve-list-item-preview overflow-hidden leading-40px flex-1 mr-8 ellipsis","data-cy":"text"},wl={class:"p-4 cursor-pointer"},Cl={class:"p-4 cursor-pointer"},hl={class:"p-4"},xl=q({props:{model:null,field:null,cssClass:null},setup(e){const o=e,{t}=J(),l=C([]),r=C(!1),a=C(-1),n=C(),m="undo redo | fontselect fontsizeselect bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist | image link",p=D(()=>{if(!ve())return{toolbar:m};const V=De();return K({toolbar:m+" "+V["additional-toolbar-buttons"],forced_root_block:"",force_br_newlines:!0,force_p_newlines:!1},V)});function i(){const V=o.model[o.field.name]||"[]";typeof V=="string"&&(l.value=JSON.parse(V))}i(),oe(()=>l.value,V=>{o.model[o.field.name]=JSON.stringify(V)},{deep:!0});function c(){n.value={key:fe(),value:""},a.value=-1,r.value=!0}function v(V){l.value.splice(V,1)}function g(V,f){n.value=le(V),r.value=!0,a.value=f}function S(){!n.value||(a.value>-1?l.value.splice(a.value,1,n.value):l.value.push(n.value),r.value=!1,n.value=void 0)}function h(){r.value=!1}function E(V){const f=document.createElement("div");return f.innerHTML=V,f.innerText}return(V,f)=>{var G;const k=ge,I=_e,H=B,z=Ve,L=$e,Q=We;return y(),w(H,{label:(G=e.field.displayName)!=null?G:e.field.name,prop:e.field.prop,required:e.field.required,class:W(e.cssClass)},{default:d(()=>[s(u(pe),{class:"w-full","item-key":"value",list:l.value,disabled:l.value.length<2,group:{name:"ve-items-control",pull:"clone",put:!1},handle:".icon-move"},{item:d(({element:$,index:F})=>[_("div",_l,[l.value.length>1?(y(),T("div",Vl,"# "+x(F+1),1)):j("",!0),_("div",kl,[_("div",null,x(E($.value)),1)]),_("div",wl,[s(k,{class:"iconfont icon-a-writein","data-cy":"edit",onClick:X=>g($,F)},null,8,["onClick"])]),_("div",Cl,[s(k,{class:"text-orange iconfont icon-delete","data-cy":"remove",onClick:X=>v(F)},null,8,["onClick"])]),_("div",hl,[s(k,{class:"iconfont icon-move cursor-move","data-cy":"move"})])])]),footer:d(()=>[s(I,{circle:"","data-cy":"add",onClick:c},{default:d(()=>[s(k,{class:"text-blue iconfont icon-a-addto"})]),_:1})]),_:1},8,["list","disabled"]),n.value?(y(),w(Q,{key:0,modelValue:r.value,"onUpdate:modelValue":f[2]||(f[2]=$=>r.value=$),"close-on-click-modal":!1,title:a.value>-1?u(t)("common.edit"):u(t)("common.create"),"destroy-on-close":"","append-to-body":"",onOpened:u(je),onClosed:u(qe),onClose:h},{footer:d(()=>[s(L,{onConfirm:S,onCancel:h})]),default:d(()=>[s(z,{ref:"form",class:"el-form--label-normal",model:n.value,"label-position":"top",onSubmit:f[1]||(f[1]=R(()=>{},["prevent"]))},{default:d(()=>[s(H,{prop:"content",label:u(t)("common.content")},{default:d(()=>[s(Pe,A({modelValue:n.value.value,"onUpdate:modelValue":f[0]||(f[0]=$=>n.value.value=$),min_height:"200px"},u(p)),null,16,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title","onOpened","onClosed"])):j("",!0)]),_:1},8,["label","prop","required","class"])}}});var Tl=ee(xl,[["__scopeId","data-v-41b1768c"]]),Sl=Object.freeze(Object.defineProperty({__proto__:null,default:Tl},Symbol.toStringTag,{value:"Module"}));const El=q({props:{model:null,field:null,cssClass:null},setup(e){const o=e,t=re("is-classic"),{t:l}=J(),r=[Ye,Y(l("common.inputEmailTips"))],a=[Ze,Y(l("common.inputPhoneTips"))],n=[Y(l("common.pageUrlRequiredTips"))],m=re("ve-get-pages"),p=C([]);ke(()=>{typeof m=="function"&&(p.value=m())});const i=D(()=>o.model[c.value]),c=D(()=>me(o.field,'settings["data-type"]',"actionType"));return(v,g)=>{const S=te,h=ne,E=B,V=Ce;return y(),T(O,null,[e.model[u(c)]==="openPage"?(y(),w(E,{key:0,label:u(l)("common.page"),prop:"pageLink",rules:u(n)},{default:d(()=>[s(h,{modelValue:e.model.pageLink,"onUpdate:modelValue":g[0]||(g[0]=f=>e.model.pageLink=f)},{default:d(()=>[(y(!0),T(O,null,M(p.value,f=>(y(),w(S,{key:f.value,label:f.key,value:f.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):e.model[u(c)]==="sendEmail"?(y(),T(O,{key:1},[s(E,{label:u(l)("mail.to"),prop:"emailTo",rules:u(r)},{default:d(()=>[s(V,{modelValue:e.model.emailTo,"onUpdate:modelValue":g[1]||(g[1]=f=>e.model.emailTo=f)},null,8,["modelValue"])]),_:1},8,["label","rules"]),s(E,{label:u(l)("common.subject"),prop:"emailSubject"},{default:d(()=>[s(V,{modelValue:e.model.emailSubject,"onUpdate:modelValue":g[2]||(g[2]=f=>e.model.emailSubject=f)},null,8,["modelValue"])]),_:1},8,["label"]),s(E,{prop:"emailBody"},{default:d(()=>[s(V,{modelValue:e.model.emailBody,"onUpdate:modelValue":g[3]||(g[3]=f=>e.model.emailBody=f),placeholder:u(l)("common.emailBody"),type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})],64)):e.model[u(c)]==="callPhone"?(y(),w(E,{key:2,prop:"phoneNumber",label:u(l)("common.phoneNumber"),rules:u(a)},{default:d(()=>[s(V,{modelValue:e.model.phoneNumber,"onUpdate:modelValue":g[4]||(g[4]=f=>e.model.phoneNumber=f)},null,8,["modelValue"])]),_:1},8,["label","rules"])):e.model[u(c)]!=="unsubscribe"?(y(),w(E,{key:3,label:e.field.displayName,prop:e.field.name},{default:d(()=>[s(V,{modelValue:e.model[e.field.name],"onUpdate:modelValue":g[5]||(g[5]=f=>e.model[e.field.name]=f)},null,8,["modelValue"])]),_:1},8,["label","prop"])):j("",!0),!["sendEmail","callPhone"].includes(u(i))&&!u(t)?(y(),w(E,{key:4,label:u(l)("ve.linkTarget"),prop:"linkTarget"},{default:d(()=>[s(h,{modelValue:e.model.linkTarget,"onUpdate:modelValue":g[6]||(g[6]=f=>e.model.linkTarget=f)},{default:d(()=>[s(S,{label:u(l)("ve.currentTab"),value:"_self"},null,8,["label"]),s(S,{label:u(l)("ve.newTab"),value:"_blank"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])):j("",!0)],64)}}});var Ol=Object.freeze(Object.defineProperty({__proto__:null,default:El},Symbol.toStringTag,{value:"Module"}));const Nl=q({props:{model:null,field:null,cssClass:null},setup(e){const o=e,t=D({get(){var m,p,i;const a=(p=(m=o.field.selectionOptions[0])==null?void 0:m.value)!=null?p:"";let n=(i=o.model[o.field.name])!=null?i:{value:0,unit:a};return typeof n=="number"&&(n={value:n,unit:a}),n},set(a){const n=le(a);l.value&&(n.value=null),o.model[o.field.name]=a}}),l=D(()=>me(o.field,'settings["noValueUnits"]',[]).includes(t.value.unit));function r(){we(()=>{l.value&&(t.value.value=null)})}return(a,n)=>{var v;const m=he,p=te,i=ne,c=B;return y(),w(c,{label:(v=e.field.displayName)!=null?v:e.field.name,prop:e.field.prop,required:e.field.required,class:W(["flex",e.cssClass])},{default:d(()=>{var g,S;return[u(l)?j("",!0):(y(),w(m,A({key:0,modelValue:u(t).value,"onUpdate:modelValue":n[0]||(n[0]=h=>u(t).value=h),style:{flex:"2"}},(g=e.field.settings)==null?void 0:g.value),null,16,["modelValue"])),s(i,A({modelValue:u(t).unit,"onUpdate:modelValue":n[1]||(n[1]=h=>u(t).unit=h),class:{"ml-8":!u(l)},style:{flex:"1"}},(S=e.field.settings)==null?void 0:S.unit,{onChange:r}),{default:d(()=>[(y(!0),T(O,null,M(e.field.selectionOptions,h=>(y(),w(p,{key:h.value,label:h.key,value:h.value},null,8,["label","value"]))),128))]),_:1},16,["modelValue","class"])]}),_:1},8,["label","prop","required","class"])}}});var Ul=Object.freeze(Object.defineProperty({__proto__:null,default:Nl},Symbol.toStringTag,{value:"Module"}));const $l={class:"flex w-full justify-between items-center"},jl={class:"flex justify-between items-center"},ql={class:"mr-12"},Pl={class:"w-full flex justify-between items-center"},Dl={class:"w-full flex justify-between items-center"},Ml=q({props:{model:null,field:null,cssClass:null},setup(e){const o=e,{t}=J(),l=C({moreOptions:!1,all:0});function r(){let n=o.model[o.field.name];typeof n=="string"&&(l.value=JSON.parse(n))}r(),oe(()=>l.value,n=>{o.model[o.field.name]=JSON.stringify(n)},{deep:!0});function a(){if(l.value.moreOptions){const n=l.value.all;l.value.top=n,l.value.right=n,l.value.bottom=n,l.value.left=n}else l.value.all=l.value.top}return(n,m)=>{const p=xe,i=B,c=he;return y(),T(O,null,[s(i,{prop:e.field.prop,required:e.field.required,class:"w-full"},{label:d(()=>{var v;return[_("div",$l,[_("div",null,x((v=e.field.displayName)!=null?v:e.field.name),1),_("div",jl,[_("div",ql,x(u(t)("ve.moreOptions")),1),s(p,{modelValue:l.value.moreOptions,"onUpdate:modelValue":m[0]||(m[0]=g=>l.value.moreOptions=g),onChange:a},null,8,["modelValue"])])])]}),_:1},8,["prop","required"]),l.value.moreOptions?(y(),T(O,{key:0},[_("div",Pl,[s(i,{label:u(t)("ve.top")},{default:d(()=>[s(c,{modelValue:l.value.top,"onUpdate:modelValue":m[1]||(m[1]=v=>l.value.top=v)},null,8,["modelValue"])]),_:1},8,["label"]),s(i,{label:u(t)("ve.right")},{default:d(()=>[s(c,{modelValue:l.value.right,"onUpdate:modelValue":m[2]||(m[2]=v=>l.value.right=v)},null,8,["modelValue"])]),_:1},8,["label"])]),_("div",Dl,[s(i,{label:u(t)("ve.bottom")},{default:d(()=>[s(c,{modelValue:l.value.bottom,"onUpdate:modelValue":m[3]||(m[3]=v=>l.value.bottom=v)},null,8,["modelValue"])]),_:1},8,["label"]),s(i,{label:u(t)("ve.left")},{default:d(()=>[s(c,{modelValue:l.value.left,"onUpdate:modelValue":m[4]||(m[4]=v=>l.value.left=v)},null,8,["modelValue"])]),_:1},8,["label"])])],64)):(y(),w(i,{key:1,label:u(t)("common.all")},{default:d(()=>[s(c,{modelValue:l.value.all,"onUpdate:modelValue":m[5]||(m[5]=v=>l.value.all=v)},null,8,["modelValue"])]),_:1},8,["label"]))],64)}}});var Bl=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"}));const Il={class:"w-full mb-8"},zl={class:"w-full flex justify-between items-center mb-4"},Ll=["src","alt","title","onClick"],Fl={class:"ml-2"},Rl={class:"space-x-8 flex items-center"},Al={class:"space-x-8 ml-8"},Jl={key:0},Wl=["src","alt","title","onClick"],Hl=q({props:{model:null,field:null},setup(e){const o=e,{socialGroups:t}=Me(),{t:l}=J(),r=C("follow"),a=C([]),n=C(),m=C(!1),p=D(()=>t.value[r.value]),i=C(!1),c=ve()?[{key:l("ve.social"),value:"follow"},{key:l("ve.others"),value:"others"}]:[{key:l("ve.follow"),value:"follow"},{key:l("ve.share"),value:"share"},{key:l("ve.others"),value:"others"}];function v(){const f=o.model[o.field.name]||"[]";typeof f=="string"&&(a.value=JSON.parse(f))}v(),oe(()=>a.value,f=>{o.model[o.field.name]=JSON.stringify(f)},{deep:!0});function g(f){const k=le(f);k.id=fe(),a.value.push(k),m.value=!1}function S(f){a.value.splice(f,1)}function h(f){n.value=f,i.value=!0}function E(f){const k=f[0];!n.value||!k||(n.value.icon=k.url,n.value.previewIcon=k.previewUrl)}function V(){m.value=!1}return ke(()=>{al(window,"click",V)}),Ke(()=>{sl(window,"click",V)}),(f,k)=>{var ae;const I=el,H=xe,z=ge,L=Ce,Q=_e,G=il,$=ul,F=rl,X=B;return y(),w(X,{label:(ae=e.field.displayName)!=null?ae:e.field.name,prop:e.field.prop,required:e.field.required},{default:d(()=>[s(u(pe),{list:a.value,"item-key":"id","display-prop":"value",class:"w-full",handle:".icon-move",group:{name:"ve-social-control",pull:"clone",put:!1},onDelete:S,onAdd:g},{item:d(({element:b,index:se})=>[_("div",Il,[_("div",zl,[_("div",null,[_("img",{class:"w-[32px] inline-block cursor-pointer",src:b.previewIcon||b.icon,alt:b.alternateText,width:"32",title:u(l)("ve.src"),onClick:N=>h(b)},null,8,Ll),_("span",Fl,x(b.name),1)]),_("div",Rl,[b.type==="share"?(y(),w(I,{key:0,size:"small"},{default:d(()=>[U(x(u(l)("ve.share")),1)]),_:1})):b.prefix==="tel:"?(y(),w(I,{key:1,size:"small"},{default:d(()=>[U(x(u(l)("common.phone")),1)]),_:1})):b.prefix==="mailto:"?(y(),w(I,{key:2,size:"small"},{default:d(()=>[U(x(u(l)("common.email")),1)]),_:1})):j("",!0),_("span",null,x(u(l)("ve.moreOptions")),1),s(H,{modelValue:b.moreActions,"onUpdate:modelValue":N=>b.moreActions=N},null,8,["modelValue","onUpdate:modelValue"]),_("div",Al,[s(z,{class:"text-orange iconfont icon-delete","data-cy":"remove",onClick:N=>S(se)},null,8,["onClick"]),s(z,{class:"iconfont icon-move cursor-move","data-cy":"move"})])])]),b.moreActions?(y(),T("div",Jl,[s(L,{modelValue:b.title,"onUpdate:modelValue":N=>b.title=N,placeholder:u(l)("common.title"),class:"mb-4"},{prepend:d(()=>[U(x(u(l)("common.title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),s(L,{modelValue:b.alternateText,"onUpdate:modelValue":N=>b.alternateText=N,placeholder:u(l)("common.altText"),class:"mb-4"},{prepend:d(()=>[U(x(u(l)("common.altText")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):j("",!0),s(L,{modelValue:b.url,"onUpdate:modelValue":N=>b.url=N,placeholder:u(l)("common.url"),class:"mb-4"},{prepend:d(()=>[U(x(u(l)("common.url")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])]),footer:d(()=>[s(F,{visible:m.value,width:270,trigger:"click"},{reference:d(()=>[s(Q,{circle:"","data-cy":"add",onClick:k[0]||(k[0]=R(b=>m.value=!m.value,["stop"]))},{default:d(()=>[s(z,{class:"text-blue iconfont icon-a-addto"})]),_:1})]),default:d(()=>[_("div",{onClick:k[2]||(k[2]=R(()=>{},["stop"]))},[s($,{modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=b=>r.value=b),class:"el-radio-group--rounded"},{default:d(()=>[(y(!0),T(O,null,M(u(c),b=>(y(),w(G,{key:b.value,label:b.value,"data-cy":b.value},{default:d(()=>[U(x(b.key),1)]),_:2},1032,["label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_("div",{class:"flex items-start flex-wrap justify-start",onClick:k[3]||(k[3]=R(()=>{},["stop"]))},[(y(!0),T(O,null,M(u(p),b=>(y(),T("img",{key:b.id,class:"w-[32px] inline-block cursor-pointer m-8",src:b.icon,alt:b.alternateText,width:"32",title:b.title,onClick:se=>g(b)},null,8,Wl))),128))])]),_:1},8,["visible"])]),_:1},8,["list"]),i.value?(y(),w(u(ll),{key:0,modelValue:i.value,"onUpdate:modelValue":k[4]||(k[4]=b=>i.value=b),onChoose:E},null,8,["modelValue"])):j("",!0)]),_:1},8,["label","prop","required"])}}});var Gl=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"}));const Kl={class:"flex items-center space-x-8 p-4 max-w-230px w-full justify-end"},Ql=q({props:{model:null,field:null,cssClass:null},setup(e){return(o,t)=>{var r;const l=B;return y(),w(l,{label:(r=e.field.displayName)!=null?r:e.field.name,prop:e.field.prop,required:e.field.required,class:W(e.cssClass)},{default:d(()=>[s(dl,{modelValue:e.model[e.field.name],"onUpdate:modelValue":t[0]||(t[0]=a=>e.model[e.field.name]=a),"show-alpha":""},{default:d(({color:a})=>[_("div",Kl,[_("div",{style:Qe({backgroundColor:a}),class:"w-24 h-24 rounded-4px shadow-s-10"},null,4)])]),_:1},8,["modelValue"])]),_:1},8,["label","prop","required","class"])}}});var Xl=ee(Ql,[["__scopeId","data-v-43ef6e5a"]]),Yl=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"}));const Zl=q({props:{model:null,field:null,cssClass:null},setup(e){const o=e,{t}=J();return function(){const r=o.model[o.field.prop];(!r||!Array.isArray(r))&&(o.model[o.field.prop]=["no-repeat","no-repeat"])}(),(l,r)=>{var c;const a=cl,n=ml,m=te,p=ne,i=B;return y(),w(i,{label:(c=e.field.displayName)!=null?c:e.field.name,prop:e.field.prop,required:e.field.required,class:W(e.cssClass)},{default:d(()=>[s(n,{class:"w-full",gutter:10},{default:d(()=>[s(a,{span:12},{default:d(()=>[U(x(u(t)("ve.horizontal")),1)]),_:1}),s(a,{span:12},{default:d(()=>[U(x(u(t)("ve.vertical")),1)]),_:1})]),_:1}),s(n,{class:"w-full",gutter:10},{default:d(()=>[s(a,{span:12},{default:d(()=>[s(p,A({modelValue:e.model[e.field.prop][0],"onUpdate:modelValue":r[0]||(r[0]=v=>e.model[e.field.prop][0]=v),placeholder:e.field.toolTip,clearable:""},e.field.settings),{default:d(()=>[(y(!0),T(O,null,M(e.field.selectionOptions,v=>(y(),w(m,{key:v.value,value:v.value,label:v.key},null,8,["value","label"]))),128))]),_:1},16,["modelValue","placeholder"])]),_:1}),s(a,{span:12},{default:d(()=>[s(p,A({modelValue:e.model[e.field.prop][1],"onUpdate:modelValue":r[1]||(r[1]=v=>e.model[e.field.prop][1]=v),placeholder:e.field.toolTip,clearable:""},e.field.settings),{default:d(()=>[(y(!0),T(O,null,M(e.field.selectionOptions,v=>(y(),w(m,{key:v.value,value:v.value,label:v.key},null,8,["value","label"]))),128))]),_:1},16,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1},8,["label","prop","required","class"])}}});var eo=ee(Zl,[["__scopeId","data-v-3b2f6b92"]]),lo=Object.freeze(Object.defineProperty({__proto__:null,default:eo},Symbol.toStringTag,{value:"Module"}));const oo={view:"icon-view",page:"icon-copy",layout:"icon-layout",code:"icon-code",style:"icon-css",script:"icon-js",menu:"icon-menu",form:"icon-page",module:"icon-classification",htmlblock:"icon-html"},{getControlType:to}=Te(),Z=C([]),Ee=C({}),no=D(()=>gl(Z.value,o=>{const t=Ee.value[o.tagName];return t!=null&&t.length?Se(t,l=>{var m,p;const r=((m=l.propDefines)!=null?m:[]).map(i=>{typeof i.selectionOptions=="string"&&(i.selectionOptions=JSON.parse(i.selectionOptions)),typeof i.settings=="string"&&(i.settings=JSON.parse(i.settings)),typeof i.validations=="string"&&(i.validations=JSON.parse(i.validations));let c=i.defaultValue;if(typeof i.controlType=="string"){const v=to(i.controlType);v&&(v.value==="Switch"?c&&typeof c=="string"?c=JSON.parse(c.toLowerCase()):c=!!c:v.value==="CheckBox"&&typeof c=="string"?c=c?JSON.parse(c):[]:v.value==="Number"&&(c=c===null?void 0:c))}return i.defaultValue=c,i}),a={id:l.id,name:l.name,propDefines:r,children:[],htmlStr:"",props:{},type:o.tagName,attribute:o.attribute};return o.requireEngine&&Be(a,"engine",Ie("engine",{isSystemField:!0,defaultValue:o.engineName})),{id:l.id,name:l.name,settings:l.settings,tooltip:`${o.displayName}: ${l.name}`,icon:(p=oo[o.tagName.toLowerCase()])!=null?p:"icon-debugging",meta:a}}):[]})),ao=e=>P(void 0,null,function*(){if(!e){Z.value=yield yl();for(const o of Z.value)o.tagName!=="Layout"&&(Ee.value[o.tagName]=yield bl(o.tagName,!0))}});function so(){return{initCustomWidgets:ao,customWidgets:no}}const{widgets:io}=Re(),{customWidgets:uo}=so(),{getControlType:ro}=Te(),co={"./components/items-control.vue":Sl,"./components/LinkValue.vue":Ol,"./components/NumberUnit.vue":Ul,"./components/side-control.vue":Bl,"./components/social-control.vue":Gl,"./components/VeColorPicker.vue":Yl,"./components/VeTwoSelection.vue":lo};function mo(e){var l,r,a,n,m;if(Fe(e))return(a=(r=(l=uo.value.find(p=>{var i,c;return((i=p.meta)==null?void 0:i.type)===e.type&&((c=p.meta)==null?void 0:c.name)===e.name}))==null?void 0:l.meta)==null?void 0:r.propDefines)!=null?a:e.propDefines;const o=io.value.find(p=>{var i;return((i=p.meta)==null?void 0:i.type)===e.type}),t=(m=(n=o==null?void 0:o.meta)==null?void 0:n.propDefines)!=null?m:e.propDefines;if(typeof(o==null?void 0:o.getAdditionalSettings)=="function"){const p=o.getAdditionalSettings();t.forEach(i=>{const c=vl(p,i.name);c&&(i.settings=K(K({},i.settings),c))})}return t}function fo(e){var o,t;return e.dataType==="Array"||e.multipleValue?[]:(t=(o=e.settings)==null?void 0:o.defaultValue)!=null?t:null}function de(e,o){var l;o.props||(o.props={});let t=o.props[e.name];t===void 0&&(t=(l=e.defaultValue)!=null?l:fo(e)),o.props[e.name]=t}function po(e){const o=[],t={};return e?(e.forEach(l=>{var a;if(l.isSystemField||l.name.startsWith("veContainer"))return;const r={lang:"en-US",name:l.name,displayName:l.displayName,prop:l.name,toolTip:(a=l.tooltip)!=null?a:"",selectionOptions:l.selectionOptions,validations:l.validations,isMultilingual:!1,multipleValue:l.multipleValue,controlType:l.controlType,settings:l.settings,required:l.required};t[r.name]=pl(r),o.push(r)}),{fieldList:o,fieldRules:t}):{fieldList:o,fieldRules:t}}function vo(e){var l;if(ro(e.controlType))return fl;const t=`./components/${e.controlType}.vue`;return((l=co[t])==null?void 0:l.default)||"div"}function Go(e,o){const t=C({}),l=C([]),r=C({}),a=C([]),n=mo(e),{fieldList:m,fieldRules:p}=po(n);l.value=m,r.value=p;const i=ze(e).filter(c=>o?c.name!=="veContainerMargin":!0);return a.value=i.map(Le),i.forEach(c=>{de(c,e)}),n.forEach(c=>{de(c,e)}),t.value=e.props,{rules:r,fields:l,containerFields:a,model:t}}const yo={class:"px-24 py-16"},Ko=q({props:{model:null,fields:null,rules:null},setup(e,{expose:o}){const t=C();function l(a){return Ae(`ve-${a.controlType}`)}function r(){return P(this,null,function*(){return new Promise(a=>{we(()=>P(this,null,function*(){var n;yield(n=t.value)==null?void 0:n.validate(),a(!0)}))})})}return o({validate:r}),(a,n)=>{const m=Ve;return y(),T("div",yo,[s(m,{ref_key:"form",ref:t,"label-position":"top",model:e.model,rules:e.rules,onSubmit:n[0]||(n[0]=R(()=>{},["prevent"]))},{default:d(()=>[(y(!0),T(O,null,M(e.fields,p=>(y(),w(Xe(u(vo)(p)),{key:p.name,class:W(l(p)),field:p,model:e.model},null,8,["class","field","model"]))),128))]),_:1},8,["model","rules"])])}}});function bo(e,o){return P(this,null,function*(){const t=e.children,l=[];for(const r of t){if(!ye(r))continue;const a=yield be(r,!0,o);l.push(a)}return l.join("")})}function go(e,o){return P(this,null,function*(){const t=e.children,l=[];for(const r of t){if(!ye(r))continue;const a=yield be(r,!1,o);l.push(a)}return l.join("")})}function ce(e){const o=document.createElement("div");o.innerHTML=e;const t=o.querySelectorAll("[style]");for(let l=0;l<t.length;l++){const r=t[l];Je(r)}return o.innerHTML}function Qo(e,o){return P(this,null,function*(){const t={};for(const l of e.children)o?t[l.name]=yield bo(l,e).then(ce):t[l.name]=yield go(l,e).then(ce);return t})}export{Ko as _,Go as a,vo as g,Qo as r,so as u};
