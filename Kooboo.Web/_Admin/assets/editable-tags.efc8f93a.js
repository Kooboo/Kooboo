import{o as P,w as E,g as I}from"./i18n.0d8cb6d1.js";import{c as M}from"./index.9a7a049b.js";import{E as W}from"./index.97ced36a.js";import{E as j}from"./index.9b4bce31.js";import{E as N}from"./windi.dcba9a95.js";import{c5 as z,bW as H,d as S,g as D,i as q,o as c,a as C,b as k,w,f as $,F as B,b6 as T,j as V,aH as K,t as U,k as h,c as F,u as x,r as G}from"./url.8f5ec20c.js";import{i as L}from"./main.d919dab0.js";import{b as J}from"./_baseIndexOf.4d7985be.js";import{c as Q}from"./_baseClone.24478792.js";function R(e,t,n,i){for(var p=n-1,u=e.length;++p<u;)if(i(e[p],t))return p;return-1}var X=Array.prototype,O=X.splice;function Y(e,t,n,i){var p=i?R:J,u=-1,m=t.length,v=e;for(e===t&&(t=Q(t)),n&&(v=z(e,H(n)));++u<m;)for(var f=0,a=t[u],s=n?n(a):a;(f=p(v,s,f,i))>-1;)v!==e&&O.call(v,f,1),O.call(e,f,1);return e}function Z(e,t){return e&&e.length&&t&&t.length?Y(e,t):e}const _={key:0,class:"flex items-center space-x-8"},ee={class:"flex gap-4 flex-wrap max-w-500px"},oe={class:"space-x-8 flex items-center"},A=S({props:{modelValue:null,editing:{type:Boolean},readonly:{type:Boolean},options:null,optionDeletable:{type:Boolean},labelFormatter:null},emits:["update:model-value","update:editing","delete","delete-option"],setup(e,{emit:t}){const n=e,i=D(n.modelValue),p=D();function u(){var a=i.value.trim();a?t("update:model-value",a):t("delete"),t("update:editing",!1)}function m(){i.value=n.modelValue,t("update:editing",!1),n.modelValue.trim()||t("delete")}q(()=>n.editing,a=>{a||(i.value=n.modelValue)});function v(a){var s;i.value=a,(s=p.value)==null||s.hide(),u()}function f(a){return typeof n.labelFormatter=="function"?n.labelFormatter(a):a}return(a,s)=>{var r;const l=M,o=W,g=j,b=N;return e.editing&&!e.readonly?(c(),C("div",_,[k(g,{ref_key:"popover",ref:p,disabled:!((r=e.options)!=null&&r.length),placement:"top-start",trigger:"click",width:"auto",content:"this is content, this is content, this is content"},{reference:w(()=>[k(o,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=d=>i.value=d),size:"small",onKeydown:P(E(u,["stop"]),["enter"])},null,8,["modelValue","onKeydown"])]),default:w(()=>[$("div",ee,[(c(!0),C(B,null,T(e.options,d=>(c(),V(l,{key:d,class:"cursor-pointer",closable:e.optionDeletable,onClick:y=>v(d),onClose:y=>a.$emit("delete-option",d)},{default:w(()=>[K(U(f(d)),1)]),_:2},1032,["closable","onClick","onClose"]))),128))])]),_:1},8,["disabled"]),k(b,{class:"iconfont icon-yes3 text-green cursor-pointer",onClick:E(u,["stop"])},null,8,["onClick"]),k(b,{class:"iconfont icon-close text-orange cursor-pointer",onClick:E(m,["stop"])},null,8,["onClick"])])):(c(),V(l,{key:1,type:"warning"},{default:w(()=>[$("div",oe,[$("div",{class:"cursor-pointer",onClick:s[1]||(s[1]=d=>t("update:editing",!0))},U(f(e.modelValue)),1),e.readonly?h("",!0):(c(),V(b,{key:0,class:"iconfont icon-delete",onClick:s[2]||(s[2]=d=>t("delete"))}))])]),_:1}))}}}),te={class:"flex flex-wrap gap-4"},pe=S({props:{modelValue:null,readonly:{type:Boolean},addLabel:null,options:null,optionDeletable:{type:Boolean},labelFormatter:null},emits:["update:model-value","remove-item","add-item","change-item","delete-option"],setup(e,{emit:t}){const n=e,{t:i}=I(),p=F(()=>{var l,o;return(o=(l=n.modelValue)==null?void 0:l.map(g=>({key:g,value:g})))!=null?o:[]}),u=F(()=>{var l,o;return Z(((l=n.options)!=null?l:[]).slice(),(o=n.modelValue)!=null?o:[])}),m=D();function v(l){if(n.modelValue.map(o=>o.toLowerCase()).includes(l.toLowerCase())){L(i("common.valueExist"));return}t("update:model-value",[...n.modelValue,l]),t("add-item",l),m.value=void 0}function f(l,o){m.value=l?o:void 0}function a(l){t("remove-item",l);const o=[...n.modelValue];o.splice(l,1),t("update:model-value",o)}function s(l,o){var g=n.modelValue[l];if(g==o)return;if(n.modelValue.map(r=>r.toLowerCase()).includes(o.toLowerCase())){L(i("common.valueExist"));return}t("change-item",l,o);const b=[...n.modelValue];b.splice(l,1,o),t("update:model-value",b)}return(l,o)=>{const g=N,b=M;return c(),C("div",te,[(c(!0),C(B,null,T(x(p),(r,d)=>(c(),V(A,{key:r.key,"model-value":r.value,editing:d==m.value,readonly:e.readonly,options:x(u),"option-deletable":e.optionDeletable,"label-formatter":e.labelFormatter,"onUpdate:modelValue":y=>s(d,y),"onUpdate:editing":y=>f(y,d),onDelete:y=>a(d),onDeleteOption:o[0]||(o[0]=y=>l.$emit("delete-option",y))},null,8,["model-value","editing","readonly","options","option-deletable","label-formatter","onUpdate:modelValue","onUpdate:editing","onDelete"]))),128)),e.readonly?h("",!0):(c(),C(B,{key:0},[m.value==-1?(c(),V(A,{key:0,"model-value":"",editing:"",readonly:e.readonly,options:x(u),"option-deletable":e.optionDeletable,"label-formatter":e.labelFormatter,"onUpdate:modelValue":v,"onUpdate:editing":o[1]||(o[1]=r=>f(r,-1)),onDeleteOption:o[2]||(o[2]=r=>l.$emit("delete-option",r))},null,8,["readonly","options","option-deletable","label-formatter"])):h("",!0),m.value==null?(c(),V(b,{key:1,type:"success",class:"cursor-pointer",onClick:o[3]||(o[3]=r=>m.value=-1)},{default:w(()=>[k(g,{class:"iconfont icon-a-addto"}),K(" "+U(e.addLabel),1)]),_:1})):h("",!0)],64)),G(l.$slots,"default")])}}});export{pe as _};
