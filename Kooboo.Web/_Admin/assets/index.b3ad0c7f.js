var W=(e,g,o)=>new Promise((d,f)=>{var i=u=>{try{p(o.next(u))}catch(m){f(m)}},l=u=>{try{p(o.throw(u))}catch(m){f(m)}},p=u=>u.done?d(u.value):Promise.resolve(u.value).then(i,l);p((o=o.apply(e,g)).next())});import{_ as ve}from"./icon-button.e1f3bfd2.js";import{_ as ye}from"./tooltip.7fc982a4.js";import{g as ae,u as ne}from"./main.52487121.js";import{t as Z}from"./commerce.5a632190.js";import{v as Ve,g as X}from"./i18n.97105311.js";import{E as ue}from"./index.4587e608.js";import{E as Y,a as ge}from"./index.317a7f30.js";import{d as O,u as r,o as t,a as w,b6 as D,e as be,j as c,w as k,r as ee,F as h,g as U,i as ke,f as I,t as F,b as x,k as M,aH as q,c as de,h as ie,G as $e,n as we,m as xe,az as Ce,c0 as Ee}from"./url.2e6a77c4.js";import{_ as he}from"./index.e24e2872.js";import{a as Ue,b as Se}from"./index.eb337ef3.js";import{_ as Ie}from"./index.cdaadc8a.js";import{S as Ne}from"./search-input.1597a477.js";import{_ as Fe}from"./k-table.e9121736.js";import{_ as se}from"./index.9ffc2c80.js";import{u as Me}from"./use-date.88693eba.js";import{u as Te}from"./content-effect.e965bc7a.js";import{E as Be}from"./edit-content.352b36f1.js";import{E as me}from"./index.4b289bae.js";import{_ as De}from"./index.aea1b33f.js";import{e as A}from"./guid.c1a40312.js";import{E as re}from"./windi.539ebeab.js";import{E as Re}from"./index.b09a9f00.js";import{E as ce,a as fe}from"./index.afee24fe.js";import{E as Le}from"./index.f3d28a97.js";import{b as Oe}from"./textContent.49dfc8fa.js";import{d as _e}from"./image-cover.dadeb856.js";import{g as ze}from"./string.955a924b.js";import{E as Ae}from"./index.f997a738.js";import{_ as Pe}from"./key-value-editor.12c3b400.js";import{_ as Ge}from"./list-editor.6914f1ec.js";import{E as je}from"./index.a34c327d.js";import{E as Je,a as qe}from"./index.c1764395.js";import{b as He,a as Ke}from"./index.6302b2c1.js";import{E as Qe}from"./index.00cc1b15.js";import{E as We}from"./index.01dc3ec0.js";import{E as Xe}from"./index.1d8a0bb0.js";import{f as le,g as oe}from"./custom-field.2a857ed5.js";const Ye=O({props:{defaultModel:null,multilingualModel:null,label:null,rules:null,defaultProp:null,multilingualProp:null},emits:["update:default-model"],setup(e,{emit:g}){const o=e,d=ae();g("update:default-model",p());function f(u){g("update:default-model",u),o.multilingualModel[d.default]=u}function i(u,m){var v=u==d.default;v&&g("update:default-model",m),o.multilingualModel[u]=m}function l(u){var C;var m=o.multilingualModel,v=u==d.default;return(C=m[u])!=null?C:v?o.defaultModel:void 0}function p(){if(o.defaultModel!=null)return o.defaultModel;var u=o.multilingualModel;return u[d.default]}return(u,m)=>{const v=Y;return r(d).visible?(t(!0),w(h,{key:0},D(r(d).cultures,(C,$)=>be((t(),c(v,{key:$,label:r(d).appendLangText(e.label,$),prop:`${e.multilingualProp}.${$}`,rules:e.rules},{default:k(()=>[ee(u.$slots,"default",{value:l($),onchange:E=>i($,E)})]),_:2},1032,["label","prop","rules"])),[[Ve,r(d).selected.includes($)]])),128)):(t(),c(v,{key:1,label:e.label,prop:e.defaultProp,rules:e.rules},{default:k(()=>[ee(u.$slots,"default",{value:p(),onchange:f})]),_:3},8,["label","prop","rules"]))}}}),Ze={class:"inline-flex items-center space-x-4"},el={class:"flex items-center space-x-8 w-full"},ll={class:"text-s text-999"},ol={class:"text-orange"},Xl=O({props:{title:null,seoName:null,path:null,label:null},emits:["update:seoName"],setup(e,{emit:g}){const o=e,d=U(o.seoName!=Z(o.title)),f=ne(),{t:i}=X();return ke([()=>o.title,()=>d.value],()=>{d.value||g("update:seoName",Z(o.title))}),(l,p)=>{const u=ye,m=ue,v=ve,C=Y;return t(),c(C,null,{label:k(()=>[I("div",Ze,[I("div",null,F(e.label||r(i)("common.seoName")),1),x(u,{tip:r(i)("common.seoNameTip"),"custom-class":"ml-4"},null,8,["tip"])])]),default:k(()=>[I("div",el,[x(m,{"model-value":o.seoName,"onUpdate:modelValue":p[0]||(p[0]=$=>g("update:seoName",$)),onInput:p[1]||(p[1]=()=>d.value=!0)},null,8,["model-value"]),d.value?(t(),c(v,{key:0,circle:"",class:"text-blue",icon:"icon-Refresh",tip:"Sync from title",onClick:p[2]||(p[2]=()=>d.value=!1)})):M("",!0)]),I("div",ll,[q(F(r(f).site.baseUrl)+F(o.path)+"/",1),I("span",ol,F(o.seoName),1)])]),_:1})}}}),tl={class:"px-32 py-24"},pe=O({props:{folder:null,id:null},emits:["reload","update:model-value"],setup(e,{emit:g}){const{t:o}=X(),d=U(),f=U(!0),i=U();setTimeout(()=>{document.querySelectorAll(".tox-tinymce-aux").forEach(u=>{var m;(m=i.value)==null||m.appendChild(u)})},500);const l=()=>W(this,null,function*(){const{id:p}=yield d.value.save();f.value=!1,g("reload",p)});return(p,u)=>{const m=me;return t(),w("div",null,[x(m,{modelValue:f.value,"onUpdate:modelValue":u[1]||(u[1]=v=>f.value=v),width:"800px","close-on-click-modal":!1,title:r(o)("common.textContent"),"custom-class":"el-dialog--zero-padding",onClosed:u[2]||(u[2]=v=>g("update:model-value",!1))},{footer:k(()=>[x(se,{onConfirm:l,onCancel:u[0]||(u[0]=v=>f.value=!1)})]),default:k(()=>[I("div",tl,[x(Be,{id:e.id,ref_key:"form",ref:d,"folder-id":e.folder},null,8,["id","folder-id"])]),I("div",{ref_key:"tinymceAuxNewContainer",ref:i},null,512)]),_:1},8,["modelValue","title"])])}}}),al={class:"space-x-16 flex items-center pb-24"},nl=I("div",{class:"flex-1"},null,-1),ul=O({props:{modelValue:{type:Boolean},folderId:null,multiple:{type:Boolean},exclude:null},emits:["update:model-value","success"],setup(e,{emit:g}){const o=e,{t:d}=X(),f=U(!0),i=U(),l=U(!1),p=U(),{list:u,columns:m,keywords:v,columnLoaded:C,pagination:$,fetchList:E,searchCategories:T,categoryOptions:y,rawList:R}=Te(o.folderId,!0,o.exclude),B=de(()=>m.value.map(s=>({name:s.name,displayName:s.displayName,controlType:s.controlType,multipleValue:s.multipleValue,attrs:{sortable:"custom","min-width":180}})));ie(()=>W(this,null,function*(){E(1,10)}));function n(){const s=[];for(const a of i.value.selected){const V=R.value.find(S=>S.id==a.id);V&&s.push(V)}g("success",s),f.value=!1}return(s,a)=>{var G,j,N,L;const V=re,S=Re,_=ce,z=fe,H=Ne,P=Le,K=me;return t(),w(h,null,[x(K,{modelValue:f.value,"onUpdate:modelValue":a[5]||(a[5]=b=>f.value=b),width:"900px","close-on-click-modal":!1,title:r(d)("common.content"),onClosed:a[6]||(a[6]=b=>g("update:model-value",!1))},{footer:k(()=>[x(se,{onConfirm:n,onCancel:a[4]||(a[4]=b=>f.value=!1)})]),default:k(()=>[I("div",al,[x(S,{round:"",type:"primary",onClick:a[0]||(a[0]=b=>{p.value={id:r(A),folderId:e.folderId},l.value=!0})},{default:k(()=>[x(V,{class:"iconfont icon-a-addto"}),q(" "+F(r(d)("common.add")),1)]),_:1}),nl,(t(!0),w(h,null,D(r(y),b=>{var Q;return t(),c(z,{key:b.id,modelValue:r(T)[b.id],"onUpdate:modelValue":J=>r(T)[b.id]=J,clearable:"",multiple:"",placeholder:(Q=b.display)!=null?Q:b.alias,onChange:a[1]||(a[1]=()=>r(E)(1,10))},{default:k(()=>[(t(!0),w(h,null,D(b.options,J=>(t(),c(_,{key:J.key,label:J.value,value:J.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])}),128)),x(H,{modelValue:r(v),"onUpdate:modelValue":a[2]||(a[2]=b=>$e(v)?v.value=b:null),placeholder:r(d)("common.searchContents"),class:"w-238px",clearable:"","data-cy":"search"},null,8,["modelValue","placeholder"])]),r(C)?(t(),c(r(Fe),{key:0,ref_key:"table",ref:i,data:r(u),"show-check":"","hide-header":"","is-radio":!e.multiple,pagination:r($),"hide-delete":"",onChange:a[3]||(a[3]=b=>r(E)(b,10))},{default:k(()=>[x(De,{columns:r(B)},null,8,["columns"]),x(P,{prop:"online",sortable:"custom",label:r(d)("content.online"),width:"120",align:"center"},{default:k(({row:b})=>[I("span",{class:we(b.online?"text-green":"text-999"),"data-cy":"online"},F(b.online?r(d)("common.yes"):r(d)("common.no")),3)]),_:1},8,["label"]),x(P,{label:r(d)("common.lastModified"),width:"180",align:"center",prop:"lastModified",sortable:"custom"},{default:k(({row:b})=>[q(F(r(Me)(b.lastModified)),1)]),_:1},8,["label"])]),_:1},8,["data","is-radio","pagination"])):M("",!0)]),_:1},8,["modelValue","title"]),l.value?(t(),c(pe,{key:0,id:(j=(G=p.value)==null?void 0:G.id)!=null?j:r(A),modelValue:l.value,"onUpdate:modelValue":a[7]||(a[7]=b=>l.value=b),folder:(L=(N=p.value)==null?void 0:N.folderId)!=null?L:r(A),onReload:r(E)},null,8,["id","modelValue","folder","onReload"])):M("",!0)],64)}}}),dl={key:0,class:"w-504px"},il={class:"flex space-x-4"},sl={key:1},ml=["onClick"],rl=O({props:{modelValue:null,contentFolder:null,multiple:{type:Boolean},allowRepetition:{type:Boolean},embedded:{type:Boolean}},emits:["update:model-value"],setup(e,{emit:g}){const o=e,d=U(!1),f=U(!1),i=U(),l=U({columns:[],list:[]});function p(){o.embedded?(i.value={id:A,folderId:o.contentFolder},f.value=!0):d.value=!0}function u(){return W(this,null,function*(){var a;const s=yield Oe(o.modelValue||[],(a=o.contentFolder)!=null?a:"");l.value=s,g("update:model-value",l.value.list.map(V=>V.id))})}u();const m=de(()=>{const s=[];if(!l.value)return s;for(const a of l.value.columns)a.controlType=="MediaFile"?s.unshift(a):s.push(a);return s});function v(s){let a=[...o.modelValue];if(o.multiple)for(const V of s)l.value.list.find(S=>S.id==V.id)||l.value.list.push(V),a.push(V.id);else a=s.map(V=>V.id),l.value.list=s;g("update:model-value",a)}function C(s){const a=o.modelValue.findIndex(V=>V==s);a>-1&&o.modelValue.splice(a,1),g("update:model-value",o.modelValue)}function $(s){const a=o.modelValue.splice(s.oldIndex,1)[0];o.modelValue.splice(s.newIndex,0,a),g("update:model-value",o.modelValue)}function E(s,a){var S,_;const V=(_=(S=l.value)==null?void 0:S.list)==null?void 0:_.find(z=>z.id==s);return V?ze(V.textValues,a):""}const T=ne();function y(s){return`url("${s?Ee(T.site.prUrl,s):_e}")`}function R(s,a){if(a.controlType!=="MediaFile")return[];const V=E(s,a.name);if(!V)return[];if(!a.multipleValue)return[V];try{return JSON.parse(V)}catch(S){return console.warn(["JSON parse error",S,V]),[]}}function B(s){i.value=l.value.list.find(a=>a.id==s),i.value&&(f.value=!0)}function n(s){o.modelValue.findIndex(V=>V==s)==-1&&o.modelValue.push(s),g("update:model-value",o.modelValue),u()}return(s,a)=>{var z,H,P,K,G,j;const V=Ae,S=re,_=Ie;return t(),w(h,null,[(H=(z=l.value)==null?void 0:z.columns)!=null&&H.length?(t(),w("div",dl,[x(_,{"wrapper-class":"space-y-4 w-full",list:e.modelValue,onAdd:p,onDelete:C,onSort:$},{default:k(({item:N})=>[x(V,null,{default:k(()=>[I("div",il,[(t(!0),w(h,null,D(r(m),L=>(t(),w(h,{key:L.name},[L.controlType=="MediaFile"?(t(!0),w(h,{key:0},D(R(N,L),(b,Q)=>(t(),w("div",{key:Q,class:"w-32 h-32 bg-contain bg-center bg-no-repeat rounded-4px overflow-hidden inline-block relative group bg-gray",style:xe({backgroundImage:y(b)})},null,4))),128)):(t(),w("div",sl,F(E(N,L.name)),1))],64))),128))])]),_:2},1024)]),right:k(({item:N})=>[I("a",{class:"cursor-pointer px-4 hover:text-blue","data-cy":"edit",onClick:L=>B(N)},[x(S,{class:"iconfont icon-a-writein"})],8,ml)]),_:1},8,["list"]),(t(),c(Ce,{to:"body"},[d.value?(t(),c(ul,{key:0,modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=N=>d.value=N),"folder-id":e.contentFolder,multiple:e.multiple,exclude:e.allowRepetition?[]:e.modelValue,onSuccess:v},null,8,["modelValue","folder-id","multiple","exclude"])):M("",!0)]))])):M("",!0),f.value?(t(),c(pe,{key:1,id:(K=(P=i.value)==null?void 0:P.id)!=null?K:r(A),modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=N=>f.value=N),folder:(j=(G=i.value)==null?void 0:G.folderId)!=null?j:r(A),onReload:n},null,8,["id","modelValue","folder"])):M("",!0)],64)}}});const te=O({props:{field:null,modelValue:null},emits:["update:model-value"],setup(e,{emit:g}){const o=e,d=U(!1);if(o.field.multiple&&!Array.isArray(o.modelValue)){var f=[];o.modelValue!==void 0&&f.push(o.modelValue),g("update:model-value",f)}return ie(()=>{d.value=!0}),(i,l)=>{const p=ue,u=ce,m=fe,v=Je,C=qe,$=He,E=Ke,T=Qe,y=We,R=je,B=Xe;return d.value?(t(),w(h,{key:0},[e.field.type==="TextBox"?(t(),c(p,{key:0,style:{width:"100%"},"model-value":e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):e.field.type==="TextArea"?(t(),c(p,{key:1,"model-value":e.modelValue,class:"break-normal",type:"textarea",autosize:{minRows:8,maxRows:15},style:{width:"100%"},"onUpdate:modelValue":l[1]||(l[1]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):e.field.type==="RichEditor"?(t(),c(he,{key:2,"model-value":e.modelValue,min_height:385,"onUpdate:modelValue":l[2]||(l[2]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):e.field.type==="Selection"?(t(),c(m,{key:3,"model-value":e.modelValue,clearable:"","onUpdate:modelValue":l[3]||(l[3]=n=>i.$emit("update:model-value",n))},{default:k(()=>[(t(!0),w(h,null,D(e.field.selectionOptions,n=>(t(),c(u,{key:n.value,value:n.value,label:n.key},null,8,["value","label"]))),128))]),_:1},8,["model-value"])):e.field.type==="CheckBox"?(t(),c(C,{key:4,"model-value":e.modelValue,"onUpdate:modelValue":l[4]||(l[4]=n=>i.$emit("update:model-value",n))},{default:k(()=>[(t(!0),w(h,null,D(e.field.selectionOptions,n=>(t(),c(v,{key:n.value,size:"large",label:n.value},{default:k(()=>[q(F(n.key),1)]),_:2},1032,["label"]))),128))]),_:1},8,["model-value"])):e.field.type==="RadioBox"?(t(),c(E,{key:5,"model-value":e.modelValue,"onUpdate:modelValue":l[5]||(l[5]=n=>i.$emit("update:model-value",n))},{default:k(()=>[(t(!0),w(h,null,D(e.field.selectionOptions,n=>(t(),c($,{key:n.value,size:"large",label:n.value},{default:k(()=>[q(F(n.key),1)]),_:2},1032,["label"]))),128))]),_:1},8,["model-value"])):e.field.type==="Switch"?(t(),c(T,{key:6,"model-value":e.modelValue,"onUpdate:modelValue":l[6]||(l[6]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):e.field.type==="DateTime"?(t(),c(y,{key:7,"model-value":e.modelValue,type:"datetime","popper-class":"filed-control-el-date-picker","onUpdate:modelValue":l[7]||(l[7]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):e.field.type==="ColorPicker"?(t(),c(R,{key:8,"model-value":e.modelValue,"popper-class":"filed-control-el-color-picker","show-alpha":"","onUpdate:modelValue":l[8]||(l[8]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):e.field.type==="Number"?(t(),c(B,{key:9,"model-value":e.modelValue,"controls-position":"right","onUpdate:modelValue":l[9]||(l[9]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):e.field.type==="MediaFile"?(t(),c(Ue,{key:10,"model-value":e.modelValue,multiple:e.field.multiple,validations:e.field.validations,"onUpdate:modelValue":l[10]||(l[10]=n=>i.$emit("update:model-value",n))},null,8,["model-value","multiple","validations"])):e.field.type==="File"?(t(),c(Se,{key:11,"model-value":e.modelValue,multiple:e.field.multiple,"onUpdate:modelValue":l[11]||(l[11]=n=>i.$emit("update:model-value",n))},null,8,["model-value","multiple"])):e.field.type==="Content"?(t(),c(rl,{key:12,"model-value":e.modelValue||[],"content-folder":e.field.contentFolder,multiple:e.field.multiple,embedded:e.field.embedded,"allow-repetition":e.field.allowRepetition,"onUpdate:modelValue":l[12]||(l[12]=n=>i.$emit("update:model-value",n))},null,8,["model-value","content-folder","multiple","embedded","allow-repetition"])):e.field.type==="KeyValues"?(t(),c(Pe,{key:13,"model-value":e.modelValue||[],"onUpdate:modelValue":l[13]||(l[13]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):e.field.type==="ValueList"?(t(),c(Ge,{key:14,"model-value":e.modelValue||[],"onUpdate:modelValue":l[14]||(l[14]=n=>i.$emit("update:model-value",n))},null,8,["model-value"])):M("",!0)],64)):M("",!0)}}}),cl={key:0,class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},Yl=O({props:{data:null,customFields:null},setup(e,{expose:g}){const o=e,d=ae(),f=U();function i(m){return m=Object.keys(o.data).find(v=>v.toLowerCase()==m.toLowerCase())||m,o.data[m]||(o.data[m]={}),o.data[m]}function l(m,v){return i(m)[v]}function p(m,v,C){const $=i(m);$[v]=C}function u(m){var E;if((E=le[m.type])==null?void 0:E.multilingual)return d.default;const C=i(m.name),$=Object.keys(C);return!$.length||$.includes(d.default)?d.default:$[0]}return g({form:f}),(m,v)=>{var T;const C=Ye,$=Y,E=ge;return(T=e.customFields)!=null&&T.length?(t(),w("div",cl,[x(E,{ref_key:"form",ref:f,"label-position":"top",model:e.data},{default:k(()=>[(t(!0),w(h,null,D(e.customFields,y=>{var R;return t(),w(h,{key:y.name},[y.editable?(t(),w(h,{key:0},[((R=r(le)[y.type])==null?void 0:R.multilingual)&&y.multilingual?(t(),c(C,{key:0,label:y.displayName||y.name,"multilingual-model":i(y.name),rules:r(oe)(y.validations,y.type),"multilingual-prop":y.name},{default:k(({value:B,onchange:n})=>[x(te,{"model-value":B,field:y,"onUpdate:modelValue":s=>n(s)},null,8,["model-value","field","onUpdate:modelValue"])]),_:2},1032,["label","multilingual-model","rules","multilingual-prop"])):(t(),c($,{key:1,label:y.displayName||y.name,rules:r(oe)(y.validations,y.type),prop:`${y.name}.${u(y)}`},{default:k(()=>[x(te,{"model-value":l(y.name,u(y)),field:y,"onUpdate:modelValue":B=>p(y.name,u(y),B)},null,8,["model-value","field","onUpdate:modelValue"])]),_:2},1032,["label","rules","prop"]))],64)):M("",!0)],64)}),128))]),_:1},8,["model"])])):M("",!0)}}});export{Yl as _,Xl as a,Ye as b};
