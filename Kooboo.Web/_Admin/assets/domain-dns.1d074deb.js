var g=(k,i,r)=>new Promise((y,u)=>{var f=e=>{try{p(r.next(e))}catch(s){u(s)}},_=e=>{try{p(r.throw(e))}catch(s){u(s)}},p=e=>e.done?y(e.value):Promise.resolve(e.value).then(f,_);p((r=r.apply(k,i)).next())});import{d as B,M as q,g as d,o as c,j as w,w as a,b as t,u as m,aH as R,t as V,a as D,b6 as $,F as N,k as F,cd as j,f as E}from"./url.8f5ec20c.js";import{g as I,w as G}from"./i18n.2d8b30eb.js";import{_ as H}from"./k-table.f75c31cc.js";import{a as U,T as O}from"./validate.348f94d6.js";import{n as X}from"./guid.c1a40312.js";import{h as z,i as A,j as J,k as K,l as P}from"./index.3d9a337f.js";import{_ as Q}from"./index.ed88cf90.js";import{_ as W}from"./plugin-vue_export-helper.21dcd24c.js";import{E as Y}from"./index.bb5499e2.js";import{E as Z,a as ee}from"./index.a141884f.js";import{E as oe,a as le}from"./index.ab4ed870.js";import{E as te}from"./index.a4ff385c.js";import{_ as ae}from"./index.026f772c.js";import{E as re}from"./index.96970839.js";import{E as se}from"./index.bc06171b.js";import"./sortable.esm.a99254e8.js";import"./icon-button.e30c79ea.js";import"./windi.bf752d69.js";import"./index.ec785feb.js";import"./focus-trap.3f074800.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.a595fe6d.js";import"./index.e87fdc52.js";import"./index.0535d5fe.js";import"./main.d8c6ef59.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./replace-all.dd6016f2.js";import"./index.14993118.js";import"./isEqual.c3e9e9f4.js";import"./_baseIsEqual.2f38f7c3.js";import"./error.7e8331f1.js";import"./index.4c9af567.js";import"./event.776e7e11.js";import"./index.0a83bb10.js";import"./index.37979027.js";import"./index.3dc39d21.js";import"./index.832f2769.js";import"./index.b3e4ff8e.js";import"./index.5af167df.js";import"./style.ad574a57.js";import"./toNumber.6efebd6a.js";import"./_baseClone.29a8cd97.js";import"./index.593106e3.js";import"./scroll.54c27fbd.js";import"./debounce.730e1961.js";import"./index.b68af8a1.js";import"./validator.1bcd6e6a.js";import"./index.bf8ed8c6.js";import"./refs.d2253dd4.js";const ne=B({props:{modelValue:{type:Boolean}},emits:["update:modelValue","createSuccess"],setup(k,{emit:i}){const{t:r}=I(),y=q(),u=d(!0),f=d(),_={TTL:[U(r("common.valueRequiredTips"))],value:[U(r("common.valueRequiredTips"))],host:[O]},p=d(),e=d({id:X(),domain:f.value,type:"",host:"",value:"",priority:0,TTL:10}),s=d(),v=d(),b=()=>g(this,null,function*(){e.value.domain=y.query.domainName,v.value=yield z(),s.value=yield A()}),n=()=>g(this,null,function*(){var x;yield(x=p.value)==null?void 0:x.validate(),yield J(e.value),i("createSuccess"),u.value=!1});return b(),(x,l)=>{const L=Y,T=Z,C=oe,S=le,M=ee,h=te;return c(),w(h,{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=o=>u.value=o),width:"600px","close-on-click-modal":!1,title:m(r)("common.addRecord"),onClosed:l[8]||(l[8]=o=>i("update:modelValue",!1))},{footer:a(()=>[t(Q,{"confirm-label":m(r)("common.create"),onConfirm:n,onCancel:l[6]||(l[6]=o=>u.value=!1)},null,8,["confirm-label"])]),default:a(()=>[t(M,{ref_key:"form",ref:p,class:"el-form--label-normal",model:e.value,rules:m(_),"label-position":"top",onSubmit:l[5]||(l[5]=G(()=>{},["prevent"]))},{default:a(()=>[t(T,{label:m(r)("common.hostRecord"),prop:"host"},{default:a(()=>[t(L,{modelValue:e.value.host,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.host=o)},{append:a(()=>[R(V(e.value.domain),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(T,{label:m(r)("common.recordType")},{default:a(()=>[t(S,{modelValue:e.value.type,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.type=o),class:"w-full",placeholder:" "},{default:a(()=>[(c(!0),D(N,null,$(v.value,o=>(c(),w(C,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(T,{prop:"value",label:m(r)("common.recordValue")},{default:a(()=>[t(L,{modelValue:e.value.value,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.value=o)},null,8,["modelValue"])]),_:1},8,["label"]),e.value.type==="MX"?(c(),w(T,{key:0,prop:"priority",label:m(r)("common.priority")},{default:a(()=>[t(L,{modelValue:e.value.priority,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.priority=o)},null,8,["modelValue"])]),_:1},8,["label"])):F("",!0),t(T,{prop:"TTL",label:"TTL"},{default:a(()=>[t(S,{modelValue:e.value.TTL,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.TTL=o),class:"w-full"},{default:a(()=>[(c(!0),D(N,null,$(s.value,o=>(c(),w(C,{key:o.value,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});var me=W(ne,[["__scopeId","data-v-7cd455ec"]]);const ue={class:"p-24"},ie={class:"flex items-center pb-24 space-x-16"},pe={class:"flex items-center"},de={class:"text-blue ellipsis"},ce={class:"text-blue cursor-pointer"},co=B({setup(k){const{t:i}=I(),r=q(),y=j(),u=d(!1),f=d(),_=()=>g(this,null,function*(){f.value=yield K(r.query.domainName)}),p=e=>g(this,null,function*(){const s=e.map(v=>v.id);yield P(s),_()});return _(),(e,s)=>{const v=re,b=se;return c(),D("div",ue,[E("div",ie,[t(v,{round:"",onClick:s[0]||(s[0]=n=>u.value=!0)},{default:a(()=>[E("div",pe,V(m(i)("common.add")),1)]),_:1})]),t(m(H),{data:f.value,"show-check":"",onDelete:p},{default:a(()=>[t(b,{label:m(i)("common.host"),width:"200"},{default:a(({row:n})=>[E("span",de,V(n.host),1)]),_:1},8,["label"]),t(b,{label:m(i)("common.recordType"),width:"200",align:"center"},{default:a(({row:n})=>[R(V(n.type),1)]),_:1},8,["label"]),t(b,{label:m(i)("common.recordValue"),align:"center"},{default:a(({row:n})=>[R(V(n.value),1)]),_:1},8,["label"]),t(b,{label:"TTL",width:"100",align:"center"},{default:a(({row:n})=>[E("span",ce,V(n.ttl),1)]),_:1})]),_:1},8,["data"]),u.value?(c(),w(me,{key:0,modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=n=>u.value=n),onCreateSuccess:_},null,8,["modelValue"])):F("",!0),t(ae,{onCancel:s[2]||(s[2]=n=>m(y).back())})])}}});export{co as default};
