var A=(w,i,e)=>new Promise((k,h)=>{var b=n=>{try{f(e.next(n))}catch(l){h(l)}},v=n=>{try{f(e.throw(n))}catch(l){h(l)}},f=n=>n.done?k(n.value):Promise.resolve(n.value).then(b,v);f((e=e.apply(w,i)).next())});import{g as S}from"./index.b7fc4543.js";import{u as I}from"./template.82c213ad.js";import{g as U}from"./i18n.48bd28ac.js";import{d as L,g as V,c as P,N as q,o as s,a as r,f as a,b as g,w as p,F as x,b6 as _,j as d,u as o,t as c,k as y,n as F,m as z,x as D}from"./url.2e6a77c4.js";import{E as G,a as O}from"./index.0d2684bf.js";import{E as Q,a as W}from"./index.77edae39.js";import{E as H}from"./index.7af8368f.js";import{E as J}from"./windi.a5b0b048.js";import{E as K}from"./index.7034978e.js";import"./replace-all.7cf5f327.js";import"./main.ea42d807.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.fc90f5ad.js";import"./event.776e7e11.js";import"./index.ff0264f3.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./index.379e80ad.js";import"./focus-trap.23f44899.js";import"./event.53b2ad83.js";import"./index.a439b087.js";import"./index.fcc3ea42.js";import"./scroll.f51de5d8.js";import"./isEqual.f1ae9fb3.js";import"./_baseIsEqual.c0d7e77a.js";import"./debounce.61c67278.js";import"./toNumber.574be4f1.js";import"./index.064c7de9.js";import"./validator.e2869aba.js";var M="/_Admin/assets/no_template@2x.152a53c3.png";const R=["loading"],X={class:"max-w-1120px mx-auto py-16px dark:text-999 flex items-center gap-16px template-header"},Y={class:"text-16px font-normal text-[#192845] dark:text-[#cfd3dc]"},Z={class:"flex items-center h-21px"},ee={class:"text-blue text-sm font-normal text-#0087C2"},te={class:"ml-4 text-[#8BA5B0] text-sm font-normal"},oe={class:"text-16px font-normal text-[#192845] dark:text-[#cfd3dc]"},ae={class:"flex items-center h-21px"},le={class:"ml-4 text-[#8BA5B0] text-sm font-normal"},se={class:"max-w-1120px mx-auto py-16px flex flex-wrap items-center gap-8px"},ne={class:"text-[#8BA5B0] text-m"},re={class:"text-m text-[#2F2E41] dark:text-[#fffa]"},ce={class:"text-[#8BA5B0] text-m"},pe={class:"text-m text-[#2F2E41] dark:text-[#fffa]"},de={class:"w-full"},ie={key:0,class:"w-full grid gap-16 grid-cols-4 py-8"},me={class:"bg-fff dark:bg-666 dark:text-fff p-8"},ue={class:"px-4 py-4 flex justify-between items-center"},xe=["title"],fe={class:"ml-4 text-s text-666 dark:text-fff","data-cy":"downloads"},ge={key:1,class:"flex items-center justify-center mt-100px","data-cy":"no-matching-template"},_e=a("img",{src:M,class:"w-360px h-230px"},null,-1),ye={class:"text-center text-m text-999 mt-36px"},he={key:0,class:"my-24"},Xe=L({setup(w){const{t:i}=U(),e=I(),k=V(),h=V(!1),b=()=>A(this,null,function*(){try{yield e.changePage(e.pagedTemplate.pageNr),k.value=yield S()}catch(n){console.error(n)}finally{h.value=!0}}),v=P(()=>{var n,l,m;return(m=(l=(n=e==null?void 0:e.pagedTemplate)==null?void 0:n.facets)==null?void 0:l.find(u=>u.name==="category"))==null?void 0:m.labels}),f=P(()=>{var n,l,m;return(m=(l=(n=e==null?void 0:e.pagedTemplate)==null?void 0:n.facets)==null?void 0:l.find(u=>u.name==="color"))==null?void 0:m.labels});return b(),(n,l)=>{const m=G,u=O,E=Q,B=W,T=H,C=J,$=q("router-link"),N=K;return s(),r(x,null,[a("div",{class:"w-full bg-fff dark:bg-[#333] shadow-s-10",loading:h.value},[a("header",X,[g(u,{modelValue:o(e).currentType,"onUpdate:modelValue":[l[0]||(l[0]=t=>o(e).currentType=t),l[1]||(l[1]=t=>o(e).changePage(1))]},{default:p(()=>[(s(!0),r(x,null,_(k.value,t=>(s(),d(m,{key:t.key,label:t.value,value:t.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),["","Site"].includes(o(e).currentType)?(s(),d(u,{key:0,class:"hidden-input"},{prefix:p(()=>[a("span",Y,c(o(i)("common.topics")),1)]),empty:p(()=>[o(v)?(s(),d(B,{key:0,modelValue:o(e).category,"onUpdate:modelValue":[l[2]||(l[2]=t=>o(e).category=t),l[3]||(l[3]=t=>o(e).changePage(1))],class:"p-24px flex-1 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-16px k-checkbox-group"},{default:p(()=>[(s(!0),r(x,null,_(o(v),t=>(s(),d(E,{key:t.name,label:t.name},{default:p(()=>[a("div",Z,[a("span",ee,c(t.name),1),a("span",te,"("+c(t.count)+")",1)])]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])):(s(),d(T,{key:1,class:"w-min-700px"}))]),_:1})):y("",!0),["","Site"].includes(o(e).currentType)?(s(),d(u,{key:1,class:"hidden-input"},{prefix:p(()=>[a("span",oe,c(o(i)("common.color")),1)]),empty:p(()=>[o(f)?(s(),d(B,{key:0,modelValue:o(e).color,"onUpdate:modelValue":[l[4]||(l[4]=t=>o(e).color=t),l[5]||(l[5]=t=>o(e).changePage(1))],class:"p-24px flex-1 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-16px k-checkbox-group"},{default:p(()=>[(s(!0),r(x,null,_(o(f),t=>(s(),d(E,{key:t.name,label:t.name},{default:p(()=>[a("div",ae,[a("div",{class:F(["w-[20px] h-[20px] rounded-full",{"border border-[#B1C5CE]":t.name=="White"}]),style:z({background:t.name})},null,6),a("span",le,"("+c(t.count)+")",1)])]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])):(s(),d(T,{key:1,class:"w-min-700px"}))]),_:1})):y("",!0)])],8,R),a("div",se,[o(e).category.length?(s(!0),r(x,{key:0},_(o(e).category,t=>(s(),r("div",{key:t,class:"h-42px px-[32px] bg-fff dark:bg-[#333] rounded-[21px] border border-[#8CA6B1] flex items-center gap-8px"},[a("span",ne,c(o(i)("common.topics"))+" : ",1),a("span",re,c(t),1),g(C,{class:"iconfont icon-close text-16px cursor-pointer ml-auto text-[#8CA6B1] hover:text-[#2F2E41] dark:text-[#fffa] dark:hover:text-[#fffd]",onClick:j=>o(e).removeCategory(t)},null,8,["onClick"])]))),128)):y("",!0),o(e).color.length?(s(!0),r(x,{key:1},_(o(e).color,t=>(s(),r("div",{key:t,class:"h-42px px-[32px] bg-fff dark:bg-[#333] rounded-[21px] border border-[#8CA6B1] flex items-center gap-8px"},[a("span",ce,c(o(i)("common.color"))+" : ",1),a("span",pe,c(t),1),g(C,{class:"iconfont icon-close text-16px cursor-pointer ml-auto text-[#8CA6B1] hover:text-[#2F2E41] dark:text-[#fffa] dark:hover:text-[#fffd]",onClick:j=>o(e).removeColor(t)},null,8,["onClick"])]))),128)):y("",!0),o(e).category.length||o(e).color.length?(s(),r("div",{key:2,class:"text-sm text-[#8CA6B1] cursor-pointer hover:text-blue ml-[12px] h-[42px] flex items-center",onClick:l[6]||(l[6]=t=>o(e).clearAll())},c(o(i)("common.clearAll")),1)):y("",!0)]),a("div",de,[a("div",{class:F(["max-w-1120px mx-auto",o(e).pagedTemplate.totalPages>1?"":"mb-24"])},[o(e).pagedTemplate.list.length?(s(),r("div",ie,[(s(!0),r(x,null,_(o(e).pagedTemplate.list,t=>(s(),r("div",{key:t.id,class:"w-full h-214px"},[g($,{class:"h-full w-full flex flex-col shadow-s-10 overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-m-20 rounded-xl",to:{name:"template-detail",query:{templateId:t.id,currentFolder:o(D)("currentFolder")}},"data-cy":"template"},{default:p(()=>[a("div",{class:"dark:bg-666 bg-fff flex-1 bg-no-repeat bg-cover",style:z({backgroundImage:`url(${t.thunbnailUrl})`})},null,4),a("div",me,[a("div",ue,[a("span",{class:"text-m max-w-150px ellipsis",title:t.name,"data-cy":"template-name"},c(t.name),9,xe),a("div",null,[g(C,{class:"iconfont icon-xiazai-wenjianxiazai-05 h-full"}),a("span",fe,c(t.downloadCount),1)])])])]),_:2},1032,["to"])]))),128))])):(s(),r("div",ge,[a("div",null,[_e,a("div",ye,c(o(i)("common.noTemplate")),1)])]))],2)]),o(e).pagedTemplate.totalPages>1?(s(),r("div",he,[g(N,{layout:"prev, pager, next,jumper","page-size":o(e).pagedTemplate.pageSize,"page-count":o(e).pagedTemplate.totalPages,"current-page":o(e).pagedTemplate.pageNr,onCurrentChange:o(e).changePage},null,8,["page-size","page-count","current-page","onCurrentChange"])])):y("",!0)],64)}}});export{Xe as default};
