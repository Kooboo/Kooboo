var ie=Object.defineProperty;var te=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var oe=(V,a,o)=>a in V?ie(V,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):V[a]=o,ae=(V,a)=>{for(var o in a||(a={}))de.call(a,o)&&oe(V,o,a[o]);if(te)for(var o of te(a))me.call(a,o)&&oe(V,o,a[o]);return V};var J=(V,a,o)=>new Promise((c,f)=>{var i=b=>{try{r(o.next(b))}catch(y){f(y)}},_=b=>{try{r(o.throw(b))}catch(y){f(y)}},r=b=>b.done?c(b.value):Promise.resolve(b.value).then(i,_);r((o=o.apply(V,a)).next())});import{_ as ee}from"./icon-button.3313e42d.js";import{_ as j}from"./tooltip.28a451cc.js";import{u as Y,h as re,m as ce,E as pe,n as fe,o as ve,p as _e,b as be}from"./main.ea42d807.js";import{d as Ve,g as M,w as ye}from"./i18n.48bd28ac.js";import{r as ge}from"./index.0f940e7f.js";import{g as E,d as L,b7 as xe,u as e,o as v,a as U,f as d,b as t,w as s,aH as O,t as S,F as T,b6 as R,j as h,k,e as he,i as q,r as Se,c as X,c0 as ke,az as Ce,h as we,J as Ue,cj as Pe}from"./url.2e6a77c4.js";import{E as G}from"./index.fc90f5ad.js";import{E as I,a as $e}from"./index.6855d037.js";import{E as H,a as K}from"./index.0d2684bf.js";import{E as Q}from"./index.cbddf8eb.js";import{E as Ee}from"./windi.a5b0b048.js";import{E as ne}from"./index.2bc50276.js";import{E as Te}from"./index.470f0e7e.js";import{_ as Le}from"./key-value-editor.b270c5cd.js";import{b as F,a as De}from"./replace-all.7cf5f327.js";import{E as se}from"./index.d4bbb472.js";import{M as Re}from"./media-dialog.00ce8f4f.js";import"./validate.efc4a5c0.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.f6d26366.js";import{_ as Oe}from"./index.a731e53b.js";import{_ as Ie,a as Me}from"./dev-mode.c4133b5a.js";import{U as Ne}from"./editor.main.d2800f63.js";import{b as Ae,a as Be}from"./index.695d0284.js";import{E as Je}from"./index.c4e9b529.js";import{T as Fe}from"./index.f83f40c4.js";import{c as qe}from"./country-and-region-codes.c36488d2.js";import{E as ze}from"./index.580f48c7.js";import{u as We}from"./use-save-tip.04d9878f.js";const l=E(),Z=Y(),je=Ve.global.t,D={},Ge=["application/zip","application/x-zip","application/octet-stream","application/x-zip-compressed"],ue=()=>J(void 0,null,function*(){l.value=JSON.parse(JSON.stringify(Z.site))}),He=V=>J(void 0,null,function*(){if(V.name.indexOf(".")>-1&&V.name.split(".").reverse()[0]==="zip"){const a=new FormData;a.append("file",V.raw),yield ce(a),yield Z.loadSite(),ue()}else pe.error(je("common.fileFormatIsIncorrect"))}),io=()=>J(void 0,null,function*(){var a,o;(a=l.value)!=null&&a.specialPath&&(l.value.specialPath=Array.from(new Set(l.value.specialPath.filter(c=>c.trim()!==""))));const V=JSON.parse(JSON.stringify(l.value));D.onPwaSave(V),D.onMultilingualSave(V),(o=D.onVisitorCountryRestrictionsSave)==null||o.call(D,V),D.onLighthouseSave(V),D.onCustomSettingsSave(V),yield re(V),Z.loadSite(),Z.loadSites(),ge()}),Ke={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px"},Ye={class:"max-w-504px"},Qe={class:"flex items-center"},Xe={key:0,class:"!-ml-56px !-mr-56px !px-56px bg-[#fafafa] dark:bg-[#333]"},Ze={class:"max-w-504px py-16 mb-18px"},el={class:"space-y-8 w-full"},ll={class:"max-w-504px"},tl={class:"flex items-center space-x-16"},ol=L({emits:["export","initSite"],setup(V,{emit:a}){const{t:o}=M(),c=E();fe().then(y=>c.value=y);const f=E({o:"private",p:"public",m:"member"}),i=y=>J(this,null,function*(){yield He(y),a("initSite")}),_=()=>{Array.isArray(l.value.specialPath)||(l.value.specialPath=[]),l.value.specialPath.push("")},r=y=>{l.value.specialPath.splice(y,1)},b=E([{value:!0,name:"Contain",title:o("common.IncludePath")},{value:!1,name:"Exclude",title:o("common.ExcludePath")}]);return(y,u)=>{const n=G,m=I,g=j,x=H,p=K,w=ee,P=Q,B=Ee,C=ne,W=Te,N=xe("hasPermission");return e(l)?(v(),U("div",Ke,[d("div",Ye,[t(m,{label:e(o)("common.displayName")},{default:s(()=>[t(n,{modelValue:e(l).displayName,"onUpdate:modelValue":u[0]||(u[0]=$=>e(l).displayName=$),"data-cy":"display-name"},null,8,["modelValue"])]),_:1},8,["label"]),t(m,null,{label:s(()=>[d("div",Qe,[O(S(e(o)("common.defaultDatabase"))+" ",1),t(g,{tip:e(o)("common.defaultDataBaseTips"),"custom-class":"ml-4"},null,8,["tip"])])]),default:s(()=>[t(p,{modelValue:e(l).defaultDatabase,"onUpdate:modelValue":u[1]||(u[1]=$=>e(l).defaultDatabase=$),class:"w-full"},{default:s(()=>[t(x,{value:"Auto",label:e(o)("common.auto"),"data-cy":"auto"},null,8,["label"]),t(x,{value:"Sqlite",label:"Sqlite","data-cy":"sqlite"}),t(x,{value:"Mysql",label:"Mysql","data-cy":"mysql"}),t(x,{value:"SqlServer",label:"SqlServer","data-cy":"sqlserver"})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:e(o)("common.siteType")},{default:s(()=>[t(p,{modelValue:e(l).siteType,"onUpdate:modelValue":u[2]||(u[2]=$=>e(l).siteType=$),class:"w-full","data-cy":"site-type"},{default:s(()=>[(v(!0),U(T,null,R(c.value,($,A)=>(v(),h(x,{key:A,value:A,label:$,"data-cy":f.value[A]},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),e(l).siteType!=="p"?(v(),U("div",Xe,[d("div",Ze,[t(m,{label:e(o)("common.PathPattern")},{default:s(()=>[t(p,{modelValue:e(l).includePath,"onUpdate:modelValue":u[3]||(u[3]=$=>e(l).includePath=$),class:"w-full","data-cy":"site-type"},{default:s(()=>[(v(!0),U(T,null,R(b.value,($,A)=>(v(),h(x,{key:A,value:$.value,label:$.title,"data-cy":$.title},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(m,{label:e(o)("common.path")},{default:s(()=>[d("div",el,[(v(!0),U(T,null,R(e(l).specialPath,($,A)=>(v(),U("div",{key:A,class:"flex items-center space-x-8 w-full"},[t(n,{modelValue:e(l).specialPath[A],"onUpdate:modelValue":le=>e(l).specialPath[A]=le,placeholder:e(o)("common.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),d("div",null,[t(w,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:e(o)("common.delete"),onClick:le=>r(A)},null,8,["tip","onClick"])])]))),128)),t(w,{circle:"",class:"text-blue",icon:"icon-a-addto ",tip:e(o)("common.add"),onClick:_},null,8,["tip"])])]),_:1},8,["label"]),t(m,{label:e(o)("common.singleSignOn")},{default:s(()=>[t(P,{modelValue:e(l).ssoLogin,"onUpdate:modelValue":u[4]||(u[4]=$=>e(l).ssoLogin=$)},null,8,["modelValue"])]),_:1},8,["label"])])])):k("",!0),d("div",ll,[t(m,{label:"Base URL"},{default:s(()=>[t(n,{modelValue:e(l).previewUrl,"onUpdate:modelValue":u[5]||(u[5]=$=>e(l).previewUrl=$),"data-cy":"base-url"},null,8,["modelValue"])]),_:1}),t(m,{label:e(o)("common.import/exportSite")},{default:s(()=>[d("div",tl,[t(W,{"show-file-list":!1,action:"",accept:e(Ge).join(","),"auto-upload":!1,"on-change":i,"data-cy":"import-package"},{default:s(()=>[t(C,{round:""},{default:s(()=>[t(B,{class:"iconfont icon-a-Pullin"}),O(" "+S(e(o)("common.importPackage")),1)]),_:1})]),_:1},8,["accept"]),he((v(),h(C,{round:"","data-cy":"export-site",onClick:u[6]||(u[6]=$=>y.$emit("export"))},{default:s(()=>[t(B,{class:"iconfont icon-share"}),O(" "+S(e(o)("common.exportSite")),1)]),_:1})),[[N,{feature:"site",action:"export"}]])])]),_:1},8,["label"])])])):k("",!0)}}}),al={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 py-24 px-56px"},nl={class:"max-w-504px"},sl={class:"flex items-center"},ul=L({setup(V){const{t:a}=M(),o=E([]);if(D.onCustomSettingsSave=c=>{c.customSettings=F(o.value)},l.value)for(const c in l.value.customSettings)o.value.push({key:c,value:l.value.customSettings[c]});return q(()=>o.value,()=>{l.value&&(l.value.customSettings=F(o.value))},{deep:!0}),(c,f)=>{const i=j,_=Le,r=I;return e(l)?(v(),U("div",al,[d("div",nl,[t(r,null,{label:s(()=>[d("div",sl,[O(S(e(a)("common.customSettings"))+" ",1),t(i,{tip:e(a)("common.customSettingsTips"),"custom-class":"ml-4"},null,8,["tip"])])]),default:s(()=>[t(_,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=b=>o.value=b)},null,8,["modelValue"])]),_:1})])])):k("",!0)}}}),il={class:"flex items-center flex-1 max-w-504px"},dl={class:"font-bold dark:text-fff/86"},ml=d("div",{class:"flex-1"},null,-1),rl={key:0,class:"!-ml-56px !-mr-56px !px-56px bg-[#fafafa] dark:bg-[#333]"},cl={class:"max-w-504px py-16 mb-18px"},z=L({props:{modelValue:{type:Boolean},label:null,tooltipLabel:null},emits:["update:modelValue"],setup(V,{emit:a}){return(o,c)=>{const f=j,i=Q,_=I;return e(l)?(v(),U(T,{key:0},[t(_,null,{default:s(()=>[d("div",il,[d("span",dl,S(V.label),1),V.tooltipLabel?(v(),h(f,{key:0,tip:V.tooltipLabel,"custom-class":"ml-4"},null,8,["tip"])):k("",!0),ml,t(i,{"model-value":V.modelValue,"data-cy":V.label.replace(/\s+/g,"-"),"onUpdate:modelValue":c[0]||(c[0]=r=>a("update:modelValue",!!r))},null,8,["model-value","data-cy"])])]),_:1}),V.modelValue?(v(),U("div",rl,[d("div",cl,[Se(o.$slots,"default")])])):k("",!0)],64)):k("",!0)}}}),pl=L({setup(V){const{t:a}=M();return(o,c)=>{const f=H,i=K,_=I,r=se;return e(l)?(v(),h(z,{key:0,modelValue:e(l).codeLogSettings.enable,"onUpdate:modelValue":c[2]||(c[2]=b=>e(l).codeLogSettings.enable=b),label:e(a)("common.codeLog")},{default:s(()=>[t(_,{label:e(a)("codelog.level")},{default:s(()=>[t(i,{modelValue:e(l).codeLogSettings.logLevel,"onUpdate:modelValue":c[0]||(c[0]=b=>e(l).codeLogSettings.logLevel=b),class:"w-full","data-cy":"level"},{default:s(()=>[t(f,{value:"Debug",label:e(a)("common.debug"),"data-cy":"Debug"},null,8,["label"]),t(f,{value:"Information",label:e(a)("common.information"),"data-cy":"Information"},null,8,["label"]),t(f,{value:"Warning",label:e(a)("common.warning"),"data-cy":"Warning"},null,8,["label"]),t(f,{value:"Error",label:e(a)("common.error"),"data-cy":"Error"},null,8,["label"]),t(f,{value:"Critical",label:e(a)("common.critical"),"data-cy":"Critical"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(_,{label:e(a)("common.keepDays")},{default:s(()=>[t(r,{modelValue:e(l).codeLogSettings.keepDays,"onUpdate:modelValue":c[1]||(c[1]=b=>e(l).codeLogSettings.keepDays=b),precision:0,min:1,"data-cy":"keey-days"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):k("",!0)}}}),fl=L({setup(V){const{t:a}=M();return(o,c)=>{const f=se,i=I;return e(l)?(v(),h(z,{key:0,modelValue:e(l).enableImageBrowserCache,"onUpdate:modelValue":c[1]||(c[1]=_=>e(l).enableImageBrowserCache=_),label:e(a)("common.imageBrowserCache")},{default:s(()=>[t(i,{label:e(a)("common.numberOfExpirationDaysAndUseVersionControl")},{default:s(()=>[t(f,{modelValue:e(l).imageCacheDays,"onUpdate:modelValue":c[0]||(c[0]=_=>e(l).imageCacheDays=_),precision:0,min:-1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):k("",!0)}}}),vl={class:"flex items-center w-full"},_l={class:"mr-auto"},bl={class:"mr-12 text-666 flex items-center"},Vl={key:0,class:"w-full"},yl={class:"text-666 font-bold"},gl=L({setup(V){const{t:a}=M(),o=E([]);D.onLighthouseSave=f=>{c(f)};const c=f=>{const i=[];for(const _ of o.value){const r={};if(_.setting)for(const b of _.setting)r[b.name]=b.value;i.push({name:_.name,enable:_.enable,setting:r})}f.lighthouseSettingsJson=JSON.stringify(i)};if(l.value){const f=JSON.parse(l.value.lighthouseSettingsJson||"[]");ve().then(i=>{for(const _ of i){const r=f.find(b=>b.name===_.name);if(r){_.enable=r.enable;for(const b in r.setting){const y=_.setting.find(u=>u.name===b);y&&(y.value=r[b])}}else _.enable=!0;o.value.push(_)}})}return q(()=>o.value,()=>{l.value&&l.value.lighthouseSettingsJson!==null&&c(l.value)},{deep:!0}),(f,i)=>{const _=j,r=Q,b=G,y=I;return e(l)&&o.value.length?(v(),h(z,{key:0,modelValue:e(l).enableLighthouseOptimization,"onUpdate:modelValue":i[0]||(i[0]=u=>e(l).enableLighthouseOptimization=u),label:e(a)("common.lighthouseOptimization")},{default:s(()=>[(v(!0),U(T,null,R(o.value,u=>(v(),h(y,{key:u.name},{default:s(()=>[d("div",vl,[d("div",_l,[d("div",bl,[O(S(u.name)+" ",1),t(_,{tip:u.description,"custom-class":"ml-4"},null,8,["tip"])])]),t(r,{modelValue:u.enable,"onUpdate:modelValue":n=>u.enable=n},null,8,["modelValue","onUpdate:modelValue"])]),u.enable?(v(),U("div",Vl,[(v(!0),U(T,null,R(u.setting,n=>(v(),U("div",{key:n.name,class:"mt-18px"},[d("span",yl,S(n.displayName||n.name),1),n.controlType==="Text"?(v(),h(b,{key:0,modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),n.controlType==="Number"?(v(),h(b,{key:1,modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,modelModifiers:{number:!0},class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),n.controlType==="Switch"?(v(),h(r,{key:2,modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:"float-right"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0)]))),128))])):k("",!0)]),_:2},1024))),128))]),_:1},8,["modelValue","label"])):k("",!0)}}}),xl=["src"],hl={class:"space-y-4"},Sl={class:"px-12"},kl=L({setup(V){const{t:a}=M(),o=E(),c=E(),f=E(!1),i=Y();l.value&&(o.value=JSON.parse(l.value.pwa.manifest),c.value=JSON.parse(l.value.pwa.serviceWorker)),D.onPwaSave=u=>{u.pwa.manifest=JSON.stringify(o.value),u.pwa.serviceWorker=JSON.stringify(c.value)};const _=()=>{c.value.CacheSettings.push({Method:"get",Pattern:"",ExpiresIn:0})},r=u=>{c.value.CacheSettings.splice(u,1)},b=X(()=>De(o.value.icons[0].src)),y=u=>{if(u.length===1)for(const n of o.value.icons){n.src=u[0].url;let m=u[0].height,g=u[0].width;m||(m=32),g||(g=32),n.sizes=`${m}x${g}`}f.value=!1};return q(()=>o.value,()=>{l.value&&(l.value.pwa.manifest=JSON.stringify(o.value))},{deep:!0}),q(()=>c.value,()=>{l.value&&(l.value.pwa.serviceWorker=JSON.stringify(c.value))},{deep:!0}),(u,n)=>{const m=I,g=G,x=H,p=K,w=ee;return e(l)&&o.value?(v(),h(z,{key:0,modelValue:e(l).pwa.enable,"onUpdate:modelValue":n[7]||(n[7]=P=>e(l).pwa.enable=P),label:"PWA"},{default:s(()=>[t(m,{label:e(a)("common.icon")},{default:s(()=>[d("div",{class:"w-88px h-88px rounded-4px bg-gray flex items-center justify-center",onClick:n[0]||(n[0]=P=>f.value=!0)},[d("img",{src:e(ke)(e(i).site.baseUrl,e(b))},null,8,xl)])]),_:1},8,["label"]),t(m,{label:e(a)("common.name")},{default:s(()=>[t(g,{modelValue:o.value.name,"onUpdate:modelValue":n[1]||(n[1]=P=>o.value.name=P),placeholder:e(a)("common.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{label:e(a)("common.themeColor")},{default:s(()=>[t(g,{modelValue:o.value.theme_color,"onUpdate:modelValue":n[2]||(n[2]=P=>o.value.theme_color=P),placeholder:e(a)("common.themeColor")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{label:e(a)("common.bgColor")},{default:s(()=>[t(g,{modelValue:o.value.background_color,"onUpdate:modelValue":n[3]||(n[3]=P=>o.value.background_color=P),placeholder:e(a)("common.bgColor")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{label:e(a)("common.startUrl")},{default:s(()=>[t(g,{modelValue:o.value.start_url,"onUpdate:modelValue":n[4]||(n[4]=P=>o.value.start_url=P),placeholder:e(a)("common.startUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{label:e(a)("common.display")},{default:s(()=>[t(p,{modelValue:o.value.display,"onUpdate:modelValue":n[5]||(n[5]=P=>o.value.display=P),class:"w-full"},{default:s(()=>[t(x,{value:"fullscreen",label:"fullscreen"}),t(x,{value:"standalone",label:"standalone"}),t(x,{value:"minimal-ui",label:"minimal-ui"}),t(x,{value:"browser",label:"browser"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(m,{label:"Service worker"},{default:s(()=>[d("div",hl,[(v(!0),U(T,null,R(c.value.CacheSettings,(P,B)=>(v(),U("div",{key:B,class:"flex items-center space-x-4"},[t(p,{modelValue:P.Method,"onUpdate:modelValue":C=>P.Method=C,class:"w-120px"},{default:s(()=>[t(x,{value:"get",label:"GET"}),t(x,{value:"put",label:"PUT"}),t(x,{value:"post",label:"POST"}),t(x,{value:"delete",label:"DELETE"}),t(x,{value:"head",label:"HEAD"}),t(x,{value:"any",label:"ALL"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),t(g,{modelValue:P.Pattern,"onUpdate:modelValue":C=>P.Pattern=C,class:"w-220px",placeholder:e(a)("common.exampleUrl")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),t(g,{modelValue:P.ExpiresIn,"onUpdate:modelValue":C=>P.ExpiresIn=C,modelModifiers:{number:!0},class:"w-150px"},{append:s(()=>[d("span",Sl,S(e(a)("common.minutes")),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),d("div",null,[t(w,{circle:"",class:"text-orange",icon:"icon-delete",tip:e(a)("common.delete"),onClick:C=>r(B)},null,8,["tip","onClick"])])]))),128)),t(w,{circle:"",class:"text-blue",icon:"icon-a-addto",tip:e(a)("common.add"),onClick:_},null,8,["tip"])])]),_:1}),f.value?(v(),h(e(Re),{key:0,modelValue:f.value,"onUpdate:modelValue":n[6]||(n[6]=P=>f.value=P),onChoose:y},null,8,["modelValue"])):k("",!0)]),_:1},8,["modelValue"])):k("",!0)}}}),Cl={class:"space-y-4 w-full"},wl={class:"flex items-center w-full"},Ul={class:"font-bold text-666"},Pl=d("div",{class:"flex-1"},null,-1),$l={key:0,class:"space-y-4"},El={class:"px-12 text-999"},Tl={class:"font-bold text-666"},Ll=d("div",{class:"flex-1"},null,-1),Dl=L({setup(V){const{t:a}=M(),o=E([]),c=E([]),f=E([]);if(D.onMultilingualSave=u=>{u.enableMultilingual||(u.enableSitePath=!1,o.value=o.value.filter(n=>{var m;return n.key===((m=l.value)==null?void 0:m.defaultCulture)}),f.value=f.value.filter(n=>{var m;return n.key===((m=l.value)==null?void 0:m.defaultCulture)})),u.culture=F(o.value),u.sitePath=F(f.value)},l.value){for(const u in l.value.sitePath)f.value.push({key:u,value:l.value.sitePath[u]});for(const u in l.value.culture)o.value.push({key:u,value:l.value.culture[u]}),f.value.find(m=>m.key===u)||f.value.push({key:u,value:u});_e().then(u=>{for(const n in u)c.value.push({key:n,value:u[n]})})}const i=X(()=>{const u=[];for(const n of c.value)o.value.find(m=>m.key===n.key)||u.push(n);return u}),_=()=>{if(!i.value.length)return;const u=i.value[0];o.value.push(ae({},u)),y()},r=u=>{o.value.splice(u,1),y()},b=u=>{var m;const n=(m=c.value.find(g=>g.key===u))==null?void 0:m.value;if(n){const g=o.value.find(x=>x.key===u);g&&(g.value=n)}y()},y=()=>{var u;for(const n of f.value.map(m=>m.key))o.value.find(m=>m.key===n)||(f.value=f.value.filter(m=>m.key!==n));for(const n of o.value)f.value.find(m=>m.key===n.key)||f.value.push({key:n.key,value:n.key});l.value&&!o.value.find(n=>{var m;return n.key===((m=l.value)==null?void 0:m.defaultCulture)})&&(l.value.defaultCulture=(u=o.value[0])==null?void 0:u.key)};return q(()=>o.value,()=>{l.value&&(l.value.culture=F(o.value))},{deep:!0}),q(()=>f.value,()=>{l.value&&(l.value.sitePath=F(f.value))},{deep:!0}),(u,n)=>{const m=H,g=K,x=G,p=ee,w=I,P=j,B=Q;return e(l)?(v(),h(z,{key:0,modelValue:e(l).enableMultilingual,"onUpdate:modelValue":n[3]||(n[3]=C=>e(l).enableMultilingual=C),label:e(a)("common.multilingual")},{default:s(()=>[t(w,null,{default:s(()=>[d("div",Cl,[(v(!0),U(T,null,R(o.value,(C,W)=>(v(),U("div",{key:W,class:"flex items-center space-x-4"},[t(g,{modelValue:C.key,"onUpdate:modelValue":N=>C.key=N,onChange:b},{default:s(()=>[(v(!0),U(T,null,R(e(i),N=>(v(),h(m,{key:N.key,value:N.key,label:N.key},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),t(x,{modelValue:C.value,"onUpdate:modelValue":N=>C.value=N,placeholder:e(a)("common.value")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),d("div",null,[o.value.length>1?(v(),h(p,{key:0,circle:"",class:"text-orange",icon:"icon-delete",tip:e(a)("common.delete"),onClick:N=>r(W)},null,8,["tip","onClick"])):k("",!0)])]))),128)),e(i).length?(v(),h(p,{key:0,circle:"",class:"text-blue",icon:"icon-a-addto",tip:e(a)("common.add"),onClick:_},null,8,["tip"])):k("",!0)])]),_:1}),t(w,{label:e(a)("common.defaultLanguage")},{default:s(()=>[t(g,{modelValue:e(l).defaultCulture,"onUpdate:modelValue":n[0]||(n[0]=C=>e(l).defaultCulture=C),class:"w-full"},{default:s(()=>[(v(!0),U(T,null,R(o.value,C=>(v(),h(m,{key:C.key,value:C.key,label:C.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(w,null,{default:s(()=>[d("div",wl,[d("span",Ul,S(e(a)("common.languagePath")),1),t(P,{tip:e(a)("common.languagePathTips"),"custom-class":"ml-4"},null,8,["tip"]),Pl,t(B,{modelValue:e(l).enableSitePath,"onUpdate:modelValue":n[1]||(n[1]=C=>e(l).enableSitePath=C)},null,8,["modelValue"])]),e(l).enableSitePath?(v(),U("div",$l,[(v(!0),U(T,null,R(f.value,C=>(v(),U("div",{key:C.key},[t(x,{modelValue:C.value,"onUpdate:modelValue":W=>C.value=W},{suffix:s(()=>[d("span",El,S(C.key),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])):k("",!0)]),_:1}),t(w,null,{default:s(()=>[d("span",Tl,S(e(a)("common.autoDetectCulture")),1),Ll,t(B,{modelValue:e(l).autoDetectCulture,"onUpdate:modelValue":n[2]||(n[2]=C=>e(l).autoDetectCulture=C)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","label"])):k("",!0)}}}),Rl={class:"flex items-center justify-between w-full"},Ol=L({setup(V){const{t:a}=M(),o=E(!1),c=E("");function f(){!l.value||(l.value.sitemapSettings.code=c.value,o.value=!1)}function i(){!l.value||(o.value=!0,c.value=l.value.sitemapSettings.code)}return(_,r)=>{const b=G,y=I,u=Ae,n=Be,m=ne,g=Oe,x=Je;return e(l)?(v(),h(z,{key:0,modelValue:e(l).sitemapSettings.enable,"onUpdate:modelValue":r[6]||(r[6]=p=>e(l).sitemapSettings.enable=p),label:e(a)("common.sitemap"),"tooltip-label":e(a)("common.sitemapTips")},{default:s(()=>[t(y,{label:e(a)("common.path")},{default:s(()=>[t(b,{modelValue:e(l).sitemapSettings.path,"onUpdate:modelValue":r[0]||(r[0]=p=>e(l).sitemapSettings.path=p)},null,8,["modelValue"])]),_:1},8,["label"]),t(y,{label:e(a)("common.generateType")},{default:s(()=>[d("div",Rl,[t(n,{modelValue:e(l).sitemapSettings.autoGenerate,"onUpdate:modelValue":r[1]||(r[1]=p=>e(l).sitemapSettings.autoGenerate=p)},{default:s(()=>[t(u,{label:!0},{default:s(()=>[O(S(e(a)("common.auto")),1)]),_:1}),t(u,{label:!1},{default:s(()=>[O(S(e(a)("common.manual")),1)]),_:1})]),_:1},8,["modelValue"]),e(l).sitemapSettings.autoGenerate?k("",!0):(v(),h(m,{key:0,type:"primary",size:"small",onClick:i},{default:s(()=>[O(S(e(a)("common.editCode")),1)]),_:1}))])]),_:1},8,["label"]),(v(),h(Ce,{to:"body"},[t(x,{"model-value":o.value,"custom-class":"el-dialog--zero-padding",width:"800px","close-on-click-modal":!1,title:e(a)("common.editCode"),onClosed:r[5]||(r[5]=p=>o.value=!1)},{footer:s(()=>[t(g,{onConfirm:f,onCancel:r[4]||(r[4]=p=>o.value=!1)})]),default:s(()=>[d("div",{class:"h-500px",onKeydown:r[3]||(r[3]=ye(()=>{},["stop"]))},[t(Ie,{modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=p=>c.value=p),language:"typescript","k-script":"",uri:e(Ne).file(e(l).id+"sitemap")},null,8,["modelValue","uri"])],32)]),_:1},8,["model-value","title"])]))]),_:1},8,["modelValue","label","tooltip-label"])):k("",!0)}}}),Il=L({setup(V){const{t:a}=M();function o(c){l.value.tinymceSettings[c]=void 0}return(c,f)=>{const i=I;return v(),h(z,{modelValue:e(l).enableTinymceToolbarSettings,"onUpdate:modelValue":f[1]||(f[1]=_=>e(l).enableTinymceToolbarSettings=_),label:e(a)("common.richTextEditorConfigurationForContentType")},{default:s(()=>[t(i,{class:"w-800px mb-0"},{default:s(()=>[e(l).enableTinymceToolbarSettings?(v(),h(Fe,{key:0,modelValue:e(l).tinymceSettings,"onUpdate:modelValue":f[0]||(f[0]=_=>e(l).tinymceSettings=_),onReset:o},null,8,["modelValue"])):k("",!0)]),_:1})]),_:1},8,["modelValue","label"])}}}),Ml=L({setup(V){var y,u;const{locale:a,t:o}=M(),c=E([]),f=X(()=>a.value==="zh"?"nameCN":"name"),{list:i,load:_}=Me(),r=E(i);D.onVisitorCountryRestrictionsSave=n=>{n.visitorCountryRestrictions=F(c.value.map(m=>{var g,x;return{key:m,value:(x=(g=l.value)==null?void 0:g.visitorCountryRestrictionPage)!=null?x:""}}))},we(()=>J(this,null,function*(){var n;(n=r.value)!=null&&n.length||(r.value=yield _())})),l.value&&(l.value.enableVisitorCountryRestriction=(y=l.value.enableVisitorCountryRestriction)!=null?y:!1,l.value.visitorCountryRestrictionPage=(u=l.value.visitorCountryRestrictionPage)!=null?u:"",l.value.visitorCountryRestrictions&&(c.value=Object.keys(l.value.visitorCountryRestrictions)));const b=X(()=>qe.sort((n,m)=>f.value==="nameCN"?n.namePY.localeCompare(m.namePY):n.name.localeCompare(m.name)));return q(()=>c.value,()=>{l.value&&(l.value.visitorCountryRestrictions=F(c.value.map(n=>{var m,g;return{key:n,value:(g=(m=l.value)==null?void 0:m.visitorCountryRestrictionPage)!=null?g:""}})))},{deep:!0}),(n,m)=>{const g=H,x=K,p=I;return e(l)?(v(),h(z,{key:0,modelValue:e(l).enableVisitorCountryRestriction,"onUpdate:modelValue":m[2]||(m[2]=w=>e(l).enableVisitorCountryRestriction=w),label:e(o)("common.visitorCountryRestriction")},{default:s(()=>[t(p,{label:e(o)("common.countryAndRegion")},{default:s(()=>[t(x,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=w=>c.value=w),multiple:"",filterable:"","default-first-option":"",class:"w-full","data-cy":"VisitorCountryRestriction"},{default:s(()=>[(v(!0),U(T,null,R(e(b),w=>(v(),h(g,{key:w.isoCode,value:w.isoCode.toLowerCase(),label:`${w[e(f)]} (${w.isoCode})`,"data-cy":w.isoCode},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(p,{label:e(o)("common.visitorCountryRestrictionPage")},{default:s(()=>[t(x,{modelValue:e(l).visitorCountryRestrictionPage,"onUpdate:modelValue":m[1]||(m[1]=w=>e(l).visitorCountryRestrictionPage=w),class:"w-full","data-cy":"VisitorCountryRestrictionPage"},{default:s(()=>[t(g,{value:"",label:e(o)("common.default"),"data-cy":"DefaultPage"},null,8,["label"]),(v(!0),U(T,null,R(r.value,w=>(v(),h(g,{key:w.id,value:w.path,label:w.path,"data-cy":w.path},null,8,["value","label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["modelValue","label"])):k("",!0)}}}),Nl={key:0,class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 mb-24 py-24 px-56px"},Al={class:"max-w-504px"},Bl={class:"font-bold dark:text-fff/86"},Jl=d("div",{class:"flex-1"},null,-1),Fl={class:"font-bold dark:text-fff/86"},ql=d("div",{class:"flex-1"},null,-1),zl={class:"max-w-504px"},Wl={class:"font-bold dark:text-fff/86"},jl=d("div",{class:"flex-1"},null,-1),Gl={class:"font-bold dark:text-fff/86"},Hl=d("div",{class:"flex-1"},null,-1),Kl={class:"font-bold dark:text-fff/86"},Yl=d("div",{class:"flex-1"},null,-1),Ql={class:"font-bold dark:text-fff/86"},Xl=d("div",{class:"flex-1"},null,-1),Zl={class:"font-bold dark:text-fff/86"},et=d("div",{class:"flex-1"},null,-1),lt={class:"font-bold dark:text-fff/86"},tt=d("div",{class:"flex-1"},null,-1),ot={class:"font-bold dark:text-fff/86"},at=d("div",{class:"flex-1"},null,-1),nt={class:"max-w-504px"},st=d("span",{class:"font-bold dark:text-fff/86"},"CORS",-1),ut=d("div",{class:"flex-1"},null,-1),it=d("span",{class:"font-bold dark:text-fff/86"},"SPA",-1),dt=d("div",{class:"flex-1"},null,-1),mt={class:"font-bold dark:text-fff/86 text-black"},rt=O("bootstrap-v3"),ct=O("tailwind-v3.1"),pt=O("element-plus-v2.2"),ft=O("amp-v0"),vt={class:"font-bold dark:text-fff/86"},_t=d("div",{class:"flex-1"},null,-1),bt={class:"font-bold dark:text-fff/86"},Vt=d("div",{class:"flex-1"},null,-1),yt={class:"font-bold dark:text-fff/86"},gt=d("div",{class:"flex-1"},null,-1),xt={class:"font-bold dark:text-fff/86"},ht=d("div",{class:"flex-1"},null,-1),St={class:"font-bold dark:text-fff/86"},kt=d("div",{class:"flex-1"},null,-1),Ct={class:"font-bold dark:text-fff/86"},wt=d("div",{class:"flex-1"},null,-1),Ut={class:"font-bold dark:text-fff/86"},Pt=d("div",{class:"flex-1"},null,-1),$t={class:"font-bold dark:text-fff/86"},Et=d("div",{class:"flex-1"},null,-1),Tt=L({setup(V){const{t:a}=M(),o=Y(),c=be();return(f,i)=>{var m,g,x;const _=Q,r=I,b=j,y=H,u=K,n=G;return e(l)?(v(),U("div",Nl,[d("div",Al,[t(r,null,{default:s(()=>[d("span",Bl,S(e(a)("common.visitorLog")),1),Jl,t(_,{modelValue:e(l).enableVisitorLog,"onUpdate:modelValue":i[0]||(i[0]=p=>e(l).enableVisitorLog=p),"data-cy":"visitor-log"},null,8,["modelValue"])]),_:1}),(m=e(c).header)!=null&&m.isOnlineServer?(v(),h(Ml,{key:0})):k("",!0),t(r,null,{default:s(()=>[d("span",Fl,S(e(a)("common.sqlLog")),1),ql,t(_,{modelValue:e(l).enableSqlLog,"onUpdate:modelValue":i[1]||(i[1]=p=>e(l).enableSqlLog=p),"data-cy":"sql-log"},null,8,["modelValue"])]),_:1})]),t(pl),d("div",zl,[t(r,null,{default:s(()=>[d("span",Wl,S(e(a)("common.constraintFixOnSave")),1),t(b,{tip:e(a)("common.constraintFixOnSaveTips"),"custom-class":"ml-4"},null,8,["tip"]),jl,t(_,{modelValue:e(l).enableConstraintFixOnSave,"onUpdate:modelValue":i[2]||(i[2]=p=>e(l).enableConstraintFixOnSave=p),"data-cy":"constraint-fix-on-save"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",Gl,S(e(a)("common.frontEvent")),1),t(b,{tip:e(a)("common.frontEventTips"),"custom-class":"ml-4"},null,8,["tip"]),Hl,t(_,{modelValue:e(l).enableFrontEvents,"onUpdate:modelValue":i[3]||(i[3]=p=>e(l).enableFrontEvents=p),"data-cy":"front-event"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",Kl,S(e(a)("common.JsCssCompression")),1),Yl,t(_,{modelValue:e(l).enableJsCssCompress,"onUpdate:modelValue":i[4]||(i[4]=p=>e(l).enableJsCssCompress=p),"data-cy":"js-css-compress"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",Ql,S(e(a)("common.JsCssBrowserCache")),1),Xl,t(_,{modelValue:e(l).enableJsCssBrowerCache,"onUpdate:modelValue":i[5]||(i[5]=p=>e(l).enableJsCssBrowerCache=p),"data-cy":"js-css-cache"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",Zl,S(e(a)("common.videoBrowserCache")),1),et,t(_,{modelValue:e(l).enableVideoBrowserCache,"onUpdate:modelValue":i[6]||(i[6]=p=>e(l).enableVideoBrowserCache=p),"data-cy":"video-cache"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",lt,S(e(a)("common.htmlCompression")),1),tt,t(_,{modelValue:e(l).enableHtmlMinifier,"onUpdate:modelValue":i[7]||(i[7]=p=>e(l).enableHtmlMinifier=p),"data-cy":"html-compress"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",ot,S(e(a)("common.enableImageAlt")),1),at,t(_,{modelValue:e(l).enableImageAlt,"onUpdate:modelValue":i[8]||(i[8]=p=>e(l).enableImageAlt=p),"data-cy":"image-alt"},null,8,["modelValue"])]),_:1})]),t(fl),t(gl),t(kl),t(Dl),t(Il),t(Ol),d("div",nt,[t(r,null,{default:s(()=>[st,t(b,{tip:e(a)("common.corsTips"),"custom-class":"ml-4"},null,8,["tip"]),ut,t(_,{modelValue:e(l).enableCORS,"onUpdate:modelValue":i[9]||(i[9]=p=>e(l).enableCORS=p),"data-cy":"cors"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[it,t(b,{tip:e(a)("common.spaTips"),"custom-class":"ml-4"},null,8,["tip"]),dt,t(_,{modelValue:e(l).enableSPA,"onUpdate:modelValue":i[10]||(i[10]=p=>e(l).enableSPA=p),"data-cy":"spa"},null,8,["modelValue"])]),_:1}),t(r,null,{label:s(()=>[d("span",mt,S(e(a)("common.additionalCodeSuggestions")),1)]),default:s(()=>[t(u,{modelValue:e(l).codeSuggestions,"onUpdate:modelValue":i[11]||(i[11]=p=>e(l).codeSuggestions=p),multiple:"",class:"w-full"},{default:s(()=>[t(y,{value:"bootstrap-v3"},{default:s(()=>[rt]),_:1}),t(y,{value:"tailwind-v3.1"},{default:s(()=>[ct]),_:1}),t(y,{value:"element-plus-v2.2"},{default:s(()=>[pt]),_:1}),t(y,{value:"amp-v0"},{default:s(()=>[ft]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",vt,S(e(a)("common.recordSiteLogVideo")),1),_t,t(_,{modelValue:e(l).recordSiteLogVideo,"onUpdate:modelValue":i[12]||(i[12]=p=>e(l).recordSiteLogVideo=p),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",bt,S(e(a)("common.forceSSL")),1),t(b,{tip:e(a)("common.forceSSLTips"),"custom-class":"ml-4"},null,8,["tip"]),Vt,t(_,{modelValue:e(l).forceSSL,"onUpdate:modelValue":i[13]||(i[13]=p=>e(l).forceSSL=p),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),e(l).continueDownload!==void 0?(v(),h(r,{key:0},{default:s(()=>[d("span",yt,S(e(a)("common.continueDownload")),1),t(b,{tip:e(a)("common.continueDownloadTips"),"custom-class":"ml-4"},null,8,["tip"]),gt,t(_,{modelValue:e(l).continueDownload,"onUpdate:modelValue":i[14]||(i[14]=p=>e(l).continueDownload=p),"data-cy":"continue-download"},null,8,["modelValue"])]),_:1})):k("",!0),t(r,null,{default:s(()=>[d("span",xt,S(e(a)("common.enableUpdateSimilarPage")),1),ht,t(_,{modelValue:e(l).enableUpdateSimilarPage,"onUpdate:modelValue":i[15]||(i[15]=p=>e(l).enableUpdateSimilarPage=p),"data-cy":"force-ssl"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[d("span",St,S(e(a)("common.automateCovertImageToWebp")),1),kt,t(_,{modelValue:e(l).automateCovertImageToWebp,"onUpdate:modelValue":i[16]||(i[16]=p=>e(l).automateCovertImageToWebp=p)},null,8,["modelValue"])]),_:1}),!((g=e(c).header)!=null&&g.isOnlineServer)||e(c).header.isPrivateServer?(v(),h(r,{key:1},{default:s(()=>[d("span",Ct,S(e(a)("common.enableResourceCache")),1),t(b,{tip:e(a)("common.enableResourceCacheTip"),"custom-class":"ml-4"},null,8,["tip"]),wt,t(_,{modelValue:e(l).enableResourceCache,"onUpdate:modelValue":i[17]||(i[17]=p=>e(l).enableResourceCache=p)},null,8,["modelValue"])]),_:1})):k("",!0),((x=e(c).header)==null?void 0:x.isOnlineServer)&&!e(c).header.isPrivateServer?(v(),U(T,{key:2},[e(o).serviceLevel>0?(v(),h(r,{key:0},{default:s(()=>[d("span",Ut,S(e(a)("common.enableDevPassword")),1),Pt,t(_,{"model-value":e(l).status=="Development","onUpdate:modelValue":i[18]||(i[18]=p=>e(l).status=e(l).status=="Development"?"Published":"Development")},null,8,["model-value"])]),_:1})):k("",!0),e(l).status=="Development"?(v(),h(r,{key:1},{default:s(()=>[d("span",$t,S(e(a)("common.devPassword")),1),Et,t(n,{modelValue:e(l).devPassword,"onUpdate:modelValue":i[19]||(i[19]=p=>e(l).devPassword=p),disabled:!0,"data-cy":"dev-password"},null,8,["modelValue"])]),_:1})):k("",!0)],64)):k("",!0)])])):k("",!0)}}}),Lt={key:0},mo=L({setup(V,{expose:a}){const o=E(!1),c=We(),f=Y(),i=E(+new Date);function _(){return J(this,null,function*(){l.value=void 0,yield Y().loadSite(),ue(),c.init(l.value)})}const r=()=>{c.init(l.value),i.value=+new Date};return Ue(()=>{f.firstActiveMenu=""}),_(),Pe((b,y,u)=>J(this,null,function*(){var n;b.name==="login"?u():(f.firstActiveMenu=(n=b.meta.activeMenu)!=null?n:b.name,yield c.check(l.value).then(()=>{u()}).catch(()=>{f.firstActiveMenu="settings",u(!1)}))})),q(()=>l.value,()=>{c.changed(l.value)},{deep:!0}),a({initSite:r}),(b,y)=>{const u=$e;return e(l)?(v(),U("div",Lt,[(v(),h(u,{key:i.value,"label-position":"top"},{default:s(()=>[t(ol,{onExport:y[0]||(y[0]=n=>o.value=!0),onInitSite:r}),t(Tt),t(ul)]),_:1})),o.value?(v(),h(ze,{key:0,modelValue:o.value,"onUpdate:modelValue":y[1]||(y[1]=n=>o.value=n),"site-id":e(l).id},null,8,["modelValue","site-id"])):k("",!0)])):k("",!0)}}});export{mo as _,io as s};
