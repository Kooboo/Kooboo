var xe=Object.defineProperty,Oe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var ne=(u,r,a)=>r in u?xe(u,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[r]=a,ae=(u,r)=>{for(var a in r||(r={}))Ce.call(r,a)&&ne(u,a,r[a]);if(te)for(var a of te(r))Ue.call(r,a)&&ne(u,a,r[a]);return u},ie=(u,r)=>Oe(u,$e(r));var se=(u,r,a)=>new Promise((_,V)=>{var p=C=>{try{k(a.next(C))}catch(O){V(O)}},f=C=>{try{k(a.throw(C))}catch(O){V(O)}},k=C=>C.done?_(C.value):Promise.resolve(C.value).then(p,f);k((a=a.apply(u,r)).next())});import{_ as ee,d as ke}from"./image-cover.83330cdc.js";import{g as j,w as R,o as we}from"./i18n.25caaace.js";import{_ as P}from"./index.50326354.js";import{a as me}from"./key-value-editor.9a8a1084.js";import{g as re,b as Ee}from"./product-variant.08b1c2e8.js";import{_ as G}from"./editable-tags.b9955dfc.js";import{u as H}from"./commerce.9fdd3168.js";import{u as le}from"./useTag.f95c1521.js";import{E as J}from"./index.f571dfc9.js";import{E as Q,a as W}from"./index.94998415.js";import{E as X}from"./index.537a2de2.js";import{E as Y}from"./index.a5d96e5a.js";import{d as B,g as S,o as g,a as w,j as I,b as e,w as m,f as x,u as d,F as T,b6 as z,k as N,az as ce,b7 as he,e as Ie,aH as q,t as F,n as Se,c as A,h as De,m as Me,c0 as Ne,i as Fe}from"./url.8f5ec20c.js";import{n as Te}from"./guid.c1a40312.js";import{_ as je}from"./plugin-vue_export-helper.21dcd24c.js";import{E as oe}from"./windi.a815125a.js";import{E as pe}from"./index.e9f8834a.js";import{E as fe,a as ve}from"./index.5388dbc8.js";import{E as Be}from"./index.158cdd11.js";import{_ as ze}from"./index.b410d437.js";import{a as Ae,b as Je}from"./index.d1562756.js";import{_ as ge}from"./index.5d366322.js";import{_ as Le}from"./index.6c4e3269.js";import{a as Ke}from"./useFields.463234d6.js";import{E as Re}from"./index.2e51d36e.js";import{E as _e}from"./index.c6488b3c.js";import{_ as qe}from"./media.ccb5179e.js";import{u as Pe,g as Ve,i as be}from"./main.1c3b59e3.js";import{M as Ge}from"./media-dialog.d9567663.js";import{a as ue,r as de}from"./validate.f3c0b03b.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.e5d64b31.js";import{u as He}from"./useLabels.48b6705a.js";import{i as Qe}from"./string.75b81683.js";import{c as We}from"./index.960b9732.js";import{_ as ye}from"./icon-button.0e134c9b.js";const Xe={class:"mb-24 flex justify-center"},Ye={class:"space-y-8 w-full"},Ze=x("div",{class:"text-999"},":",-1),el={class:"grid grid-cols-3 gap-x-8"},ll=B({props:{model:null,variants:null},emits:["update:modelValue","update:model"],setup(u,{emit:r}){const a=u,{t:_}=j(),V=S(!0),p=H();a.model.tags||(a.model.tags=[]);const f=S(JSON.parse(JSON.stringify(a.model))),{tags:k,removeTag:C}=le("Variant");function O(){r("update:model",f.value),V.value=!1}return(t,l)=>{const i=ee,n=J,s=me,c=Q,o=X,b=W,E=P,v=Y;return g(),w("div",null,[(g(),I(ce,{to:"body"},[e(v,{"model-value":V.value,width:"600px",title:d(_)("common.edit"),"close-on-click-modal":!1,onClosed:l[9]||(l[9]=y=>r("update:modelValue",!1))},{footer:m(()=>[e(E,{onConfirm:O,onCancel:l[8]||(l[8]=y=>V.value=!1)})]),default:m(()=>[x("div",Xe,[e(i,{modelValue:f.value.image,"onUpdate:modelValue":l[0]||(l[0]=y=>f.value.image=y),editable:"",size:"large"},null,8,["modelValue"])]),e(b,{"label-position":"top"},{default:m(()=>[f.value.selectedOptions.length?(g(),I(c,{key:0,label:d(_)("commerce.variantOptions")},{default:m(()=>[x("div",Ye,[(g(!0),w(T,null,z(f.value.selectedOptions,(y,D)=>(g(),w("div",{key:D,class:"flex items-center space-x-4"},[e(n,{modelValue:y.name,"onUpdate:modelValue":M=>y.name=M,disabled:""},null,8,["modelValue","onUpdate:modelValue"]),Ze,e(s,{modelValue:y.value,"onUpdate:modelValue":M=>y.value=M,options:d(re)(u.variants,y.name),class:"w-full",placeholder:d(_)("common.value")},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]))),128))])]),_:1},8,["label"])):N("",!0),x("div",el,[e(c,{label:`${d(_)("common.price")} (${d(p).settings.currencySymbol})`},{default:m(()=>[e(n,{modelValue:f.value.price,"onUpdate:modelValue":l[1]||(l[1]=y=>f.value.price=y),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(c,{label:`${d(_)("common.weight")} (${d(p).settings.weightUnit})`},{default:m(()=>[e(n,{modelValue:f.value.weight,"onUpdate:modelValue":l[2]||(l[2]=y=>f.value.weight=y),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(c,{label:d(_)("common.inventory")},{default:m(()=>[e(n,{modelValue:f.value.newInventory,"onUpdate:modelValue":l[3]||(l[3]=y=>f.value.newInventory=y),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(c,{label:"SKU"},{default:m(()=>[e(n,{modelValue:f.value.sku,"onUpdate:modelValue":l[4]||(l[4]=y=>f.value.sku=y)},null,8,["modelValue"])]),_:1}),e(c,{label:d(_)("common.barcode")},{default:m(()=>[e(n,{modelValue:f.value.barcode,"onUpdate:modelValue":l[5]||(l[5]=y=>f.value.barcode=y)},null,8,["modelValue"])]),_:1},8,["label"])]),e(c,{label:d(_)("common.tag")},{default:m(()=>[e(G,{modelValue:f.value.tags,"onUpdate:modelValue":l[6]||(l[6]=y=>f.value.tags=y),options:d(k),"option-deletable":"",onDeleteOption:d(C)},null,8,["modelValue","options","onDeleteOption"])]),_:1},8,["label"]),e(c,{label:d(_)("commerce.active")},{default:m(()=>[e(o,{modelValue:f.value.active,"onUpdate:modelValue":l[7]||(l[7]=y=>f.value.active=y)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model-value","title"])]))])}}}),ol={class:"mb-24 flex justify-center"},tl={class:"space-y-8 w-full"},nl=x("div",{class:"text-999"},":",-1),al={class:"grid grid-cols-3 gap-x-8"},il=B({props:{variants:null,defaultImage:null},emits:["update:modelValue"],setup(u,{emit:r}){const a=u,{t:_}=j(),V=S(!0),p=S({id:Te(),active:!0,barcode:"",newInventory:0,originalInventory:0,price:0,sku:"",image:"",weight:0,selectedOptions:a.variants[0].selectedOptions.map(O=>({name:O.name,value:""})),tags:[]}),{tags:f,removeTag:k}=le("Variant");function C(){p.value.image||(p.value.image=a.defaultImage),a.variants.push(p.value),V.value=!1}return(O,t)=>{const l=ee,i=J,n=me,s=Q,c=X,o=W,b=P,E=Y;return g(),w("div",null,[(g(),I(ce,{to:"body"},[e(E,{"model-value":V.value,width:"600px",title:d(_)("common.create"),"close-on-click-modal":!1,onClosed:t[9]||(t[9]=v=>r("update:modelValue",!1))},{footer:m(()=>[e(b,{onConfirm:C,onCancel:t[8]||(t[8]=v=>V.value=!1)})]),default:m(()=>[x("div",ol,[e(l,{modelValue:p.value.image,"onUpdate:modelValue":t[0]||(t[0]=v=>p.value.image=v),editable:"",size:"large"},null,8,["modelValue"])]),e(o,{"label-position":"top"},{default:m(()=>[p.value.selectedOptions.length?(g(),I(s,{key:0,label:d(_)("commerce.variantOptions")},{default:m(()=>[x("div",tl,[(g(!0),w(T,null,z(p.value.selectedOptions,(v,y)=>(g(),w("div",{key:y,class:"flex items-center space-x-4"},[e(i,{modelValue:v.name,"onUpdate:modelValue":D=>v.name=D,disabled:""},null,8,["modelValue","onUpdate:modelValue"]),nl,e(n,{modelValue:v.value,"onUpdate:modelValue":D=>v.value=D,options:d(re)(u.variants,v.name),class:"w-full",placeholder:d(_)("common.value")},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]))),128))])]),_:1},8,["label"])):N("",!0),x("div",al,[e(s,{label:d(_)("common.price")},{default:m(()=>[e(i,{modelValue:p.value.price,"onUpdate:modelValue":t[1]||(t[1]=v=>p.value.price=v),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(s,{label:d(_)("common.weight")},{default:m(()=>[e(i,{modelValue:p.value.weight,"onUpdate:modelValue":t[2]||(t[2]=v=>p.value.weight=v),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(s,{label:d(_)("common.inventory")},{default:m(()=>[e(i,{modelValue:p.value.newInventory,"onUpdate:modelValue":t[3]||(t[3]=v=>p.value.newInventory=v),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(s,{label:"SKU"},{default:m(()=>[e(i,{modelValue:p.value.sku,"onUpdate:modelValue":t[4]||(t[4]=v=>p.value.sku=v)},null,8,["modelValue"])]),_:1}),e(s,{label:d(_)("common.barcode")},{default:m(()=>[e(i,{modelValue:p.value.barcode,"onUpdate:modelValue":t[5]||(t[5]=v=>p.value.barcode=v)},null,8,["modelValue"])]),_:1},8,["label"])]),e(s,{label:d(_)("common.tag")},{default:m(()=>[e(G,{modelValue:p.value.tags,"onUpdate:modelValue":t[6]||(t[6]=v=>p.value.tags=v),options:d(f),onDeleteOption:d(k)},null,8,["modelValue","options","onDeleteOption"])]),_:1},8,["label"]),e(s,{label:d(_)("common.active")},{default:m(()=>[e(c,{modelValue:p.value.active,"onUpdate:modelValue":t[7]||(t[7]=v=>p.value.active=v)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model-value","title"])]))])}}});const sl={class:"space-y-12"},ul={key:0},dl={class:"flex items-center"},ml={class:"flex items-center"},rl={class:"text-black dark:text-[#cfd3dc]"},cl={class:"flex space-x-12 justify-end"},pl=B({props:{variants:null,options:null,defaultImage:null,variantOptions:null},setup(u){const r=u,{t:a}=j(),_=S(!1),V=S(!1),p=S(),f=H();function k(t){const l=r.variants.findIndex(i=>i.id==t);r.variants.splice(l,1)}function C(t){p.value=t,_.value=!0}function O(t){var n;const l=r.variants.find(s=>s.id==t.id);if(l)for(const s of l.selectedOptions){const c=r.variantOptions.find(o=>o.name==s.name);if(c){const o=c.items.find(b=>b.name==s.value);if(o){const b=(n=t.selectedOptions.find(E=>E.name==s.name))==null?void 0:n.value;b&&(o.name=b)}}}const i=r.variants.findIndex(s=>s.id==t.id);r.variants.splice(i,1,t)}return(t,l)=>{var D,M;const i=oe,n=pe,s=ee,c=fe,o=J,b=X,E=Be,v=ve,y=he("hasPermission");return g(),w("div",sl,[u.options.length&&((M=(D=u.variants[0])==null?void 0:D.selectedOptions)==null?void 0:M.length)?(g(),w("div",ul,[Ie((g(),I(n,{round:"",onClick:l[0]||(l[0]=$=>V.value=!0)},{default:m(()=>[x("div",dl,[e(i,{class:"mr-16 iconfont icon-a-addto"}),q(" "+F(d(a)("commerce.addVariant")),1)])]),_:1})),[[y,{feature:"productManagement",action:"edit"}]])])):N("",!0),x("div",null,[e(v,{data:u.variants,class:"el-table--gray"},{default:m(()=>[e(c,{label:d(a)("common.cover"),width:"80",align:"left"},{default:m(({row:$})=>[e(s,{modelValue:$.image,"onUpdate:modelValue":h=>$.image=h},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(c,{label:d(a)("common.options")},{default:m(({row:$})=>[x("div",ml,[x("span",rl,F(d(Ee)($.selectedOptions,!0)),1)])]),_:1},8,["label"]),e(c,{label:`${d(a)("common.price")} (${d(f).settings.currencySymbol})`,align:"center",prop:"inventory"},{default:m(({row:$})=>[e(o,{modelValue:$.price,"onUpdate:modelValue":h=>$.price=h,modelModifiers:{number:!0},class:"w-120px text-center"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(c,{label:d(a)("common.inventory"),align:"center"},{default:m(({row:$})=>[e(o,{modelValue:$.newInventory,"onUpdate:modelValue":h=>$.newInventory=h,modelModifiers:{number:!0},class:"w-120px text-center"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(c,{label:d(a)("common.active"),width:"100",align:"center"},{default:m(({row:$})=>[x("span",{class:Se($.active?"text-green":"")},[e(b,{modelValue:$.active,"onUpdate:modelValue":h=>$.active=h},null,8,["modelValue","onUpdate:modelValue"])],2)]),_:1},8,["label"]),e(c,{align:"right",width:"80"},{default:m(({row:$})=>[x("div",cl,[e(E,{placement:"top",content:d(a)("common.edit")},{default:m(()=>[e(i,{class:"iconfont icon-a-writein hover:text-blue text-l",onClick:h=>C($)},null,8,["onClick"])]),_:2},1032,["content"]),u.variants.length>1?(g(),I(E,{key:0,placement:"top",content:d(a)("common.delete")},{default:m(()=>[e(i,{class:"iconfont icon-delete hover:text-orange text-l",onClick:h=>k($.id)},null,8,["onClick"])]),_:2},1032,["content"])):N("",!0)])]),_:1})]),_:1},8,["data"]),_.value?(g(),I(ll,{key:0,modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=$=>_.value=$),model:d(p),variants:u.variants,"onUpdate:model":O},null,8,["modelValue","model","variants"])):N("",!0),V.value?(g(),I(il,{key:1,modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=$=>V.value=$),variants:u.variants,"default-image":u.defaultImage},null,8,["modelValue","variants","default-image"])):N("",!0)])])}}});var yo=je(pl,[["__scopeId","data-v-531a84d7"]]);const fl=B({props:{excludes:null,modelValue:{type:Boolean}},emits:["update:modelValue","selected"],setup(u,{emit:r}){const a=u,{getColumns:_}=Ke(),{t:V}=j(),p=S(!0),f=H(),k=S([]),C=_([{name:"image",attrs:{width:80}},{name:"title"},{name:"type",displayName:V("common.type")},{name:"active",attrs:{align:"center",width:100}}]),O=A(()=>{let o=k.value.filter(b=>b.type=="Manual");return a.excludes&&(o=o.filter(b=>!a.excludes.includes(b.id))),o}),t=A(()=>O.value.filter(o=>o.type=="Manual"));function l(){return se(this,null,function*(){yield f.loadCategories(),k.value=f.categories.map(o=>ie(ae({},o),{selected:!1}))})}const i=A(()=>t.value.some(o=>o.selected)&&t.value.some(o=>!o.selected)),n=A(()=>t.value.length&&t.value.every(o=>o.selected));function s(o){t.value.forEach(b=>b.selected=o)}De(()=>{l()});function c(){r("selected",t.value.filter(o=>o.selected)),p.value=!1}return(o,b)=>{const E=Re,v=fe,y=ve,D=_e,M=P,$=Y;return g(),I($,{"model-value":p.value,width:"800px",title:d(V)("commerce.selectCategory"),"close-on-click-modal":!1,onClosed:b[1]||(b[1]=h=>r("update:modelValue",!1))},{footer:m(()=>[e(M,{disabled:!d(O).some(h=>h.selected),onConfirm:c,onCancel:b[0]||(b[0]=h=>p.value=!1)},null,8,["disabled"])]),default:m(()=>[e(D,{"max-height":"400px"},{default:m(()=>[e(y,{data:d(O),class:"el-table--gray"},{default:m(()=>[e(v,{width:"60",align:"center"},{header:m(()=>[e(E,{size:"large",class:"!block !h-20px",indeterminate:d(i),"model-value":d(n),onChange:s},null,8,["indeterminate","model-value"])]),default:m(({row:h})=>[e(E,{modelValue:h.selected,"onUpdate:modelValue":L=>h.selected=L,disabled:!d(t).find(L=>L.id==h.id),size:"large"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),e(Le,{columns:d(C)},null,8,["columns"])]),_:1},8,["data"])]),_:1})]),_:1},8,["model-value","title"])}}}),vl={class:"flex flex-wrap items-center gap-8"},gl={class:"text-fff absolute inset-0 bg-444/60 flex flex-col items-center justify-center transition-all opacity-0 group-hover:opacity-100 space-y-4"},_l={key:0,class:"bg-444/60 text-s h-24px text-fff absolute left-0 right-0 bottom-0 flex items-center justify-center"},Vl=["onClick"],bl={class:"w-128px h-128px rounded-normal overflow-hidden inline-block relative group bg-gray cursor-pointer border-dashed flex gap-12 justify-center items-center text-blue"},yl={class:"text-fff absolute inset-0 bg-444/60 flex flex-col items-center justify-center transition-all opacity-0 group-hover:opacity-100 space-y-4"},xl=B({props:{modelValue:null,main:null,mainLabel:null},emits:["update:model-value","update:main"],setup(u,{emit:r}){const a=u,_=Pe(),V=S(!1),{t:p}=j(),f=S(!1),k=S(0),C=i=>(i=i?Ne(_.site.prUrl,i):ke,`url("${i}")`);function O(i){const n=[...a.modelValue,...i.map(s=>s.url)];a.main||r("update:main",n[0]),r("update:model-value",n)}function t(i,n){const s=[...a.modelValue],c=s.splice(n,1,i[0].url);a.main==c[0]&&r("update:main",i[0].url),r("update:model-value",s)}function l(i){const n=[...a.modelValue];n.splice(i,1),r("update:model-value",n),n.includes(a.main)||r("update:main",n[0])}return(i,n)=>{const s=oe,c=pe,o=qe;return g(),w("div",vl,[(g(!0),w(T,null,z(u.modelValue,(b,E)=>(g(),w("div",{key:E,style:Me({backgroundImage:C(b)}),class:"w-128px h-128px bg-contain bg-no-repeat bg-center rounded-normal overflow-hidden inline-block relative group bg-gray"},[x("div",gl,[e(o,{folder:"/commerce/product",multiple:!1,onAfterUpload:v=>t(v,E)},{default:m(()=>[e(c,{round:"",size:"small",type:"primary",class:"w-80px"},{default:m(()=>[e(s,{class:"iconfont icon-a-Cloudupload"}),x("span",null,F(d(p)("common.upload")),1)]),_:1})]),_:2},1032,["onAfterUpload"]),e(c,{round:"",size:"small",type:"primary",class:"!ml-0 w-80px",onClick:R(v=>{k.value=E,f.value=!0,V.value=!0},["stop"])},{default:m(()=>[q(F(d(p)("common.select")),1)]),_:2},1032,["onClick"]),a.modelValue?(g(),I(s,{key:0,class:"iconfont icon-delete text-orange absolute top-8 right-8 cursor-pointer",onClick:R(v=>l(E),["stop"])},null,8,["onClick"])):N("",!0)]),b==u.main?(g(),w("div",_l,F(u.mainLabel||d(p)("common.cover")),1)):(g(),w("div",{key:1,class:"bg-444/60 text-s h-24px text-fff absolute left-0 right-0 bottom-0 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer",onClick:v=>i.$emit("update:main",b)},F(d(p)("common.setAsCover")),9,Vl))],4))),128)),x("div",bl,[e(s,{class:"iconfont icon-a-addto text-3l group-hover:opacity-50"}),x("div",yl,[e(o,{folder:"/commerce/product",multiple:!0,onAfterUpload:O},{default:m(()=>[e(c,{round:"",size:"small",type:"primary",class:"w-80px"},{default:m(()=>[e(s,{class:"iconfont icon-a-Cloudupload"}),x("span",null,F(d(p)("common.upload")),1)]),_:1})]),_:1}),e(c,{round:"",size:"small",type:"primary",class:"!ml-0 w-80px",onClick:n[0]||(n[0]=R(b=>{f.value=!1,V.value=!0},["stop"]))},{default:m(()=>[e(s,{class:"iconfont icon-folder"}),x("span",null,F(d(p)("common.select")),1)]),_:1})])]),V.value?(g(),I(d(Ge),{key:0,modelValue:V.value,"onUpdate:modelValue":n[1]||(n[1]=b=>V.value=b),multiple:!f.value,onChoose:n[2]||(n[2]=b=>f.value?t(b,k.value):O(b))},null,8,["modelValue","multiple"])):N("",!0)])}}}),Ol={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},$l={class:"flex justify-end"},Cl={class:"flex gap-4 flex-wrap"},Ul={class:"space-x-8 flex items-center"},kl={class:"cursor-pointer"},xo=B({props:{model:null,fields:null},setup(u,{expose:r}){const a=u,{getFieldDisplayName:_}=He(),{t:V}=j(),p=H(),f=S(!1);p.loadCategories();const{tags:k,removeTag:C}=le("Product"),O=S();a.model.customData.title||(a.model.customData.title={}),a.model.customData.description||(a.model.customData.description={});const t={title:[ue(V("common.fieldRequiredTips")),de(1,50)],seoName:[ue(V("common.fieldRequiredTips")),de(1,50)]},l=A(()=>{const c=[];for(const o of p.categories)!a.model.categories.includes(o.id)||c.push(o);return c});function i(c){const o=a.model.categories.indexOf(c);a.model.categories.splice(o,1)}function n(c){a.model.categories.push(...c.map(o=>o.id))}function s(c){var b,E;const o=(E=(b=a.fields)==null?void 0:b.find(v=>Qe(v.name,c)))!=null?E:{name:c,displayName:""};return _(o)}return r({form:O}),(c,o)=>{const b=ge,E=J,v=Je,y=Q,D=ze,M=oe,$=We,h=X,L=W;return g(),w(T,null,[x("div",Ol,[x("div",$l,[e(b)]),e(L,{ref_key:"form",ref:O,"label-position":"top",rules:t,model:u.model},{default:m(()=>[e(v,{"default-model":u.model.title,"onUpdate:default-model":o[0]||(o[0]=U=>u.model.title=U),label:s("title"),"multilingual-model":u.model.customData.title,rules:t.title,"default-prop":"title","multilingual-prop":"customData.title"},{default:m(({value:U,onchange:K})=>[e(E,{"model-value":U,"onUpdate:modelValue":Z=>K(Z)},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["default-model","label","multilingual-model","rules"]),e(Ae,{"seo-name":u.model.seoName,"onUpdate:seo-name":o[1]||(o[1]=U=>u.model.seoName=U),prop:"seoName",path:"product",title:u.model.title,label:s("seoName")},null,8,["seo-name","title","label"]),e(y,{label:s("images")},{default:m(()=>[e(xl,{modelValue:u.model.images,"onUpdate:modelValue":o[2]||(o[2]=U=>u.model.images=U),main:u.model.featuredImage,"onUpdate:main":o[3]||(o[3]=U=>u.model.featuredImage=U),"main-label":s("featuredImage")},null,8,["modelValue","main","main-label"])]),_:1},8,["label"]),e(v,{"default-model":u.model.description,"onUpdate:default-model":o[4]||(o[4]=U=>u.model.description=U),label:s("description"),"multilingual-model":u.model.customData.description},{default:m(({value:U,onchange:K})=>[e(D,{"model-value":U,"onUpdate:modelValue":Z=>K(Z)},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["default-model","label","multilingual-model"]),e(y,{label:s("categories")},{default:m(()=>[x("div",Cl,[(g(!0),w(T,null,z(d(l),U=>(g(),I($,{key:U.id},{default:m(()=>[x("div",Ul,[x("div",kl,F(U.title),1),U.type=="Manual"?(g(),I(M,{key:0,class:"iconfont icon-delete",onClick:K=>i(U.id)},null,8,["onClick"])):N("",!0)])]),_:2},1024))),128)),e($,{type:"success",onClick:o[5]||(o[5]=U=>f.value=!0)},{default:m(()=>[e(M,{class:"iconfont icon-a-addto"})]),_:1})])]),_:1},8,["label"]),e(y,{label:s("tags")},{default:m(()=>[e(G,{modelValue:u.model.tags,"onUpdate:modelValue":o[6]||(o[6]=U=>u.model.tags=U),"option-deletable":"",options:d(k),onDeleteOption:d(C)},null,8,["modelValue","options","onDeleteOption"])]),_:1},8,["label"]),e(y,{label:s("active")},{default:m(()=>[e(h,{modelValue:u.model.active,"onUpdate:modelValue":o[7]||(o[7]=U=>u.model.active=U)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),f.value?(g(),I(fl,{key:0,modelValue:f.value,"onUpdate:modelValue":o[8]||(o[8]=U=>f.value=U),excludes:u.model.categories,onSelected:n},null,8,["modelValue","excludes"])):N("",!0)],64)}}}),wl={class:"flex justify-end"},El={class:"space-y-8"},hl={class:"space-y-4 w-full"},Il={class:"space-y-4 w-full"},Sl=B({props:{variantOption:null,modelValue:{type:Boolean}},emits:["update:modelValue","update:variantOption"],setup(u,{emit:r}){const a=u,{t:_}=j(),V=S(!0),p=Ve(),f=S(JSON.parse(JSON.stringify(a.variantOption)));function k(t,l){return Object.keys(t).includes(l)||(t[l]=""),t[l]}function C(t,l,i){t[l]=i}function O(){r("update:variantOption",f.value),V.value=!1}return(t,l)=>{const i=ge,n=J,s=Q,c=W,o=_e,b=P,E=Y;return g(),I(E,{"model-value":V.value,width:"600px",title:d(_)("common.multilingual"),"close-on-click-modal":!1,onClosed:l[1]||(l[1]=v=>r("update:modelValue",!1))},{footer:m(()=>[e(b,{onConfirm:O,onCancel:l[0]||(l[0]=v=>V.value=!1)})]),default:m(()=>[x("div",null,[x("div",wl,[e(i)]),e(o,{"max-height":"400px"},{default:m(()=>[e(c,{"label-position":"top"},{default:m(()=>[x("div",El,[e(s,{label:u.variantOption.name},{default:m(()=>[x("div",hl,[(g(!0),w(T,null,z(d(p).selected,v=>(g(),I(n,{key:v,"model-value":k(f.value.multilingual,v),"onUpdate:modelValue":y=>C(f.value.multilingual,v,y)},{suffix:m(()=>[q(F(v),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))])]),_:1},8,["label"]),(g(!0),w(T,null,z(f.value.items,(v,y)=>(g(),I(s,{key:y,class:"space-y-4",label:v.name},{default:m(()=>[x("div",Il,[(g(!0),w(T,null,z(d(p).selected,D=>(g(),I(n,{key:D,"model-value":k(v.multilingual,D),"onUpdate:modelValue":M=>C(v.multilingual,D,M)},{suffix:m(()=>[q(F(D),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))])]),_:2},1032,["label"]))),128))])]),_:1})]),_:1})])]),_:1},8,["model-value","title"])}}}),Dl={key:0},Ml={class:"flex items-center space-x-4"},Nl={key:0},Fl=B({props:{model:null,variantOption:null},emits:["changeName","changeOption","addOption","deleteOption","delete"],setup(u,{emit:r}){const a=u,{t:_}=j(),V=S(),p=Ve(),f=S(!1);function k(O,t){if(a.model.options.includes(t))be(_("common.valueExist"));else{const l=a.model.options[O],i=a.variantOption.items.find(n=>n.name==l);i&&(i.name=t),r("changeOption",l,t)}}function C(O){Object.assign(a.variantOption,O)}return Fe(()=>a.model,()=>{V.value=JSON.parse(JSON.stringify(a.model))},{deep:!0,immediate:!0}),(O,t)=>{const l=J,i=ye;return g(),w(T,null,[V.value?(g(),w("div",Dl,[x("div",Ml,[e(l,{modelValue:V.value.name,"onUpdate:modelValue":t[0]||(t[0]=n=>V.value.name=n),onChange:t[1]||(t[1]=n=>r("changeName",n)),onKeydown:t[2]||(t[2]=we(R(()=>{},["stop","prevent"]),["enter"]))},null,8,["modelValue"]),d(p).visible?(g(),w("div",Nl,[e(i,{circle:"",icon:"icon-language ",tip:d(_)("common.multilingual"),onClick:t[3]||(t[3]=n=>f.value=!0)},null,8,["tip"])])):N("",!0),x("div",null,[e(i,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:d(_)("common.delete"),onClick:t[4]||(t[4]=n=>r("delete"))},null,8,["tip"])])]),e(G,{readonly:!V.value.name,"model-value":V.value.options,class:"mt-4 mb-12 mr-44px",onChangeItem:k,onAddItem:t[5]||(t[5]=n=>r("addOption",n)),onRemoveItem:t[6]||(t[6]=n=>r("deleteOption",n))},null,8,["readonly","model-value"])])):N("",!0),x("div",null,[f.value?(g(),I(Sl,{key:0,modelValue:f.value,"onUpdate:modelValue":t[7]||(t[7]=n=>f.value=n),"variant-option":u.variantOption,"onUpdate:variantOption":C},null,8,["modelValue","variant-option"])):N("",!0)])],64)}}}),Tl={class:"space-y-8 w-full"},Oo=B({props:{options:null,variants:null,variantOptions:null},emits:["update-option-item","add-option-item","delete-option-item","delete-option","add-option","update-option-name"],setup(u,{emit:r}){const a=u,{t:_}=j(),V=A(()=>{var i;const l=[];if((i=a.options)!=null&&i.length)for(const n of a.options){const s=[];for(const c of a.variants)s.push(...c.selectedOptions.filter(o=>o.name==n).map(o=>o.value));l.push({name:n,options:Array.from(new Set(s))})}else for(const n of a.variants)for(const s of n.selectedOptions){let c=l.find(o=>o.name==s.name);c||(c={name:s.name,options:[]},l.push(c)),c.options.includes(s.value)||c.options.push(s.value)}return l});function p(l){let i=a.variantOptions.find(n=>n.name==l.name);i||(i={name:l.name,multilingual:{},items:[]},a.variantOptions.push(i));for(const n of l.options)i.items.find(s=>s.name==n)||i.items.push({name:n,multilingual:{}});return i}function f(l,i){const n=p(l),s=l.options[i];n.items=n.items.filter(c=>c.name!=s),r("delete-option-item",l.name,s)}function k(l){const i=a.variantOptions.findIndex(n=>n.name==l.name);a.variantOptions.splice(i,1),r("delete-option",l.name)}function C(l,i,n){r("update-option-item",l.name,i,n)}function O(l,i){p(l).items.push({name:i,multilingual:{}}),r("add-option-item",l.name,i)}function t(l,i){!i||(V.value.find(n=>n.name==i)?be(_("common.valueExist")):(p(l).name=i,r("update-option-name",l.name,i)))}return(l,i)=>{const n=ye;return g(),w("div",Tl,[(g(!0),w(T,null,z(d(V),(s,c)=>(g(),w("div",{key:c},[e(Fl,{model:s,"variant-option":p(s),onChangeName:o=>t(s,o),onChangeOption:(o,b)=>C(s,o,b),onAddOption:o=>O(s,o),onDeleteOption:o=>f(s,o),onDelete:o=>k(s)},null,8,["model","variant-option","onChangeName","onChangeOption","onAddOption","onDeleteOption","onDelete"])]))),128)),e(n,{circle:"",class:"text-blue",icon:"icon-a-addto",tip:d(_)("common.add"),onClick:i[0]||(i[0]=s=>r("add-option",""))},null,8,["tip"])])}}});export{yo as V,xo as _,Oo as a};
