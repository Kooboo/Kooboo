var Qe=Object.defineProperty,We=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var qe=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var Ee=(h,o,s)=>o in h?Qe(h,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[o]=s,Y=(h,o)=>{for(var s in o||(o={}))Ge.call(o,s)&&Ee(h,s,o[s]);if(qe)for(var s of qe(o))Xe.call(o,s)&&Ee(h,s,o[s]);return h},ee=(h,o)=>We(h,Ze(o));var I=(h,o,s)=>new Promise((i,L)=>{var e=y=>{try{A(s.next(y))}catch(B){L(B)}},D=y=>{try{A(s.throw(y))}catch(B){L(B)}},A=y=>y.done?i(y.value):Promise.resolve(y.value).then(e,D);A((s=s.apply(h,o)).next())});import{g as Fe,d as Ye,w as et}from"./i18n.bcd18f8a.js";import{_ as tt}from"./index.20b12391.js";import{l as ke,o as at,p as Ie,q as lt,s as Ae,t as ot,u as rt,v as st,w as nt,x as it}from"./index.2341329b.js";import{a as Ve,J as ie}from"./validate.238a9986.js";import{d as Be,g as f,o as S,j as U,w as v,f as m,u as d,t as _,b as c,aH as z,M as ut,cd as dt,c as mt,x as Z,h as ct,aW as pt,i as F,K as te,J as vt,cj as ft,a as N,n as Ce,F as ue,b6 as $e,k as R,aT as gt}from"./url.8f5ec20c.js";import{_ as de}from"./index.50eb5ae5.js";import{L as yt}from"./logo-transparent.1566007e.js";import{E as Te}from"./index.aec72f69.js";import{E as Me}from"./index.d4a6b2d5.js";import{g as me,c as bt}from"./use-date.a1321c18.js";import{u as ht}from"./email.95ae8451.js";import{_ as xt}from"./index.ed02e10c.js";import{d as je,t as _t}from"./dark.166fd971.js";import{_ as wt}from"./plugin-vue_export-helper.21dcd24c.js";import{j as St}from"./windi.19264205.js";import{E as ae}from"./main.582f9de6.js";import{E as Lt,a as Dt,c as qt}from"./index.6d22f937.js";import{E as Et,a as kt}from"./index.6d63eb53.js";import{E as It}from"./index.5cbbc5d7.js";import{E as At}from"./index.79f78425.js";import"./dev-mode.1f379952.js";import"./replace-all.d441bf14.js";import"./guid.c1a40312.js";import"./index.72ccc088.js";import"./classCompletion.a22e38a6.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./preload-helper.13a99eb0.js";import"./vuedraggable.umd.7929a3b6.js";import"./index.ec6ad7db.js";import"./focus-trap.eafcfd1f.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.05e21f33.js";import"./cloneDeep.060340c1.js";import"./_baseClone.eeff2792.js";import"./_baseIsEqual.547729d3.js";import"./config.812575d1.js";import"./page.e927203a.js";import"./index.10f642b2.js";import"./index.a3d8335f.js";import"./error.7e8331f1.js";import"./scroll.4888a9e9.js";import"./aria.75ec5909.js";import"./validator.b73911a9.js";import"./index.c80f5028.js";import"./style.9c8f6403.js";import"./toNumber.6efebd6a.js";import"./index.8bc4b1d6.js";import"./dropdown.f6378640.js";import"./refs.d2253dd4.js";import"./use-copy-text.c117d066.js";import"./index.73c941f5.js";import"./toggleComment.5b29ca87.js";import"./use-save-tip.8f44d6c0.js";import"./confirm.eadb49f1.js";import"./index.7a75fca3.js";import"./index.373c837a.js";import"./event.776e7e11.js";import"./index.59b1471f.js";import"./icon-button.315b6443.js";import"./index.3a977dfb.js";import"./index.4dc50d47.js";import"./index.daafc4da.js";import"./index.3be79fd5.js";import"./index.79dc05e0.js";import"./index.ff00fbd6.js";import"./index.57a23e6d.js";import"./alert.8fe5500a.js";import"./index.d84e2378.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.c0b84b74.js";/* empty css                                                          */import"./file.734aeed6.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.c73251ef.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.53a9e945.js";import"./image-editor.f97cfa84.js";import"./main.esm.6441082b.js";import"./index.7633560d.js";import"./media-dialog.31d6c41c.js";import"./breadcrumb.edaec300.js";import"./plugin-vue_export-helper.41ffa612.js";import"./media.71de4b30.js";import"./index.b8a66e09.js";import"./search-provider.17b07ede.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./_baseUniq.098d08d2.js";import"./use-operation-dialog.175b540a.js";import"./folder.8308bb9d.js";import"./relations-tag.7a82bbd0.js";import"./index.b83a1079.js";import"./debounce.730e1961.js";import"./index.9a83ee01.js";import"./index.ea2df5df.js";import"./browser.6efdef8a.js";import"./throttle.3f3ee457.js";import"./index.564bc658.js";import"./isEqual.11d86bcc.js";import"./search-input.5b2e8d23.js";import"./layout.29f65550.js";import"./index.4972d853.js";import"./position.f6e7bc86.js";import"./utils.dd51a1eb.js";import"./index.99c245f4.js";import"./index.55babe62.js";import"./index.6c05d6c4.js";import"./file.eef7ed38.js";import"./pick.80c375ab.js";import"./_basePickBy.0604ed3c.js";import"./index.bda83f28.js";import"./index.bff48780.js";import"./index.649f6c77.js";import"./index.a32fb6e5.js";import"./dayjs.min.59f10137.js";import"./index.aef630be.js";import"./index.47274d5a.js";import"./index.50c16ae5.js";const Vt={class:"flex justify-center"},Ct=["innerHTML"],$t={class:"mt-18px text-s text-[#606266] font-bold leading-17px px-12 dark:text-[#cfd3dc] break-normal"},jt={class:"flex justify-end items-center mt-16"},Ft=Be({props:{modelValue:{type:Boolean}},emits:["update:modelValue","saveDraft","cancelSaveDraft","closeDialog"],setup(h,{emit:o}){const{t:s}=Fe(),i=f(!0);return(L,e)=>{const D=Te,A=Me;return S(),U(A,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=y=>i.value=y),width:"400px","custom-class":"leaveConfirmDialog","close-on-click-modal":!1,onClosed:e[4]||(e[4]=y=>o("update:modelValue",!1))},{default:v(()=>[m("div",Vt,[m("div",{innerHTML:d(yt)},null,8,Ct)]),m("div",$t,_(d(s)("common.mailUnSaveTips")),1),m("div",jt,[c(D,{round:"",onClick:e[0]||(e[0]=y=>o("closeDialog"))},{default:v(()=>[z(_(d(s)("common.cancel")),1)]),_:1}),c(D,{round:"",onClick:e[1]||(e[1]=y=>o("cancelSaveDraft"))},{default:v(()=>[z(_(d(s)("common.no")),1)]),_:1}),c(D,{type:"primary",round:"",onClick:e[2]||(e[2]=y=>o("saveDraft"))},{default:v(()=>[z(_(d(s)("common.yes")),1)]),_:1})])]),_:1},8,["modelValue"])}}});const Bt={class:"p-24 flex"},Tt={class:"pl-12 space-x-12 text-s"},Mt={class:"pl-12 text-orange text-s"},Ot={class:"pl-12 text-orange text-s"},Nt={class:"space-x-16 flex"},Rt={class:"h-40px flex items-center"},Ut={class:"h-32 bg-blue rounded-full flex items-center justify-center cursor-pointer"},zt={class:"mx-12 flex text-fff h-32 w-50px justify-center cursor-pointer"},Ht={class:"flex flex-wrap items-center"},Jt={class:"max-w-132px ellipsis h-24 leading-6"},Pt=["innerHTML"],Kt=Ye.global.t,g=f(),Qt={beforeRouteEnter(h,o){return I(this,null,function*(){var s=Z("messageId");s||(s=Z("sourceId")),g.value=yield rt(s!=null?s:"0"),g.value&&g.value.length===0&&ae.error(Kt("common.emptyAddressTips"))})}},Wt=Be(ee(Y({},Qt),{setup(h){const o=ut(),s=dt(),{t:i}=Fe(),L=f(),e=f({}),D=f(),A=f(),y=mt(()=>{var t,a;return(a=(t=A.value)==null?void 0:t.open)!=null?a:!1}),B=f(),ce=f();let le,q=Z("type");const H=f();let C;const pe=f(!0),J=f(!1),E=f({name:"",params:{},query:{}});let ve=null;const oe=f("");let G;const re=ht(),P=f(),V=f(!0);let fe;const ge=t=>{fe&&(t.preventDefault(),t.returnValue="")},ye=t=>{if(!e.value.html.match("<!--signature -->")){let l=e.value.html===""?`<div>&nbsp;</div>
<!--signature -->
<div>&nbsp;</div>
<!--signature -->`:"<!--signature --><div>&nbsp;</div><!--signature -->";t?e.value.html=`<div>&nbsp;</div>
<!--signature -->
<div>&nbsp;</div><!--signature -->
`+e.value.html:e.value.html=e.value.html+l}let a=P.value?`<!--signature -->
<div class="signature" style="-webkit-user-modify: read-only; pointer-events: none;">
<div style="background: #e4e5e6; width: 40px; height: 1px; margin: 15px 0;">&nbsp;</div>
${P.value}
</div>
<!--signature -->`:"<!--signature --><!--signature -->";e.value.html=e.value.html.replace(/(<!--signature -->)([\s\S]*)(<!--signature -->)/,a)},Oe=()=>I(this,null,function*(){P.value=yield Ae(e.value.from),ye()});ct(()=>{new ResizeObserver(a=>{var l,u;for(const n of a)B.value=((l=D.value)==null?void 0:l.offsetHeight)-((u=ce.value)==null?void 0:u.offsetHeight)-70}).observe(D.value),H.value=o.query.messageId,window.addEventListener("beforeunload",ge)}),pt(()=>{le==null||le.disconnect()});const $=f({show:!1,title:"",body:"",width:"600px"}),Ne={from:[Ve(i("common.senderRequired"))],to:[ie()],cc:[ie()],bcc:[ie()],subject:[Ve(i("common.subjectRequiredTips"))]},T=f(),M=t=>{t.preventDefault()},se=(t,a)=>{var l,u;(l=document.querySelector(".contentFormItem"))==null||l.classList.add("pointer-events-none"),(u=document.querySelector(".subjectInput"))==null||u.classList.add("pointer-events-none"),document.querySelectorAll(".inputShade").forEach(n=>{n.getAttribute("id")!==a+"InputShade"&&(n.classList.add("block"),n.classList.remove("hidden"),n.classList.remove("opacity-10"))}),T.value=a,t.dataTransfer.setData("text/plain",t.target.innerText)},O=(t,a)=>{if(a!==T.value){var l=t.dataTransfer.getData("text/plain");let u=e.value[T.value].indexOf(l);e.value[T.value].splice(u,1),e.value[a].includes(l)||e.value[a].push(l),L.value.validateField(a),L.value.validateField(T.value)}t.preventDefault(),T.value=""},Re=()=>{var t,a;document.querySelectorAll(".inputShade").forEach(l=>{l.classList.remove("block"),l.classList.add("hidden"),l.classList.remove("opacity-10"),l.classList.add("opacity-0")}),(t=document.querySelector(".contentFormItem"))==null||t.classList.remove("pointer-events-none"),(a=document.querySelector(".subjectInput"))==null||a.classList.remove("pointer-events-none")};F(()=>[e.value.to,e.value.bcc,e.value.cc],t=>{t!=null&&t.length&&te().then(()=>{document.querySelectorAll(".el-hover-title .el-tag__content").forEach(a=>{a.setAttribute("title",a.innerText)}),document.querySelectorAll(".el-tag.is-closable.el-tag--info.el-tag--default.el-tag--light").forEach(a=>{a.addEventListener("dragend",Re)})})},{deep:!0}),F(()=>e.value.to,()=>{te().then(()=>{document.getElementById("to").querySelectorAll(".el-tag.is-closable.el-tag--info.el-tag--default.el-tag--light").forEach(a=>{a.setAttribute("draggable","true"),a.addEventListener("dragstart",l=>se(l,"to"))});const t=document.getElementById("toInputShade");t.addEventListener("dragenter",()=>{t.classList.remove("opacity-0"),t.classList.add("opacity-10")}),t.addEventListener("dragleave",()=>{t.classList.remove("opacity-10"),t.classList.add("opacity-0")})})},{deep:!0}),F(()=>e.value.cc,()=>{!e.value.cc||te().then(()=>{document.getElementById("cc").querySelectorAll(".el-tag.is-closable.el-tag--info.el-tag--default.el-tag--light").forEach(a=>{a.setAttribute("draggable","true"),a.addEventListener("dragstart",l=>se(l,"cc"))});const t=document.getElementById("ccInputShade");t.addEventListener("dragenter",()=>{t.classList.remove("opacity-0"),t.classList.add("opacity-10")}),t.addEventListener("dragleave",()=>{t.classList.remove("opacity-10"),t.classList.add("opacity-0")})})},{deep:!0}),F(()=>e.value.bcc,()=>{!e.value.bcc||te().then(()=>{document.getElementById("bcc").querySelectorAll(".el-tag.is-closable.el-tag--info.el-tag--default.el-tag--light").forEach(a=>{a.setAttribute("draggable","true"),a.addEventListener("dragstart",l=>se(l,"bcc"))});const t=document.getElementById("bccInputShade");t.addEventListener("dragenter",()=>{t.classList.remove("opacity-0"),t.classList.add("opacity-10")}),t.addEventListener("dragleave",()=>{t.classList.remove("opacity-10"),t.classList.add("opacity-0")})})},{deep:!0}),F(()=>o.query.type,()=>{o.query.type&&(be(),e.value.html="")}),F(()=>e.value,()=>{if(C===void 0)return!1;fe=C!==JSON.stringify(e.value)},{deep:!0}),vt(()=>{clearInterval(ve),re.firstActiveMenu="",window.removeEventListener("beforeunload",ge)}),ve=setInterval(()=>{C!==JSON.stringify(e.value)&&X()},2e4);function be(){return I(this,null,function*(){var a,l,u,n,x,p;const t=Z("sourceId");if(q==="Drafts"&&t)e.value=yield ke(t);else if(q==="Forward"&&t)e.value=yield at(t,me());else if(q==="Reply"&&t)e.value=yield Ie(t,me());else if(q==="EditAgain"&&t)e.value=yield lt(t);else if(q==="ReplyAll"&&t)e.value=yield Ie(t,me(),"all");else{if(!g.value)return;let w,b;e.value=yield ke();let K=g.value.map(j=>j.address);o.query.address&&K.indexOf(o.query.address)>=0?(w=g.value.filter(j=>{var Q;return j.address==((Q=o.query.address)==null?void 0:Q.toString())}),e.value.from=(a=w[0])==null?void 0:a.id,e.value.fromAddress=(l=w[0])==null?void 0:l.address):(b=g.value.find(j=>j.isDefault),e.value.from=b?b.id:(u=g.value[0])==null?void 0:u.id,e.value.fromAddress=(n=g.value[0])==null?void 0:n.address)}e.value.from===0&&(e.value.from=void 0),(x=e.value.cc)!=null&&x.length||(e.value.cc=void 0),(p=e.value.bcc)!=null&&p.length||(e.value.bcc=void 0),P.value=yield Ae(e.value.from),q!=="Drafts"&&ye(["Forward","Reply","ReplyAll"].includes(q)),C=JSON.stringify(e.value)})}be(),ft((t,a,l)=>{var u,n,x,p,w;if(C!==JSON.stringify(e.value)&&t.name!="login"&&pe.value){J.value=!0,V.value=!1;let b=(u=t.query)!=null&&u.folder?t.query.folder:t.name;re.firstActiveMenu=(n=t.query)!=null&&n.address?(b==null?void 0:b.toString())+((x=t.query)==null?void 0:x.address.toString()):(p=t.query)!=null&&p.folderName?(b==null?void 0:b.toString())+((w=t.query)==null?void 0:w.folderName.toString()):b==null?void 0:b.toString(),E.value.name=t.name,E.value.params=t.params,E.value.query=t.query,l(!1)}else q==="Drafts"&&t.path==="/kmail/content"&&!t.params.isBreak?(t.query.messageId=H.value,t.params.isBreak="true",l(t)):l()});function Ue(){var t,a;J.value=!1,V.value=!0,re.firstActiveMenu=(t=o.query)!=null&&t.address?"compose"+((a=o.query)==null?void 0:a.address):"compose"}function ze(t){return I(this,null,function*(){var l,u;const a=(l=t.target)==null?void 0:l.files[0];if(a){const n=new FormData;if(n.append("file",a),n.append("filename",a.name),((u=e.value.attachments)==null?void 0:u.reduce((p,w)=>p+w.size,0))+a.size>=20*1024*1024){ae.error(i("common.totalAttachmentsSizeLimitTips"));return}else{const p=yield st(n);e.value.attachments?e.value.attachments.push(p):e.value.attachments=[p]}}})}function He(t){return I(this,null,function*(){var a;yield nt(t),e.value.attachments=(a=e.value.attachments)==null?void 0:a.filter(l=>l.fileName!==t)})}function he(){return I(this,null,function*(){var t,a,l,u,n,x,p;e.value.from&&(e.value.fromAddress=(a=(t=g.value)==null?void 0:t.find(w=>w.id===e.value.from))==null?void 0:a.address),e.value.to.length!==0||((l=e.value.cc)==null?void 0:l.length)&&((u=e.value.cc)==null?void 0:u.length)!==0||((n=e.value.bcc)==null?void 0:n.length)&&((x=e.value.bcc)==null?void 0:x.length)!==0?((yield(p=L.value)==null?void 0:p.validate())&&(V.value=!1,e.value.html=e.value.html.replaceAll("<!--signature -->",""),e.value.html=e.value.html.replace(/<div class="signature"([^>]*)style=["'][^"']*["']([^>]*)>/gi,'<div class="signature"$1$2>'),yield it(e.value),V.value=!0),pe.value=!1,s.replace({name:"sent",query:{address:e.value.fromAddress}})):ae.error(i("common.pleaseFillRecipientTips"))})}function X(t){return I(this,null,function*(){var n,x;if(!V.value)return;V.value=!1;const a=yield(n=L.value)==null?void 0:n.validateField("from");t!=null&&t.showLoading&&(G=St.service({background:"rgba(0, 0, 0, 0.5)"}));let l;if(a&&(l=yield ot(e.value),V.value=!0,t!=null&&t.showLoading&&(G==null||G.close(),ae.success(i("common.saveSuccess"))),e.value.messageId=l,q==="Drafts"&&(H.value=l)),q==="Drafts"){const p=new URLSearchParams(location.search);p.set("messageId",e.value.messageId.toString()),p.set("sourceId",e.value.messageId.toString()),history.replaceState(null,"",location.pathname+"?"+p.toString())}C=JSON.stringify(e.value),(x=L.value)==null||x.clearValidate();const u=new Date;oe.value=u.toString(),t!=null&&t.isLeave&&(E.value.query.messageId=l,s.push({name:E.value.name,params:E.value.params,query:E.value.query}))})}function Je(){C=JSON.stringify(e.value),s.push({name:E.value.name,params:E.value.params,query:E.value.query})}function xe(){return I(this,null,function*(){var t;Object.getOwnPropertyNames(o.query).length?(delete o.query.type,delete o.query.sourceId,o.query.messageId?o.query.address||o.query.oldFolderName?(delete o.query.activeMenu,s.push({name:"mail-content",query:ee(Y({},s.currentRoute.value.query),{folderName:(t=o.query.oldFolderName)!=null?t:void 0,folder:o.query.oldActiveMenu,messageId:H.value})})):s.push({name:"mail-content",query:ee(Y({},s.currentRoute.value.query),{folder:o.query.oldActiveMenu,activeMenu:o.query.oldActiveMenu,messageId:H.value})}):s.back()):s.push({name:"inbox"})})}function Pe(t){Object.assign($.value,t),$.value.show=!0}const _e=[],Ke={send:he,saveDraft:X,cancel:xe,alert:Pe,get dark(){return je.value},set dark(t){_t(t)},onDark(t){_e.push(t)},get subject(){return e.value.subject},set subject(t){e.value.subject=t},get to(){return e.value.to},set to(t){e.value.to=t},get html(){return e.value.html},set html(t){e.value.html=t},get from(){var t,a;return(a=(t=g.value)==null?void 0:t.find(l=>l.id==e.value.from))==null?void 0:a.address},set from(t){var l,u;const a=(u=(l=g.value)==null?void 0:l.find(n=>n.address==t))==null?void 0:u.id;a&&(e.value.from=a)}};return F(je,t=>I(this,null,function*(){for(const a of _e)try{a(t)}catch(l){}}),{immediate:!0}),(t,a)=>{var Q;const l=Lt,u=Dt,n=Et,x=It,p=qt,w=kt,b=At,K=Te,j=Me;return S(),N(ue,null,[m("div",Bt,[m("div",{ref_key:"outBox",ref:D,class:Ce(["rounded-normal h-[calc(100vh-160px)] bg-fff shadow-s-10 p-24 pr-8 dark:bg-[#252526] w-full transition-all duration-500",d(y)?"box-border w-[calc(100%-22%-46px)]":""])},[c(b,{height:"h-full",class:"pr-16",always:""},{default:v(()=>[c(w,{ref_key:"form",ref:L,"label-position":"left","label-width":"100px",model:e.value,rules:d(Ne),onSubmit:a[17]||(a[17]=et(()=>{},["prevent"]))},{default:v(()=>[m("div",{ref_key:"topPartForm",ref:ce},[c(n,{label:d(i)("mail.from"),prop:"from"},{default:v(()=>{var r,W;return[c(u,{"model-value":e.value.from,class:"w-480px",placeholder:" ",title:(W=(r=g.value)==null?void 0:r.filter(k=>k.id===e.value.from)[0])==null?void 0:W.address,"data-cy":"from","onUpdate:modelValue":a[0]||(a[0]=k=>{var we,Se,Le,De;e.value.from=(Se=(we=g.value)==null?void 0:we.find(ne=>ne.id===k))==null?void 0:Se.id,e.value.fromAddress=(De=(Le=g.value)==null?void 0:Le.find(ne=>ne.id===k))==null?void 0:De.address}),onChange:a[1]||(a[1]=k=>Oe())},{default:v(()=>[(S(!0),N(ue,null,$e(g.value,k=>(S(),U(l,{key:k.id,style:{"max-width":"480px"},title:k.address,label:k.displayName,value:k.id,"data-cy":"from-opt"},null,8,["title","label","value"]))),128))]),_:1},8,["model-value","title"]),oe.value!==""?(S(),N("span",{key:0,class:Ce(["text-s text-999",P.value!==""?"px-8":"px-12 "])},_(d(i)("common.draftSavedAtTime",{time:d(bt)(oe.value)})),3)):R("",!0)]}),_:1},8,["label"]),c(n,{id:"to",label:d(i)("mail.to"),prop:"to"},{default:v(()=>[m("div",{id:"toInputShade",class:"bg-blue h-10 w-480px absolute rounded-5px z-9999 hidden opacity-0 inputShade",onDrop:a[2]||(a[2]=r=>O(r,"to")),onDragover:M},null,32),c(de,{modelValue:e.value.to,"onUpdate:modelValue":a[3]||(a[3]=r=>e.value.to=r),"input-value":e.value.to||[],"data-cy":"to",onDrop:a[4]||(a[4]=r=>O(r,"to")),onDragover:M},null,8,["modelValue","input-value"]),m("div",Tt,[e.value.cc?R("",!0):(S(),N("span",{key:0,class:"cursor-pointer text-999 hover:text-blue","data-cy":"add-cc",onClick:a[5]||(a[5]=r=>e.value.cc=[])},_(d(i)("common.addCc")),1)),e.value.bcc?R("",!0):(S(),N("span",{key:1,class:"cursor-pointer text-999 hover:text-blue","data-cy":"add-bcc",onClick:a[6]||(a[6]=r=>e.value.bcc=[])},_(d(i)("common.addBcc")),1))])]),_:1},8,["label"]),e.value.cc?(S(),U(n,{key:0,id:"cc",label:d(i)("common.carbonCopy"),prop:"cc"},{default:v(()=>[m("div",{id:"ccInputShade",class:"bg-blue h-10 w-480px absolute rounded-5px z-9999 hidden opacity-0 inputShade",onDrop:a[7]||(a[7]=r=>O(r,"cc")),onDragover:M},null,32),c(de,{modelValue:e.value.cc,"onUpdate:modelValue":a[8]||(a[8]=r=>e.value.cc=r),"input-value":e.value.cc,"data-cy":"cc",onDrop:a[9]||(a[9]=r=>O(r,"cc")),onDragover:M},null,8,["modelValue","input-value"]),m("div",Mt,[m("span",{class:"cursor-pointer",onClick:a[10]||(a[10]=r=>e.value.cc=void 0)},_(d(i)("common.delete")),1)])]),_:1},8,["label"])):R("",!0),e.value.bcc?(S(),U(n,{key:1,id:"bcc",label:d(i)("common.blindCarbonCopy"),prop:"bcc"},{default:v(()=>[m("div",{id:"bccInputShade",class:"bg-blue h-10 w-480px absolute rounded-5px z-9999 hidden opacity-0 inputShade",onDrop:a[11]||(a[11]=r=>O(r,"bcc")),onDragover:M},null,32),c(de,{modelValue:e.value.bcc,"onUpdate:modelValue":a[12]||(a[12]=r=>e.value.bcc=r),"input-value":e.value.bcc,"data-cy":"bcc",onDrop:a[13]||(a[13]=r=>O(r,"bcc")),onDragover:M},null,8,["modelValue","input-value"]),m("div",Ot,[m("span",{class:"cursor-pointer",onClick:a[14]||(a[14]=r=>e.value.bcc=void 0)},_(d(i)("common.delete")),1)])]),_:1},8,["label"])):R("",!0),c(n,{label:d(i)("common.subject"),prop:"subject"},{default:v(()=>[c(x,{modelValue:e.value.subject,"onUpdate:modelValue":a[15]||(a[15]=r=>e.value.subject=r),class:"w-480px subjectInput","data-cy":"subject"},null,8,["modelValue"])]),_:1},8,["label"]),c(n,{label:d(i)("common.attachments"),prop:"attachments"},{default:v(()=>[m("div",Nt,[m("div",Rt,[m("label",Ut,[m("span",zt,_(d(i)("common.select")),1),m("input",{id:"attachments",class:"hidden",type:"file","data-cy":"upload-attachment",onChange:ze},null,32)])]),m("div",Ht,[(S(!0),N(ue,null,$e(e.value.attachments,r=>(S(),U(p,{key:r.fileName,class:"rounded-full px-16 mr-8 my-4",size:"large",effect:"plain",round:"",closable:"",onClose:W=>He(r.fileName)},{default:v(()=>[m("div",Jt,_(r.fileName),1)]),_:2},1032,["onClose"]))),128))])])]),_:1},8,["label"])],512),c(n,{label:d(i)("common.content"),class:"contentFormItem mb-0"},{default:v(()=>{var r;return[c(tt,{modelValue:e.value.html,"onUpdate:modelValue":a[16]||(a[16]=W=>e.value.html=W),"manual-upload":!0,"hidden-code":!0,"only-new-window":!0,min_height:B.value,max_height:(r=D.value)==null?void 0:r.offsetHeight},null,8,["modelValue","min_height","max_height"])]}),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})],2),c(xt,{ref_key:"extensionDrawerRef",ref:A,context:Ke,"message-id":parseInt((Q=d(Z)("sourceId"))!=null?Q:"0"),type:"extendcompose"},null,8,["message-id"])]),m("div",gt(t.$attrs,{class:"k-bottom-bar bg-gray/10 py-15px pr-130px text-right space-x-32 absolute bottom-0 w-full left-0 z-1 backdrop-filter backdrop-blur-md shadow-m-20"}),[c(K,{round:"",type:"primary","data-cy":"send",disabled:!V.value,onClick:he},{default:v(()=>[z(_(d(i)("common.send")),1)]),_:1},8,["disabled"]),c(K,{plain:"",round:"",type:"primary","data-cy":"save-draft",onClick:a[18]||(a[18]=r=>X({isLeave:!1,showLoading:!0}))},{default:v(()=>[z(_(d(i)("common.saveDraft")),1)]),_:1}),c(K,{round:"","data-cy":"cancel",onClick:xe},{default:v(()=>[z(_(d(i)("common.cancel")),1)]),_:1})],16),c(j,{modelValue:$.value.show,"onUpdate:modelValue":a[19]||(a[19]=r=>$.value.show=r),width:$.value.width||"600px",title:$.value.title||d(i)("common.tooltip")},{default:v(()=>[m("div",{innerHTML:$.value.body},null,8,Pt)]),_:1},8,["modelValue","width","title"]),J.value?(S(),U(Ft,{key:0,modelValue:J.value,"onUpdate:modelValue":a[20]||(a[20]=r=>J.value=r),onSaveDraft:a[21]||(a[21]=r=>X({isLeave:!0})),onCancelSaveDraft:Je,onCloseDialog:Ue},null,8,["modelValue"])):R("",!0)],64)}}}));var mo=wt(Wt,[["__scopeId","data-v-46ed2808"]]);export{mo as default};
