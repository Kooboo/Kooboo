var pt=Object.defineProperty,mt=Object.defineProperties;var ft=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Ue=(d,r,i)=>r in d?pt(d,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[r]=i,ce=(d,r)=>{for(var i in r||(r={}))vt.call(r,i)&&Ue(d,i,r[i]);if(Le)for(var i of Le(r))ht.call(r,i)&&Ue(d,i,r[i]);return d},de=(d,r)=>mt(d,ft(r));var ae=(d,r,i)=>new Promise((c,T)=>{var $=n=>{try{x(i.next(n))}catch(A){T(A)}},p=n=>{try{x(i.throw(n))}catch(A){T(A)}},x=n=>n.done?c(n.value):Promise.resolve(n.value).then($,p);x((i=i.apply(d,r)).next())});import{_ as _t}from"./icon-button.315b6443.js";import{g as Qe,w as Xe}from"./i18n.bcd18f8a.js";import{y as gt,z as xt,A as yt,B as bt}from"./index.2341329b.js";import{_ as kt}from"./index.7a75fca3.js";import{_ as wt}from"./index.20b12391.js";import{a as E,c as ne,d as He,e as Fe,u as G,f as Ne,i as Se,b as Te,w as Ce,h as Ee}from"./use-date.a1321c18.js";import{a as Dt,r as St,J as Tt,K as Ct,L as me}from"./validate.238a9986.js";import{_ as Et}from"./index.50eb5ae5.js";import{u as Ze}from"./email.95ae8451.js";import{s as K,b as Vt}from"./confirm.eadb49f1.js";import{_ as et}from"./plugin-vue_export-helper.21dcd24c.js";import{d as W}from"./dayjs.min.59f10137.js";import{t as $t,u as At,T as We,a as Mt,b as Pt,c as Ot,d as Rt,e as Bt,C as It,D as jt,r as se,l as zt,W as Ve,E as Lt}from"./index.d6799c63.js";import{b as Pe,d as ue,u as pe,_ as Oe,c as Ut,w as Ht,E as tt}from"./windi.19264205.js";import{u as Re}from"./index.c80f5028.js";import{bU as Ft,c4 as Nt,c7 as Wt,d as re,B as Yt,c as z,g as U,o as h,a as k,f as s,n as V,u as e,t as b,b as g,k as M,Y as fe,b2 as qt,aT as Kt,W as Jt,F as J,b6 as Q,r as ve,bM as Me,w as R,aH as X,aF as Ye,au as qe,aN as Ke,j as oe,i as le,K as he,h as Gt,b3 as Qt,b1 as Xt}from"./url.8f5ec20c.js";import{a as Zt}from"./style.9c8f6403.js";import{b as ea}from"./_baseUniq.098d08d2.js";import{E as ta}from"./main.582f9de6.js";import{E as aa}from"./index.5cbbc5d7.js";import{E as na,a as oa}from"./index.6d63eb53.js";import{E as at}from"./index.79f78425.js";import{E as la}from"./index.d4a6b2d5.js";import{_ as Je}from"./index.5b1ebe6c.js";import{E as $e,a as sa}from"./index.aec72f69.js";import{U as nt,I as ot}from"./event.776e7e11.js";import{E as ra}from"./index.7a30c6dd.js";import{E as ia}from"./index.4ecdcecf.js";import"./index.ec6ad7db.js";import"./focus-trap.eafcfd1f.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.05e21f33.js";import"./index.3a977dfb.js";import"./dark.166fd971.js";import"./dev-mode.1f379952.js";import"./replace-all.d441bf14.js";import"./guid.c1a40312.js";import"./index.72ccc088.js";import"./classCompletion.a22e38a6.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./preload-helper.13a99eb0.js";import"./vuedraggable.umd.7929a3b6.js";import"./cloneDeep.060340c1.js";import"./_baseClone.eeff2792.js";import"./_baseIsEqual.547729d3.js";import"./config.812575d1.js";import"./page.e927203a.js";import"./index.10f642b2.js";import"./index.a3d8335f.js";import"./error.7e8331f1.js";import"./scroll.4888a9e9.js";import"./aria.75ec5909.js";import"./validator.b73911a9.js";import"./index.8bc4b1d6.js";import"./dropdown.f6378640.js";import"./refs.d2253dd4.js";import"./use-copy-text.c117d066.js";import"./index.73c941f5.js";import"./toggleComment.5b29ca87.js";import"./use-save-tip.8f44d6c0.js";import"./index.373c837a.js";import"./index.59b1471f.js";import"./index.6d22f937.js";import"./isEqual.11d86bcc.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.9a83ee01.js";import"./index.4dc50d47.js";import"./index.daafc4da.js";import"./index.3be79fd5.js";import"./index.79dc05e0.js";import"./index.ff00fbd6.js";import"./index.57a23e6d.js";import"./alert.8fe5500a.js";import"./index.d84e2378.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.c0b84b74.js";/* empty css                                                          */import"./file.734aeed6.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.c73251ef.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.53a9e945.js";import"./image-editor.f97cfa84.js";import"./main.esm.6441082b.js";import"./index.7633560d.js";import"./media-dialog.31d6c41c.js";import"./breadcrumb.edaec300.js";import"./plugin-vue_export-helper.41ffa612.js";import"./media.71de4b30.js";import"./index.b8a66e09.js";import"./search-provider.17b07ede.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./use-operation-dialog.175b540a.js";import"./folder.8308bb9d.js";import"./relations-tag.7a82bbd0.js";import"./index.b83a1079.js";import"./index.ea2df5df.js";import"./browser.6efdef8a.js";import"./throttle.3f3ee457.js";import"./index.564bc658.js";import"./search-input.5b2e8d23.js";import"./layout.29f65550.js";import"./index.4972d853.js";import"./position.f6e7bc86.js";import"./utils.dd51a1eb.js";import"./index.99c245f4.js";import"./index.55babe62.js";import"./index.6c05d6c4.js";import"./file.eef7ed38.js";import"./pick.80c375ab.js";import"./_basePickBy.0604ed3c.js";import"./index.bda83f28.js";import"./index.bff48780.js";import"./index.649f6c77.js";import"./index.a32fb6e5.js";import"./index.aef630be.js";import"./logo-transparent.1566007e.js";import"./index.e3f90979.js";import"./index.50c16ae5.js";function ca(d){return Ft(d)&&Nt(d)}var da=Wt(function(d){return ea(Zt(d,1,ca,!0))}),Ae=da;const ua=Pe(de(ce({},$t),{parsedValue:{type:ue(Array)}})),pa=["disabled"],ma=re({__name:"panel-time-range",props:ua,emits:["pick","select-range","set-picker-option"],setup(d,{emit:r}){const i=d,c=(m,_)=>{const P=[];for(let L=m;L<=_;L++)P.push(L);return P},{t:T,lang:$}=Re(),p=pe("time"),x=pe("picker"),n=Yt("EP_PICKER_BASE"),{arrowControl:A,disabledHours:B,disabledMinutes:O,disabledSeconds:Y,defaultValue:H}=n.props,I=z(()=>i.parsedValue[0]),C=z(()=>i.parsedValue[1]),a=At(i),l=()=>{r("pick",a.value,!1)},o=z(()=>i.format.includes("ss")),v=z(()=>i.format.includes("A")?"A":i.format.includes("a")?"a":""),f=(m=!1)=>{r("pick",[I.value,C.value],m)},u=m=>{D(m.millisecond(0),C.value)},y=m=>{D(I.value,m.millisecond(0))},S=m=>{const _=m.map(L=>W(L).locale($.value)),P=Be(_);return _[0].isSame(P[0])&&_[1].isSame(P[1])},D=(m,_)=>{r("pick",[m,_],!0)},t=z(()=>I.value>C.value),j=U([0,2]),w=(m,_)=>{r("select-range",m,_,"min"),j.value=[m,_]},Z=z(()=>o.value?11:8),ee=(m,_)=>{r("select-range",m,_,"max");const P=e(Z);j.value=[m+P,_+P]},ie=m=>{const _=o.value?[0,3,6,11,14,17]:[0,3,8,11],P=["hours","minutes"].concat(o.value?["seconds"]:[]),F=(_.indexOf(j.value[0])+m+_.length)%_.length,N=_.length/2;F<N?we.start_emitSelectRange(P[F]):we.end_emitSelectRange(P[F-N])},xe=m=>{const _=m.code,{left:P,right:L,up:F,down:N}=Ut;if([P,L].includes(_)){ie(_===P?-1:1),m.preventDefault();return}if([F,N].includes(_)){const q=_===F?-1:1,te=j.value[0]<Z.value?"start":"end";we[`${te}_scrollDown`](q),m.preventDefault();return}},ye=(m,_)=>{const P=B?B(m):[],L=m==="start",N=(_||(L?C.value:I.value)).hour(),q=L?c(N+1,23):c(0,N-1);return Ae(P,q)},be=(m,_,P)=>{const L=O?O(m,_):[],F=_==="start",N=P||(F?C.value:I.value),q=N.hour();if(m!==q)return L;const te=N.minute(),De=F?c(te+1,59):c(0,te-1);return Ae(L,De)},ke=(m,_,P,L)=>{const F=Y?Y(m,_,P):[],N=P==="start",q=L||(N?C.value:I.value),te=q.hour(),De=q.minute();if(m!==te||_!==De)return F;const ze=q.second(),ut=N?c(ze+1,59):c(0,ze-1);return Ae(F,ut)},Be=([m,_])=>[Ie(m,"start",!0,_),Ie(_,"end",!1,m)],{getAvailableHours:lt,getAvailableMinutes:st,getAvailableSeconds:rt}=Pt(ye,be,ke),{timePickerOptions:we,getAvailableTime:Ie,onSetOption:je}=Mt({getAvailableHours:lt,getAvailableMinutes:st,getAvailableSeconds:rt}),it=m=>m?fe(m)?m.map(_=>W(_,i.format).locale($.value)):W(m,i.format).locale($.value):null,ct=m=>m?fe(m)?m.map(_=>_.format(i.format)):m.format(i.format):null,dt=()=>{if(fe(H))return H.map(_=>W(_).locale($.value));const m=W(H).locale($.value);return[m,m.add(60,"m")]};return r("set-picker-option",["formatToString",ct]),r("set-picker-option",["parseUserInput",it]),r("set-picker-option",["isValidValue",S]),r("set-picker-option",["handleKeydownInput",xe]),r("set-picker-option",["getDefaultValue",dt]),r("set-picker-option",["getRangeAvailableTime",Be]),(m,_)=>m.actualVisible?(h(),k("div",{key:0,class:V([e(p).b("range-picker"),e(x).b("panel")])},[s("div",{class:V(e(p).be("range-picker","content"))},[s("div",{class:V(e(p).be("range-picker","cell"))},[s("div",{class:V(e(p).be("range-picker","header"))},b(e(T)("el.datepicker.startTime")),3),s("div",{class:V([e(p).be("range-picker","body"),e(p).be("panel","content"),e(p).is("arrow",e(A)),{"has-seconds":e(o)}])},[g(We,{ref:"minSpinner",role:"start","show-seconds":e(o),"am-pm-mode":e(v),"arrow-control":e(A),"spinner-date":e(I),"disabled-hours":ye,"disabled-minutes":be,"disabled-seconds":ke,onChange:u,onSetOption:e(je),onSelectRange:w},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),s("div",{class:V(e(p).be("range-picker","cell"))},[s("div",{class:V(e(p).be("range-picker","header"))},b(e(T)("el.datepicker.endTime")),3),s("div",{class:V([e(p).be("range-picker","body"),e(p).be("panel","content"),e(p).is("arrow",e(A)),{"has-seconds":e(o)}])},[g(We,{ref:"maxSpinner",role:"end","show-seconds":e(o),"am-pm-mode":e(v),"arrow-control":e(A),"spinner-date":e(C),"disabled-hours":ye,"disabled-minutes":be,"disabled-seconds":ke,onChange:y,onSetOption:e(je),onSelectRange:ee},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),s("div",{class:V(e(p).be("panel","footer"))},[s("button",{type:"button",class:V([e(p).be("panel","btn"),"cancel"]),onClick:_[0]||(_[0]=P=>l())},b(e(T)("el.datepicker.cancel")),3),s("button",{type:"button",class:V([e(p).be("panel","btn"),"confirm"]),disabled:e(t),onClick:_[1]||(_[1]=P=>f())},b(e(T)("el.datepicker.confirm")),11,pa)],2)],2)):M("v-if",!0)}});var fa=Oe(ma,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);W.extend(Ot);var va=re({name:"ElTimePicker",install:null,props:de(ce({},Rt),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(d,r){const i=U(),[c,T]=d.isRange?["timerange",fa]:["time",Bt],$=p=>r.emit("update:modelValue",p);return qt("ElPopperOptions",d.popperOptions),r.expose({focus:p=>{var x;(x=i.value)==null||x.handleFocusInput(p)},blur:p=>{var x;(x=i.value)==null||x.handleBlurInput(p)}}),()=>{var p;const x=(p=d.format)!=null?p:jt;return g(It,Kt(d,{ref:i,type:c,format:x,"onUpdate:modelValue":$}),{default:n=>g(T,n,null)})}}});const _e=va;_e.install=d=>{d.component(_e.name,_e)};const ha=_e,_a=(d,r)=>{const i=d.subtract(1,"month").endOf("month").date();return se(r).map((c,T)=>i-(r-T-1))},ga=d=>{const r=d.daysInMonth();return se(r).map((i,c)=>c+1)},xa=d=>se(d.length/7).map(r=>{const i=r*7;return d.slice(i,i+7)}),ya=Pe({selectedDay:{type:ue(Object)},range:{type:ue(Array)},date:{type:ue(Object),required:!0},hideHeader:{type:Boolean}}),ba={pick:d=>Jt(d)},ka={key:0},wa=["onClick"],Da={name:"DateTable"},Sa=re(de(ce({},Da),{props:ya,emits:ba,setup(d,{expose:r,emit:i}){const c=d;W.extend(zt);const{t:T,lang:$}=Re(),p=pe("calendar-table"),x=pe("calendar-day"),n=W().locale($.value),A=n.$locale().weekStart||0,B=z(()=>!!c.range&&!!c.range.length),O=z(()=>{let l=[];if(B.value){const[o,v]=c.range,f=se(v.date()-o.date()+1).map(S=>({text:o.date()+S,type:"current"}));let u=f.length%7;u=u===0?0:7-u;const y=se(u).map((S,D)=>({text:D+1,type:"next"}));l=f.concat(y)}else{const o=c.date.startOf("month").day(),v=_a(c.date,o-A).map(S=>({text:S,type:"prev"})),f=ga(c.date).map(S=>({text:S,type:"current"}));l=[...v,...f];const u=7-(l.length%7||7),y=se(u).map((S,D)=>({text:D+1,type:"next"}));l=l.concat(y)}return xa(l)}),Y=z(()=>{const l=A;return l===0?Ve.map(o=>T(`el.datepicker.weeks.${o}`)):Ve.slice(l).concat(Ve.slice(0,l)).map(o=>T(`el.datepicker.weeks.${o}`))}),H=(l,o)=>{switch(o){case"prev":return c.date.startOf("month").subtract(1,"month").date(l);case"next":return c.date.startOf("month").add(1,"month").date(l);case"current":return c.date.date(l)}},I=({text:l,type:o})=>{const v=[o];if(o==="current"){const f=H(l,o);f.isSame(c.selectedDay,"day")&&v.push(x.is("selected")),f.isSame(n,"day")&&v.push(x.is("today"))}return v},C=({text:l,type:o})=>{const v=H(l,o);i("pick",v)},a=({text:l,type:o})=>{const v=H(l,o);return{isSelected:v.isSame(c.selectedDay),type:`${o}-month`,day:v.format("YYYY-MM-DD"),date:v.toDate()}};return r({getFormattedDate:H}),(l,o)=>(h(),k("table",{class:V([e(p).b(),e(p).is("range",e(B))]),cellspacing:"0",cellpadding:"0"},[l.hideHeader?M("v-if",!0):(h(),k("thead",ka,[(h(!0),k(J,null,Q(e(Y),v=>(h(),k("th",{key:v},b(v),1))),128))])),s("tbody",null,[(h(!0),k(J,null,Q(e(O),(v,f)=>(h(),k("tr",{key:f,class:V({[e(p).e("row")]:!0,[e(p).em("row","hide-border")]:f===0&&l.hideHeader})},[(h(!0),k(J,null,Q(v,(u,y)=>(h(),k("td",{key:y,class:V(I(u)),onClick:S=>C(u)},[s("div",{class:V(e(x).b())},[ve(l.$slots,"dateCell",{data:a(u)},()=>[s("span",null,b(u.text),1)])],2)],10,wa))),128))],2))),128))])],2))}}));var Ge=Oe(Sa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const Ta=d=>fe(d)&&d.length===2&&d.every(r=>Me(r)),Ca=Pe({modelValue:{type:Date},range:{type:ue(Array),validator:Ta}}),Ea={[nt]:d=>Me(d),[ot]:d=>Me(d)},Va={name:"ElCalendar"},$a=re(de(ce({},Va),{props:Ca,emits:Ea,setup(d,{expose:r,emit:i}){const c=d,T=pe("calendar"),{t:$,lang:p}=Re(),x=U(),n=W().locale(p.value),A=z({get(){return c.modelValue?O.value:x.value},set(f){if(!f)return;x.value=f;const u=f.toDate();i(ot,u),i(nt,u)}}),B=z(()=>{if(!c.range)return[];const f=c.range.map(S=>W(S).locale(p.value)),[u,y]=f;return u.isAfter(y)?[]:u.isSame(y,"month")?l(u,y):u.add(1,"month").month()!==y.month()?[]:l(u,y)}),O=z(()=>c.modelValue?W(c.modelValue).locale(p.value):A.value?A.value:B.value.length?B.value[0][0]:n),Y=z(()=>O.value.subtract(1,"month").date(1)),H=z(()=>O.value.add(1,"month").date(1)),I=z(()=>O.value.subtract(1,"year").date(1)),C=z(()=>O.value.add(1,"year").date(1)),a=z(()=>{const f=`el.datepicker.month${O.value.format("M")}`;return`${O.value.year()} ${$("el.datepicker.year")} ${$(f)}`}),l=(f,u)=>{const y=f.startOf("week"),S=u.endOf("week"),D=y.get("month"),t=S.get("month");if(D===t)return[[y,S]];if(D+1===t){const j=y.endOf("month"),w=S.startOf("month"),ee=j.isSame(w,"week")?w.add(1,"week"):w;return[[y,j],[ee.startOf("week"),S]]}else if(D+2===t||(D+1)%11===t){const j=y.endOf("month"),w=y.add(1,"month").startOf("month"),Z=j.isSame(w,"week")?w.add(1,"week"):w,ee=Z.endOf("month"),ie=S.startOf("month"),xe=ee.isSame(ie,"week")?ie.add(1,"week"):ie;return[[y,j],[Z.startOf("week"),ee],[xe.startOf("week"),S]]}else return[]},o=f=>{A.value=f},v=f=>{let u;f==="prev-month"?u=Y.value:f==="next-month"?u=H.value:f==="prev-year"?u=I.value:f==="next-year"?u=C.value:u=n,!u.isSame(O.value,"day")&&o(u)};return r({selectedDay:A,pickDay:o,selectDate:v,calculateValidatedDateRange:l}),(f,u)=>(h(),k("div",{class:V(e(T).b())},[s("div",{class:V(e(T).e("header"))},[ve(f.$slots,"header",{date:e(a)},()=>[s("div",{class:V(e(T).e("title"))},b(e(a)),3),e(B).length===0?(h(),k("div",{key:0,class:V(e(T).e("button-group"))},[g(e(sa),null,{default:R(()=>[g(e($e),{size:"small",onClick:u[0]||(u[0]=y=>v("prev-month"))},{default:R(()=>[X(b(e($)("el.datepicker.prevMonth")),1)]),_:1}),g(e($e),{size:"small",onClick:u[1]||(u[1]=y=>v("today"))},{default:R(()=>[X(b(e($)("el.datepicker.today")),1)]),_:1}),g(e($e),{size:"small",onClick:u[2]||(u[2]=y=>v("next-month"))},{default:R(()=>[X(b(e($)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):M("v-if",!0)])],2),e(B).length===0?(h(),k("div",{key:0,class:V(e(T).e("body"))},[g(Ge,{date:e(O),"selected-day":e(A),onPick:o},Ye({_:2},[f.$slots.dateCell?{name:"dateCell",fn:R(y=>[ve(f.$slots,"dateCell",qe(Ke(y)))])}:void 0]),1032,["date","selected-day"])],2)):(h(),k("div",{key:1,class:V(e(T).e("body"))},[(h(!0),k(J,null,Q(e(B),(y,S)=>(h(),oe(Ge,{key:S,date:y[0],"selected-day":e(A),range:y,"hide-header":S!==0,onPick:o},Ye({_:2},[f.$slots.dateCell?{name:"dateCell",fn:R(D=>[ve(f.$slots,"dateCell",qe(Ke(D)))])}:void 0]),1032,["date","selected-day","range","hide-header"]))),128))],2))],2))}}));var Aa=Oe($a,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const Ma=Ht(Aa);const Pa={class:"flex items-center justify-between"},Oa={class:"flex items-center space-x-16 w-full"},Ra={class:"flex items-center space-x-16 w-full"},Ba={key:0,class:"text-[#F56C6C] text-12px -mt-12 mb-8"},Ia=re({props:{modelValue:{type:Boolean},currentSchedule:null},emits:["update:modelValue","reload"],setup(d,{emit:r}){const i=d,{t:c}=Qe(),T=U(!0),$=U(),p=U(!1),x=Ze(),n=U({}),A={calendarTitle:[Dt(c("common.valueRequiredTips")),St(1,50)],contact:[Tt(),Ct(x.addressList.map(C=>C.address))]},B=U(),O=U(),Y=()=>ae(this,null,function*(){yield $.value.validate();let C=He(E(n.value.startDate)+" "+Fe(n.value.startTime)),a=He(E(n.value.endDate)+" "+Fe(n.value.endTime));if(!x.defaultAddress){ta.error(c("common.setDefaultEmailFirst"));return}let l=G(C)>G(new Date);if(n.value.id){let o=[],v=[],f=!1;f=B.value!==JSON.stringify(n.value,H),o=n.value.contact.filter(u=>!O.value.some(y=>me(y)===me(u))),v=O.value.filter(u=>!n.value.contact.some(y=>me(y)===me(u))),f&&l?!o.length&&!v.length?n.value.contact.length&&(yield K(c("common.anUpdatedEmailWillBeSentToTheParticipants"))):o.length&&!v.length?yield K(c("common.anEmailWillBeSentToExistentAndAddedParticipants")):!o.length&&v.length?yield K(c("common.anEmailWillBeSentToExistentAndRemovedParticipants")):yield K(c("common.anEmailWillBeSentToExistentAddedAndRemovedParticipants")):l&&(!o.length&&v.length?yield K(c("common.aCancellationEmailWillBeSentToRemovedParticipants")):o.length&&!v.length?yield K(c("common.AnInvitationEmailWillBeSentToAddedParticipants")):o.length&&v.length&&(yield K(c("common.anEmailWillBeSentToAddedAndRemovedParticipants")))),yield gt({id:n.value.id,calendarTitle:n.value.calendarTitle,start:C,end:a,mark:n.value.mark,location:n.value.location,contact:n.value.contact,isNotify:!0,isOrganizer:n.value.isOrganizer,organizer:x.defaultAddress,addContact:o,removeContact:v})}else n.value.contact.length&&l&&(yield K(c("common.anInvitationEmailWillBeSentToTheParticipants"))),yield xt({organizer:x.defaultAddress,calendarTitle:n.value.calendarTitle,start:C,end:a,mark:n.value.mark,location:n.value.location,contact:n.value.contact,isNotify:!0});r("reload"),T.value=!1});function H(C,a){if(C!=="contact")return a}return(()=>{n.value=i.currentSchedule,B.value=JSON.stringify(n.value,H),O.value=n.value.contact})(),le(()=>n.value,()=>{let C=new Date(E(n.value.endDate)+" "+ne(n.value.endTime)).getTime(),a=new Date(E(n.value.startDate)+" "+ne(n.value.startTime)).getTime();C<=a?p.value=!0:p.value=!1},{deep:!0}),le(()=>n.value.contact,C=>{C!=null&&C.length&&he().then(()=>{document.querySelectorAll(".el-hover-title .el-tag__content").forEach(a=>{a.setAttribute("title",a.innerText)})})},{deep:!0}),(C,a)=>{const l=aa,o=na,v=Lt,f=ha,u=tt,y=wt,S=oa,D=at,t=kt,j=la;return h(),oe(j,{"model-value":T.value,width:"620px","close-on-click-modal":!1,title:n.value.id?e(c)("common.editSchedule"):e(c)("common.newSchedule"),onClosed:a[10]||(a[10]=w=>r("update:modelValue",!1))},{footer:R(()=>[g(t,{disabled:p.value,onConfirm:Y,onCancel:a[9]||(a[9]=w=>T.value=!1)},null,8,["disabled"])]),default:R(()=>[g(D,{"max-height":"400px","wrap-class":"pr-12"},{default:R(()=>[g(S,{ref_key:"form",ref:$,"label-position":"top",model:n.value,rules:e(A),onSubmit:a[8]||(a[8]=Xe(()=>{},["prevent"]))},{default:R(()=>[g(o,{label:e(c)("common.scheduleSubject"),prop:"calendarTitle"},{default:R(()=>[g(l,{modelValue:n.value.calendarTitle,"onUpdate:modelValue":a[0]||(a[0]=w=>n.value.calendarTitle=w),"data-cy":"calendarTitle"},null,8,["modelValue"])]),_:1},8,["label"]),g(o,{label:e(c)("common.participants"),prop:"contact"},{default:R(()=>[g(Et,{modelValue:n.value.contact,"onUpdate:modelValue":a[1]||(a[1]=w=>n.value.contact=w),"input-value":n.value.contact,class:"!w-full"},null,8,["modelValue","input-value"])]),_:1},8,["label"]),s("div",Pa,[g(o,{label:e(c)("common.startTime"),prop:"startTime"},{default:R(()=>[s("div",Oa,[g(v,{modelValue:n.value.startDate,"onUpdate:modelValue":a[2]||(a[2]=w=>n.value.startDate=w),class:"!w-140px",type:"date",clearable:!1},null,8,["modelValue"]),g(f,{modelValue:n.value.startTime,"onUpdate:modelValue":a[3]||(a[3]=w=>n.value.startTime=w),format:"HH:mm",class:"!w-100px",clearable:!1},null,8,["modelValue"])])]),_:1},8,["label"]),g(o,{label:e(c)("common.endTime"),prop:"endTime"},{default:R(()=>[s("div",Ra,[g(v,{modelValue:n.value.endDate,"onUpdate:modelValue":a[4]||(a[4]=w=>n.value.endDate=w),class:"!w-140px",type:"date",clearable:!1},null,8,["modelValue"]),g(f,{modelValue:n.value.endTime,"onUpdate:modelValue":a[5]||(a[5]=w=>n.value.endTime=w),class:"!w-100px",format:"HH:mm",clearable:!1},null,8,["modelValue"])])]),_:1},8,["label"])]),p.value?(h(),k("div",Ba,[g(u,{class:"iconfont icon-Tips"}),X(" "+b(e(c)("common.theEndTimeShouldBeLaterThanTheStartTime")),1)])):M("",!0),g(o,{label:e(c)("common.location"),prop:"location"},{default:R(()=>[g(l,{modelValue:n.value.location,"onUpdate:modelValue":a[6]||(a[6]=w=>n.value.location=w),"data-cy":"location"},null,8,["modelValue"])]),_:1},8,["label"]),g(o,{label:e(c)("common.description"),prop:"mark"},{default:R(()=>[g(y,{modelValue:n.value.mark,"onUpdate:modelValue":a[7]||(a[7]=w=>n.value.mark=w),"hidden-code":!0,"hidden-image":!0,min_height:150,max_height:250},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["model-value","title"])}}});var ja=et(Ia,[["__scopeId","data-v-2a86829c"]]);const ge=d=>(Qt("data-v-5655021c"),d=d(),Xt(),d),za={class:"p-20px pb-16 h-[calc(100vh-50px)] flex dark:text-[#fffa]"},La={class:"h-full group"},Ua={class:"p-4 px-8 flex items-center justify-between"},Ha={class:"overflow-hidden scheduleList"},Fa=["title"],Na={key:0,class:"w-full my-2px p-4 text-12px flex items-center flex-row-reverse dark:bg-[#18222c] h-20px leading-5"},Wa={class:"flex items-center space-x-4 w-full"},Ya=ge(()=>s("div",{class:"h-6px w-6px rounded-full bg-blue"},null,-1)),qa={class:"text-000 flex-1 dark:text-[#fffa] flex-1 ellipsis"},Ka={class:"moreAction hidden absolute bottom-0 left-1/2 transform -translate-x-1/2 w-full h-24 text-center text-blue z-10"},Ja={key:0,class:"overflow-hidden"},Ga={class:"font-bold text-center my-8 p-12 text-20px"},Qa={key:0},Xa={class:"w-full flex items-baseline text-m hover:bg-[#f5f6f7] p-16 cursor-pointer dark:hover:bg-[#244764]"},Za={class:"text-999 w-80px"},en={class:"flex items-center space-x-8"},tn=ge(()=>s("div",{class:"h-6px w-6px rounded-full bg-blue"},null,-1)),an={key:0,class:"pl-14px"},nn={class:"flex-1 text-999 break-words text-start space-y-4",style:{"word-break":"break-word"}},on={class:"text-000 font-bold dark:text-[#fffa]"},ln={key:0,class:"flex space-x-4"},sn={class:"flex-1 break-words text-start"},rn={key:1,class:"flex space-x-4 overflow-auto"},cn={class:"p-16"},dn={class:"flex space-x-8"},un=ge(()=>s("div",{class:"flex items-center h-22px"},[s("div",{class:"h-8 w-8 rounded-full bg-blue"})],-1)),pn={class:"text-000 font-bold dark:text-[#fffa]"},mn={class:"flex items-center mt-8"},fn=ge(()=>s("span",{class:"mx-12"},"\u2014\u2014",-1)),vn={key:0},hn={key:0},_n={class:"mr-4"},gn={class:""},xn={class:"text-[#959DA6] text-12px mb-8"},yn={key:0},bn={key:0},kn={key:1},wn={key:0},Dn={key:2},Sn={key:0},Tn={key:3},Cn={key:0,class:"flex items-center justify-between mb-8"},En={class:"text-[#959DA6] text-12px"},Vn=["title"],$n={class:"ellipsis"},An={key:2,class:"text-999 flex"},Mn={class:"flex-1 break-words text-start"},Pn={key:3,class:"flex text-999"},On={class:"text-right flex flex-row-reverse bg-[#f5f6f7] dark:bg-444 p-12 w-full"},Rn={key:1,class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 text-center space-y-12 text-14px w-full"},Bn={class:"text-999"},In=["title"],jn=re({setup(d){const{t:r}=Qe(),i=U(new Date),c=U(!0),T=U(),$=U(),p=U(!1),x=U({}),n=Ze(),A=()=>ae(this,null,function*(){$.value=yield yt(Ee(E(i.value),-31)+" 00:00:00",Ee(E(i.value),31)+" 00:00:00"),B()});Gt(()=>ae(this,null,function*(){yield A(),I()}));const B=()=>{var a;T.value=[],(a=$.value)==null||a.forEach(l=>{var o;Se(E(i.value),E(l.start),E(l.end))&&((o=T.value)==null||o.push(l))})},O=a=>{p.value=!0;let l=new Date,o,v,f=l.getHours(),u,y=[];for(var S=0;S<24;S++){let D=S.toString();S<10&&(D="0"+S),y.push(D)}l.getMinutes()<30?u="30":(u="00",f+=1),o=y[f%24],v=y[(f+1)%24],x.value.startDate=a,x.value.startTime=a+` ${o}:${u}:00`,x.value.endDate=a,x.value.endTime=a+` ${v}:${u}:00`},Y=a=>{p.value=!0,x.value.id=a.id,x.value.startDate=E(a.start),x.value.startTime=G(a.start),x.value.endDate=E(a.end),x.value.endTime=G(a.end),x.value.calendarTitle=a.calendarTitle,x.value.mark=a.mark,x.value.location=a.location,x.value.contact=a.contact.filter(l=>l!==a.organizer),x.value.isOrganizer=a.isOrganizer},H=a=>ae(this,null,function*(){let l=G(a.start)>G(new Date);a.contact.length&&a.isOrganizer&&l?yield K(r("common.aCancellationEmailWillBeSentToParticipants")):yield Vt(),yield bt(a.id,n.defaultAddress),yield A()}),I=()=>{he(()=>{document.querySelectorAll(".scheduleList").forEach(a=>{let l=a.getBoundingClientRect().height+24,o=a.parentElement.parentElement.parentElement.getBoundingClientRect().height,v=a.nextElementSibling;parseInt(l.toString())>parseInt(o.toString())?v.style.display="block":v.style.display="none"})})};le(()=>i.value,(a,l)=>ae(this,null,function*(){B(),Ne(l)!=Ne(a)&&(yield A(),I())}),{immediate:!0}),le(()=>$.value,()=>{I()}),le(()=>p.value,()=>{p.value||(x.value={})});const C=U();return le(()=>p.value,()=>{he(()=>{var a;p.value?(C.value=(a=Array.from(document.querySelectorAll(".el-overlay")).at(-1))==null?void 0:a.style.zIndex,document.body.style.setProperty("--tox-tinymce-aux-index",C.value),document.body.classList.add("editScheduleDialog")):document.body.classList.remove("editScheduleDialog")})}),window.onresize=()=>{he(()=>{I()})},(a,l)=>{const o=tt,v=Ma,f=ra,u=at,y=_t,S=ia;return h(),k(J,null,[s("div",za,[g(v,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=D=>i.value=D),class:"flex-1 rounded-normal shadow-s-20 h-full kCalendar"},{dateCell:R(({data:D})=>[s("div",La,[s("p",Ua,[s("span",{class:V(D.isSelected?"text-blue":"")},b(D.day.split("-").slice(1).join("-")),3),g(o,{class:"el-icon iconfont icon-a-addto text-blue hidden group-hover:block text-12px font-bold",title:e(r)("common.newSchedule"),onClick:Xe(t=>O(D.day),["stop"])},null,8,["title","onClick"])]),s("ul",Ha,[(h(!0),k(J,null,Q($.value,t=>(h(),k("li",{key:t.id,title:t.calendarTitle},[e(Se)(e(E)(D.day),e(E)(t.start),e(E)(t.end))?(h(),k("div",Na,[s("div",Wa,[Ya,s("span",qa,b(t.calendarTitle),1)])])):M("",!0)],8,Fa))),128))]),s("div",Ka,[g(o,{class:"iconfont icon-more hover:text-blue rotate-90 transform text-14px h-24"})])])]),_:1},8,["modelValue"]),g(u,{class:V(["bg-fff dark:bg-[#333] shadow-s-20 transition-all duration-500 rounded-normal relative dark:text-[#fffa]",c.value?" w-300px  ml-16":"w-0 p-0 "])},{default:R(()=>{var D;return[c.value?(h(),k("div",Ja,[s("h1",Ga,b(e(Te)(i.value))+" ( "+b(e(Ce)[new Date(i.value).getDay()])+" ) ",1),(D=T.value)!=null&&D.length?(h(),k("ul",Qa,[(h(!0),k(J,null,Q(T.value,t=>(h(),oe(S,{key:t.id,placement:"left",width:400,trigger:"click","popper-style":"padding:0px;","popper-class":"!p-0 scheduleDetail"},{reference:R(()=>[s("li",Xa,[s("div",Za,[s("div",en,[tn,s("div",null,b(e(E)(new Date(i.value))===e(E)(t.start)?e(ne)(t.start):e(Se)(e(G)(t.end),e(E)(new Date(i.value))+" 00:00:00",e(Ee)(e(E)(new Date(i.value)),1)+" 00:00:00")?e(ne)(t.end):e(r)("common.allDay")),1)]),e(E)(i.value)!==e(E)(t.start)?(h(),k("div",an,b(e(E)(i.value)===e(E)(t.end)?e(r)("common.end"):""),1)):M("",!0)]),s("div",nn,[s("div",on,[s("span",null,b(t.calendarTitle),1)]),t.location?(h(),k("div",ln,[g(o,{class:"iconfont icon-dingwei h-22px"}),s("span",sn,b(t.location),1)])):M("",!0),t.mark?(h(),k("div",rn,[g(o,{class:"iconfont icon-wenjian h-22px"}),g(Je,{html:t.mark,class:"leading-22px"},null,8,["html"])])):M("",!0)])])]),default:R(()=>[s("div",null,[g(u,{"max-height":"550px","view-class":"text-m "},{default:R(()=>{var j;return[s("div",cn,[s("div",dn,[un,s("h1",pn,b(t.calendarTitle),1)]),s("div",mn,[s("div",{class:V(e(E)(t.start)===e(E)(t.end)?"flex space-x-8":"")},[s("div",null,b(e(Te)(t.start))+" ( "+b(e(Ce)[new Date(t.start).getDay()])+" ) ",1),s("div",null,b(e(ne)(t.start)),1)],2),fn,s("div",null,[e(E)(t.start)!==e(E)(t.end)?(h(),k("div",vn,b(e(Te)(t.end))+" ( "+b(e(Ce)[new Date(t.end).getDay()])+" ) ",1)):M("",!0),s("div",null,b(e(ne)(t.end)),1)])]),t.contact.length?(h(),k("div",hn,[g(f,{class:"my-8"}),s("span",_n,b(t.totalCount),1),s("span",gn,b(e(r)("calendar.participants")),1),s("div",xn,[t.acceptCount?(h(),k("span",yn,[X(b(t.acceptCount)+" "+b(e(r)("calendar.yes")),1),t.acceptCount!==t.totalCount&&t.declineCount||t.tentativeCount||t.awaitingCount?(h(),k("span",bn,", ")):M("",!0)])):M("",!0),t.declineCount?(h(),k("span",kn,[X(b(t.declineCount)+" "+b(e(r)("calendar.no")),1),t.declineCount!==t.totalCount&&t.tentativeCount||t.awaitingCount?(h(),k("span",wn,", ")):M("",!0)])):M("",!0),t.tentativeCount?(h(),k("span",Dn,[X(b(t.tentativeCount)+" "+b(e(r)("calendar.maybe")),1),t.tentativeCount!==t.totalCount&&t.awaitingCount?(h(),k("span",Sn,", ")):M("",!0)])):M("",!0),t.awaitingCount?(h(),k("span",Tn,b(t.awaitingCount)+" "+b(e(r)("calendar.awaiting")),1)):M("",!0)]),s("ul",null,[t.organizer?(h(),k("div",Cn,[s("div",null,[s("div",null,b(t.organizer),1),s("div",En,b(e(r)("common.organizer")),1)]),g(o,{class:"iconfont icon-yes text-green mr-8"})])):M("",!0),(h(!0),k(J,null,Q((j=t.attendeeStatus)==null?void 0:j.filter(w=>w.address!==t.organizer),w=>(h(),k("li",{key:w.address,class:"flex justify-between items-center",title:w.address},[s("span",$n,b(w.address),1),g(o,{class:V(["iconfont mr-8",{" icon-yes text-green ":w.participationStatus===1," icon-delete4 text-orange ":w.participationStatus===2," icon-problem text-blue":w.participationStatus===0," icon-shalou":w.participationStatus===-1}])},null,8,["class"])],8,Vn))),128))])])):M("",!0),t.location||t.mark?(h(),oe(f,{key:1,class:"my-8"})):M("",!0),t.location?(h(),k("div",An,[g(o,{class:"iconfont icon-dingwei h-22px w-14px mr-4"}),s("span",Mn,b(t.location),1)])):M("",!0),t.mark?(h(),k("div",Pn,[g(o,{class:"iconfont icon-wenjian h-22px mr-4"}),g(Je,{html:t.mark,class:"leading-22px"},null,8,["html"])])):M("",!0)])]}),_:2},1024),s("div",On,[g(y,{class:"text-orange hover:text-orange",icon:"icon-delete ",tip:e(r)("common.delete"),onClick:j=>H(t)},null,8,["tip","onClick"]),t.isOrganizer?(h(),oe(y,{key:0,icon:"icon-a-writein",tip:e(r)("common.edit"),"data-cy":"edit",onClick:j=>Y(t)},null,8,["tip","onClick"])):M("",!0)])])]),_:2},1024))),128))])):(h(),k("div",Rn,[s("div",Bn,b(e(r)("common.noScheduleForThatDay")),1),s("div",{class:"text-blue cursor-pointer",onClick:l[1]||(l[1]=t=>O(e(E)(new Date(i.value))))},b(e(r)("common.newSchedule")),1)]))])):M("",!0)]}),_:1},8,["class"])]),s("div",{class:V(["flex rounded-full bg-fff shadow-s-10 w-26px flex items-center h-26px cursor-pointer dark:bg-666 absolute top-32 right-306px flex items-center justify-center transition-all duration-500",c.value?"":" -right-26px"]),onClick:l[2]||(l[2]=D=>c.value=!1)},[g(o,{class:"iconfont icon-a-nextstep2 cursor-pointer text-blue text-s"})],2),s("div",{class:V(["fixed top-90px -right-100px bg-fff dark:bg-999 p-12 shadow-s-20 rounded-l-full cursor-pointer transition-all duration-500 flex items-center justify-center hover:text-blue",c.value?"":" !right-0"]),title:e(r)("common.schedule"),onClick:l[3]||(l[3]=D=>c.value=!0)},[g(o,{class:"iconfont icon-richeng text-20px"})],10,In),p.value?(h(),oe(ja,{key:0,modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=D=>p.value=D),"current-schedule":x.value,onReload:l[5]||(l[5]=D=>A())},null,8,["modelValue","current-schedule"])):M("",!0)],64)}}});var ns=et(jn,[["__scopeId","data-v-5655021c"]]);export{ns as default};
