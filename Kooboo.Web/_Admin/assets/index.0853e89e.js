var jn=Object.defineProperty,Gn=Object.defineProperties;var Wn=Object.getOwnPropertyDescriptors;var Qt=Object.getOwnPropertySymbols;var Yn=Object.prototype.hasOwnProperty,Xn=Object.prototype.propertyIsEnumerable;var Zt=(e,t,n)=>t in e?jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ke=(e,t)=>{for(var n in t||(t={}))Yn.call(t,n)&&Zt(e,n,t[n]);if(Qt)for(var n of Qt(t))Xn.call(t,n)&&Zt(e,n,t[n]);return e},ut=(e,t)=>Gn(e,Wn(t));var Q=(e,t,n)=>new Promise((o,l)=>{var r=c=>{try{p(n.next(c))}catch(v){l(v)}},s=c=>{try{p(n.throw(c))}catch(v){l(v)}},p=c=>c.done?o(c.value):Promise.resolve(c.value).then(r,s);p((n=n.apply(e,t)).next())});import{S as Qn}from"./search-input.67dfc984.js";import{a as Pt,a5 as Zn,w as Z,i as ft,v as St,g as we,d as Jn,o as st,C as eo,Y as to}from"./i18n.48bd28ac.js";import{e as ke,n as no}from"./guid.c1a40312.js";import{a as rt,g as oo,d as lo,p as dn,c as ao,b as cn,i as un,_ as Bt,e as Ft,f as so,h as ro,t as io,j as co,k as uo,l as fo,m as mo,n as po,o as ho,q as vo,r as go,s as yo,v as ko,w as Co,S as tt,O as nt,x as _o,y as bo,z as No,A as wo}from"./dev-mode.c4133b5a.js";import{_ as Eo}from"./alert.583ccfe6.js";import{_ as Xe}from"./index.a731e53b.js";import{E as _t,a as bt,c as xo}from"./index.0d2684bf.js";import{E as Pe,a as Be,S as So}from"./index.6855d037.js";import{E as Fe}from"./index.c4e9b529.js";import{c as X,A as Qe,d as le,g as I,E as fn,u as i,i as ae,aW as mn,U as xe,K as Ie,h as Ut,a3 as pn,l as gt,p as Tt,bA as yt,B as Re,b2 as Oe,v as hn,N as ve,e as Ve,o as k,a as z,f as U,j as L,w as h,n as ue,k as j,b as m,m as zt,F as se,b6 as ye,aq as Dt,t as F,aH as te,cd as vn,b7 as To,L as Do,J as Ko,c0 as Vo}from"./url.2e6a77c4.js";import{_ as Io}from"./tooltip.28a451cc.js";import{a as Se,i as at,s as Ht,r as kt}from"./validate.efc4a5c0.js";import{s as $o}from"./index.6d45a031.js";import{b as Mo,E as $e,u as gn}from"./main.ea42d807.js";import{_ as Lo}from"./plugin-vue_export-helper.21dcd24c.js";import{E as Nt,a as wt}from"./index.695d0284.js";import{E as We}from"./index.fc90f5ad.js";import{E as it}from"./index.77edae39.js";import{E as qt}from"./index.2bc50276.js";import{E as Ao}from"./index.470f0e7e.js";import{E as Ro}from"./index.af90dc36.js";import{u as Ne}from"./replace-all.7cf5f327.js";import{_ as Ee}from"./icon-button.3313e42d.js";import{a1 as Ue,d as ge,b as ze,m as je,u as _e,_ as dt,Y as Et,X as Oo,E as Ze,n as Po,am as yn,c as Le,D as kn,i as Bo,w as Fo}from"./windi.a5b0b048.js";import{E as Cn,a as _n,b as bn}from"./index.f5a869bb.js";import{u as Nn}from"./page.831d1a45.js";import{E as wn,a as Uo}from"./index.b494e80e.js";import{B as zo,E as jt}from"./index.a439b087.js";import{s as Jt,b as En}from"./confirm.e2c924ff.js";import{E as Ho}from"./index.7af8368f.js";import{i as qo}from"./browser.6147bf52.js";import{u as xn}from"./index.fcc3ea42.js";import{E as Gt}from"./index.379e80ad.js";import{_ as jo}from"./k-table.d4486972.js";import{u as Go}from"./use-date.01b82ce0.js";import{_ as Wo}from"./object-type-tag.d88b7d53.js";import{_ as Yo}from"./index.ad581bad.js";import{o as Xo,a as Qo}from"./event.53b2ad83.js";import{_ as Zo}from"./relations-tag.a09361ff.js";import{B as Jo}from"./breadcrumb.80c136b8.js";import{E as el}from"./index.968f79fd.js";import{E as tl}from"./index.fafb14b3.js";/* empty css                                                                 */import"./use-shortcuts.21ce2d8e.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./preload-helper.13a99eb0.js";import"./config.9fb52765.js";import"./dark.ddf8665a.js";import"./use-copy-text.a346ed23.js";import"./index.c6df1b45.js";import"./style.19d0c187.js";import"./toNumber.574be4f1.js";import"./_baseIsEqual.c0d7e77a.js";import"./index.0f940e7f.js";import"./classCompletion.a22e38a6.js";import"./vuedraggable.umd.5840ebc7.js";import"./cloneDeep.ff43c1f8.js";import"./_baseClone.adbc92f5.js";import"./toggleComment.5b29ca87.js";import"./use-save-tip.04d9878f.js";import"./index.cbddf8eb.js";import"./validator.e2869aba.js";import"./event.776e7e11.js";import"./index.ff0264f3.js";import"./error.7e8331f1.js";import"./index.66d5d547.js";import"./index.232e741a.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.118b18f5.js";/* empty css                                                          */import"./file.b0d4cc6e.js";/* empty css                                                          */import"./use-file-upload.82732353.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.f6d26366.js";import"./image-editor.846c8dc6.js";import"./main.esm.5190fb65.js";import"./index.f01d4ffd.js";import"./scroll.f51de5d8.js";import"./isEqual.f1ae9fb3.js";import"./debounce.61c67278.js";import"./index.064c7de9.js";import"./index.603c1365.js";import"./focus-trap.23f44899.js";import"./isNil.98bb3b88.js";import"./refs.4001ce17.js";import"./index.d75a71d9.js";import"./index.aba77680.js";import"./index.31f26a0f.js";import"./index.60af85f4.js";import"./index.50c16ae5.js";import"./index.deca86b5.js";import"./index.8262f5ef.js";import"./dropdown.0507a1c7.js";import"./index.99c4f65d.js";import"./aria.75ec5909.js";import"./logo-transparent.1566007e.js";import"./sortable.esm.a99254e8.js";import"./index.7034978e.js";import"./dayjs.min.0a66969b.js";import"./plugin-vue_export-helper.41ffa612.js";const Sn=e=>Pt?window.requestAnimationFrame(e):setTimeout(e,16),Tn=e=>Pt?window.cancelAnimationFrame(e):clearTimeout(e);var en=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function nl(e,t){return!!(e===t||en(e)&&en(t))}function ol(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!nl(e[n],t[n]))return!1;return!0}function ll(e,t){t===void 0&&(t=ol);var n=null;function o(){for(var l=[],r=0;r<arguments.length;r++)l[r]=arguments[r];if(n&&n.lastThis===this&&t(l,n.lastArgs))return n.lastResult;var s=e.apply(this,l);return n={lastResult:s,lastArgs:l,lastThis:this},s}return o.clear=function(){n=null},o}const al=()=>{const t=Qe().proxy.$props;return X(()=>{const n=(o,l,r)=>({});return t.perfMode?Zn(n):ll(n)})},tn="itemRendered",nn="scroll",Dn="forward",Kn="backward",Kt="auto",sl="smart",rl="start",on="center",il="end",Ye="horizontal",Wt="vertical",dl="ltr",pt="rtl",Vn="negative",cl="positive-ascending",In="positive-descending",ul={[Ye]:"left",[Wt]:"top"},fl=20,ml={[Ye]:"deltaX",[Wt]:"deltaY"},pl=({atEndEdge:e,atStartEdge:t,layout:n},o)=>{let l,r=0;const s=c=>c<0&&t.value||c>0&&e.value;return{hasReachedEdge:s,onWheel:c=>{Tn(l);const v=c[ml[n.value]];s(r)&&s(r+v)||(r+=v,qo()||c.preventDefault(),l=Sn(()=>{o(r),r=0}))}}},Vt=Ue({type:ge([Number,Function]),required:!0}),It=Ue({type:Number}),$t=Ue({type:Number,default:2}),hl=Ue({type:String,values:["ltr","rtl"],default:"ltr"}),Mt=Ue({type:Number,default:0}),Ct=Ue({type:Number,required:!0}),$n=Ue({type:String,values:["horizontal","vertical"],default:Wt}),Mn=ze({className:{type:String,default:""},containerElement:{type:ge([String,Object]),default:"div"},data:{type:ge(Array),default:()=>je([])},direction:hl,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:ge([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),vl=ze(Ke({cache:$t,estimatedItemSize:It,layout:$n,initScrollOffset:Mt,total:Ct,itemSize:Vt},Mn)),Lt={type:Number,default:6},Ln={type:Number,default:0},An={type:Number,default:2};ze(Ke({columnCache:$t,columnWidth:Vt,estimatedColumnWidth:It,estimatedRowHeight:It,initScrollLeft:Mt,initScrollTop:Mt,itemKey:{type:ge(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:$t,rowHeight:Vt,totalColumn:Ct,totalRow:Ct,hScrollbarSize:Lt,vScrollbarSize:Lt,scrollbarStartGap:Ln,scrollbarEndGap:An},Mn));const gl=ze({alwaysOn:Boolean,class:String,layout:$n,total:Ct,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:Lt,startGap:Ln,endGap:An,visible:Boolean}),xt=(e,t)=>e<t?Dn:Kn,At=e=>e===dl||e===pt||e===Ye;let He=null;function ln(e=!1){if(He===null||e){const t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const o=document.createElement("div"),l=o.style;return l.width="100px",l.height="100px",t.appendChild(o),document.body.appendChild(t),t.scrollLeft>0?He=In:(t.scrollLeft=1,t.scrollLeft===0?He=Vn:He=cl),document.body.removeChild(t),He}return He}function yl({move:e,size:t,bar:n},o){const l={},r=`translate${n.axis}(${e}px)`;return l[n.size]=t,l.transform=r,l.msTransform=r,l.webkitTransform=r,o==="horizontal"?l.height="100%":l.width="100%",l}const kl=le({name:"ElVirtualScrollBar",props:gl,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const n=X(()=>e.startGap+e.endGap),o=_e("virtual-scrollbar"),l=_e("scrollbar"),r=I(),s=I();let p=null,c=null;const v=fn({isDragging:!1,traveled:0}),a=X(()=>zo[e.layout]),f=X(()=>e.clientSize-i(n)),d=X(()=>({position:"absolute",width:`${Ye===e.layout?f.value:e.scrollbarSize}px`,height:`${Ye===e.layout?e.scrollbarSize:f.value}px`,[ul[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),g=X(()=>{const u=e.ratio,C=e.clientSize;if(u>=100)return Number.POSITIVE_INFINITY;if(u>=50)return u*C/100;const w=C/3;return Math.floor(Math.min(Math.max(u*C,fl),w))}),x=X(()=>{if(!Number.isFinite(g.value))return{display:"none"};const u=`${g.value}px`;return yl({bar:a.value,size:u,move:v.traveled},e.layout)}),K=X(()=>Math.floor(e.clientSize-g.value-i(n))),T=()=>{window.addEventListener("mousemove",b),window.addEventListener("mouseup",S);const u=i(s);!u||(c=document.onselectstart,document.onselectstart=()=>!1,u.addEventListener("touchmove",b),u.addEventListener("touchend",S))},M=()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",S),document.onselectstart=c,c=null;const u=i(s);!u||(u.removeEventListener("touchmove",b),u.removeEventListener("touchend",S))},O=u=>{u.stopImmediatePropagation(),!(u.ctrlKey||[1,2].includes(u.button))&&(v.isDragging=!0,v[a.value.axis]=u.currentTarget[a.value.offset]-(u[a.value.client]-u.currentTarget.getBoundingClientRect()[a.value.direction]),t("start-move"),T())},S=()=>{v.isDragging=!1,v[a.value.axis]=0,t("stop-move"),M()},b=u=>{const{isDragging:C}=v;if(!C||!s.value||!r.value)return;const w=v[a.value.axis];if(!w)return;Tn(p);const E=(r.value.getBoundingClientRect()[a.value.direction]-u[a.value.client])*-1,$=s.value[a.value.offset]-w,B=E-$;p=Sn(()=>{v.traveled=Math.max(e.startGap,Math.min(B,K.value)),t("scroll",B,K.value)})},y=u=>{const C=Math.abs(u.target.getBoundingClientRect()[a.value.direction]-u[a.value.client]),w=s.value[a.value.offset]/2,E=C-w;v.traveled=Math.max(0,Math.min(E,K.value)),t("scroll",E,K.value)};return ae(()=>e.scrollFrom,u=>{v.isDragging||(v.traveled=Math.ceil(u*K.value))}),mn(()=>{M()}),()=>xe("div",{role:"presentation",ref:r,class:[o.b(),e.class,(e.alwaysOn||v.isDragging)&&"always-on"],style:d.value,onMousedown:Z(y,["stop","prevent"]),onTouchstartPrevent:O},xe("div",{ref:s,class:l.e("thumb"),style:x.value,onMousedown:O},[]))}}),Cl=({name:e,getOffset:t,getItemSize:n,getItemOffset:o,getEstimatedTotalSize:l,getStartIndexForOffset:r,getStopIndexForStartIndex:s,initCache:p,clearCache:c,validateProps:v})=>le({name:e!=null?e:"ElVirtualList",props:vl,emits:[tn,nn],setup(a,{emit:f,expose:d}){v(a);const g=Qe(),x=_e("vl"),K=I(p(a,g)),T=al(),M=I(),O=I(),S=I(),b=I({isScrolling:!1,scrollDir:"forward",scrollOffset:ft(a.initScrollOffset)?a.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:a.scrollbarAlwaysOn}),y=X(()=>{const{total:R,cache:H}=a,{isScrolling:G,scrollDir:N,scrollOffset:P}=i(b);if(R===0)return[0,0,0,0];const W=r(a,P,i(K)),Y=s(a,W,P,i(K)),ee=!G||N===Kn?Math.max(1,H):1,fe=!G||N===Dn?Math.max(1,H):1;return[Math.max(0,W-ee),Math.max(0,Math.min(R-1,Y+fe)),W,Y]}),u=X(()=>l(a,i(K))),C=X(()=>At(a.layout)),w=X(()=>[{position:"relative",[`overflow-${C.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:a.direction,height:ft(a.height)?`${a.height}px`:a.height,width:ft(a.width)?`${a.width}px`:a.width},a.style]),E=X(()=>{const R=i(u),H=i(C);return{height:H?"100%":`${R}px`,pointerEvents:i(b).isScrolling?"none":void 0,width:H?`${R}px`:"100%"}}),$=X(()=>C.value?a.width:a.height),{onWheel:B}=pl({atStartEdge:X(()=>b.value.scrollOffset<=0),atEndEdge:X(()=>b.value.scrollOffset>=u.value),layout:X(()=>a.layout)},R=>{var H,G;(G=(H=S.value).onMouseUp)==null||G.call(H),D(Math.min(b.value.scrollOffset+R,u.value-$.value))}),J=()=>{const{total:R}=a;if(R>0){const[P,W,Y,ee]=i(y);f(tn,P,W,Y,ee)}const{scrollDir:H,scrollOffset:G,updateRequested:N}=i(b);f(nn,H,G,N)},oe=R=>{const{clientHeight:H,scrollHeight:G,scrollTop:N}=R.currentTarget,P=i(b);if(P.scrollOffset===N)return;const W=Math.max(0,Math.min(N,G-H));b.value=ut(Ke({},P),{isScrolling:!0,scrollDir:xt(P.scrollOffset,W),scrollOffset:W,updateRequested:!1}),Ie(q)},ne=R=>{const{clientWidth:H,scrollLeft:G,scrollWidth:N}=R.currentTarget,P=i(b);if(P.scrollOffset===G)return;const{direction:W}=a;let Y=G;if(W===pt)switch(ln()){case Vn:{Y=-G;break}case In:{Y=N-H-G;break}}Y=Math.max(0,Math.min(Y,N-H)),b.value=ut(Ke({},P),{isScrolling:!0,scrollDir:xt(P.scrollOffset,Y),scrollOffset:Y,updateRequested:!1}),Ie(q)},me=R=>{i(C)?ne(R):oe(R),J()},re=(R,H)=>{const G=(u.value-$.value)/H*R;D(Math.min(u.value-$.value,G))},D=R=>{R=Math.max(R,0),R!==i(b).scrollOffset&&(b.value=ut(Ke({},i(b)),{scrollOffset:R,scrollDir:xt(i(b).scrollOffset,R),updateRequested:!0}),Ie(q))},_=(R,H=Kt)=>{const{scrollOffset:G}=i(b);R=Math.max(0,Math.min(R,a.total-1)),D(t(a,R,H,G,i(K)))},V=R=>{const{direction:H,itemSize:G,layout:N}=a,P=T.value(c&&G,c&&N,c&&H);let W;if(yt(P,String(R)))W=P[R];else{const Y=o(a,R,i(K)),ee=n(a,R,i(K)),fe=i(C),de=H===pt,ce=fe?Y:0;P[R]=W={position:"absolute",left:de?void 0:`${ce}px`,right:de?`${ce}px`:void 0,top:fe?0:`${Y}px`,height:fe?"100%":`${ee}px`,width:fe?`${ee}px`:"100%"}}return W},q=()=>{b.value.isScrolling=!1,Ie(()=>{T.value(-1,null,null)})},pe=()=>{const R=M.value;R&&(R.scrollTop=0)};Ut(()=>{if(!Pt)return;const{initScrollOffset:R}=a,H=i(M);ft(R)&&H&&(i(C)?H.scrollLeft=R:H.scrollTop=R),J()}),pn(()=>{const{direction:R,layout:H}=a,{scrollOffset:G,updateRequested:N}=i(b),P=i(M);if(N&&P)if(H===Ye)if(R===pt)switch(ln()){case"negative":{P.scrollLeft=-G;break}case"positive-ascending":{P.scrollLeft=G;break}default:{const{clientWidth:W,scrollWidth:Y}=P;P.scrollLeft=Y-W-G;break}}else P.scrollLeft=G;else P.scrollTop=G});const ie={ns:x,clientSize:$,estimatedTotalSize:u,windowStyle:w,windowRef:M,innerRef:O,innerStyle:E,itemsToRender:y,scrollbarRef:S,states:b,getItemStyle:V,onScroll:me,onScrollbarScroll:re,onWheel:B,scrollTo:D,scrollToItem:_,resetScrollTop:pe};return d({windowRef:M,innerRef:O,getItemStyleCache:T,scrollTo:D,scrollToItem:_,resetScrollTop:pe,states:b}),ie},render(a){var f;const{$slots:d,className:g,clientSize:x,containerElement:K,data:T,getItemStyle:M,innerElement:O,itemsToRender:S,innerStyle:b,layout:y,total:u,onScroll:C,onScrollbarScroll:w,onWheel:E,states:$,useIsScrolling:B,windowStyle:J,ns:oe}=a,[ne,me]=S,re=gt(K),D=gt(O),_=[];if(u>0)for(let ie=ne;ie<=me;ie++)_.push((f=d.default)==null?void 0:f.call(d,{data:T,key:ie,index:ie,isScrolling:B?$.isScrolling:void 0,style:M(ie)}));const V=[xe(D,{style:b,ref:"innerRef"},Tt(D)?_:{default:()=>_})],q=xe(kl,{ref:"scrollbarRef",clientSize:x,layout:y,onScroll:w,ratio:x*100/this.estimatedTotalSize,scrollFrom:$.scrollOffset/(this.estimatedTotalSize-x),total:u}),pe=xe(re,{class:[oe.e("window"),g],style:J,onScroll:C,onWheel:E,ref:"windowRef",key:0},Tt(re)?[V]:{default:()=>[V]});return xe("div",{key:0,class:[oe.e("wrapper"),$.scrollbarAlwaysOn?"always-on":""]},[pe,q])}}),_l=Cl({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:n,layout:o,width:l},r,s,p)=>{const c=At(o)?l:e,v=Math.max(0,t*n-c),a=Math.min(v,r*n),f=Math.max(0,(r+1)*n-c);switch(s===sl&&(p>=f-c&&p<=a+c?s=Kt:s=on),s){case rl:return a;case il:return f;case on:{const d=Math.round(f+(a-f)/2);return d<Math.ceil(c/2)?0:d>v+Math.floor(c/2)?v:d}case Kt:default:return p>=f&&p<=a?p:p<f?f:a}},getStartIndexForOffset:({total:e,itemSize:t},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:n,layout:o,width:l},r,s)=>{const p=r*n,c=At(o)?l:e,v=Math.ceil((c+s-p)/n);return Math.max(0,Math.min(t-1,r+v-1))},initCache(){},clearCache:!0,validateProps(){}}),Ge="$treeNodeId",an=function(e,t){!t||t[Ge]||Object.defineProperty(t,Ge,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Yt=function(e,t){return e?t[e]:t[Ge]},Rt=e=>{let t=!0,n=!0,o=!0;for(let l=0,r=e.length;l<r;l++){const s=e[l];(s.checked!==!0||s.indeterminate)&&(t=!1,s.disabled||(o=!1)),(s.checked!==!1||s.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:o,half:!t&&!n}},ht=function(e){if(e.childNodes.length===0)return;const{all:t,none:n,half:o}=Rt(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):o?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const l=e.parent;!l||l.level===0||e.store.checkStrictly||ht(l)},mt=function(e,t){const n=e.store.props,o=e.data||{},l=n[t];if(typeof l=="function")return l(o,e);if(typeof l=="string")return o[l];if(typeof l=="undefined"){const r=o[t];return r===void 0?"":r}};let bl=0;class Ae{constructor(t){this.id=bl++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)yt(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const n=t.props;if(n&&typeof n.isLeaf!="undefined"){const r=mt(this,"isLeaf");typeof r=="boolean"&&(this.isLeafByUser=r)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&this.expand(),Array.isArray(this.data)||an(this,this.data),!this.data)return;const o=t.defaultExpandedKeys,l=t.key;l&&o&&o.includes(this.key)&&this.expand(null,t.autoExpandParent),l&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Array.isArray(t)||an(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=mt(this,"children")||[];for(let o=0,l=n.length;o<l;o++)this.insertChild({data:n[o]})}get label(){return mt(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return mt(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(o=>o===t||n&&o.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,o){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof Ae)){if(!o){const l=this.getChildren(!0);l.includes(t.data)||(typeof n=="undefined"||n<0?l.push(t.data):l.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=fn(new Ae(t)),t instanceof Ae&&t.initialize()}t.level=this.level+1,typeof n=="undefined"||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let o;n&&(o=this.childNodes.indexOf(n)),this.insertChild(t,o)}insertAfter(t,n){let o;n&&(o=this.childNodes.indexOf(n),o!==-1&&(o+=1)),this.insertChild(t,o)}removeChild(t){const n=this.getChildren()||[],o=n.indexOf(t.data);o>-1&&n.splice(o,1);const l=this.childNodes.indexOf(t);l>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(l,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let o=0;o<this.childNodes.length;o++)if(this.childNodes[o].data===t){n=this.childNodes[o];break}n&&this.removeChild(n)}expand(t,n){const o=()=>{if(n){let l=this.parent;for(;l.level>0;)l.expanded=!0,l=l.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(l=>{l.canFocus=!0})};this.shouldLoadData()?this.loadData(l=>{Array.isArray(l)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||ht(this),o())}):o()}doCreateChildren(t,n={}){t.forEach(o=>{this.insertChild(Object.assign({data:o},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser!="undefined"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,o,l){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:s,allWithoutDisable:p}=Rt(this.childNodes);!this.isLeaf&&!s&&p&&(this.checked=!1,t=!1);const c=()=>{if(n){const v=this.childNodes;for(let d=0,g=v.length;d<g;d++){const x=v[d];l=l||t!==!1;const K=x.disabled?x.checked:l;x.setChecked(K,n,!0,l)}const{half:a,all:f}=Rt(v);f||(this.checked=f,this.indeterminate=a)}};if(this.shouldLoadData()){this.loadData(()=>{c(),ht(this)},{checked:t!==!1});return}else c()}const r=this.parent;!r||r.level===0||o||ht(r)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const o=this.store.props;let l="children";return o&&(l=o.children||"children"),n[l]===void 0&&(n[l]=null),t&&!n[l]&&(n[l]=[]),n[l]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(r=>r.data),o={},l=[];t.forEach((r,s)=>{const p=r[Ge];!!p&&n.findIndex(v=>v[Ge]===p)>=0?o[p]={index:s,data:r}:l.push({index:s,data:r})}),this.store.lazy||n.forEach(r=>{o[r[Ge]]||this.removeChildByData(r)}),l.forEach(({index:r,data:s})=>{this.insertChild({data:s},r)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const o=l=>{this.loaded=!0,this.loading=!1,this.childNodes=[],this.doCreateChildren(l,n),this.updateLeafState(),t&&t.call(this,l)};this.store.load(this,o)}else t&&t.call(this)}}class Nl{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const n in t)yt(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){this.root=new Ae({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load?this.load(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()}):this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,o=this.lazy,l=function(r){const s=r.root?r.root.childNodes:r.childNodes;if(s.forEach(p=>{p.visible=n.call(p,t,p.data,p),l(p)}),!r.visible&&s.length){let p=!0;p=!s.some(c=>c.visible),r.root?r.root.visible=p===!1:r.visible=p===!1}!t||r.visible&&!r.isLeaf&&!o&&r.expand()};l(this)}setData(t){t!==this.root.data?(this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(t){if(t instanceof Ae)return t;const n=typeof t!="object"?t:Yt(this.key,t);return this.nodesMap[n]||null}insertBefore(t,n){const o=this.getNode(n);o.parent.insertBefore({data:t},o)}insertAfter(t,n){const o=this.getNode(n);o.parent.insertAfter({data:t},o)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const o=n?this.getNode(n):this.root;o&&o.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(o=>{const l=n[o];l&&l.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;!t||!t.data||(n?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(o=>{this.deregisterNode(o)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const o=[],l=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(p=>{(p.checked||n&&p.indeterminate)&&(!t||t&&p.isLeaf)&&o.push(p.data),l(p)})};return l(this),o}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(r=>{r.indeterminate&&t.push(r.data),n(r)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const o in n)yt(n,o)&&t.push(n[o]);return t}updateChildren(t,n){const o=this.nodesMap[t];if(!o)return;const l=o.childNodes;for(let r=l.length-1;r>=0;r--){const s=l[r];this.remove(s.data)}for(let r=0,s=n.length;r<s;r++){const p=n[r];this.append(p,o.data)}}_setCheckedKeys(t,n=!1,o){const l=this._getAllNodes().sort((p,c)=>c.level-p.level),r=Object.create(null),s=Object.keys(o);l.forEach(p=>p.setChecked(!1,!1));for(let p=0,c=l.length;p<c;p++){const v=l[p],a=v.data[t].toString();if(!s.includes(a)){v.checked&&!r[a]&&v.setChecked(!1,!1);continue}let d=v.parent;for(;d&&d.level>0;)r[d.data[t]]=!0,d=d.parent;if(v.isLeaf||this.checkStrictly){v.setChecked(!0,!1);continue}if(v.setChecked(!0,!0),n){v.setChecked(!1,!1);const g=function(x){x.childNodes.forEach(T=>{T.isLeaf||T.setChecked(!1,!1),g(T)})};g(v)}}}setCheckedNodes(t,n=!1){const o=this.key,l={};t.forEach(r=>{l[(r||{})[o]]=!0}),this._setCheckedKeys(o,n,l)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const o=this.key,l={};t.forEach(r=>{l[r]=!0}),this._setCheckedKeys(o,n,l)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const o=this.getNode(n);o&&o.expand(null,this.autoExpandParent)})}setChecked(t,n,o){const l=this.getNode(t);l&&l.setChecked(!!n,o)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){const o=t[this.key],l=this.nodesMap[o];this.setCurrentNode(l),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,n=!0){if(t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const o=this.getNode(t);o&&(this.setCurrentNode(o),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const wl=le({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=_e("tree"),n=Re("NodeInstance"),o=Re("RootTree");return()=>{const l=e.node,{data:r,store:s}=l;return e.renderContent?e.renderContent(xe,{_self:n,node:l,data:r,store:s}):o.ctx.slots.default?o.ctx.slots.default({node:l,data:r}):xe("span",{class:t.be("node","label")},[l.label])}}});var El=dt(wl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function Rn(e){const t=Re("TreeNodeMap",null),n={treeNodeExpand:o=>{e.node!==o&&e.node.collapse()},children:[]};return t&&t.children.push(n),Oe("TreeNodeMap",n),{broadcastExpanded:o=>{if(!!e.accordion)for(const l of n.children)l.treeNodeExpand(o)}}}const On=Symbol("dragEvents");function xl({props:e,ctx:t,el$:n,dropIndicator$:o,store:l}){const r=_e("tree"),s=I({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Oe(On,{treeNodeDragStart:({event:a,treeNode:f})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(f.node))return a.preventDefault(),!1;a.dataTransfer.effectAllowed="move";try{a.dataTransfer.setData("text/plain","")}catch(d){}s.value.draggingNode=f,t.emit("node-drag-start",f.node,a)},treeNodeDragOver:({event:a,treeNode:f})=>{const d=f,g=s.value.dropNode;g&&g!==d&&Et(g.$el,r.is("drop-inner"));const x=s.value.draggingNode;if(!x||!d)return;let K=!0,T=!0,M=!0,O=!0;typeof e.allowDrop=="function"&&(K=e.allowDrop(x.node,d.node,"prev"),O=T=e.allowDrop(x.node,d.node,"inner"),M=e.allowDrop(x.node,d.node,"next")),a.dataTransfer.dropEffect=T||K||M?"move":"none",(K||T||M)&&g!==d&&(g&&t.emit("node-drag-leave",x.node,g.node,a),t.emit("node-drag-enter",x.node,d.node,a)),(K||T||M)&&(s.value.dropNode=d),d.node.nextSibling===x.node&&(M=!1),d.node.previousSibling===x.node&&(K=!1),d.node.contains(x.node,!1)&&(T=!1),(x.node===d.node||x.node.contains(d.node))&&(K=!1,T=!1,M=!1);const S=d.$el.getBoundingClientRect(),b=n.value.getBoundingClientRect();let y;const u=K?T?.25:M?.45:1:-1,C=M?T?.75:K?.55:0:1;let w=-9999;const E=a.clientY-S.top;E<S.height*u?y="before":E>S.height*C?y="after":T?y="inner":y="none";const $=d.$el.querySelector(`.${r.be("node","expand-icon")}`).getBoundingClientRect(),B=o.value;y==="before"?w=$.top-b.top:y==="after"&&(w=$.bottom-b.top),B.style.top=`${w}px`,B.style.left=`${$.right-b.left}px`,y==="inner"?Oo(d.$el,r.is("drop-inner")):Et(d.$el,r.is("drop-inner")),s.value.showDropIndicator=y==="before"||y==="after",s.value.allowDrop=s.value.showDropIndicator||O,s.value.dropType=y,t.emit("node-drag-over",x.node,d.node,a)},treeNodeDragEnd:a=>{const{draggingNode:f,dropType:d,dropNode:g}=s.value;if(a.preventDefault(),a.dataTransfer.dropEffect="move",f&&g){const x={data:f.node.data};d!=="none"&&f.node.remove(),d==="before"?g.node.parent.insertBefore(x,g.node):d==="after"?g.node.parent.insertAfter(x,g.node):d==="inner"&&g.node.insertChild(x),d!=="none"&&l.value.registerNode(x),Et(g.$el,r.is("drop-inner")),t.emit("node-drag-end",f.node,g.node,d,a),d!=="none"&&t.emit("node-drop",f.node,g.node,d,a)}f&&!g&&t.emit("node-drag-end",f.node,null,d,a),s.value.showDropIndicator=!1,s.value.draggingNode=null,s.value.dropNode=null,s.value.allowDrop=!0}}),{dragState:s}}const Sl=le({name:"ElTreeNode",components:{ElCollapseTransition:Yo,ElCheckbox:it,NodeContent:El,ElIcon:Ze,Loading:Po},props:{node:{type:Ae,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const n=_e("tree"),{broadcastExpanded:o}=Rn(e),l=Re("RootTree"),r=I(!1),s=I(!1),p=I(null),c=I(null),v=I(null),a=Re(On),f=Qe();Oe("NodeInstance",f),e.node.expanded&&(r.value=!0,s.value=!0);const d=l.props.children||"children";ae(()=>{const E=e.node.data[d];return E&&[...E]},()=>{e.node.updateChildren()}),ae(()=>e.node.indeterminate,E=>{K(e.node.checked,E)}),ae(()=>e.node.checked,E=>{K(E,e.node.indeterminate)}),ae(()=>e.node.expanded,E=>{Ie(()=>r.value=E),E&&(s.value=!0)});const g=E=>Yt(l.props.nodeKey,E.data),x=E=>{const $=e.props.class;if(!$)return{};let B;if(hn($)){const{data:J}=E;B=$(J,E)}else B=$;return Tt(B)?{[B]:!0}:B},K=(E,$)=>{(p.value!==E||c.value!==$)&&l.ctx.emit("check-change",e.node.data,E,$),p.value=E,c.value=$},T=E=>{const $=l.store.value;$.setCurrentNode(e.node),l.ctx.emit("current-change",$.currentNode?$.currentNode.data:null,$.currentNode),l.currentNode.value=e.node,l.props.expandOnClickNode&&O(),l.props.checkOnClickNode&&!e.node.disabled&&S(null,{target:{checked:!e.node.checked}}),l.ctx.emit("node-click",e.node.data,e.node,f,E)},M=E=>{l.instance.vnode.props.onNodeContextmenu&&(E.stopPropagation(),E.preventDefault()),l.ctx.emit("node-contextmenu",E,e.node.data,e.node,f)},O=()=>{e.node.isLeaf||(r.value?(l.ctx.emit("node-collapse",e.node.data,e.node,f),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,f)))},S=(E,$)=>{e.node.setChecked($.target.checked,!l.props.checkStrictly),Ie(()=>{const B=l.store.value;l.ctx.emit("check",e.node.data,{checkedNodes:B.getCheckedNodes(),checkedKeys:B.getCheckedKeys(),halfCheckedNodes:B.getHalfCheckedNodes(),halfCheckedKeys:B.getHalfCheckedKeys()})})};return{ns:n,node$:v,tree:l,expanded:r,childNodeRendered:s,oldChecked:p,oldIndeterminate:c,getNodeKey:g,getNodeClass:x,handleSelectChange:K,handleClick:T,handleContextMenu:M,handleExpandIconClick:O,handleCheckChange:S,handleChildNodeExpand:(E,$,B)=>{o($),l.ctx.emit("node-expand",E,$,B)},handleDragStart:E=>{!l.props.draggable||a.treeNodeDragStart({event:E,treeNode:e})},handleDragOver:E=>{E.preventDefault(),l.props.draggable&&a.treeNodeDragOver({event:E,treeNode:{$el:v.value,node:e.node}})},handleDrop:E=>{E.preventDefault()},handleDragEnd:E=>{!l.props.draggable||a.treeNodeDragEnd(E)},CaretRight:yn}}}),Tl=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],Dl=["aria-expanded"];function Kl(e,t,n,o,l,r){const s=ve("el-icon"),p=ve("el-checkbox"),c=ve("loading"),v=ve("node-content"),a=ve("el-tree-node"),f=ve("el-collapse-transition");return Ve((k(),z("div",{ref:"node$",class:ue([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=Z((...d)=>e.handleClick&&e.handleClick(...d),["stop"])),onContextmenu:t[2]||(t[2]=(...d)=>e.handleContextMenu&&e.handleContextMenu(...d)),onDragstart:t[3]||(t[3]=Z((...d)=>e.handleDragStart&&e.handleDragStart(...d),["stop"])),onDragover:t[4]||(t[4]=Z((...d)=>e.handleDragOver&&e.handleDragOver(...d),["stop"])),onDragend:t[5]||(t[5]=Z((...d)=>e.handleDragEnd&&e.handleDragEnd(...d),["stop"])),onDrop:t[6]||(t[6]=Z((...d)=>e.handleDrop&&e.handleDrop(...d),["stop"]))},[U("div",{class:ue(e.ns.be("node","content")),style:zt({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(k(),L(s,{key:0,class:ue([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:Z(e.handleExpandIconClick,["stop"])},{default:h(()=>[(k(),L(gt(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):j("v-if",!0),e.showCheckbox?(k(),L(p,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=Z(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):j("v-if",!0),e.node.loading?(k(),L(s,{key:2,class:ue([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:h(()=>[m(c)]),_:1},8,["class"])):j("v-if",!0),m(v,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),m(f,null,{default:h(()=>[!e.renderAfterExpand||e.childNodeRendered?Ve((k(),z("div",{key:0,class:ue(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(k(!0),z(se,null,ye(e.node.childNodes,d=>(k(),L(a,{key:e.getNodeKey(d),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:d,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,Dl)),[[St,e.expanded]]):j("v-if",!0)]),_:1})],42,Tl)),[[St,e.node.visible]])}var Vl=dt(Sl,[["render",Kl],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function Il({el$:e},t){const n=_e("tree"),o=Dt([]),l=Dt([]);Ut(()=>{s(),Xo(e.value,"keydown",r)}),mn(()=>{Qo(e.value,"keydown",r)}),pn(()=>{o.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),l.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),ae(l,p=>{p.forEach(c=>{c.setAttribute("tabindex","-1")})});const r=p=>{const c=p.target;if(!c.className.includes(n.b("node")))return;const v=p.code;o.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const a=o.value.indexOf(c);let f;if([Le.up,Le.down].includes(v)){if(p.preventDefault(),v===Le.up){f=a===-1?0:a!==0?a-1:o.value.length-1;const g=f;for(;!t.value.getNode(o.value[f].dataset.key).canFocus;){if(f--,f===g){f=-1;break}f<0&&(f=o.value.length-1)}}else{f=a===-1?0:a<o.value.length-1?a+1:0;const g=f;for(;!t.value.getNode(o.value[f].dataset.key).canFocus;){if(f++,f===g){f=-1;break}f>=o.value.length&&(f=0)}}f!==-1&&o.value[f].focus()}[Le.left,Le.right].includes(v)&&(p.preventDefault(),c.click());const d=c.querySelector('[type="checkbox"]');[Le.enter,Le.space].includes(v)&&d&&(p.preventDefault(),d.click())},s=()=>{var p;o.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),l.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const c=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(p=o.value[0])==null||p.setAttribute("tabindex","0")}}const $l=le({name:"ElTree",components:{ElTreeNode:Vl},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:[String,Object]},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=xn(),o=_e("tree"),l=I(new Nl({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));l.value.initialize();const r=I(l.value.root),s=I(null),p=I(null),c=I(null),{broadcastExpanded:v}=Rn(e),{dragState:a}=xl({props:e,ctx:t,el$:p,dropIndicator$:c,store:l});Il({el$:p},l);const f=X(()=>{const{childNodes:D}=r.value;return!D||D.length===0||D.every(({visible:_})=>!_)});ae(()=>e.defaultCheckedKeys,D=>{l.value.setDefaultCheckedKey(D)}),ae(()=>e.defaultExpandedKeys,D=>{l.value.setDefaultExpandedKeys(D)}),ae(()=>e.data,D=>{l.value.setData(D)},{deep:!0}),ae(()=>e.checkStrictly,D=>{l.value.checkStrictly=D});const d=D=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");l.value.filter(D)},g=D=>Yt(e.nodeKey,D.data),x=D=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const _=l.value.getNode(D);if(!_)return[];const V=[_.data];let q=_.parent;for(;q&&q!==r.value;)V.push(q.data),q=q.parent;return V.reverse()},K=(D,_)=>l.value.getCheckedNodes(D,_),T=D=>l.value.getCheckedKeys(D),M=()=>{const D=l.value.getCurrentNode();return D?D.data:null},O=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const D=M();return D?D[e.nodeKey]:null},S=(D,_)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");l.value.setCheckedNodes(D,_)},b=(D,_)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");l.value.setCheckedKeys(D,_)},y=(D,_,V)=>{l.value.setChecked(D,_,V)},u=()=>l.value.getHalfCheckedNodes(),C=()=>l.value.getHalfCheckedKeys(),w=(D,_=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");l.value.setUserCurrentNode(D,_)},E=(D,_=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");l.value.setCurrentNodeKey(D,_)},$=D=>l.value.getNode(D),B=D=>{l.value.remove(D)},J=(D,_)=>{l.value.append(D,_)},oe=(D,_)=>{l.value.insertBefore(D,_)},ne=(D,_)=>{l.value.insertAfter(D,_)},me=(D,_,V)=>{v(_),t.emit("node-expand",D,_,V)},re=(D,_)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");l.value.updateChildren(D,_)};return Oe("RootTree",{ctx:t,props:e,store:l,root:r,currentNode:s,instance:Qe()}),Oe(kn,void 0),{ns:o,store:l,root:r,currentNode:s,dragState:a,el$:p,dropIndicator$:c,isEmpty:f,filter:d,getNodeKey:g,getNodePath:x,getCheckedNodes:K,getCheckedKeys:T,getCurrentNode:M,getCurrentKey:O,setCheckedNodes:S,setCheckedKeys:b,setChecked:y,getHalfCheckedNodes:u,getHalfCheckedKeys:C,setCurrentNode:w,setCurrentKey:E,t:n,getNode:$,remove:B,append:J,insertBefore:oe,insertAfter:ne,handleNodeExpand:me,updateKeyChildren:re}}});function Ml(e,t,n,o,l,r){var s;const p=ve("el-tree-node");return k(),z("div",{ref:"el$",class:ue([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(k(!0),z(se,null,ye(e.root.childNodes,c=>(k(),L(p,{key:e.getNodeKey(c),node:c,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(k(),z("div",{key:0,class:ue(e.ns.e("empty-block"))},[U("span",{class:ue(e.ns.e("empty-text"))},F((s=e.emptyText)!=null?s:e.t("el.tree.emptyText")),3)],2)):j("v-if",!0),Ve(U("div",{ref:"dropIndicator$",class:ue(e.ns.e("drop-indicator"))},null,2),[[St,e.dragState.showDropIndicator]])],2)}var vt=dt($l,[["render",Ml],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);vt.install=e=>{e.component(vt.name,vt)};const Ll=vt,Al=Ll,Xt=Symbol(),Rl={key:-1,level:-1,data:{}};var ot=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(ot||{}),Ot=(e=>(e.ADD="add",e.DELETE="delete",e))(Ot||{});const Ol=ze({data:{type:ge(Array),default:()=>je([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:ge(Object),default:()=>je({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:ge(Array),default:()=>je([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:ge(Array),default:()=>je([])},indent:{type:Number,default:16},icon:{type:Bo},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:ge([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:ge(Function)},perfMode:{type:Boolean,default:!0}}),Pl=ze({node:{type:ge(Object),default:()=>je(Rl)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1}}),Bl=ze({node:{type:ge(Object),required:!0}}),Pn="node-click",Bn="node-expand",Fn="node-collapse",Un="current-change",zn="check",Hn="check-change",qn="node-contextmenu",Fl={[Pn]:(e,t,n)=>e&&t&&n,[Bn]:(e,t)=>e&&t,[Fn]:(e,t)=>e&&t,[Un]:(e,t)=>e&&t,[zn]:(e,t)=>e&&t,[Hn]:(e,t)=>e&&typeof t=="boolean",[qn]:(e,t,n)=>e&&t&&n},Ul={click:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&typeof t=="boolean"};function zl(e,t){const n=I(new Set),o=I(new Set),{emit:l}=Qe();ae(()=>t.value,()=>Ie(()=>{O(e.defaultCheckedKeys)}),{immediate:!0});const r=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:S,maxLevel:b}=t.value,y=n.value,u=new Set;for(let C=b-1;C>=1;--C){const w=S.get(C);!w||w.forEach(E=>{const $=E.children;if($){let B=!0,J=!1;for(const oe of $){const ne=oe.key;if(y.has(ne))J=!0;else if(u.has(ne)){B=!1,J=!0;break}else B=!1}B?y.add(E.key):J?(u.add(E.key),y.delete(E.key)):(y.delete(E.key),u.delete(E.key))}})}o.value=u},s=S=>n.value.has(S.key),p=S=>o.value.has(S.key),c=(S,b,y=!0)=>{const u=n.value,C=(w,E)=>{u[E?Ot.ADD:Ot.DELETE](w.key);const $=w.children;!e.checkStrictly&&$&&$.forEach(B=>{B.disabled||C(B,E)})};C(S,b),r(),y&&v(S,b)},v=(S,b)=>{const{checkedNodes:y,checkedKeys:u}=x(),{halfCheckedNodes:C,halfCheckedKeys:w}=K();l(zn,S.data,{checkedKeys:u,checkedNodes:y,halfCheckedKeys:w,halfCheckedNodes:C}),l(Hn,S.data,b)};function a(S=!1){return x(S).checkedKeys}function f(S=!1){return x(S).checkedNodes}function d(){return K().halfCheckedKeys}function g(){return K().halfCheckedNodes}function x(S=!1){const b=[],y=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:u}=t.value;n.value.forEach(C=>{const w=u.get(C);w&&(!S||S&&w.isLeaf)&&(y.push(C),b.push(w.data))})}return{checkedKeys:y,checkedNodes:b}}function K(){const S=[],b=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:y}=t.value;o.value.forEach(u=>{const C=y.get(u);C&&(b.push(u),S.push(C.data))})}return{halfCheckedNodes:S,halfCheckedKeys:b}}function T(S){n.value.clear(),o.value.clear(),O(S)}function M(S,b){if((t==null?void 0:t.value)&&e.showCheckbox){const y=t.value.treeNodeMap.get(S);y&&c(y,b,!1)}}function O(S){if(t!=null&&t.value){const{treeNodeMap:b}=t.value;if(e.showCheckbox&&b&&S)for(const y of S){const u=b.get(y);u&&!s(u)&&c(u,!0,!1)}}}return{updateCheckedKeys:r,toggleCheckbox:c,isChecked:s,isIndeterminate:p,getCheckedKeys:a,getCheckedNodes:f,getHalfCheckedKeys:d,getHalfCheckedNodes:g,setChecked:M,setCheckedKeys:T}}function Hl(e,t){const n=I(new Set([])),o=I(new Set([])),l=X(()=>hn(e.filterMethod));function r(p){var c;if(!l.value)return;const v=new Set,a=o.value,f=n.value,d=[],g=((c=t.value)==null?void 0:c.treeNodes)||[],x=e.filterMethod;f.clear();function K(T){T.forEach(M=>{d.push(M),x!=null&&x(p,M.data)?d.forEach(S=>{v.add(S.key)}):M.isLeaf&&f.add(M.key);const O=M.children;if(O&&K(O),!M.isLeaf){if(!v.has(M.key))f.add(M.key);else if(O){let S=!0;for(const b of O)if(!f.has(b.key)){S=!1;break}S?a.add(M.key):a.delete(M.key)}}d.pop()})}return K(g),v}function s(p){return o.value.has(p.key)}return{hiddenExpandIconKeySet:o,hiddenNodeKeySet:n,doFilter:r,isForceHiddenExpandIcon:s}}function ql(e,t){const n=I(new Set(e.defaultExpandedKeys)),o=I(),l=Dt();ae(()=>e.currentNodeKey,N=>{o.value=N},{immediate:!0}),ae(()=>e.data,N=>{G(N)},{immediate:!0});const{isIndeterminate:r,isChecked:s,toggleCheckbox:p,getCheckedKeys:c,getCheckedNodes:v,getHalfCheckedKeys:a,getHalfCheckedNodes:f,setChecked:d,setCheckedKeys:g}=zl(e,l),{doFilter:x,hiddenNodeKeySet:K,isForceHiddenExpandIcon:T}=Hl(e,l),M=X(()=>{var N;return((N=e.props)==null?void 0:N.value)||ot.KEY}),O=X(()=>{var N;return((N=e.props)==null?void 0:N.children)||ot.CHILDREN}),S=X(()=>{var N;return((N=e.props)==null?void 0:N.disabled)||ot.DISABLED}),b=X(()=>{var N;return((N=e.props)==null?void 0:N.label)||ot.LABEL}),y=X(()=>{const N=n.value,P=K.value,W=[],Y=l.value&&l.value.treeNodes||[];function ee(){const fe=[];for(let de=Y.length-1;de>=0;--de)fe.push(Y[de]);for(;fe.length;){const de=fe.pop();if(!!de&&(P.has(de.key)||W.push(de),N.has(de.key))){const ce=de.children;if(ce){const Je=ce.length;for(let Te=Je-1;Te>=0;--Te)fe.push(ce[Te])}}}}return ee(),W}),u=X(()=>y.value.length>0);function C(N){const P=new Map,W=new Map;let Y=1;function ee(de,ce=1,Je=void 0){var Te;const et=[];for(const Me of de){const ct=$(Me),Ce={level:ce,key:ct,data:Me};Ce.label=J(Me),Ce.parent=Je;const De=E(Me);Ce.disabled=B(Me),Ce.isLeaf=!De||De.length===0,De&&De.length&&(Ce.children=ee(De,ce+1,Ce)),et.push(Ce),P.set(ct,Ce),W.has(ce)||W.set(ce,[]),(Te=W.get(ce))==null||Te.push(Ce)}return ce>Y&&(Y=ce),et}const fe=ee(N);return{treeNodeMap:P,levelTreeNodeMap:W,maxLevel:Y,treeNodes:fe}}function w(N){const P=x(N);P&&(n.value=P)}function E(N){return N[O.value]}function $(N){return N?N[M.value]:""}function B(N){return N[S.value]}function J(N){return N[b.value]}function oe(N){n.value.has(N.key)?_(N):D(N)}function ne(N,P){t(Pn,N.data,N,P),me(N),e.expandOnClickNode&&oe(N),e.showCheckbox&&e.checkOnClickNode&&!N.disabled&&p(N,!s(N),!0)}function me(N){pe(N)||(o.value=N.key,t(Un,N.data,N))}function re(N,P){p(N,P)}function D(N){const P=n.value;if((l==null?void 0:l.value)&&e.accordion){const{treeNodeMap:W}=l.value;P.forEach(Y=>{const ee=W.get(Y);ee&&ee.level===ee.level&&P.delete(Y)})}P.add(N.key),t(Bn,N.data,N)}function _(N){n.value.delete(N.key),t(Fn,N.data,N)}function V(N){return n.value.has(N.key)}function q(N){return!!N.disabled}function pe(N){const P=o.value;return!!P&&P===N.key}function ie(){var N,P;if(!!o.value)return(P=(N=l==null?void 0:l.value)==null?void 0:N.treeNodeMap.get(o.value))==null?void 0:P.data}function R(){return o.value}function H(N){o.value=N}function G(N){Ie(()=>l.value=C(N))}return{tree:l,flattenTree:y,isNotEmpty:u,getKey:$,getChildren:E,toggleExpand:oe,toggleCheckbox:p,isExpanded:V,isChecked:s,isIndeterminate:r,isDisabled:q,isCurrent:pe,isForceHiddenExpandIcon:T,handleNodeClick:ne,handleNodeCheck:re,getCurrentNode:ie,getCurrentKey:R,setCurrentKey:H,getCheckedKeys:c,getCheckedNodes:v,getHalfCheckedKeys:a,getHalfCheckedNodes:f,setChecked:d,setCheckedKeys:g,filter:w,setData:G}}var jl=le({name:"ElTreeNodeContent",props:Bl,setup(e){const t=Re(Xt),n=_e("tree");return()=>{const o=e.node,{data:l}=o;return t!=null&&t.ctx.slots.default?t.ctx.slots.default({node:o,data:l}):xe("span",{class:n.be("node","label")},[o==null?void 0:o.label])}}});const Gl="caret-right",Wl=le({name:"ElTreeNode",components:{ElIcon:Ze,CaretRight:yn,ElCheckbox:it,ElNodeContent:jl},props:Pl,emits:Ul,setup(e,{emit:t}){const n=Re(Xt),o=_e("tree"),l=X(()=>{var a;return(a=n==null?void 0:n.props.indent)!=null?a:16}),r=X(()=>{var a;return(a=n==null?void 0:n.props.icon)!=null?a:Gl});return{ns:o,indent:l,icon:r,handleClick:a=>{t("click",e.node,a)},handleExpandIconClick:()=>{t("toggle",e.node)},handleCheckChange:a=>{t("check",e.node,a)},handleContextMenu:a=>{var f,d,g,x;(g=(d=(f=n==null?void 0:n.instance)==null?void 0:f.vnode)==null?void 0:d.props)!=null&&g.onNodeContextmenu&&(a.stopPropagation(),a.preventDefault()),n==null||n.ctx.emit(qn,a,(x=e.node)==null?void 0:x.data,e.node)}}}}),Yl=["aria-expanded","aria-disabled","aria-checked","data-key"];function Xl(e,t,n,o,l,r){var s,p,c;const v=ve("el-icon"),a=ve("el-checkbox"),f=ve("el-node-content");return k(),z("div",{ref:"node$",class:ue([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.current),e.ns.is("focusable",!e.disabled),e.ns.is("checked",!e.disabled&&e.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.disabled,"aria-checked":e.checked,"data-key":(s=e.node)==null?void 0:s.key,onClick:t[1]||(t[1]=Z((...d)=>e.handleClick&&e.handleClick(...d),["stop"])),onContextmenu:t[2]||(t[2]=(...d)=>e.handleContextMenu&&e.handleContextMenu(...d))},[U("div",{class:ue(e.ns.be("node","content")),style:zt({paddingLeft:`${(e.node.level-1)*e.indent}px`})},[e.icon?(k(),L(v,{key:0,class:ue([e.ns.is("leaf",!!((p=e.node)!=null&&p.isLeaf)),e.ns.is("hidden",e.hiddenExpandIcon),{expanded:!((c=e.node)!=null&&c.isLeaf)&&e.expanded},e.ns.be("node","expand-icon")]),onClick:Z(e.handleExpandIconClick,["stop"])},{default:h(()=>[(k(),L(gt(e.icon)))]),_:1},8,["class","onClick"])):j("v-if",!0),e.showCheckbox?(k(),L(a,{key:1,"model-value":e.checked,indeterminate:e.indeterminate,disabled:e.disabled,onChange:e.handleCheckChange,onClick:t[0]||(t[0]=Z(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled","onChange"])):j("v-if",!0),m(f,{node:e.node},null,8,["node"])],6)],42,Yl)}var Ql=dt(Wl,[["render",Xl],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const Zl=le({name:"ElTreeV2",components:{ElTreeNode:Ql,FixedSizeList:_l},props:Ol,emits:Fl,setup(e,t){Oe(Xt,{ctx:t,props:e,instance:Qe()}),Oe(kn,void 0);const{t:n}=xn(),o=_e("tree"),{flattenTree:l,isNotEmpty:r,toggleExpand:s,isExpanded:p,isIndeterminate:c,isChecked:v,isDisabled:a,isCurrent:f,isForceHiddenExpandIcon:d,toggleCheckbox:g,handleNodeClick:x,handleNodeCheck:K,getCurrentNode:T,getCurrentKey:M,setCurrentKey:O,getCheckedKeys:S,getCheckedNodes:b,getHalfCheckedKeys:y,getHalfCheckedNodes:u,setChecked:C,setCheckedKeys:w,filter:E,setData:$}=ql(e,t.emit);return t.expose({getCurrentNode:T,getCurrentKey:M,setCurrentKey:O,getCheckedKeys:S,getCheckedNodes:b,getHalfCheckedKeys:y,getHalfCheckedNodes:u,setChecked:C,setCheckedKeys:w,filter:E,setData:$}),{t:n,ns:o,flattenTree:l,itemSize:26,isNotEmpty:r,toggleExpand:s,toggleCheckbox:g,isExpanded:p,isIndeterminate:c,isChecked:v,isDisabled:a,isCurrent:f,isForceHiddenExpandIcon:d,handleNodeClick:x,handleNodeCheck:K}}});function Jl(e,t,n,o,l,r){var s;const p=ve("el-tree-node"),c=ve("fixed-size-list");return k(),z("div",{class:ue([e.ns.b(),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[e.isNotEmpty?(k(),L(c,{key:0,"class-name":e.ns.b("virtual-list"),data:e.flattenTree,total:e.flattenTree.length,height:e.height,"item-size":e.itemSize,"perf-mode":e.perfMode},{default:h(({data:v,index:a,style:f})=>[(k(),L(p,{key:v[a].key,style:zt(f),node:v[a],expanded:e.isExpanded(v[a]),"show-checkbox":e.showCheckbox,checked:e.isChecked(v[a]),indeterminate:e.isIndeterminate(v[a]),disabled:e.isDisabled(v[a]),current:e.isCurrent(v[a]),"hidden-expand-icon":e.isForceHiddenExpandIcon(v[a]),onClick:e.handleNodeClick,onToggle:e.toggleExpand,onCheck:e.handleNodeCheck},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(k(),z("div",{key:1,class:ue(e.ns.e("empty-block"))},[U("span",{class:ue(e.ns.e("empty-text"))},F((s=e.emptyText)!=null?s:e.t("el.tree.emptyText")),3)],2))],2)}var ea=dt(Zl,[["render",Jl],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const ta=Fo(ea),na={class:"px-32 py-24"},oa=le({props:{modelValue:{type:Boolean},pages:null},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,{t:o}=we(),l=I(!0),r=rt(),s=I({startPage:"",notFound:ke,error:ke});Ut(()=>Q(this,null,function*(){var v;s.value=yield oo(),s.value.startPage===ke&&((v=n.pages)==null?void 0:v.length)&&(s.value.startPage=n.pages[0].id)}));const p=()=>Q(this,null,function*(){yield lo(s.value),l.value=!1,r.load()}),c=X(()=>{var v=[{key:ke,value:o("common.default")}];if(n.pages)for(const a of n.pages)a.id!==s.value.startPage&&v.push({key:a.id,value:a.path});return v});return ae(()=>s.value.startPage,()=>Q(this,null,function*(){s.value.startPage===s.value.notFound&&(s.value.notFound=ke),s.value.startPage===s.value.error&&(s.value.error=ke)})),(v,a)=>{const f=_t,d=bt,g=Pe,x=Be,K=Fe;return k(),L(K,{"model-value":l.value,"custom-class":"el-dialog--zero-padding",width:"600px","close-on-click-modal":!1,title:i(o)("common.routeSetting"),onClosed:a[4]||(a[4]=T=>t("update:modelValue",!1))},{footer:h(()=>[m(Xe,{onConfirm:p,onCancel:a[3]||(a[3]=T=>l.value=!1)})]),default:h(()=>[U("div",null,[m(Eo,{title:i(o)("common.redirectRoutes"),content:i(o)("common.setHomePageAndErrorPage")},null,8,["title","content"]),U("div",na,[m(x,{"label-width":"90px","label-position":"top"},{default:h(()=>[m(g,{label:i(o)("common.homePage")},{default:h(()=>[m(d,{modelValue:s.value.startPage,"onUpdate:modelValue":a[0]||(a[0]=T=>s.value.startPage=T),class:"w-full","data-cy":"home-url-dropdown"},{default:h(()=>[(k(!0),z(se,null,ye(n.pages,T=>(k(),L(f,{key:T.id,label:T.path,value:T.id,"data-cy":"home-url-opt"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),m(g,{label:i(o)("common.page404")},{default:h(()=>[m(d,{modelValue:s.value.notFound,"onUpdate:modelValue":a[1]||(a[1]=T=>s.value.notFound=T),class:"w-full","data-cy":"404-url-dropdown"},{default:h(()=>[(k(!0),z(se,null,ye(i(c),T=>(k(),L(f,{key:T.key,label:T.value,value:T.key,"data-cy":"404-url-opt"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),m(g,{label:i(o)("common.errorPage")},{default:h(()=>[m(d,{modelValue:s.value.error,"onUpdate:modelValue":a[2]||(a[2]=T=>s.value.error=T),class:"w-full","data-cy":"error-url-dropdown"},{default:h(()=>[(k(!0),z(se,null,ye(i(c),T=>(k(),L(f,{key:T.key,label:T.value,value:T.key,"data-cy":"error-url-opt"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})])])]),_:1},8,["model-value","title"])}}}),lt=Jn.global.t,qe=I([{key:"url",value:"URL"},{key:"file",value:lt("common.file")}]),sn=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-word.document.macroEnabled.12","application/x-rar-compressed","application/x-zip-compressed","application/zip","text/html"],la={name:[Se(lt("common.pageUrlRequiredTips"))],pageUrl:[Se(lt("common.urlRequiredTips")),at(dn,lt("common.urlOccupied"))],file:Se(lt("common.selectFileTips"))};function rn(){return{pageUrl:"",name:"",file:null,headless:!1}}const aa={key:0,class:"el-upload__tip ml-8"},sa={key:1,class:"mt-12 w-full"},ra=le({props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const{t:n}=we(),o=I(!0),l=I(qe.value[0].key),r=I(),s=I(rn()),p=rt(),c=Mo();ae(()=>s.value.pageUrl,()=>{if(!!s.value.pageUrl){var f=/\w[^/]+:\/\/[\w\.]+:?\d*(.[^\?&]+)/.exec(s.value.pageUrl.trim()),d="";f&&f[1]?f[1].startsWith("/")?d=f[1]:f[1].indexOf("/")>-1&&(d="/"):d="",s.value.name=d}}),ae(()=>l.value,()=>{s.value=rn()});const v=f=>{if(!sn.includes(f.raw.type)){$e.error(n("common.fileInvalid",{fileName:f.name}));return}s.value.file=f},a=()=>Q(this,null,function*(){var d,g,x;if(l.value===qe.value[0].key){yield(d=r.value)==null?void 0:d.validate();const K=yield $o(s.value);if(K.success===!1){$e.error(((g=K.messages)==null?void 0:g.join(","))||n("common.pageDownloadFail"));return}}if(l.value===qe.value[1].key){yield(x=r.value)==null?void 0:x.validate();var f=new FormData;f.append("file",s.value.file.raw),yield ao(f)}o.value=!1,p.load()});return ae(()=>s.value.file,()=>{s.value.file&&r.value.clearValidate("file")}),(f,d)=>{const g=Nt,x=wt,K=Pe,T=We,M=Io,O=it,S=qt,b=Ao,y=Ro,u=Be,C=Fe;return k(),L(C,{modelValue:o.value,"onUpdate:modelValue":d[6]||(d[6]=w=>o.value=w),width:"600px","close-on-click-modal":!1,title:i(n)("common.import"),onClosed:d[7]||(d[7]=w=>t("update:modelValue",!1))},{footer:h(()=>[m(Xe,{"confirm-label":i(n)("common.start"),onConfirm:a,onCancel:d[5]||(d[5]=w=>o.value=!1)},null,8,["confirm-label"])]),default:h(()=>[m(u,{ref_key:"form",ref:r,"label-position":"top",rules:i(la),model:s.value,onKeydown:st(a,["enter"])},{default:h(()=>[m(K,{label:i(n)("common.from")},{default:h(()=>[m(x,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=w=>l.value=w),class:"el-radio-group--rounded h-38px"},{default:h(()=>[(k(!0),z(se,null,ye(i(qe),w=>(k(),L(g,{key:w.key,label:w.key,"data-cy":`import-from-${w.value}`},{default:h(()=>[te(F(w.value),1)]),_:2},1032,["label","data-cy"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l.value===i(qe)[0].key?(k(),z(se,{key:0},[m(K,{label:"URL ",prop:"pageUrl"},{default:h(()=>[m(T,{modelValue:s.value.pageUrl,"onUpdate:modelValue":d[1]||(d[1]=w=>s.value.pageUrl=w),"data-cy":"page-url"},null,8,["modelValue"])]),_:1}),m(K,{label:i(n)("common.pageURL"),prop:"name"},{default:h(()=>[m(T,{modelValue:s.value.name,"onUpdate:modelValue":d[2]||(d[2]=w=>s.value.name=w),"data-cy":"url"},null,8,["modelValue"])]),_:1},8,["label"]),m(K,null,{default:h(()=>{var w;return[(w=i(c).header)!=null&&w.isOnlineServer?j("",!0):(k(),L(O,{key:0,modelValue:s.value.headless,"onUpdate:modelValue":d[3]||(d[3]=E=>s.value.headless=E)},{default:h(()=>[U("span",null,F(i(n)("common.useHeadlessMode")),1),m(M,{tip:i(n)("common.useHeadlessModeTip"),"custom-class":"ml-4"},null,8,["tip"])]),_:1},8,["modelValue"]))]}),_:1})],64)):j("",!0),l.value===i(qe)[1].key?(k(),L(K,{key:1,label:i(n)("common.file"),prop:"file"},{default:h(()=>[m(b,{"show-file-list":!1,action:"",accept:i(sn).join(","),"auto-upload":!1,"on-change":v,"data-cy":"upload"},{default:h(()=>[m(S,{type:"primary","data-cy":"select",round:""},{default:h(()=>[te(F(i(n)("common.selectFile")),1)]),_:1})]),_:1},8,["accept"]),s.value.file?j("",!0):(k(),z("div",aa,F(i(n)("common.supportTypes")),1)),s.value.file?(k(),z("div",sa,[m(y,{title:s.value.file.name,type:"info","data-cy":"uploaded-file-name",onClose:d[4]||(d[4]=w=>s.value.file=null)},null,8,["title"])])):j("",!0)]),_:1},8,["label"])):j("",!0)]),_:1},8,["rules","model","onKeydown"])]),_:1},8,["modelValue","title"])}}});var ia=Lo(ra,[["__scopeId","data-v-113e8dee"]]);const da={class:"flex items-center py-24 space-x-16"},ca=U("div",{class:"flex-1"},null,-1),ua=le({props:{pages:null},setup(e){const{t}=we(),n=vn(),o=cn(),l=I(!1),r=I(!1),s=gn();rt();const p=X(()=>{var d;let f=[];return(d=o.list)!=null&&d.length?f=o.list.map(g=>({key:g.id,value:g.name})):f.push({key:ke,value:t("common.clickToCreateFirstLayout")}),f}),c=f=>{f===ke?n.push(Ne({name:"layout-edit"})):n.push(Ne({name:"layout-page-setting",query:{layoutId:f}}))},v=f=>{f?f===ke?n.push(Ne({name:"layout-edit"})):n.push(Ne({name:"layout-page-design",query:{layoutId:f}})):n.push(Ne({name:"page-design"}))},a=()=>{s.hasAccess("pages","router")&&(l.value=!0)};return(f,d)=>{var S;const g=Ze,x=qt,K=Cn,T=_n,M=bn,O=To("hasPermission");return k(),z(se,null,[U("div",da,[Ve((k(),L(x,{round:"","data-cy":"new-page",onClick:d[0]||(d[0]=b=>i(n).push(i(Ne)({name:"page-edit"})))},{default:h(()=>[m(g,{class:"iconfont icon-a-addto"}),te(" "+F(i(t)("common.newPage")),1)]),_:1})),[[O,{feature:"pages",action:"edit"}]]),Ve((k(),L(x,{round:"","data-cy":"new-rich-text-page",onClick:d[1]||(d[1]=b=>i(n).push(i(Ne)({name:"rich-page-edit"})))},{default:h(()=>[m(g,{class:"iconfont icon-a-addto"}),te(" "+F(i(t)("common.newRichTextPage")),1)]),_:1})),[[O,{feature:"pages",action:"edit"}]]),m(M,{trigger:"click",class:"ml-10px",onCommand:c},{dropdown:h(()=>[m(T,null,{default:h(()=>[(k(!0),z(se,null,ye(i(p),b=>{var y,u;return k(),L(K,{key:b.key,command:b.key,disabled:!i(s).hasAccess("layout","edit")&&!((y=i(o).list)!=null&&y.length),title:!i(s).hasAccess("layout","edit")&&!((u=i(o).list)!=null&&u.length)?i(t)("common.noPermission"):"","data-cy":"layout"},{default:h(()=>[U("span",null,F(b.value),1)]),_:2},1032,["command","disabled","title"])}),128))]),_:1})]),default:h(()=>[Ve((k(),L(x,{round:"","data-cy":"new-layout-page"},{default:h(()=>[m(g,{class:"iconfont icon-a-addto"}),U("span",null,F(i(t)("common.newLayoutPage")),1),m(g,{class:"iconfont icon-pull-down text-12px ml-8 !mr-0"})]),_:1})),[[O,{feature:"pages",action:"edit"}]])]),_:1}),m(M,{trigger:"click",class:"ml-10px",onCommand:v},{dropdown:h(()=>[m(T,null,{default:h(()=>[m(K,{command:""},{default:h(()=>[U("span",null,F(i(t)("common.normalPage")),1)]),_:1}),(k(!0),z(se,null,ye(i(p),b=>{var y,u;return k(),L(K,{key:b.key,command:b.key,disabled:!i(s).hasAccess("layout","edit")&&!((y=i(o).list)!=null&&y.length),title:!i(s).hasAccess("layout","edit")&&!((u=i(o).list)!=null&&u.length)?i(t)("common.noPermission"):"","data-cy":"layout-design"},{default:h(()=>[U("span",null,F(b.value),1)]),_:2},1032,["command","disabled","title"])}),128))]),_:1})]),default:h(()=>[Ve((k(),L(x,{round:"","data-cy":"new-layout-design-page"},{default:h(()=>[m(g,{class:"iconfont icon-a-addto"}),U("span",null,F(i(t)("common.newPageDesign")),1),m(g,{class:"iconfont icon-pull-down text-12px ml-8 !mr-0"})]),_:1})),[[O,{feature:"pages",action:"edit"}]])]),_:1}),Ve((k(),L(x,{round:"","data-cy":"import",onClick:d[2]||(d[2]=b=>r.value=!0)},{default:h(()=>[te(F(i(t)("common.import")),1)]),_:1})),[[O,{feature:"pages",action:"edit"}]]),ca,(S=e.pages)!=null&&S.length?(k(),L(Ee,{key:0,permission:{feature:"pages",action:"router"},circle:"",icon:"icon-a-setup",tip:i(t)("common.routeSetting"),"data-cy":"route-setting",onClick:a},null,8,["tip"])):j("",!0)]),e.pages&&l.value?(k(),L(oa,{key:0,modelValue:l.value,"onUpdate:modelValue":d[3]||(d[3]=b=>l.value=b),pages:e.pages},null,8,["modelValue","pages"])):j("",!0),r.value?(k(),L(ia,{key:1,modelValue:r.value,"onUpdate:modelValue":d[4]||(d[4]=b=>r.value=b)},null,8,["modelValue"])):j("",!0)],64)}}}),fa={class:"px-8px rounded-normal h-300px w-full border border-solid border-[#cccccc] focus-within:border-[#2296f3] overflow-hidden"},ma=le({props:{modelValue:{type:Boolean},data:null},emits:["update:modelValue","addTask"],setup(e,{emit:t}){const n=e,{t:o}=we(),l={name:[Ht(),kt(1,50),Se(o("common.nameRequiredTips")),at(un,o("common.viewNameExistsTips"))]},r=I(!0),s=I(),p=I([]),c=I({isCreate:!0,name:"",code:""}),v=()=>Q(this,null,function*(){c.value.name="",c.value.code="",c.value.isCreate?c.value.code=yield Ft(n.data.pages):p.value=yield so()}),a=()=>Q(this,null,function*(){c.value.name&&(c.value.code="",c.value.code=yield ro(c.value.name))}),f=()=>Q(this,null,function*(){const d=yield io(n.data.pages,c.value.name,c.value.isCreate?c.value.code:"",!c.value.isCreate);t("addTask",d),r.value=!1,$e.warning(o("common.jobStartRunning"))});return v(),(d,g)=>{const x=Nt,K=wt,T=Pe,M=We,O=_t,S=bt,b=Be,y=Fe;return k(),L(y,{"model-value":r.value,width:800,"close-on-click-modal":!1,title:i(o)("common.convertToView"),onClosed:g[6]||(g[6]=u=>t("update:modelValue",!1))},{footer:h(()=>[m(Xe,{onConfirm:f,onCancel:g[5]||(g[5]=u=>r.value=!1)})]),default:h(()=>[m(b,{ref_key:"form",ref:s,"label-position":"top",model:c.value,rules:i(l),onKeydown:st(f,["enter"]),onSubmit:g[4]||(g[4]=Z(()=>{},["prevent"]))},{default:h(()=>[m(T,{prop:"name"},{default:h(()=>[m(K,{modelValue:c.value.isCreate,"onUpdate:modelValue":g[0]||(g[0]=u=>c.value.isCreate=u),class:"el-radio-group--rounded",onChange:v},{default:h(()=>[m(x,{label:!0},{default:h(()=>[te(F(i(o)("page.createNewView")),1)]),_:1}),m(x,{label:!1},{default:h(()=>[te(F(i(o)("page.convertToExistingView")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),m(T,{label:i(o)("common.viewName"),prop:"name"},{default:h(()=>[c.value.isCreate?(k(),L(M,{key:0,modelValue:c.value.name,"onUpdate:modelValue":g[1]||(g[1]=u=>c.value.name=u),"data-cy":"name"},null,8,["modelValue"])):(k(),L(S,{key:1,modelValue:c.value.name,"onUpdate:modelValue":g[2]||(g[2]=u=>c.value.name=u),"data-cy":"name",class:"w-full",onChange:a},{default:h(()=>[(k(!0),z(se,null,ye(p.value,u=>(k(),L(O,{key:u,value:u,label:u},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]))]),_:1},8,["label"]),m(T,{label:i(o)("common.code"),prop:"code"},{default:h(()=>[U("div",fa,[m(Bt,{ref:"editor",modelValue:c.value.code,"onUpdate:modelValue":g[3]||(g[3]=u=>c.value.code=u),language:"html","k-script":""},null,8,["modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules","onKeydown"])]),_:1},8,["model-value","title"])}}}),pa={class:"px-8px rounded-normal h-300px w-full border border-solid border-[#cccccc] focus-within:border-[#2296f3] overflow-hidden"},ha=le({props:{modelValue:{type:Boolean},data:null},emits:["update:modelValue","addTask"],setup(e,{emit:t}){const n=e,{t:o}=we(),l={name:[Ht(),kt(1,50),Se(o("common.nameRequiredTips")),at(un,o("common.viewNameExistsTips"))]},r=I(!0),s=I(),p=I([]),c=I({isCreate:!0,name:"",code:""}),v=()=>Q(this,null,function*(){c.value.name="",c.value.code="",c.value.isCreate?c.value.code=yield Ft(n.data.pages):p.value=yield co()}),a=()=>Q(this,null,function*(){c.value.name&&(c.value.code="",c.value.code=yield uo(c.value.name))}),f=()=>Q(this,null,function*(){const d=yield fo(n.data.pages,c.value.name,c.value.code,!c.value.isCreate);t("addTask",d),r.value=!1,$e.warning(o("common.jobStartRunning"))});return v(),(d,g)=>{const x=Nt,K=wt,T=Pe,M=We,O=_t,S=bt,b=Be,y=Fe;return k(),L(y,{"model-value":r.value,width:800,"close-on-click-modal":!1,title:i(o)("common.convertToHtmlBlock"),onClosed:g[6]||(g[6]=u=>t("update:modelValue",!1))},{footer:h(()=>[m(Xe,{onConfirm:f,onCancel:g[5]||(g[5]=u=>r.value=!1)})]),default:h(()=>[m(b,{ref_key:"form",ref:s,"label-position":"top",model:c.value,rules:i(l),onKeydown:st(f,["enter"]),onSubmit:g[4]||(g[4]=Z(()=>{},["prevent"]))},{default:h(()=>[m(T,{prop:"name"},{default:h(()=>[m(K,{modelValue:c.value.isCreate,"onUpdate:modelValue":g[0]||(g[0]=u=>c.value.isCreate=u),class:"el-radio-group--rounded",onChange:v},{default:h(()=>[m(x,{label:!0,"data-cy":"pageTree"},{default:h(()=>[te(F(i(o)("page.createNewHTMLBlock")),1)]),_:1}),m(x,{label:!1,"data-cy":"page"},{default:h(()=>[te(F(i(o)("page.convertToExistingHTMLBlock")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),m(T,{label:i(o)("common.name"),prop:"name"},{default:h(()=>[c.value.isCreate?(k(),L(M,{key:0,modelValue:c.value.name,"onUpdate:modelValue":g[1]||(g[1]=u=>c.value.name=u),"data-cy":"name"},null,8,["modelValue"])):(k(),L(S,{key:1,modelValue:c.value.name,"onUpdate:modelValue":g[2]||(g[2]=u=>c.value.name=u),"data-cy":"name",class:"w-full",onChange:a},{default:h(()=>[(k(!0),z(se,null,ye(p.value,u=>(k(),L(O,{key:u,value:u,label:u},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]))]),_:1},8,["label"]),m(T,{label:i(o)("common.code"),prop:"code"},{default:h(()=>[U("div",pa,[m(Bt,{ref:"editor",modelValue:c.value.code,"onUpdate:modelValue":g[3]||(g[3]=u=>c.value.code=u),language:"html","k-script":""},null,8,["modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules","onKeydown"])]),_:1},8,["model-value","title"])}}}),va={class:"px-8px rounded-normal h-400px w-full border border-solid border-[#cccccc] focus-within:border-[#2296f3] overflow-hidden"},ga=le({props:{modelValue:{type:Boolean},data:null,editType:null},emits:["update:modelValue","addTask"],setup(e,{emit:t}){const n=e,{t:o}=we(),l={code:[Se(o("common.code"))]},r=I(!0),s=I(),p=I({code:""});function c(){return Q(this,null,function*(){n.editType==="innerHtml"?p.value.code=yield mo(n.data.pages):p.value.code=yield Ft(n.data.pages)})}c();const v=()=>Q(this,null,function*(){if(n.editType==="innerHtml"){const a=yield po(n.data.pages,p.value.code);t("addTask",a)}else{const a=yield ho(n.data.pages,p.value.code);t("addTask",a)}r.value=!1,$e.warning(o("common.jobStartRunning"))});return(a,f)=>{const d=Pe,g=Be,x=Fe;return k(),L(x,{"model-value":r.value,width:"800px","close-on-click-modal":!1,title:i(o)("common.edit"),onClosed:f[3]||(f[3]=K=>t("update:modelValue",!1))},{footer:h(()=>[m(Xe,{onConfirm:v,onCancel:f[2]||(f[2]=K=>r.value=!1)})]),default:h(()=>[m(g,{ref_key:"form",ref:s,"label-position":"top",model:p.value,rules:i(l),onKeydown:st(v,["enter"]),onSubmit:f[1]||(f[1]=Z(()=>{},["prevent"]))},{default:h(()=>[m(d,{label:i(o)("common.code"),prop:"code"},{default:h(()=>[U("div",va,[m(Bt,{ref:"editor",modelValue:p.value.code,"onUpdate:modelValue":f[0]||(f[0]=K=>p.value.code=K),language:"html","k-script":""},null,8,["modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules","onKeydown"])]),_:1},8,["model-value","title"])}}}),ya=["onClick"],ka=le({props:{modelValue:{type:Boolean},data:null},emits:["update:modelValue"],setup(e){const{onPreview:t}=Nn(),{t:n}=we(),o=I(!0);return(l,r)=>{const s=wn,p=Uo,c=jt,v=Fe;return k(),L(v,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=a=>o.value=a),width:"600px","close-on-click-modal":!1,title:i(n)("common.relation"),onClosed:r[1]||(r[1]=a=>l.$emit("update:modelValue",!1))},{default:h(()=>[m(c,{"max-height":"400px"},{default:h(()=>[m(p,{data:e.data,class:"el-table--gray"},{default:h(()=>[m(s,{label:i(n)("common.name")},{default:h(({row:a})=>[U("a",{class:"cursor-pointer underline","data-cy":"name",onClick:f=>i(t)(a.previewUrl)},F(a.name),9,ya)]),_:1},8,["label"]),m(s,{label:i(n)("common.url")},{default:h(({row:a})=>[te(F(a.url),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","title"])}}});const Ca={class:"node-content w-full overflow-hidden flex items-center truncate text-l font-bold pr-15px"},_a={class:"flex-shrink-0 h-26px w-26px pl-12px flex items-center justify-center"},ba={class:"flex-shrink-0 pl-12px flex items-center"},Na={class:"pl-8px truncate"},wa=U("div",{class:"flex-1 pl-12px"},null,-1),Ea={class:"flex items-center gap-8px"},xa=le({props:{treeData:null},emits:["reload","addTask"],setup(e,{expose:t,emit:n}){const o=I(!1),l=I(!1),r=I(!1),s=I(),{t:p}=we(),c=I(),v=I(),a={label:"title",children:"children",disabled(C){return C.sameSub?"":"true"}},f=I("");function d(C,w){return Q(this,null,function*(){s.value=C,f.value=w.key})}function g(C,w){return Q(this,null,function*(){w.sameSub||(yield Jt(p("page.pageTreeDifferentTips"))),C==="View"?o.value=!0:l.value=!0})}const x=I("innerHtml");function K(C){return Q(this,null,function*(){C==="innerHtml"?x.value="innerHtml":x.value="outerHtml",s.value&&(s.value.sameSub||(yield Jt(p("page.pageTreeDifferentTips"))),r.value=!0)})}function T(){return Q(this,null,function*(){if(f.value){yield En();const C=yield vo(s.value.pages);$e.warning(p("common.jobStartRunning")),b(C)}})}const M=I(!1),O=I([]);function S(C){return Q(this,null,function*(){const w=yield go(),E=C.pages.map($=>$.pageId);O.value=w.filter($=>E.includes($.pageId)),M.value=!0})}function b(C){return Q(this,null,function*(){n("addTask",C)})}function y(C,w){return!!w.alt.includes(C)}function u(C){return Q(this,null,function*(){var w;(w=c.value)==null||w.filter(C)})}return t({selectedKey:f,convertTo(C){g(C,s.value)},edit:K,deleteSelected:T,filter:u}),(C,w)=>{var me,re,D,_;const E=Ho,$=Ze,B=it,J=Gt,oe=xo,ne=ta;return k(),z(se,null,[U("div",{ref_key:"containerDom",ref:v,class:"h-full"},[(me=e.treeData)!=null&&me.children?j("",!0):(k(),L(E,{key:0})),(re=e.treeData)!=null&&re.children?(k(),L(ne,{key:1,ref_key:"tree",ref:c,icon:"",height:((D=v.value)==null?void 0:D.offsetHeight)||400,"highlight-current":"",indent:24,data:e.treeData.children,props:a,"node-key":"id","default-expanded-keys":[((_=e.treeData.children.find(V=>V.title==="body"))==null?void 0:_.id)||""],"filter-method":y,onCurrentChange:d},{default:h(({data:V,node:q})=>[U("div",Ca,[U("div",_a,[q.isLeaf?j("",!0):(k(),z(se,{key:0},[m($,{class:"expanded-icon iconfont icon-reduce"}),m($,{class:"contracted-icon iconfont icon-a-addto"})],64))]),U("div",ba,[m(B,{"model-value":f.value===q.key},null,8,["model-value"])]),m(J,{placement:"top","show-after":1e3,content:V.alt||V.title},{default:h(()=>[U("div",Na,F(V.title),1)]),_:2},1032,["content"]),wa,U("div",Ea,[V.sameSub?(k(),L(oe,{key:0,effect:"plain",type:"success",round:"",size:"small"},{default:h(()=>[te(F(i(p)("common.same")),1)]),_:1})):j("",!0),m(oe,{effect:"plain",round:"",size:"small",onClick:Z(pe=>S(V),["stop"])},{default:h(()=>[te(F(V.pageCount)+" "+F(i(p)("common.pages")),1)]),_:2},1032,["onClick"])])])]),_:1},8,["height","data","default-expanded-keys"])):j("",!0)],512),o.value?(k(),L(ma,{key:0,modelValue:o.value,"onUpdate:modelValue":w[0]||(w[0]=V=>o.value=V),data:s.value,onAddTask:b},null,8,["modelValue","data"])):j("",!0),l.value?(k(),L(ha,{key:1,modelValue:l.value,"onUpdate:modelValue":w[1]||(w[1]=V=>l.value=V),data:s.value,onAddTask:b},null,8,["modelValue","data"])):j("",!0),r.value?(k(),L(ga,{key:2,modelValue:r.value,"onUpdate:modelValue":w[2]||(w[2]=V=>r.value=V),"edit-type":x.value,data:s.value,onAddTask:b},null,8,["modelValue","edit-type","data"])):j("",!0),M.value?(k(),L(ka,{key:3,modelValue:M.value,"onUpdate:modelValue":w[3]||(w[3]=V=>M.value=V),data:O.value},null,8,["modelValue","data"])):j("",!0)],64)}}}),Sa={class:"flex space-x-8"},Ta={key:0},Da={class:"mb-8"},Ka={class:"w-full truncate"},Va={class:"flex items-center space-x-8 truncate"},Ia={key:1},$a={class:"text-[#f56c6c] text-12px"},Ma=["title"],La=le({props:{modelValue:{type:Boolean},page:null},emits:["update:modelValue"],setup(e,{emit:t}){var S,b;const n=e,{t:o}=we(),l=rt(),r={name:[Se(o("common.nameRequiredTips")),kt(1,50),at(yo,o("common.pageExists"))],url:[Se(o("common.urlRequiredTips")),at(dn,o("common.urlOccupied"))]},s=new So({name:[Se(o("common.nameRequiredTips")),kt(1,50),Ht()]}),p=I(!0),c=I(),v=I(),a=I({id:"",name:"",url:"",pageStructure:void 0});function f(y){for(const u of y)u.newName=u.name+"_copy",u.invalidMessage="",u.selected=!1,u.guid=no(),u.children&&f(u.children)}if(n.page){a.value.id=((b=(S=Do(n).page)==null?void 0:S.value)==null?void 0:b.id)||"";let y=n.page.name||"";if(y.indexOf(".")>-1){var d=y.split(".");d[0]=d[0]+"_copy",y=d.join(".")}else y+="_copy";a.value.name=y,a.value.url="/"+y,ko(a.value.id).then(u=>{f(u),a.value.pageStructure=u})}function g(y){if(Array.isArray(y)){for(const u of y)if(g(u))return!0}else if(typeof y=="object"&&y!==null){if("invalidMessage"in y&&y.invalidMessage!==""||Array.isArray(y.children)&&g(y.children))return!0;for(const u in y)if(typeof y[u]=="object"&&g(y[u]))return!0}return!1}const x=()=>Q(this,null,function*(){g(a.value.pageStructure)||(yield c.value.validate(),yield Co(a.value),p.value=!1,l.load())}),K=(y,u,C)=>{var w;if(y.selected=u||C,y.selected){let E=(w=v.value.getNode(y))==null?void 0:w.parent;E&&v.value.setChecked(E.data,!0)}},T=(y,u)=>{(u&&y.selected||!u&&!y.selected)&&y.invalidMessage!==""&&(y.invalidMessage="",y.newName=y.name+"_copy")},M=y=>{var C,w;if(T(y,!1),!((C=y.children)!=null&&C.length))return;function u(E,$){let B=v.value.getNode(E);for(const J of B.childNodes)v.value.setChecked(J.data,$),u(J.data,$),T(J.data,!0)}(w=y.children)!=null&&w.some(E=>!E.selected)?u(y,!0):u(y,!1)},O=y=>Q(this,null,function*(){s.validate({name:y.newName}).then(()=>{y.invalidMessage=""}).catch(({errors:u,fields:C})=>{y.invalidMessage=u[0].message})});return(y,u)=>{const C=We,w=Pe,E=Ze,$=Gt,B=We,J=Wo,oe=Al,ne=jt,me=Be,re=Fe;return k(),L(re,{"model-value":p.value,width:"800px","close-on-click-modal":!1,title:i(o)("common.copyPage"),onClosed:u[4]||(u[4]=D=>t("update:modelValue",!1))},{footer:h(()=>[m(Xe,{onConfirm:x,onCancel:u[3]||(u[3]=D=>p.value=!1)})]),default:h(()=>[m(me,{ref_key:"form",ref:c,"label-position":"top",model:a.value,rules:i(r),onKeydown:st(x,["enter"])},{default:h(()=>{var D;return[U("div",Sa,[m(w,{label:i(o)("common.name"),prop:"name",class:"flex-1"},{default:h(()=>[m(C,{modelValue:a.value.name,"onUpdate:modelValue":u[0]||(u[0]=_=>a.value.name=_),"data-cy":"name"},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:"URL",prop:"url",class:"flex-1"},{default:h(()=>[m(C,{modelValue:a.value.url,"onUpdate:modelValue":u[1]||(u[1]=_=>a.value.url=_),"data-cy":"url",onInput:u[2]||(u[2]=_=>a.value.url=a.value.url.replace(/\s+/g,""))},null,8,["modelValue"])]),_:1})]),(D=a.value.pageStructure)!=null&&D.length?(k(),z("div",Ta,[U("div",Da,[U("span",null,F(i(o)("common.references")),1),m($,{class:"box-item",content:i(o)("common.copyPageWithRelationsTips"),placement:"top","popper-class":"w-800px"},{default:h(()=>[m(E,{class:"iconfont icon-problem ml-8"})]),_:1},8,["content"])]),m(ne,{"max-height":400},{default:h(()=>[U("div",Ka,[m(oe,{ref_key:"tree",ref:v,data:a.value.pageStructure,"show-checkbox":"","node-key":"guid","check-strictly":"","default-expand-all":"","expand-on-click-node":!1,onCheckChange:K,onCheck:M},{default:h(({node:_,data:V})=>[U("div",Va,[_.checked||_.indeterminate?(k(),L(B,{key:0,modelValue:V.newName,"onUpdate:modelValue":q=>V.newName=q,class:"w-180px flex-shrink-0",size:"small",placeholder:i(o)("common.name"),onInput:q=>O(V)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])):(k(),z("div",Ia,F(V.name),1)),U("div",$a,F(V.invalidMessage),1),m(J,{type:V.type},null,8,["type"]),U("div",{title:V.summary,class:"text-s text-999 truncate"},F(V.summary),9,Ma)])]),_:1},8,["data"])])]),_:1})])):j("",!0)]}),_:1},8,["model","rules","onKeydown"])]),_:1},8,["model-value","title"])}}}),Aa={class:"p-24"},Ra={class:"flex items-center justify-center"},Oa=["title"],Pa={key:0,class:"text-blue","data-cy":"linked"},Ba={key:1,class:"text-card-disabled","data-cy":"linked"},Fa={key:0,class:"text-green","data-cy":"online"},Ua={key:1,"data-cy":"online",class:"text-card-disabled"},za={class:"text-blue ellipsis"},Ha=["title","onClick"],qa=["href"],ja={key:1,class:"shadow-s-10 rounded-normal overflow-hidden flex flex-col bg-fff dark:bg-[#303030]",style:{height:"calc(100vh - 214px)"}},Ga={class:"h-72px px-15px flex items-center bg-fff flex-shrink-0 dark:bg-[#303030]","data-cy":"table-check-all"},Wa={class:"flex items-center gap-8px"},Ya={class:"w-full flex items-center justify-end"},Xa=U("div",{class:"flex-1"},null,-1),Qa={key:0,class:"flex items-center ml-12px space-x-12px"},Za={class:"flex-1"},Ja={key:1,class:"flex justify-center items-center h-full"},Yr=le({setup(e){const{t}=we(),n=vn(),o=rt(),l=gn(),r=new eo,{onPreview:s}=Nn(),p=_=>Q(this,null,function*(){yield En(_.length),yield o.deletePages(_.map(V=>V.id))}),c=I(!1),v=I(),a=_=>{l.hasAccess("pages","edit")&&(c.value=!0,v.value=_)},f=_=>{let V=n.resolve(Ne({name:"inline-design",query:{path:_.path,access_token:r.get("jwt_token"),inline_design_lang:to(),scheme:localStorage.getItem("vueuse-color-scheme"),type:_.type,id:_.id}})).href;return V=Vo(l.site.baseUrl,V),V};function d(_){return Q(this,null,function*(){!l.hasAccess("pages","edit")||s(f(_),{title:t("common.inlineEditor")})})}function g(_){const V={id:_.id};_.layoutId!==ke&&(V.layoutId=_.layoutId);const q={query:V};return _.type==="Designer"?q.name=V.layoutId?"layout-page-design":"page-design":q.name=V.layoutId?"layout-page-edit":"page-edit",q}const x=I(),K=I(),T=I(!1),M=()=>[{searchType:tt.TagName,operator:nt.Equal,value:""},{searchType:tt.Id,operator:nt.Equal,value:""},{searchType:tt.Class,operator:nt.Equal,value:""}],O=I(M()),S=I(M());function b(){O.value.forEach((_,V)=>{S.value[V]=Ke({},O.value[V])})}function y(_){S.value.splice(_,1)}function u(){S.value.push({searchType:tt.TagName,operator:nt.Equal,value:""})}const C=I({id:"",currentStatus:0,isFinish:!0,totalPages:0});function w(_){return Q(this,null,function*(){if(_&&(C.value.id=_,C.value.isFinish=!1),!C.value.id){C.value.totalPages=0,C.value.currentStatus=0,C.value.isFinish=!0;return}const{totalPages:V,currentStatus:q,isFinish:pe}=yield _o(C.value.id);if(pe){$e.success(t("common.TaskExecutionCompleted")),C.value.id="",C.value.totalPages=0,C.value.currentStatus=0,C.value.isFinish=!0,yield ne();return}C.value.totalPages=V,C.value.currentStatus=q,C.value.isFinish=pe})}const E=I(),$=I(!1),B=I("");function J(){var _;S.value.some(V=>V.value.trim())?((_=x.value)==null||_.hide(),S.value.forEach((V,q)=>{O.value[q]=Ke({},S.value[q])}),B.value="",ne()):$e.warning(t("page.pleaseFillValueTips"))}function oe(){var _;O.value=M(),S.value=M(),(_=x.value)==null||_.hide(),ne()}function ne(){return Q(this,null,function*(){if(O.value.some(_=>_.value.trim())){const _=yield bo($.value,O.value);K.value=_}else{const _=yield No($.value);K.value=_}})}function me(){console.log($.value),$.value=!$.value,ne()}function re(){return Q(this,null,function*(){T.value=!T.value,B.value="",T.value?(E.value=setInterval(()=>Q(this,null,function*(){C.value.isFinish||w()}),3e3),wo().then(_=>{_&&_.id&&(C.value.id=_.id,C.value.isFinish=_.isFinish,C.value.totalPages=_.totalPage,C.value.currentStatus=_.currentStatus)}),C.value.isFinish&&ne()):(K.value=void 0,clearInterval(E.value))})}const D=I();return o.load(),cn().load(),Ko(()=>{clearInterval(E.value)}),(_,V)=>{var De;const q=Nt,pe=wt,ie=Ze,R=wn,H=Gt,G=ve("router-link"),N=Qn,P=qt,W=_t,Y=bt,ee=Pe,fe=We,de=jt,ce=Be,Je=el,Te=it,et=Cn,Me=_n,ct=bn,Ce=tl;return k(),z("div",Aa,[m(Jo,{name:i(t)("common.pages")},null,8,["name"]),m(ua,{pages:i(o).list},null,8,["pages"]),T.value?j("",!0):(k(),L(i(jo),{key:0,data:i(o).list,"show-check":"",permission:{feature:"pages",action:"delete"},onDelete:p},{bar:h(({selected:A})=>[A.length===1?(k(),L(Ee,{key:0,permission:{feature:"pages",action:"edit"},icon:"icon-copy",tip:i(t)("common.copy"),circle:"","data-cy":"copy",onClick:be=>a(A[0])},null,8,["tip","onClick"])):j("",!0)]),rightBar:h(()=>[m(pe,{"model-value":T.value,class:"el-radio-group--rounded ml-12px","onUpdate:modelValue":re},{default:h(()=>[m(q,{label:!1,"data-cy":"page"},{default:h(()=>[te(F(i(t)("common.page")),1)]),_:1}),m(q,{label:!0,"data-cy":"pageTree"},{default:h(()=>[te(F(i(t)("common.pageTree")),1)]),_:1})]),_:1},8,["model-value"])]),default:h(()=>[m(R,{label:i(t)("common.name"),"label-class-name":i(o).list.find(A=>A.startPage)?"ml-30px":""},{default:h(({row:A})=>[U("div",Ra,[i(o).list.find(be=>be.startPage)?(k(),L(ie,{key:0,class:ue(["w-30px",A.startPage?"iconfont icon-home2 ":""])},null,8,["class"])):j("",!0),U("span",{class:"text-l font-bold flex-1 ellipsis",title:A.name,"data-cy":"name"},F(A.name),9,Oa)])]),_:1},8,["label","label-class-name"]),m(R,{prop:"linked",label:i(t)("common.linked"),width:"80px",align:"center"},{default:h(({row:A})=>[A.linked?(k(),z("span",Pa,F(A.linked),1)):(k(),z("span",Ba,F(A.linked),1))]),_:1},8,["label"]),m(R,{prop:"online",label:i(t)("page.online"),align:"center",width:"80px"},{default:h(({row:A})=>[A.online&&i(l).site.published?(k(),z("span",Fa,F(i(t)("common.online")),1)):(k(),z("span",Ua,F(i(t)("common.offline")),1))]),_:1},8,["label"]),m(R,{prop:"relations",label:i(t)("common.references")},{default:h(({row:A})=>[m(Zo,{id:A.id,relations:A.relations,type:"Page"},null,8,["id","relations"])]),_:1},8,["label"]),m(R,{prop:"lastModified",label:i(t)("common.lastModified"),align:"center"},{default:h(({row:A})=>[te(F(i(Go)(A.lastModified)),1)]),_:1},8,["label"]),m(R,{label:i(t)("common.preview")},{default:h(({row:A})=>[U("div",za,[U("a",{href:"javascript:;",title:A.previewUrl,"data-cy":"preview",onClick:Z(be=>i(s)(A.previewUrl),["prevent"])},F(A.path),9,Ha)])]),_:1},8,["label"]),m(R,{width:"120",align:"right"},{default:h(({row:A})=>[A.type!=="Designer"?(k(),L(G,{key:0,to:i(Ne)({name:A.type==="RichText"?"rich-page-edit":A.layoutId===i(ke)?"page-setting":"layout-page-setting",query:{id:A.id,layoutId:A.layoutId===i(ke)?void 0:A.layoutId}}),"data-cy":"setting",class:"mx-8"},{default:h(()=>[m(H,{placement:"top",content:i(t)("common.setting")},{default:h(()=>[m(ie,{class:"iconfont icon-a-setup hover:text-blue text-l"})]),_:1},8,["content"])]),_:2},1032,["to"])):j("",!0),A.type!=="RichText"?(k(),L(G,{key:1,to:i(Ne)(g(A)),"data-cy":"edit-code",class:"mx-8"},{default:h(()=>[A.type==="Designer"?(k(),L(H,{key:0,placement:"top",content:i(t)("common.design")},{default:h(()=>[m(ie,{class:"iconfont icon-code hover:text-blue text-l"})]),_:1},8,["content"])):(k(),L(H,{key:1,placement:"top",content:i(t)("common.editCode")},{default:h(()=>[m(ie,{class:"iconfont icon-code hover:text-blue text-l"})]),_:1},8,["content"]))]),_:2},1032,["to"])):j("",!0),i(l).hasAccess("pages","edit")?(k(),z("a",{key:2,target:"_blank",href:f(A),class:"mx-8"},[m(H,{placement:"top",content:i(t)("common.inlineEditor")},{default:h(()=>[m(ie,{class:"iconfont icon-a-writein2 hover:text-blue text-l","data-cy":"inline-editor",onClick:Z(be=>d(A),["prevent"])},null,8,["onClick"])]),_:2},1032,["content"])],8,qa)):(k(),L(Ee,{key:3,permission:{feature:"pages",action:"edit"},icon:"icon-a-writein2",tip:i(t)("common.inlineEditor"),"data-cy":"inline-editor",onClick:Z(be=>d(A),["prevent"])},null,8,["tip","onClick"]))]),_:1})]),_:1},8,["data"])),T.value?(k(),z("div",ja,[U("div",Ga,[m(N,{modelValue:B.value,"onUpdate:modelValue":[V[0]||(V[0]=A=>B.value=A),V[1]||(V[1]=A=>{var be;return(be=D.value)==null?void 0:be.filter(A)})],placeholder:i(t)("common.search"),class:"w-250px h-10"},null,8,["modelValue","placeholder"]),m(Je,{ref_key:"popover",ref:x,placement:"bottom-start",width:600,trigger:"click",onBeforeEnter:b},{reference:h(()=>[m(P,{round:"",class:"ml-12px",type:O.value.some(A=>A.value.trim())?"primary":""},{default:h(()=>[te(F(i(t)("common.advancedSearch")),1)]),_:1},8,["type"])]),default:h(()=>[m(ce,{onSubmit:V[2]||(V[2]=Z(()=>{},["prevent"]))},{default:h(()=>[m(de,{"max-height":"50vh",class:"pr-12px"},{default:h(()=>[(k(!0),z(se,null,ye(S.value,(A,be)=>(k(),z("div",{key:A.searchType},[U("div",Wa,[m(ee,{class:"flex-shrink-0 w-140px"},{default:h(()=>[m(Y,{modelValue:A.searchType,"onUpdate:modelValue":he=>A.searchType=he,filterable:"","allow-create":"",teleported:!1},{default:h(()=>[(k(!0),z(se,null,ye(i(tt),he=>(k(),L(W,{key:he,label:he,value:he},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),m(ee,{class:"flex-shrink-0 w-140px"},{default:h(()=>[m(Y,{modelValue:A.operator,"onUpdate:modelValue":he=>A.operator=he,teleported:!1},{default:h(()=>[(k(!0),z(se,null,ye(i(nt),he=>(k(),L(W,{key:he,label:he,value:he},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),m(ee,{class:"flex-1"},{default:h(()=>[m(fe,{modelValue:A.value,"onUpdate:modelValue":he=>A.value=he,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),m(ee,null,{default:h(()=>[m(Ee,{disabled:S.value.length<2,class:"!text-orange",icon:"icon-delete",tip:i(t)("common.delete"),circle:"","data-cy":"delete",onClick:Z(he=>y(be),["stop"])},null,8,["disabled","tip","onClick"])]),_:2},1024)])]))),128)),S.value.length<10?(k(),L(ee,{key:0},{default:h(()=>[m(Ee,{icon:"icon-a-addto",tip:i(t)("common.add"),circle:"","data-cy":"add",onClick:Z(u,["stop"])},null,8,["tip","onClick"])]),_:1})):j("",!0)]),_:1}),m(ee,null,{default:h(()=>[U("div",Ya,[m(P,{onClick:oe},{default:h(()=>[te(F(i(t)("common.reset")),1)]),_:1}),m(P,{type:"primary",onClick:J},{default:h(()=>[te(F(i(t)("common.search")),1)]),_:1})])]),_:1})]),_:1})]),_:1},512),Xa,m(P,{round:"",class:"ml-12px",onClick:me},{default:h(()=>[m(Te,{"model-value":$.value,label:i(t)("page.includeScriptTags"),class:"pointer-events-none"},null,8,["model-value","label"])]),_:1}),(De=D.value)!=null&&De.selectedKey?(k(),z("div",Qa,[m(Ee,{icon:"icon-view",tip:i(t)("common.convertToType",{type:i(t)("common.view")}),"data-cy":i(t)("common.view"),circle:"",onClick:V[3]||(V[3]=Z(A=>D.value.convertTo("View"),["stop"]))},null,8,["tip","data-cy"]),m(Ee,{icon:"icon-html",tip:i(t)("common.convertToType",{type:i(t)("common.htmlBlock")}),"data-cy":i(t)("common.htmlBlock"),circle:"",onClick:V[4]||(V[4]=Z(A=>D.value.convertTo("HtmlBlock"),["stop"]))},null,8,["tip","data-cy"]),m(ct,{trigger:"hover"},{dropdown:h(()=>[m(Me,null,{default:h(()=>[m(et,{onClick:V[5]||(V[5]=Z(A=>D.value.edit("outerHtml"),["stop"]))},{default:h(()=>[te(F(i(t)("code.editCode",{name:i(t)("page.outerHtml")})),1)]),_:1}),m(et,{onClick:V[6]||(V[6]=Z(A=>D.value.edit("innerHtml"),["stop"]))},{default:h(()=>[te(F(i(t)("code.editCode",{name:i(t)("page.inlineHtml")})),1)]),_:1})]),_:1})]),default:h(()=>[U("div",null,[m(Ee,{icon:"icon-a-writein",tip:i(t)("common.edit"),"data-cy":i(t)("common.edit"),circle:""},null,8,["tip","data-cy"])])]),_:1}),m(Ee,{class:"!text-orange",icon:"icon-delete",tip:i(t)("common.delete"),circle:"","data-cy":"delete",onClick:Z(D.value.deleteSelected,["stop"])},null,8,["tip","onClick"])])):j("",!0),m(pe,{"model-value":T.value,class:"el-radio-group--rounded ml-12px","onUpdate:modelValue":re},{default:h(()=>[m(q,{label:!1,"data-cy":"page"},{default:h(()=>[te(F(i(t)("common.page")),1)]),_:1}),m(q,{label:!0,"data-cy":"pageTree"},{default:h(()=>[te(F(i(t)("common.pageTree")),1)]),_:1})]),_:1},8,["model-value"])]),U("div",Za,[C.value.isFinish?(k(),L(xa,{key:0,ref_key:"pageTreeRef",ref:D,"tree-data":K.value,onAddTask:w,onReload:ne},null,8,["tree-data"])):(k(),z("div",Ja,[m(Ce,{title:i(t)("common.taskIsExecuting"),"sub-title":i(t)("page.pagesRemaining",{total:C.value.totalPages,count:C.value.currentStatus})},{icon:h(()=>[m(ie,{class:"iconfont icon-bufenchenggong text-56px text-green"})]),_:1},8,["title","sub-title"])]))])])):j("",!0),c.value?(k(),L(La,{key:2,modelValue:c.value,"onUpdate:modelValue":V[7]||(V[7]=A=>c.value=A),page:v.value},null,8,["modelValue","page"])):j("",!0)])}}});export{Yr as default};
