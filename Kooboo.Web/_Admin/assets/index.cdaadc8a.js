import{w as $}from"./i18n.97105311.js";import{n as T}from"./guid.c1a40312.js";import{V as N}from"./vuedraggable.umd.e0027d17.js";import{E as S}from"./windi.539ebeab.js";import{E as z}from"./index.9589f7cf.js";import{E as G}from"./index.b09a9f00.js";import{c as L}from"./cloneDeep.5cd857a3.js";import{d as M,o as n,a as r,t as p,k as m,b as s,u as R,w as b,r as y,n as v,I as j,f as c}from"./url.2e6a77c4.js";const q={key:0,class:"font-bold"},F={key:0,class:"pr-8 w-32"},H={class:"overflow-hidden leading-40px flex-1 mr-8 ellipsis","data-cy":"text"},J=["title"],K={key:1,class:"p-4"},O={class:"p-4"},Q={key:2,class:"p-4"},ot=M({props:{list:null,idProp:{default:void 0},displayProp:{default:void 0},group:{default:T()},title:{default:void 0},wrapperClass:{default:void 0},editable:{type:Boolean},deleteTip:null,disableActions:{default:void 0}},emits:["delete","sort","add","edit","change"],setup(e,{emit:u}){const l=e;function I(t,o){const i=L(j(o));t.moved?(i.splice(t.moved.oldIndex,1),i.splice(t.moved.newIndex,0,t.moved.element)):t.added?i.splice(t.added.newIndex,0,t.added.element):t.removed&&i.splice(t.removed.oldIndex,1),u("change",i)}function g(t){var i;const o=(i=l.disableActions)==null?void 0:i.edit;return h(t,o)}function k(t){var i;const o=(i=l.disableActions)==null?void 0:i.delete;return h(t,o)}function h(t,o){if(!!o)return typeof o=="function"?o(t):o||void 0}function B(t,o){g(t)||u("edit",l.idProp?t[l.idProp]:t,t,{index:o,list:l.list})}function D(t,o){k(t)||u("delete",l.idProp?t[l.idProp]:t,t,{index:o,list:l.list})}return(t,o)=>{var w,C;const i=S,V=z,A=G;return n(),r("div",{class:v((w=e.wrapperClass)!=null?w:"space-y-4 px-24 py-16")},[e.title?(n(),r("h3",q,p(e.title),1)):m("",!0),s(R(N),{"model-value":e.list,group:e.group,disabled:e.list.length<2,"item-key":(C=e.idProp)!=null?C:"",class:"space-y-4",onSort:o[0]||(o[0]=d=>u("sort",d)),onChange:o[1]||(o[1]=d=>I(d,e.list))},{item:b(({element:d,index:a})=>{var x,E;return[c("div",{class:v(["text-666 dark:text-fff/67 flex items-center pl-16 pr-8 w-full border-line dark:border-666 rounded-normal border border-solid ellipsis bg-fff dark:bg-[#333]",{"cursor-move":e.list.length>1}]),"data-cy":"added-item"},[e.list.length>1?(n(),r("div",F,"# "+p(a+1),1)):m("",!0),c("div",H,[y(t.$slots,"default",{item:d,index:a},()=>{var f,P;return[c("span",{title:(f=d[e.displayProp||""])==null?void 0:f.trim(),"data-cy":"name"},p((P=d[e.displayProp||""])==null?void 0:P.trim()),9,J)]})]),c("div",null,[y(t.$slots,"right",{item:d,index:a})]),e.editable?(n(),r("div",K,[s(i,{class:v(["iconfont icon-a-setup",[g(d)?"cursor-not-allowed text-opacity-50":"cursor-pointer"]]),"data-cy":"edit",onClick:$(f=>B(d,a),["stop"])},null,8,["class","onClick"])])):m("",!0),c("div",O,[s(V,{placement:"top-start",content:(x=e.deleteTip)==null?void 0:x.call(e,d),disabled:!((E=e.deleteTip)!=null&&E.call(e,d))},{default:b(()=>[s(i,{class:v(["text-orange iconfont icon-delete",[k(d)?"cursor-not-allowed text-opacity-50":"cursor-pointer"]]),color:"#fab6b6","data-cy":"remove",onClick:$(f=>D(d,a),["stop"])},null,8,["class","onClick"])]),_:2},1032,["content","disabled"])]),e.list.length>1?(n(),r("div",Q,[s(i,{class:"iconfont icon-move","data-cy":"move"})])):m("",!0)],2)]}),_:3},8,["model-value","group","disabled","item-key"]),y(t.$slots,"bottom",{},()=>[s(A,{circle:"","data-cy":"add",onClick:o[2]||(o[2]=d=>t.$emit("add"))},{default:b(()=>[s(i,{class:"text-blue iconfont icon-a-addto"})]),_:1})])],2)}}});export{ot as _};
