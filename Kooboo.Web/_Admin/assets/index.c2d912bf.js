var p=(i,r,a)=>new Promise((s,l)=>{var f=o=>{try{t(a.next(o))}catch(d){l(d)}},c=o=>{try{t(a.throw(o))}catch(d){l(d)}},t=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,c);t((a=a.apply(i,r)).next())});import{_ as M}from"./k-table.c13bd7f5.js";import{g as T}from"./i18n.25caaace.js";import{d as w}from"./main.1c3b59e3.js";import{a as B}from"./replace-all.b35629e7.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import{E as R}from"./index.e281bb71.js";import{E as H}from"./index.c6488b3c.js";import{E as D}from"./windi.a815125a.js";import{E as U}from"./index.a5d96e5a.js";import{d as F,g as x,J as j,o as u,j as E,w as m,b as _,a as y,t as h,u as n,k as b,b6 as q,f as v,F as L,aH as V}from"./url.8f5ec20c.js";import{E as z}from"./index.e9f8834a.js";import{E as G}from"./index.5388dbc8.js";import"./sortable.esm.a99254e8.js";import"./icon-button.0e134c9b.js";import"./index.158cdd11.js";import"./focus-trap.81e4fb05.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.1e7e06b8.js";import"./index.0c2ced08.js";import"./index.f9c89813.js";import"./index.a9a077b4.js";import"./index.960b9732.js";import"./index.f571dfc9.js";import"./event.776e7e11.js";import"./error.7e8331f1.js";import"./scroll.0cf77af8.js";import"./isEqual.2e410d13.js";import"./_baseIsEqual.0a4e01e5.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.c93fe8e7.js";import"./validator.9b0d789f.js";import"./index.2e51d36e.js";import"./index.5b499f72.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.1d16d007.js";import"./refs.d2253dd4.js";const J=()=>w.get("Automation/list"),K=i=>w.post(B("Automation/ExecuteTask"),{TaskId:i},void 0,{hiddenLoading:!0}),O=i=>w.post(B("Automation/GetStatus"),{sessionId:i},void 0,{hiddenLoading:!0});const P={key:0,class:"px-32px py-12"},Q={class:"text-l font-bold"},W=["innerHTML"],X={class:"px-32px py-12 text-center"},Y=F({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue"],setup(i,{emit:r}){const a=i,{t:s}=T(),l=x([]),f=x(!0),c=x(!1);let t;const o=()=>p(this,null,function*(){g()}),d=()=>{r("update:modelValue",!1),clearInterval(t)},g=()=>p(this,null,function*(){K(a.id).then(k=>p(this,null,function*(){t=setInterval(()=>p(this,null,function*(){let e=yield O(k);e.isEnd?(l.value.push(...e.results),c.value=!0,clearInterval(t)):l.value.push(...e.results)}),1e3)}))});return j(()=>clearInterval(t)),o(),(k,e)=>{const C=R,S=H,$=D,A=U;return u(),E(A,{"model-value":f.value,title:n(s)("common.scanResult"),width:"800px","custom-class":" el-dialog--zero-padding","close-on-click-modal":!1,onClosed:d},{default:m(()=>[_(S,{"max-height":"50vh",class:"py-8"},{default:m(()=>[!l.value.length&&c.value?(u(),y("div",P,h(n(s)("common.noIssueFound")),1)):b("",!0),(u(!0),y(L,null,q(l.value,I=>(u(),y("div",{key:I.name,class:"hover:bg-[#EFF6FF] dark:hover:bg-666 px-32px space-y-4 pt-8"},[v("div",Q,h(I.name),1),v("div",{class:"text-999 p-4",innerHTML:I.description},null,8,W),_(C,{class:"m-0"})]))),128))]),_:1}),v("div",X,[c.value?(u(),E($,{key:0,class:"iconfont icon-yes2 text-green mr-8"})):b("",!0),V(" "+h(c.value?n(s)("common.taskExecutionCompleted"):n(s)("common.taskIsExecuting")),1)])]),_:1},8,["model-value","title"])}}});var Z=N(Y,[["__scopeId","data-v-47cc5e20"]]);const ee={class:"p-24"},te={class:"h-60px flex items-center px-44px"},oe={class:"flex items-center"},ze=F({setup(i){const{t:r}=T(),a=x(!1),s=x([]),l=x(),f=()=>p(this,null,function*(){s.value=yield J(),s.value.forEach(t=>{t.id=t.id.toString()})}),c=t=>p(this,null,function*(){a.value=!0,l.value=t.id,f()});return f(),(t,o)=>{const d=z,g=G,k=D;return u(),y(L,null,[v("div",ee,[_(n(M),{data:s.value,"show-check":"","is-radio":!0,"hide-delete":""},{leftBar:m(({selected:e})=>[v("div",te,[v("div",null,[_(d,{round:"",class:"dark:bg-666",disabled:!e.length,onClick:C=>c(e[0])},{default:m(()=>[v("div",oe,h(n(r)("common.execute")),1)]),_:2},1032,["disabled","onClick"])])])]),default:m(()=>[_(g,{label:n(r)("common.name")},{default:m(({row:e})=>[V(h(e.name),1)]),_:1},8,["label"]),_(g,{label:n(r)("common.description")},{default:m(({row:e})=>[V(h(e.description),1)]),_:1},8,["label"]),_(g,{label:n(r)("common.siteModification"),width:"200",align:"center"},{default:m(({row:e})=>[e.siteModification?(u(),E(k,{key:0,class:"iconfont icon-yes2 text-green"})):b("",!0)]),_:1},8,["label"])]),_:1},8,["data"])]),a.value?(u(),E(Z,{key:0,id:l.value,modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},null,8,["id","modelValue"])):b("",!0)],64)}}});export{ze as default};
