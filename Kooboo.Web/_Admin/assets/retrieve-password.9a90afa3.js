var Z=Object.defineProperty,ee=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var $=(l,o,e)=>o in l?Z(l,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[o]=e,V=(l,o)=>{for(var e in o||(o={}))se.call(o,e)&&$(l,e,o[e]);if(I)for(var e of I(o))ae.call(o,e)&&$(l,e,o[e]);return l},S=(l,o)=>ee(l,oe(o));var y=(l,o,e)=>new Promise((d,_)=>{var i=m=>{try{p(e.next(m))}catch(b){_(b)}},n=m=>{try{p(e.throw(m))}catch(b){_(b)}},p=m=>m.done?d(m.value):Promise.resolve(m.value).then(i,n);p((e=e.apply(l,o)).next())});import{d as U,E as F,g as x,cd as K,o as h,j as E,w as t,f as C,t as R,u as s,b as r,aH as N,M as re,i as te,x as le,a as ne,k as ie}from"./url.8f5ec20c.js";import{_ as A,a as me}from"./verify-button.354f15aa.js";import{g as D,o as M}from"./i18n.bcd18f8a.js";import{_ as z}from"./container.0878dba9.js";import{a as v,p as de,A as j,E as H,C as L,F as Q,e as pe}from"./validate.238a9986.js";import{R as ue,s as ce,a as fe,E as _e}from"./index.e8cf5bb8.js";import{u as G}from"./use-first-input-focus.0df83e78.js";import{S as J,E as O,a as W}from"./index.6d63eb53.js";import{E as k}from"./main.582f9de6.js";import{E as X}from"./index.5cbbc5d7.js";import{E as Y}from"./index.aec72f69.js";import{_ as we}from"./plugin-vue_export-helper.21dcd24c.js";import{E as ye}from"./index.79f78425.js";import"./country-and-region-codes.c36488d2.js";import"./plugin-vue_export-helper.41ffa612.js";import"./windi.19264205.js";import"./index.7a30c6dd.js";import"./logo-transparent.1566007e.js";import"./light-switch.228a2b15.js";import"./dark.166fd971.js";import"./index.2341329b.js";import"./index.bda83f28.js";import"./replace-all.d441bf14.js";import"./index.bff48780.js";import"./index.649f6c77.js";import"./index.a32fb6e5.js";import"./style.9c8f6403.js";import"./toNumber.6efebd6a.js";import"./_baseIsEqual.547729d3.js";import"./error.7e8331f1.js";import"./index.05e21f33.js";import"./_baseClone.eeff2792.js";import"./isEqual.11d86bcc.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./event.776e7e11.js";import"./isNil.98bb3b88.js";const ve={class:"flex items-center space-x-8"},be=U({setup(l){const{t:o}=D();G();const e=F({phone:"",code:"",password:"",confirmPassword:"",region:"+86"}),d={phone:[v(o("common.inputPhoneTips")),de],code:[v(o("common.inputSecurityCodeTips")),j],password:[v(o("common.inputPasswordTips"),!1),H,L],confirmPassword:[v(o("common.inputPasswordAgainTips"),!1),Q(e)]},_=new J({phone:d.phone}),i=x(),n=K(),p=()=>y(this,null,function*(){yield i.value.validate();const u=yield ue(e.region+e.phone,e.code,e.password);u.error?k.error(u.error):(k.success(o("common.resetPasswordsSuccess")),delete n.currentRoute.value.query.type,n.replace({name:"login",query:V({},n.currentRoute.value.query)}))}),m=x(!0),b=()=>{_.validate({phone:e.phone},u=>{m.value=!!u})},T=()=>y(this,null,function*(){e.confirmPassword.length>0&&(yield i.value.validateField("confirmPassword"))}),q=()=>y(this,null,function*(){yield ce(e.region+e.phone)});return(u,a)=>{const P=me,w=O,g=X,B=W,c=Y;return h(),E(z,{title:s(o)("common.retrieve"),back:"",onKeypress:M(p,["enter"])},{"back-append":t(()=>[C("a",{class:"text-blue cursor-pointer","data-cy":"retrieve-by-email",onClick:a[0]||(a[0]=f=>s(n).replace({name:"retrieve-password",query:S(V({},s(n).currentRoute.value.query),{type:"email"})}))},R(s(o)("common.retrieveByEmail")),1)]),default:t(()=>[r(B,{ref_key:"form",ref:i,"label-position":"top",model:s(e),rules:s(d)},{default:t(()=>[r(w,{label:s(o)("common.phoneNumber"),prop:"phone"},{default:t(()=>[r(P,{modelValue:s(e).phone,"onUpdate:modelValue":a[1]||(a[1]=f=>s(e).phone=f),regionCode:s(e).region,"onUpdate:regionCode":a[2]||(a[2]=f=>s(e).region=f),"max-length":"11","data-cy":"phone-number",onInput:b},null,8,["modelValue","regionCode"])]),_:1},8,["label"]),r(w,{label:s(o)("common.securityCode"),prop:"code"},{default:t(()=>[C("div",ve,[r(g,{modelValue:s(e).code,"onUpdate:modelValue":a[3]||(a[3]=f=>s(e).code=f),class:"phone_retrieve__code_input",maxlength:"4","data-cy":"security-code"},null,8,["modelValue"]),r(A,{disabled:m.value,"data-cy":"send-security-code",onClick:q},null,8,["disabled"])])]),_:1},8,["label"]),r(w,{label:s(o)("common.password"),prop:"password"},{default:t(()=>[r(g,{modelValue:s(e).password,"onUpdate:modelValue":a[4]||(a[4]=f=>s(e).password=f),type:"password","data-cy":"password",onBlur:T},null,8,["modelValue"])]),_:1},8,["label"]),r(w,{label:s(o)("common.confirmPassword"),prop:"confirmPassword"},{default:t(()=>[r(g,{modelValue:s(e).confirmPassword,"onUpdate:modelValue":a[5]||(a[5]=f=>s(e).confirmPassword=f),type:"password","data-cy":"confirm-password"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),r(c,{class:"w-full text-l h-48px",round:"",type:"primary",size:"large","data-cy":"reset-password",onClick:p},{default:t(()=>[N(R(s(o)("common.resetPassword")),1)]),_:1})]),_:1},8,["title","onKeypress"])}}}),Pe={class:"flex items-center space-x-8"},ge=U({setup(l){const{t:o}=D();G();const e=F({email:"",code:"",password:"",confirmPassword:"",region:"+86"}),d={email:[v(o("common.inputEmailTips")),pe],code:[v(o("common.inputSecurityCodeTips")),j],password:[v(o("common.inputPasswordTips"),!1),H,L],confirmPassword:[v(o("common.inputPasswordAgainTips"),!1),Q(e)]},_=new J({email:d.email}),i=x(),n=K(),p=()=>y(this,null,function*(){yield i.value.validate();const u=yield fe(e.email,e.code,e.password);u.error?k.error(u.error):(k.success(o("common.resetPasswordsSuccess")),delete n.currentRoute.value.query.type,n.replace({name:"login",query:V({},n.currentRoute.value.query)}))}),m=x(!0),b=()=>y(this,null,function*(){_.validate({email:e.email},u=>{m.value=!!u})}),T=()=>y(this,null,function*(){e.confirmPassword.length>0&&(yield i.value.validateField("confirmPassword"))}),q=()=>y(this,null,function*(){yield _e(e.email)});return(u,a)=>{const P=X,w=O,g=W,B=Y;return h(),E(z,{title:s(o)("common.retrieve"),back:"",onKeypress:M(p,["enter"])},{"back-append":t(()=>[C("a",{class:"text-blue cursor-pointer",onClick:a[0]||(a[0]=c=>s(n).replace({name:"retrieve-password",query:S(V({},s(n).currentRoute.value.query),{type:"phone"})}))},R(s(o)("common.retrieveByPhone")),1)]),default:t(()=>[r(g,{ref_key:"form",ref:i,"label-position":"top",model:s(e),rules:s(d)},{default:t(()=>[r(w,{label:s(o)("common.email"),prop:"email"},{default:t(()=>[r(P,{modelValue:s(e).email,"onUpdate:modelValue":a[1]||(a[1]=c=>s(e).email=c),modelModifiers:{trim:!0},"data-cy":"email",onInput:b},null,8,["modelValue"])]),_:1},8,["label"]),r(w,{label:s(o)("common.securityCode"),prop:"code"},{default:t(()=>[C("div",Pe,[r(P,{modelValue:s(e).code,"onUpdate:modelValue":a[2]||(a[2]=c=>s(e).code=c),maxlength:"4","data-cy":"security-code"},null,8,["modelValue"]),r(A,{disabled:m.value,"data-cy":"send-security-code",onClick:q},null,8,["disabled"])])]),_:1},8,["label"]),r(w,{label:s(o)("common.password"),prop:"password"},{default:t(()=>[r(P,{modelValue:s(e).password,"onUpdate:modelValue":a[3]||(a[3]=c=>s(e).password=c),type:"password","data-cy":"password",onBlur:T},null,8,["modelValue"])]),_:1},8,["label"]),r(w,{label:s(o)("common.confirmPassword"),prop:"confirmPassword"},{default:t(()=>[r(P,{modelValue:s(e).confirmPassword,"onUpdate:modelValue":a[4]||(a[4]=c=>s(e).confirmPassword=c),type:"password","data-cy":"confirm-password"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),r(B,{class:"w-full text-l h-48px",round:"",type:"primary",size:"large","data-cy":"reset-password",onClick:p},{default:t(()=>[N(R(s(o)("common.resetPassword")),1)]),_:1})]),_:1},8,["title","onKeypress"])}}});const Ve={class:"h-full overflow-hidden"},he={class:"retrieve-password"},xe=U({setup(l){const o=re(),e=["phone","email"],d=x(_());te(()=>o.query,()=>{d.value=_()});function _(){const i=le("type")||"phone";return e.includes(i)?i:"phone"}return(i,n)=>{const p=ye;return h(),ne("div",Ve,[r(p,null,{default:t(()=>[C("div",he,[d.value==="phone"?(h(),E(be,{key:0})):d.value==="email"?(h(),E(ge,{key:1})):ie("",!0)])]),_:1})])}}});var mo=we(xe,[["__scopeId","data-v-be79a234"]]);export{mo as default};
