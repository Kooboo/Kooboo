var ge=Object.defineProperty,ye=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var te=(c,t,a)=>t in c?ge(c,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[t]=a,le=(c,t)=>{for(var a in t||(t={}))Fe.call(t,a)&&te(c,a,t[a]);if(oe)for(var a of oe(t))ve.call(t,a)&&te(c,a,t[a]);return c},ae=(c,t)=>ye(c,he(t));var S=(c,t,a)=>new Promise((g,u)=>{var f=d=>{try{n(a.next(d))}catch(F){u(F)}},y=d=>{try{n(a.throw(d))}catch(F){u(F)}},n=d=>d.done?g(d.value):Promise.resolve(d.value).then(f,y);n((a=a.apply(c,t)).next())});import{_ as ie}from"./icon-button.74ccc970.js";import{_ as j}from"./k-table.b1a54b80.js";import{K as Y,a1 as ke,a2 as Ce}from"./dev-mode.acf56c3e.js";import{u as W,a as T}from"./replace-all.56d2c1f7.js";import{d as z,cd as ne,g as w,O as se,b8 as ce,o as _,a as B,f as v,e as q,j as D,w as r,b as e,aI as $,t as k,u as o,cg as de,k as V,F as M,b7 as X,L as we,b4 as Ee,b2 as De,N as xe,x as Be,i as $e,l as Ae}from"./url.4cb47a7a.js";import{_ as J}from"./relations-tag.b9cbe606.js";import{u as L}from"./use-date.f1258183.js";import{d as Se,b as R}from"./confirm.b60b5d2f.js";import{g as N,d as Ve}from"./i18n.a87944a4.js";import{u as me,d as P}from"./main.9fdfea92.js";import{_ as ze}from"./package-search.392883e4.js";import{E as Z}from"./windi.6360286d.js";import{E as ee}from"./index.361e2245.js";import{E as Ne}from"./index.99e769ef.js";import{E as G}from"./index.b38edc72.js";import{c as ue,E as Ie,a as Ue}from"./index.7c862087.js";import{e as qe,n as Me}from"./guid.c1a40312.js";import{M as je}from"./media-dialog.69c737ad.js";import"./validate.bb56f9e3.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.ec5f0705.js";import{_ as Te}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as Le}from"./index.f0d5f031.js";import{E as Re}from"./index.f43a3c1f.js";import{E as Pe}from"./index.178b9e08.js";import{E as Ge}from"./index.c003dfa1.js";import{B as Oe}from"./breadcrumb.f4d80c95.js";import{E as He,a as Ke}from"./index.4d2ce883.js";import"./index.d96452a6.js";import"./focus-trap.50a00b7f.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.7b8c5aef.js";import"./index.4f90a917.js";import"./index.4d568055.js";import"./sortable.esm.a99254e8.js";import"./index.c6da2706.js";import"./isEqual.4cab74e3.js";import"./_baseIsEqual.dc9e64c4.js";import"./error.7e8331f1.js";import"./index.42922617.js";import"./event.776e7e11.js";import"./index.f15f695e.js";import"./use-shortcuts.ff4b1f52.js";import"./index.fd96ea36.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./preload-helper.13a99eb0.js";import"./config.1e73f9c3.js";import"./dark.9459c47b.js";import"./page.881ec888.js";import"./index.f2c1b903.js";import"./index.c10802d9.js";import"./scroll.16983984.js";import"./aria.75ec5909.js";import"./validator.b5df2420.js";import"./index.9fd79879.js";import"./_baseClone.b8903935.js";import"./style.c350d462.js";import"./toNumber.47eea968.js";import"./index.c86a187b.js";import"./dropdown.86d3a7fb.js";import"./refs.3132cbdb.js";import"./use-copy-text.ec245a13.js";import"./index.269bf65e.js";import"./monaco.c080bc0a.js";import"./classCompletion.a22e38a6.js";import"./extraLib.d94bb2b4.js";import"./use-save-tip.e3dc783a.js";import"./index.6918f0a5.js";import"./vuedraggable.umd.af323a53.js";import"./index.f154d010.js";import"./index.b9a74c44.js";import"./index.79632b7d.js";import"./alert.d2815716.js";import"./index.24947ed8.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.d235f69b.js";/* empty css                                                          */import"./file.a821eac5.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.78bd75f1.js";/* empty css                                                         */import"./image-editor.a4ae94b1.js";import"./index.0e5d639d.js";import"./cloneDeep.c5011aa2.js";import"./main.esm.e26794cb.js";import"./index.16f227d6.js";import"./dayjs.min.ccc40d4f.js";import"./logo-transparent.1566007e.js";import"./index.50c16ae5.js";import"./layout.b686c380.js";import"./search-input.2a27ef56.js";import"./index.765084fe.js";import"./position.7590de53.js";import"./throttle.1f6a079c.js";import"./debounce.4e0c106e.js";import"./index.a7b376b1.js";import"./index.d878e15f.js";import"./index.66319a92.js";import"./media.e27599b4.js";import"./index.5ed58b47.js";import"./search-provider.ad425b7b.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./_baseUniq.d719bd5f.js";import"./use-operation-dialog.4f6d7533.js";import"./folder.8308bb9d.js";import"./plugin-vue_export-helper.41ffa612.js";import"./caret-bottom.ddd8dd91.js";import"./index.c33743a1.js";import"./browser.aedb6977.js";import"./utils.aa7941f8.js";import"./index.9fc39dc8.js";import"./index.1b4db5fb.js";import"./file.7f0748f1.js";import"./index.d24a40b9.js";import"./index.f23f1e38.js";import"./index.a24f458a.js";import"./index.1fd72ea8.js";import"./index.abe211fa.js";const Qe={class:"flex items-center mb-12 space-x-16"},We={class:"flex items-center"},Xe=["title"],Ye=["title","onClick"],Je=z({setup(c){const{t}=N(),a=Y(),g=me(),u=ne(),f=w();function y(){var p;(p=f.value)==null||p.show()}const n=p=>S(this,null,function*(){a.external.some(b=>b.name===p.name)&&(yield Se()),yield a.uploadStyle(p.raw)}),d=p=>S(this,null,function*(){yield R(p.length),yield a.deleteStyles(p.map(b=>b.id))}),F=()=>S(this,null,function*(){yield a.loadExternal()});return F(),(p,b)=>{const A=Z,x=ee,m=Ne,I=se("router-link"),s=G,i=ce("hasPermission");return _(),B("div",null,[v("div",Qe,[q((_(),D(x,{round:"","data-cy":"new-style",onClick:b[0]||(b[0]=l=>o(u).push(o(W)({name:"style-edit"})))},{default:r(()=>[v("div",We,[e(A,{class:"iconfont icon-a-addto"}),$(" "+k(o(t)("common.newStyle")),1)])]),_:1})),[[i,{feature:"style",action:"edit"}]]),e(m,{"show-file-list":!1,action:"",accept:["text/css"].join(","),"auto-upload":!1,"on-change":n,multiple:"",disabled:!o(g).hasAccess("style","edit")},{default:r(()=>[q((_(),D(x,{round:"","data-cy":"upload-styles"},{default:r(()=>[$(k(o(t)("common.uploadStyles")),1)]),_:1})),[[i,{feature:"style",action:"edit"}]])]),_:1},8,["accept","disabled"]),q((_(),D(x,{round:"","data-cy":"search",onClick:y},{default:r(()=>[e(A,{class:"iconfont icon-search"}),$(" "+k(o(t)("common.search")),1)]),_:1})),[[i,{feature:"style",action:"edit"}]])]),e(o(j),{data:o(a).external,"show-check":"",permission:{feature:"style",action:"delete"},onDelete:d},{default:r(()=>[e(s,{label:o(t)("common.name")},{default:r(({row:l})=>[e(I,{to:o(W)({name:"style-edit",query:{id:l.id}}),"data-cy":"name"},{default:r(()=>[v("span",{title:l.name,class:"text-blue cursor-pointer ellipsis"},k(l.name),9,Xe)]),_:2},1032,["to"])]),_:1},8,["label"]),e(s,{label:o(t)("common.preview")},{default:r(({row:l})=>[v("span",{class:"text-blue cursor-pointer",title:l.fullUrl,"data-cy":"preview",onClick:E=>o(de)(l.fullUrl)},k(l.routeName),9,Ye)]),_:1},8,["label"]),e(s,{label:o(t)("common.usedBy")},{default:r(({row:l})=>[e(J,{id:l.id,relations:l.references,type:"style"},null,8,["id","relations"])]),_:1},8,["label"]),e(s,{label:o(t)("common.lastModified")},{default:r(({row:l})=>[$(k(o(L)(l.lastModified)),1)]),_:1},8,["label"]),e(s,{width:"60px",align:"right"},{default:r(({row:l})=>[e(ie,{icon:"icon-time",permission:{feature:"site",action:"log"},tip:o(t)("common.version"),"data-cy":"versions",onClick:E=>p.$router.goLogVersions(l.keyHash,l.storeNameHash,l.tableNameHash)},null,8,["tip","onClick"])]),_:1})]),_:1},8,["data"]),e(ze,{ref_key:"searchDialog",ref:f,module:"style",onReload:F},null,512)])}}}),Ze=["title"],eo=z({setup(c){const{t}=N(),a=Y(),g=u=>S(this,null,function*(){yield R(u.length),a.deleteStyles(u.map(f=>f.id))});return a.loadEmbedded(),(u,f)=>{const y=se("router-link"),n=G;return _(),B("div",null,[e(o(j),{data:o(a).embedded,"show-check":"",permission:{feature:"style",action:"delete"},onDelete:g},{default:r(()=>[e(n,{label:o(t)("common.name")},{default:r(({row:d})=>[e(y,{to:o(W)({name:"style-edit",query:{id:d.id}}),"data-cy":"name"},{default:r(()=>[v("span",{title:d.name,class:"text-blue cursor-pointer ellipsis"},k(d.name),9,Ze)]),_:2},1032,["to"])]),_:1},8,["label"]),e(n,{label:o(t)("common.usedBy")},{default:r(({row:d})=>[e(J,{id:d.id,relations:d.references,type:"style"},null,8,["id","relations"])]),_:1},8,["label"]),e(n,{label:o(t)("common.lastModified")},{default:r(({row:d})=>[$(k(o(L)(d.lastModified)),1)]),_:1},8,["label"])]),_:1},8,["data"])])}}}),oo={class:"flex items-center mb-12 space-x-16"},to={class:"flex items-center"},lo=["title","onClick"],ao=["title","onClick"],ro=z({setup(c){const{t}=N(),a=Y(),g=w(!1),u=w(),f=y=>S(this,null,function*(){yield R(y.length),a.deleteGroups(y.map(n=>n.id))});return a.loadGroups(),a.loadExternal(),(y,n)=>{var x;const d=Z,F=ee,p=G,b=ue,A=ce("hasPermission");return _(),B("div",null,[v("div",oo,[q((_(),D(F,{round:"","data-cy":"new-group",onClick:n[0]||(n[0]=m=>{g.value=!0,u.value=void 0})},{default:r(()=>[v("div",to,[e(d,{class:"iconfont icon-a-addto"}),$(" "+k(o(t)("common.newGroup")),1)])]),_:1})),[[A,{feature:"style",action:"edit"}]])]),e(o(j),{data:o(a).group,"show-check":"",permission:{feature:"style",action:"delete"},onDelete:f},{default:r(()=>[e(p,{label:o(t)("common.name")},{default:r(({row:m})=>[v("span",{title:m.name,class:"text-blue cursor-pointer ellipsis","data-cy":"name",onClick:I=>{u.value=m,g.value=!0}},k(m.name),9,lo)]),_:1},8,["label"]),e(p,{label:o(t)("common.children")},{default:r(({row:m})=>[e(b,{size:"small",class:"rounded-full","data-cy":"children-number"},{default:r(()=>[$(k(m.childrenCount),1)]),_:2},1024)]),_:1},8,["label"]),e(p,{label:o(t)("common.preview")},{default:r(({row:m})=>[v("span",{class:"text-blue cursor-pointer ellipsis",title:m.previewUrl,"data-cy":"preview",onClick:I=>o(de)(m.previewUrl)},k(m.relativeUrl),9,ao)]),_:1},8,["label"]),e(p,{label:o(t)("common.usedBy")},{default:r(({row:m})=>[e(J,{id:m.id,relations:m.references,type:"ResourceGroup"},null,8,["id","relations"])]),_:1},8,["label"]),e(p,{label:o(t)("common.lastModified")},{default:r(({row:m})=>[$(k(o(L)(m.lastModified)),1)]),_:1},8,["label"])]),_:1},8,["data"]),g.value?(_(),D(ke,{key:0,id:(x=u.value)==null?void 0:x.id,modelValue:g.value,"onUpdate:modelValue":n[1]||(n[1]=m=>g.value=m)},null,8,["id","modelValue"])):V("",!0)])}}}),io=Ve.global.t,no=c=>P.get(T("CSSRule/getInline"),{id:c}),so=()=>P.get(T("CSSRule/InlineList")),co=c=>P.post(T("CSSRule/UpdateInline"),c),mo=c=>P.post(T("CSSRule/Deletes"),c,void 0,{successMessage:io("common.deleteSuccess")}),uo=["accelerator","azimuth","background","background-attachment","background-color","background-image","background-position","background-position-x","background-position-y","background-repeat","behavior","border","border-bottom","border-bottom-color","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-style","border-top-width","border-width","bottom","caption-side","clear","clip","color","content","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","elevation","empty-cells","filter","float","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","ime-mode","include-source","layer-background-color","layer-background-image","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","max-height","max-width","min-height","min-width","-moz-binding","-moz-border-radius","-moz-border-radius-topleft","-moz-border-radius-topright","-moz-border-radius-bottomright","-moz-border-radius-bottomleft","-moz-border-top-colors","-moz-border-right-colors","-moz-border-bottom-colors","-moz-border-left-colors","-moz-opacity","-moz-outline","-moz-outline-color","-moz-outline-style","-moz-outline-width","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-user-select","orphans","outline","outline-color","outline-style","outline-width","overflow","overflow-X","overflow-Y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","play-during","position","quotes","-replace","richness","right","ruby-align","ruby-overhang","ruby-position","-set-link-source","size","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","table-layout","text-align","text-align-last","text-decoration","text-indent","text-justify","text-overflow","text-shadow","text-transform","text-autospace","text-kashida-space","text-underline-position","top","unicode-bidi","-use-link-source","vertical-align","visibility","voice-family","volume","white-space","widows","width","word-break","word-spacing","word-wrap","writing-mode","z-index","zoom"],po=["color","background-color","border","border-top","border-right","border-bottom","border-left","border-color","border-top-color","border-right-color","border-bottom-color","border-left-color","box-shadow","text-shadow","outline","outline-color"],fo=["background-image"],re=["background"],pe={aliceblue:"#F0F8FF",antuquewhite:"#FAEBD7",aqua:"#00FFFF",cyan:"#00FFFF",blue:"#0000FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",dakgray:"#A9A9A9",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",magenta:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008080",teal:"#008080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcorol:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",madiumaquamarine:"#66CDAA",maroon:"#800000",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",orangered:"#FF4500",palegoldenrod:"#EEE8AA",palegreen:"#98F898",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CECB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},bo=Object.keys(pe),Q=c=>c&&bo.includes(c.toLocaleLowerCase())?pe[c.toLocaleLowerCase()]:"";const O=c=>(Ee("data-v-209dbb20"),c=c(),De(),c),_o=O(()=>v("div",null,"{",-1)),go={class:"ml-24 space-y-8"},yo=O(()=>v("span",{class:"font-bold"},":",-1)),ho=O(()=>v("span",{class:"font-bold"},";",-1)),Fo=O(()=>v("div",null,"}",-1)),vo=z({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue","reload"],setup(c,{emit:t}){const a=c,{t:g}=N(),u=w(!0),f=w(),y=w(!1),n=w({id:a.id||qe,selector:"",declarations:[]}),d=w({});no(a.id).then(s=>{n.value=s;for(const i of n.value.declarations)i.important&&(i.value=i.value+" !important")});const F=s=>po.concat(re).some(i=>i===s),p=s=>fo.concat(re).some(i=>i===s),b=s=>{if(s=s==null?void 0:s.trim().replace(/[ ]+/g," "),!s)return"";let i=[];i=s.replace(/([^,]) /g,"$1#$#").split("#$#");for(let l=0;l<i.length;l++){if(/^(#|rgb|hsl)/i.test(i[l]))return i[l];if(Q(i[l]))return Q(i[l])}return""},A=(s,i)=>{if(s=s==null?void 0:s.trim().replace(/[ ]+/g," "),!s)return i;let l=[];l=s.replace(/([^,]) /g,"$1#$#").split("#$#");for(let E=0;E<l.length;E++)if(/^(#|rgb|hsl)/i.test(l[E])||Q(l[E]))return l[E]=i,l.join(" ");return`${i} ${s}`},x=()=>S(this,null,function*(){const s=n.value.declarations.map(i=>`${i.propertyName}:${i.value};`).join("");yield co({id:n.value.id,ruleText:s}),u.value=!1,t("reload")}),m=()=>{n.value.declarations.push({id:Me(),propertyName:"",value:""})},I=s=>{if(s.length===1&&f.value){var i=f.value.value,l=i.match(/url\((\S+)\)/);if(l&&l.length){var E=i.split(l[1]).join("'"+s[0].url+"'");f.value.value=E}else f.value.value=i+" url('"+s[0].url+"')"}y.value=!1};return(s,i)=>{const l=Ie,E=Ue,fe=Pe,H=Z,K=ee,be=Re,_e=Ge;return _(),B(M,null,[e(_e,{"model-value":u.value,width:"680px","close-on-click-modal":!1,title:o(g)("common.inlineStyle"),onClosed:i[1]||(i[1]=h=>t("update:modelValue",!1))},{footer:r(()=>[e(Le,{permission:{feature:"style",action:"edit"},onConfirm:x,onCancel:i[0]||(i[0]=h=>u.value=!1)})]),default:r(()=>[_o,v("div",go,[(_(!0),B(M,null,X(n.value.declarations,h=>(_(),B("div",{key:h.id,class:"flex items-center space-x-8","data-cy":"style-rule-item"},[e(E,{modelValue:h.propertyName,"onUpdate:modelValue":C=>h.propertyName=C,class:"w-220px",filterable:"","allow-create":"","default-first-option":"",placeholder:o(g)("common.selectProperty"),"data-cy":"style-rule-key-dropdown",onChange:C=>{h.value="",we(()=>{var U;return(U=d.value[h.id])==null?void 0:U.focus()})}},{default:r(()=>[(_(!0),B(M,null,X(o(uo),C=>(_(),D(l,{key:C,value:C,label:C,"data-cy":"style-rule-key-opt"},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),yo,e(fe,{ref_for:!0,ref:C=>d.value[h.id]=C,modelValue:h.value,"onUpdate:modelValue":C=>h.value=C,placeholder:o(g)("common.value"),class:"w-200px","data-cy":"style-rule-value"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),ho,e(K,{circle:"",onClick:C=>n.value.declarations=n.value.declarations.filter(U=>U!==h)},{default:r(()=>[e(H,{class:"iconfont icon-delete text-orange cursor-pointer","data-cy":"remove"})]),_:2},1032,["onClick"]),F(h.propertyName)?(_(),D(be,{key:0,"model-value":b(h.value),"show-alpha":"",onChange:C=>{h.value=A(h.value,C)}},null,8,["model-value","onChange"])):V("",!0),p(h.propertyName)?(_(),D(K,{key:1,circle:"","data-cy":"background-image-picker",onClick:C=>{f.value=h,y.value=!0}},{default:r(()=>[e(H,{class:"iconfont icon-photo text-blue cursor-pointer"})]),_:2},1032,["onClick"])):V("",!0)]))),128)),e(K,{circle:"",onClick:m},{default:r(()=>[e(H,{class:"iconfont icon-a-addto text-blue cursor-pointer","data-cy":"add"})]),_:1})]),Fo]),_:1},8,["model-value","title"]),y.value?(_(),D(o(je),{key:0,modelValue:y.value,"onUpdate:modelValue":i[2]||(i[2]=h=>y.value=h),onChoose:I},null,8,["modelValue"])):V("",!0)],64)}}});var ko=Te(vo,[["__scopeId","data-v-209dbb20"]]);const Co=["title","onClick"],wo={class:"ellipsis","data-cy":"site-object"},Eo=z({setup(c){const{t}=N(),a=w([]),g=w(),u=w(!1),f=()=>S(this,null,function*(){a.value=(yield so()).sort((n,d)=>n.lastModified>d.lastModified?-1:1)}),y=n=>S(this,null,function*(){yield R(n.length),yield mo({ids:n.map(d=>d.id)}),f()});return f(),(n,d)=>{const F=G,p=ue;return _(),B("div",null,[e(o(j),{data:a.value,"show-check":"",permission:{feature:"style",action:"delete"},onDelete:y},{default:r(()=>[e(F,{label:o(t)("common.style")},{default:r(({row:b})=>[v("span",{title:b.name,class:"text-blue cursor-pointer ellipsis","data-cy":"name",onClick:A=>{g.value=b,u.value=!0}},k(b.name),9,Co)]),_:1},8,["label"]),e(F,{label:o(t)("common.ownerType"),width:"120px"},{default:r(({row:b})=>[e(p,{class:"rounded-full",size:"small","data-cy":"owner-type"},{default:r(()=>[$(k(b.ownerType),1)]),_:2},1024)]),_:1},8,["label"]),e(F,{label:o(t)("common.siteObject")},{default:r(({row:b})=>[v("span",wo,k(b.ownerName),1)]),_:1},8,["label"]),e(F,{label:o(t)("common.lastModified"),width:"180px"},{default:r(({row:b})=>[$(k(o(L)(b.lastModified)),1)]),_:1},8,["label"])]),_:1},8,["data"]),u.value?(_(),D(ko,{key:0,id:g.value.id,modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=b=>u.value=b),onReload:f},null,8,["id","modelValue"])):V("",!0)])}}}),Do={class:"relative"},xo={class:"absolute top-0 right-24 h-52px flex justify-center items-center"},Rl=z({setup(c){const t=me(),a=ne(),g=xe(),{t:u}=N(),f=w(!1),y=[{displayName:u("common.external"),value:"external",component:Je},{displayName:u("common.embedded"),value:"embedded",component:eo},{displayName:u("common.inlineStyle"),value:"inline",component:Eo},{displayName:u("common.group"),value:"group",component:ro}],n=w(Be("name")||y[0].value),d=()=>{t.hasAccess("site","edit")&&(f.value=!0)};return $e(()=>n.value,F=>{var p;a.push({name:(p=g.name)==null?void 0:p.toString(),query:ae(le({},g.query),{name:F})})}),(F,p)=>{const b=He,A=Ke,x=ie;return _(),B("div",null,[e(Oe,{name:o(u)("common.styles"),class:"p-24"},null,8,["name"]),v("div",Do,[e(A,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=m=>n.value=m)},{default:r(()=>[(_(),B(M,null,X(y,m=>e(b,{key:m.value,label:m.displayName,name:m.value},{default:r(()=>[n.value===m.value?(_(),D(Ae(m.component),{key:0})):V("",!0)]),_:2},1032,["label","name"])),64))]),_:1},8,["modelValue"]),v("div",xo,[e(x,{class:"dark:bg-999",permission:{feature:"site",action:"edit"},circle:"",icon:"icon-a-setup",tip:o(u)("common.settings"),onClick:d},null,8,["tip"])])]),f.value?(_(),D(Ce,{key:0,modelValue:f.value,"onUpdate:modelValue":p[1]||(p[1]=m=>f.value=m)},null,8,["modelValue"])):V("",!0)])}}});export{Rl as default};
