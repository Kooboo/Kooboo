import{_ as T}from"./index.a731e53b.js";import{B as E}from"./breadcrumb.80c136b8.js";import{M as I}from"./media.56507018.js";import{F as L}from"./file.e38b2555.js";import{g as M}from"./i18n.48bd28ac.js";import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.f6d26366.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import{E as N}from"./index.2bc50276.js";import{E as S}from"./index.c4e9b529.js";import{d as j,g as m,c as h,b2 as q,b7 as z,o as c,j as f,w as u,f as t,t as x,u as e,b as w,n as U,e as K,aH as A,K as G}from"./url.2e6a77c4.js";const J={class:"flex items-center mr-8 h-28px font-bold dark:text-[#fffa]"},O={class:"flex-1 mt-4 overflow-hidden"},Q={class:"flex justify-between items-center"},R=j({props:{modelValue:{type:Boolean},multiple:{type:Boolean},folderType:null,permission:null,infinite:{type:Boolean}},emits:["update:modelValue","choose"],setup(C,{emit:B}){const _=C,{t:i}=M(),s=m(!0),n=h(()=>_.folderType==="File"),d=m(),b=h(()=>({multiple:!!_.multiple})),y=m(""),p=m([]);q("dialogInfo",b);const g=h(()=>d.value?d.value.selectedFiles:[]);function V(){B("choose",g.value),s.value=!1}function F(){const o=document.querySelector(".media-dialog .el-upload button");o==null||o.click()}function k(o){var l;y.value=o.keyword,p.value=(l=o.providers)!=null?l:[],o.infinite||G(()=>{const r=document.querySelector(".k-media-dialog .el-dialog__body");r&&(r.scrollTop=0)})}return(o,l)=>{const r=N,D=T,$=S,P=z("hasPermission");return c(),f($,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),"append-to-body":"",width:"850px","close-on-click-modal":!1,"custom-class":"el-dialog--fixed-footer k-media-dialog",title:e(n)?e(i)("common.file"):e(i)("common.mediaLibrary"),onClosed:l[2]||(l[2]=a=>o.$emit("update:modelValue",!1))},{header:u(()=>{var a,v;return[t("div",{class:U(["flex items-center overflow-hidden",{"w-500px":p.value.length<=1,"w-330px":p.value.length>1}])},[t("div",J,x(e(n)?e(i)("common.file"):e(i)("common.mediaLibrary")),1),t("div",O,[w(E,{size:"small","hide-header":!!e(b),"crumb-path":((a=o.$refs.media)==null?void 0:a.getCrumbPath)||[],onHandleClickPath:(v=o.$refs.media)==null?void 0:v.handleClickBreadcrumb},null,8,["hide-header","crumb-path","onHandleClickPath"])])],2)]}),footer:u(()=>{var a;return[t("div",Q,[K((c(),f(r,{type:"primary",disabled:!!y.value,onClick:F},{default:u(()=>[A(x(e(i)("common.uploadFiles")),1)]),_:1},8,["disabled"])),[[P,{feature:e(n)?"file":"mediaLibrary",action:"edit"}]]),t("div",null,[w(D,{disabled:((a=e(g))==null?void 0:a.length)===0,"confirm-label":e(i)("common.choose"),onConfirm:V,onCancel:l[0]||(l[0]=v=>s.value=!1)},null,8,["disabled","confirm-label"])])])]}),default:u(()=>[e(n)?(c(),f(L,{key:0,ref_key:"media",ref:d,class:"media-dialog",onLoaded:k},null,512)):(c(),f(I,{key:1,ref_key:"media",ref:d,class:"media-dialog","grid-col":4,onLoaded:k},null,512))]),_:1},8,["modelValue","title"])}}});var se=H(R,[["__scopeId","data-v-7e2ae6b2"]]);export{se as M};
