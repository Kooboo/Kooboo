var $=(y,c,n)=>new Promise((i,m)=>{var x=l=>{try{_(n.next(l))}catch(D){m(D)}},g=l=>{try{_(n.throw(l))}catch(D){m(D)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(x,g);_((n=n.apply(y,c)).next())});import{g as B,o as G,w as H}from"./i18n.2d8b30eb.js";import{u as M}from"./use-operation-dialog.fbfa9343.js";import{a as P}from"./validate.348f94d6.js";import{b as W,p as J,c as Q,d as X,e as Z,f as ee}from"./index.3d9a337f.js";import{_ as F}from"./index.ed88cf90.js";import{b as U}from"./main.d8c6ef59.js";import{_ as oe}from"./plugin-vue_export-helper.21dcd24c.js";import{E as te}from"./index.5f2a659f.js";import{E as ae}from"./index.bb5499e2.js";import{E as q,a as R}from"./index.a141884f.js";import{E as K}from"./index.a4ff385c.js";import{d as T,g as h,i as ne,o as p,j as S,w as a,b as r,u as e,a as E,f as b,t as f,F as Y,b6 as j,k as N,G as le,b3 as se,b1 as re,cd as ie,E as me,N as de,aH as ce,n as L}from"./url.8f5ec20c.js";import{s as ue,b as pe}from"./confirm.617d359f.js";import{E as _e,a as fe}from"./index.ab4ed870.js";import{_ as ve}from"./k-table.f75c31cc.js";import{E as be}from"./index.96970839.js";import{E as ge}from"./index.bc06171b.js";import"./index.37979027.js";import"./index.3dc39d21.js";import"./replace-all.dd6016f2.js";import"./index.832f2769.js";import"./index.b3e4ff8e.js";import"./index.5af167df.js";import"./style.ad574a57.js";import"./toNumber.6efebd6a.js";import"./_baseIsEqual.2f38f7c3.js";import"./index.50c16ae5.js";import"./windi.bf752d69.js";import"./preload-helper.13a99eb0.js";import"./event.776e7e11.js";import"./index.a595fe6d.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./_baseClone.29a8cd97.js";import"./isEqual.c3e9e9f4.js";import"./index.bf8ed8c6.js";import"./scroll.54c27fbd.js";import"./index.0535d5fe.js";import"./focus-trap.3f074800.js";import"./refs.d2253dd4.js";import"./logo-transparent.1566007e.js";import"./index.80a4dc1a.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./validator.1bcd6e6a.js";import"./index.ec785feb.js";import"./index.593106e3.js";import"./debounce.730e1961.js";import"./index.b68af8a1.js";import"./sortable.esm.a99254e8.js";import"./icon-button.e30c79ea.js";import"./index.e87fdc52.js";import"./index.14993118.js";import"./index.4c9af567.js";import"./index.0a83bb10.js";const Ce=y=>(se("data-v-5c21889a"),y=y(),re(),y),he={key:0,class:"mb-16"},ye={class:"text-2l font-bold"},xe={class:"space-y-4 leading-4"},De={class:"break-normal"},ke=Ce(()=>b("p",{class:"leading-2"},"\xA0",-1)),we=T({props:{modelValue:{type:Boolean}},emits:["create-success"],setup(y,{emit:c}){const n=y,{t:i}=B(),{visible:m,handleClose:x}=M(n,c),g=U(),_=h(),l=h({domainName:""}),D=h(),O={domainName:[P(i("common.domainRequiredTips"))]};ne(()=>m.value,v=>{var t;v&&((t=_.value)==null||t.resetFields(),l.value.domainName="",W().then(o=>D.value=o))});function C(){var v;(v=_.value)==null||v.validate(t=>$(this,null,function*(){t&&(yield J(l.value.domainName),x(),c("create-success"))}))}return(v,t)=>{const o=te,k=ae,A=q,d=R,I=K;return p(),S(I,{modelValue:e(m),"onUpdate:modelValue":t[2]||(t[2]=u=>le(m)?m.value=u:null),width:"500px","close-on-click-modal":!1,title:e(i)("common.newLocalDomain"),onClose:e(x)},{footer:a(()=>[r(F,{"confirm-label":e(i)("common.create"),onConfirm:C,onCancel:e(x)},null,8,["confirm-label","onCancel"])]),default:a(()=>[r(d,{ref_key:"form",ref:_,class:"el-form--label-normal",model:l.value,rules:e(O),"label-position":"top",onSubmit:t[1]||(t[1]=H(()=>{},["prevent"]))},{default:a(()=>{var u;return[(u=e(g).header)!=null&&u.isOnlineServer?(p(),E("div",he,[r(o,{closable:!1,type:"info",class:"dark:bg-444"},{header:a(()=>[b("span",ye,f(e(i)("common.addADomainNameToYourAccount")),1)]),default:a(()=>{var V,s;return[b("div",xe,[b("div",De,f(e(i)("common.dnsServer")),1),(p(!0),E(Y,null,j((V=D.value)==null?void 0:V.dnsServers,w=>(p(),E("div",{key:w},f(w),1))),128)),ke,b("div",null,f(e(i)("common.orCreateYourDomainWildcardTips")),1),b("div",null,f((s=D.value)==null?void 0:s.cName),1)])]}),_:1})])):N("",!0),r(A,{prop:"domainName",label:e(i)("common.domain")},{default:a(()=>[r(k,{modelValue:l.value.domainName,"onUpdate:modelValue":t[0]||(t[0]=V=>l.value.domainName=V),"data-cy":"subdomain",onKeydown:G(C,["enter"])},null,8,["modelValue","onKeydown"])]),_:1},8,["label"])]}),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","onClose"])}}});var Ve=oe(we,[["__scopeId","data-v-5c21889a"]]);const Ne=T({props:{domain:null,dataCenter:null,modelValue:{type:Boolean}},emits:["update:modelValue","change-success"],setup(y,{emit:c}){const n=y,{t:i}=B(),m=h(!0),x=h(),g=h(),_=h(),l=()=>$(this,null,function*(){yield ue(i("common.assignDataCenterTips")),yield Q(n.domain,g.value),m.value=!1,c("change-success")});return(()=>$(this,null,function*(){g.value=n.dataCenter,_.value=yield X(n.domain)}))(),(O,C)=>{const v=_e,t=fe,o=q,k=R,A=K;return p(),S(A,{"model-value":m.value,width:"350px","close-on-click-modal":!1,title:e(i)("common.changeDataCenter"),"custom-class":"changeDataCenterDialog",onClosed:C[2]||(C[2]=d=>c("update:modelValue",!1))},{footer:a(()=>[r(F,{onConfirm:l,onCancel:C[1]||(C[1]=d=>m.value=!1)})]),default:a(()=>[r(k,{ref_key:"form",ref:x,class:"el-form--label-normal","label-position":"top"},{default:a(()=>[r(o,{label:e(i)("common.dataCenter")},{default:a(()=>[r(t,{modelValue:g.value,"onUpdate:modelValue":C[0]||(C[0]=d=>g.value=d),class:"w-full",placeholder:"Text"},{default:a(()=>[(p(!0),E(Y,null,j(_.value,d=>(p(),S(v,{key:d.dataCenter,value:d.dataCenter,label:d.description},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},512)]),_:1},8,["model-value","title"])}}}),Se={class:"p-24"},Ee={class:"flex items-center pb-24 space-x-16"},$e={class:"flex items-center"},Ae={class:"flex items-center"},Oe=["title","onClick"],Ie={"data-cy":"expire-date"},Be={"data-cy":"record"},Te={"data-cy":"site-number"},Le=["onClick"],Ro=T({setup(y){const c=U(),{t:n}=B(),i=ie(),m=h(!1),x=h(),g=h(),_=h([]),l=me({status:!1,open(){l.status=!0}}),D=(t,o)=>{var k;!((k=c.currentOrg)!=null&&k.isAdmin)||(m.value=!0,g.value=o,x.value=t)};function O(t){return $(this,null,function*(){t.length&&(yield pe(t.length),yield Z(t.map(o=>o.id)),v())})}const C=t=>{var o;!((o=c.currentOrg)!=null&&o.isAdmin)||i.push({name:"domainDNS",query:{domainName:t.domainName}})},v=()=>$(this,null,function*(){_.value=yield ee()});return v(),(t,o)=>{var I;const k=be,A=de("router-link"),d=ge;return p(),E("div",Se,[b("div",Ee,[r(k,{round:"",onClick:e(l).open},{default:a(()=>[b("div",$e,f(e(n)("common.new")),1)]),_:1},8,["onClick"]),(I=e(c).currentOrg)!=null&&I.isAdmin?(p(),S(k,{key:0,round:"",onClick:o[0]||(o[0]=u=>e(i).push({name:"domain-search"}))},{default:a(()=>[b("div",Ae,f(e(n)("common.domainPurchase")),1)]),_:1})):N("",!0)]),r(e(ve),{data:_.value,"show-check":"",onDelete:O},{default:a(()=>{var u,V;return[r(d,{label:e(n)("common.domain"),"min-width":"300"},{default:a(({row:s})=>[r(A,{class:"text-blue ellipsis",to:{name:"domain-binding",query:{id:s.id}},"data-cy":"domain"},{default:a(()=>[ce(f(s.domainName),1)]),_:2},1032,["to"])]),_:1},8,["label"]),(u=e(c).header)!=null&&u.isOnlineServer?(p(),S(d,{key:0,label:e(n)("common.dataCenter"),width:"200",align:"center"},{default:a(({row:s})=>{var w;return[s.dataCenter?(p(),E("div",{key:0,style:{"max-width":"fit-content"},class:L(["my-0 mx-auto px-12 ellipsis leading-7 h-28px rounded-full border border-[#a7b0be] border-opacity-40 border-solid text-14px text-666 dark:text-fff/86 hover:bg-666/10 cursor-pointer",(w=e(c).currentOrg)!=null&&w.isAdmin?"":"cursor-not-allowed  hover:bg-transparent"]),title:s.dataCenter,onClick:z=>D(s.domainName,s.dataCenter)},f(s.dataCenter),11,Oe)):N("",!0)]}),_:1},8,["label"])):N("",!0),r(d,{label:e(n)("common.expirationDate"),width:"200",align:"center"},{default:a(({row:s})=>[b("span",Ie,f(s.expires),1)]),_:1},8,["label"]),r(d,{label:e(n)("common.record"),width:"100",align:"center"},{default:a(({row:s})=>[b("span",Be,f(s.records),1)]),_:1},8,["label"]),r(d,{label:e(n)("common.site"),width:"100",align:"center"},{default:a(({row:s})=>[b("span",Te,f(s.sites),1)]),_:1},8,["label"]),(V=e(c).header)!=null&&V.isOnlineServer?(p(),S(d,{key:1,label:e(n)("common.operation"),width:"120",align:"center"},{default:a(({row:s})=>{var w;return[s.enableDns?(p(),E("span",{key:0,class:L((w=e(c).currentOrg)!=null&&w.isAdmin?"text-blue cursor-pointer":"cursor-not-allowed text-999"),onClick:z=>C(s)},f(e(n)("common.DNSSetting")),11,Le)):N("",!0)]}),_:1},8,["label"])):N("",!0)]}),_:1},8,["data"]),r(Ve,{modelValue:e(l).status,"onUpdate:modelValue":o[1]||(o[1]=u=>e(l).status=u),onCreateSuccess:o[2]||(o[2]=u=>v())},null,8,["modelValue"]),m.value?(p(),S(Ne,{key:0,modelValue:m.value,"onUpdate:modelValue":o[3]||(o[3]=u=>m.value=u),"data-center":g.value,domain:x.value,onChangeSuccess:o[4]||(o[4]=u=>v())},null,8,["modelValue","data-center","domain"])):N("",!0)])}}});export{Ro as default};
