var N=(l,t,a)=>new Promise((i,m)=>{var V=r=>{try{s(a.next(r))}catch(d){m(d)}},c=r=>{try{s(a.throw(r))}catch(d){m(d)}},s=r=>r.done?i(r.value):Promise.resolve(r.value).then(V,c);s((a=a.apply(l,t)).next())});import{_ as G}from"./index.9ffc2c80.js";import{a as x}from"./replace-all.8fa5a83d.js";import{d as $}from"./main.52487121.js";import{d as oe,g as S}from"./i18n.97105311.js";import{_ as te}from"./editable-tags.c6ea279e.js";import{u as ae}from"./useTag.7902b861.js";import{u as ne,n as X,o as A,p as se}from"./commerce.c633c6e0.js";import{s as k}from"./commerce.5a632190.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";import{E as de,a as me,c as re}from"./index.afee24fe.js";import{E as Y,a as Z}from"./index.317a7f30.js";import{E as h}from"./index.4587e608.js";import{d as F,g as _,h as ie,i as z,o as v,j as E,w as u,b as o,a as w,b6 as B,u as n,F as I,f as D,k as M,aH as O,t as C}from"./url.2e6a77c4.js";import{E as J}from"./index.4b289bae.js";import{E as ce}from"./windi.539ebeab.js";import{E as pe}from"./index.9589f7cf.js";import{E as fe}from"./index.b09a9f00.js";const j=oe.global.t,Re=l=>$.post(x("Customer/list"),l),We=l=>$.get(x("Customer/GetEdit"),{id:l}),Xe=l=>$.get(x("Customer/Get"),{id:l}),ve=l=>$.post(x("Customer/create"),l,void 0,{successMessage:j("common.saveSuccess")}),Ye=l=>$.post(x("Customer/Edit"),l,void 0,{successMessage:j("common.saveSuccess")}),Ze=l=>$.post(x("Customer/deletes"),{ids:l},void 0,{successMessage:j("common.deleteSuccess")});const Ve={class:"grid grid-cols-2 gap-8"},ye={class:"grid grid-cols-2 gap-8"},ge=F({props:{model:null},setup(l){const t=l,{t:a}=S(),i=_([]),m=_([]),V=ne();return ie(()=>N(this,null,function*(){t.model.country&&(i.value=yield X(t.model.country),m.value=yield A(t.model.country,t.model.province))})),z(()=>t.model.country,()=>N(this,null,function*(){t.model.province="",t.model.city="",i.value=yield X(t.model.country),i.value.length?m.value=[]:m.value=yield A(t.model.country,t.model.province)})),z(()=>t.model.province,()=>N(this,null,function*(){t.model.city="",m.value=yield A(t.model.country,t.model.province)})),(c,s)=>{const r=de,d=me,f=Y,p=h,b=Z;return l.model?(v(),E(b,{key:0,"label-position":"top"},{default:u(()=>[o(f,{label:n(a)("common.country")},{default:u(()=>[o(d,{modelValue:l.model.country,"onUpdate:modelValue":s[0]||(s[0]=e=>l.model.country=e),class:"w-full"},{default:u(()=>[(v(!0),w(I,null,B(n(V).countries,e=>(v(),E(r,{key:e.code,value:e.name,label:n(k)(e.nameTranslations,e.name)},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),D("div",Ve,[o(f,{label:n(a)("common.city")},{default:u(()=>[o(d,{modelValue:l.model.city,"onUpdate:modelValue":s[1]||(s[1]=e=>l.model.city=e),disabled:!m.value.length&&!l.model.city,class:"w-full"},{default:u(()=>[(v(!0),w(I,null,B(m.value,e=>(v(),E(r,{key:e.name,value:e.name,label:n(k)(e.nameTranslations,e.name)},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),o(f,{label:n(a)("common.province")},{default:u(()=>[o(d,{modelValue:l.model.province,"onUpdate:modelValue":s[2]||(s[2]=e=>l.model.province=e),disabled:!i.value.length&&!l.model.province,class:"w-full"},{default:u(()=>[(v(!0),w(I,null,B(i.value,e=>(v(),E(r,{key:e.name,value:e.name,label:n(k)(e.nameTranslations,e.name)},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"])]),o(f,{label:n(a)("common.address")},{default:u(()=>[o(p,{modelValue:l.model.address1,"onUpdate:modelValue":s[3]||(s[3]=e=>l.model.address1=e)},null,8,["modelValue"])]),_:1},8,["label"]),o(f,{label:n(a)("common.postalCode")},{default:u(()=>[o(p,{modelValue:l.model.zip,"onUpdate:modelValue":s[4]||(s[4]=e=>l.model.zip=e)},null,8,["modelValue"])]),_:1},8,["label"]),D("div",ye,[o(f,{label:n(a)("common.firstName")},{default:u(()=>[o(p,{modelValue:l.model.firstName,"onUpdate:modelValue":s[5]||(s[5]=e=>l.model.firstName=e)},null,8,["modelValue"])]),_:1},8,["label"]),o(f,{label:n(a)("common.lastName")},{default:u(()=>[o(p,{modelValue:l.model.lastName,"onUpdate:modelValue":s[6]||(s[6]=e=>l.model.lastName=e)},null,8,["modelValue"])]),_:1},8,["label"])]),o(f,{label:n(a)("common.phone")},{default:u(()=>[o(p,{modelValue:l.model.phone,"onUpdate:modelValue":s[7]||(s[7]=e=>l.model.phone=e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):M("",!0)}}});var ee=ue(ge,[["__scopeId","data-v-d7a07c50"]]);const be=F({props:{modelValue:{type:Boolean}},emits:["update:modelValue","create"],setup(l,{emit:t}){const{t:a}=S(),i=_(!0),m=_({country:"",address1:"",address2:"",city:"",firstName:"",lastName:"",phone:"",province:"",zip:"",isDefault:!0});function V(){return N(this,null,function*(){t("create",m.value),i.value=!1})}return(c,s)=>{const r=G,d=J;return v(),E(d,{"model-value":i.value,width:"600px",title:n(a)("common.createAddress"),"close-on-click-modal":!1,onClosed:s[1]||(s[1]=f=>t("update:modelValue",!1))},{footer:u(()=>[o(r,{onConfirm:V,onCancel:s[0]||(s[0]=f=>i.value=!1)})]),default:u(()=>[o(ee,{model:m.value},null,8,["model"])]),_:1},8,["model-value","title"])}}}),_e=F({props:{modelValue:{type:Boolean},model:null},emits:["update:modelValue","update"],setup(l,{emit:t}){const a=l,{t:i}=S(),m=_(!0),V=_(JSON.parse(JSON.stringify(a.model)));function c(){return N(this,null,function*(){t("update",V.value),m.value=!1})}return(s,r)=>{const d=G,f=J;return v(),E(f,{"model-value":m.value,width:"600px",title:n(i)("common.createAddress"),"close-on-click-modal":!1,onClosed:r[2]||(r[2]=p=>t("update:modelValue",!1))},{footer:u(()=>[o(d,{onConfirm:c,onCancel:r[1]||(r[1]=p=>m.value=!1)})]),default:u(()=>[o(ee,{modelValue:V.value,"onUpdate:modelValue":r[0]||(r[0]=p=>V.value=p),model:V.value},null,8,["modelValue","model"])]),_:1},8,["model-value","title"])}}}),Ce={class:"w-full"},Ee={class:"space-y-8"},De={class:"flex items-center space-x-8"},Ne=D("div",{class:"flex-1"},null,-1),ke={class:"p-4"},we={class:"text-s"},xe={class:"flex items-center"},$e=F({props:{list:null},setup(l){const t=l,{t:a}=S(),i=_(!1),m=_(!1),V=_(),c=_([]);function s(b){t.list.forEach(e=>e.isDefault=!1),t.list.push(b)}function r(b){var e=t.list.indexOf(V.value);t.list.splice(e,1,b)}function d(b){t.list.forEach(e=>e.isDefault=!1),b.isDefault=!0}function f(b){t.list.splice(b,1),t.list.length&&t.list.every(e=>!e.isDefault)&&(t.list[0].isDefault=!0)}z(()=>t.list,()=>N(this,null,function*(){!t.list.length||(c.value=yield se(t.list))}),{immediate:!0,deep:!0});function p(b){return c.value[b]}return(b,e)=>{const T=re,g=ce,q=pe,le=fe;return v(),w("div",Ce,[D("div",Ee,[(v(!0),w(I,null,B(l.list,(y,U)=>{var H,L,P,K,Q,R;return v(),w("div",{key:U,class:"border border-gray p-12 rounded-normal space-y-4"},[D("div",De,[y.isDefault?(v(),E(T,{key:0,round:"",type:"success"},{default:u(()=>[O(C(n(a)("common.default")),1)]),_:1})):(v(),E(T,{key:1,round:"",type:"info",class:"cursor-pointer",onClick:W=>d(y)},{default:u(()=>[O(C(n(a)("common.setAsDefault")),1)]),_:2},1032,["onClick"])),Ne,o(q,{placement:"top",content:n(a)("common.edit")},{default:u(()=>[o(g,{class:"iconfont icon-a-writein hover:text-blue text-l",onClick:W=>{V.value=y,m.value=!0}},null,8,["onClick"])]),_:2},1032,["content"]),o(q,{placement:"top",content:n(a)("common.delete")},{default:u(()=>[o(g,{class:"iconfont icon-delete text-orange text-l",onClick:W=>f(U)},null,8,["onClick"])]),_:2},1032,["content"])]),D("div",ke,[D("div",null,C(y.firstName)+" "+C(y.lastName)+" "+C(y.phone),1),D("div",we,C(n(k)((L=(H=p(U))==null?void 0:H.countryDetail)==null?void 0:L.nameTranslations,y.country))+" "+C(n(k)((K=(P=p(U))==null?void 0:P.provinceDetail)==null?void 0:K.nameTranslations,y.province))+" "+C(n(k)((R=(Q=p(U))==null?void 0:Q.cityDetail)==null?void 0:R.nameTranslations,y.city))+" "+C(y.zip)+" "+C(y.address1),1)])])}),128)),o(le,{round:"",type:"primary",onClick:e[0]||(e[0]=y=>i.value=!0)},{default:u(()=>[D("div",xe,[o(g,{class:"mr-16 iconfont icon-a-addto"}),O(" "+C(n(a)("common.addAddress")),1)])]),_:1})]),i.value?(v(),E(be,{key:0,modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=y=>i.value=y),onCreate:s},null,8,["modelValue"])):M("",!0),m.value?(v(),E(_e,{key:1,modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=y=>m.value=y),model:V.value,onUpdate:r},null,8,["modelValue","model"])):M("",!0)])}}}),Ue={class:"grid grid-cols-2 gap-8"},he=F({props:{modelValue:{type:Boolean}},emits:["update:modelValue","reload"],setup(l,{emit:t}){const{t:a}=S(),i=_(!0),{tags:m,removeTag:V}=ae("Customer"),c=_({firstName:"",lastName:"",email:"",phone:"",tags:[],addresses:[]});function s(){return N(this,null,function*(){yield ve(c.value),t("reload"),i.value=!1})}return(r,d)=>{const f=h,p=Y,b=Z,e=G,T=J;return v(),E(T,{"model-value":i.value,width:"800px",title:n(a)("common.create"),"close-on-click-modal":!1,onClosed:d[6]||(d[6]=g=>t("update:modelValue",!1))},{footer:u(()=>[o(e,{onConfirm:s,onCancel:d[5]||(d[5]=g=>i.value=!1)})]),default:u(()=>[o(b,{"label-position":"top"},{default:u(()=>[D("div",Ue,[o(p,{label:n(a)("common.firstName")},{default:u(()=>[o(f,{modelValue:c.value.firstName,"onUpdate:modelValue":d[0]||(d[0]=g=>c.value.firstName=g)},null,8,["modelValue"])]),_:1},8,["label"]),o(p,{label:n(a)("common.lastName")},{default:u(()=>[o(f,{modelValue:c.value.lastName,"onUpdate:modelValue":d[1]||(d[1]=g=>c.value.lastName=g)},null,8,["modelValue"])]),_:1},8,["label"])]),o(p,{label:n(a)("common.email")},{default:u(()=>[o(f,{modelValue:c.value.email,"onUpdate:modelValue":d[2]||(d[2]=g=>c.value.email=g)},null,8,["modelValue"])]),_:1},8,["label"]),o(p,{label:n(a)("common.phone")},{default:u(()=>[o(f,{modelValue:c.value.phone,"onUpdate:modelValue":d[3]||(d[3]=g=>c.value.phone=g)},null,8,["modelValue"])]),_:1},8,["label"]),o(p,{label:n(a)("common.tag")},{default:u(()=>[o(te,{modelValue:c.value.tags,"onUpdate:modelValue":d[4]||(d[4]=g=>c.value.tags=g),"option-deletable":"",options:n(m),onDeleteOption:n(V)},null,8,["modelValue","options","onDeleteOption"])]),_:1},8,["label"]),o(p,{label:n(a)("common.addresses")},{default:u(()=>[o($e,{list:c.value.addresses},null,8,["list"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model-value","title"])}}});export{he as _,Xe as a,be as b,We as c,$e as d,Ye as e,Ze as f,Re as g};
