var ue=Object.defineProperty,se=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var L=(n,i,s)=>i in n?ue(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s,R=(n,i)=>{for(var s in i||(i={}))oe.call(i,s)&&L(n,s,i[s]);if(G)for(var s of G(i))ce.call(i,s)&&L(n,s,i[s]);return n},Y=(n,i)=>se(n,ie(i));import{i as p,o as _,w as F}from"./i18n.bcd18f8a.js";import{E as de}from"./index.5cbbc5d7.js";import{b as me,l as pe,u as fe,s as E,q as be,o as ve,t as Ne,v as Ve,E as j,x as he,y as Ie,_ as ge,w as ye}from"./windi.19264205.js";import{C as we,I as _e,U as Ee}from"./event.776e7e11.js";import{i as I}from"./isNil.98bb3b88.js";import{u as Se}from"./index.c80f5028.js";import{u as Pe}from"./index.05e21f33.js";import{d as q}from"./error.7e8331f1.js";import{d as ke,g as Ae,E as xe,c as h,i as Ce,h as Fe,a3 as Be,o as b,a as B,e as H,u as r,n as T,b as D,w as W,j as S,k as J,p as Te}from"./url.8f5ec20c.js";import{v as Q}from"./index.e3f90979.js";const De=me({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:pe,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||p(n)||["min","max"].includes(n),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0}}),ze={[we]:(n,i)=>n!==i,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[_e]:n=>p(n)||I(n),[Ee]:n=>p(n)||I(n)},Ke=["aria-label","onKeydown"],Me=["aria-label","onKeydown"],Oe={name:"ElInputNumber"},Ue=ke(Y(R({},Oe),{props:De,emits:ze,setup(n,{expose:i,emit:s}){const a=n,{t:z}=Se(),m=fe("input-number"),N=Ae(),o=xe({currentValue:a.modelValue,userInput:null}),{formItem:v}=Pe(),K=h(()=>p(a.modelValue)&&g(a.modelValue,-1)<a.min),M=h(()=>p(a.modelValue)&&g(a.modelValue)>a.max),X=h(()=>{const e=U(a.step);return E(a.precision)?Math.max(U(a.modelValue),e):(e>a.precision,a.precision)}),P=h(()=>a.controls&&a.controlsPosition==="right"),O=be(),V=ve(),Z=h(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(I(e))return"";if(p(e)){if(Number.isNaN(e))return"";E(a.precision)||(e=e.toFixed(a.precision))}return e}),k=(e,t)=>{if(E(t)&&(t=X.value),t===0)return Math.round(e);let l=String(e);const u=l.indexOf(".");if(u===-1||!l.replace(".","").split("")[u+t])return e;const y=l.length;return l.charAt(y-1)==="5"&&(l=`${l.slice(0,Math.max(0,y-1))}6`),Number.parseFloat(Number(l).toFixed(t))},U=e=>{if(I(e))return 0;const t=e.toString(),l=t.indexOf(".");let u=0;return l!==-1&&(u=t.length-l-1),u},g=(e,t=1)=>p(e)?k(e+a.step*t):o.currentValue,A=()=>{if(V.value||M.value)return;const e=a.modelValue||0,t=g(e);C(t)},x=()=>{if(V.value||K.value)return;const e=a.modelValue||0,t=g(e,-1);C(t)},$=(e,t)=>{const{max:l,min:u,step:c,precision:f,stepStrictly:y,valueOnClear:w}=a;let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(w===null)return null;d=Te(w)?{min:u,max:l}[w]:w}return y&&(d=k(Math.round(d/c)*c,f)),E(f)||(d=k(d,f)),(d>l||d<u)&&(d=d>l?l:u,t&&s("update:modelValue",d)),d},C=e=>{var t;const l=o.currentValue,u=$(e);l!==u&&(o.userInput=null,s("update:modelValue",u),s("input",u),s("change",u,l),a.validateEvent&&((t=v==null?void 0:v.validate)==null||t.call(v,"change").catch(c=>q())),o.currentValue=u)},ee=e=>o.userInput=e,te=e=>{const t=e!==""?Number(e):"";(p(t)&&!Number.isNaN(t)||e==="")&&C(t),o.userInput=null},ne=()=>{var e,t;(t=(e=N.value)==null?void 0:e.focus)==null||t.call(e)},re=()=>{var e,t;(t=(e=N.value)==null?void 0:e.blur)==null||t.call(e)},ae=e=>{s("focus",e)},le=e=>{var t;s("blur",e),a.validateEvent&&((t=v==null?void 0:v.validate)==null||t.call(v,"blur").catch(l=>q()))};return Ce(()=>a.modelValue,e=>{o.currentValue=$(e,!0),o.userInput=null},{immediate:!0}),Fe(()=>{var e;const{min:t,max:l,modelValue:u}=a,c=(e=N.value)==null?void 0:e.input;if(c.setAttribute("role","spinbutton"),Number.isFinite(l)?c.setAttribute("aria-valuemax",String(l)):c.removeAttribute("aria-valuemax"),Number.isFinite(t)?c.setAttribute("aria-valuemin",String(t)):c.removeAttribute("aria-valuemin"),c.setAttribute("aria-valuenow",String(o.currentValue)),c.setAttribute("aria-disabled",String(V.value)),!p(u)&&u!=null){let f=Number(u);Number.isNaN(f)&&(f=null),s("update:modelValue",f)}}),Be(()=>{var e;const t=(e=N.value)==null?void 0:e.input;t==null||t.setAttribute("aria-valuenow",`${o.currentValue}`)}),i({focus:ne,blur:re}),(e,t)=>(b(),B("div",{class:T([r(m).b(),r(m).m(r(O)),r(m).is("disabled",r(V)),r(m).is("without-controls",!e.controls),r(m).is("controls-right",r(P))]),onDragstart:t[0]||(t[0]=F(()=>{},["prevent"]))},[e.controls?H((b(),B("span",{key:0,role:"button","aria-label":r(z)("el.inputNumber.decrease"),class:T([r(m).e("decrease"),r(m).is("disabled",r(K))]),onKeydown:_(x,["enter"])},[D(r(j),null,{default:W(()=>[r(P)?(b(),S(r(Ne),{key:0})):(b(),S(r(Ve),{key:1}))]),_:1})],42,Ke)),[[r(Q),x]]):J("v-if",!0),e.controls?H((b(),B("span",{key:1,role:"button","aria-label":r(z)("el.inputNumber.increase"),class:T([r(m).e("increase"),r(m).is("disabled",r(M))]),onKeydown:_(A,["enter"])},[D(r(j),null,{default:W(()=>[r(P)?(b(),S(r(he),{key:0})):(b(),S(r(Ie),{key:1}))]),_:1})],42,Me)),[[r(Q),A]]):J("v-if",!0),D(r(de),{id:e.id,ref_key:"input",ref:N,type:"number",step:e.step,"model-value":r(Z),placeholder:e.placeholder,disabled:r(V),size:r(O),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[_(F(A,["prevent"]),["up"]),_(F(x,["prevent"]),["down"])],onBlur:le,onFocus:ae,onInput:ee,onChange:te},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}}));var $e=ge(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Ze=ye($e);export{Ze as E};
