var N=(a,b,m)=>new Promise((w,y)=>{var n=s=>{try{c(m.next(s))}catch(l){y(l)}},v=s=>{try{c(m.throw(s))}catch(l){y(l)}},c=s=>s.done?w(s.value):Promise.resolve(s.value).then(n,v);c((m=m.apply(a,b)).next())});import{_ as W}from"./dev-mode.c4133b5a.js";import{_ as z}from"./index.051a5017.js";import{_ as J}from"./tooltip.28a451cc.js";import{p as Q}from"./digital-shipping.f03d4646.js";import{g as X}from"./i18n.48bd28ac.js";import{u as Y}from"./email.196eb60e.js";import{a as k,u as Z,b as h}from"./validate.efc4a5c0.js";import{E as ee}from"./index.d4bbb472.js";import{E as le}from"./index.8ef89ff6.js";import{E as j}from"./index.fc90f5ad.js";import{E as A,a as oe}from"./index.6855d037.js";import{E as ae,a as me}from"./index.695d0284.js";import{E as te,a as re}from"./index.0d2684bf.js";import{E as de}from"./index.cbddf8eb.js";import{d as se,g as F,i as _,o as d,a as i,f,b as o,w as r,u as t,F as V,b6 as T,aH as q,t as E,j as R}from"./url.2e6a77c4.js";const ue={class:"px-24 pt-0 pb-84px space-y-12"},ne={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},ie={class:"inline-flex items-center space-x-4"},ce={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal space-y-8"},pe={key:0,class:"border border-line rounded-normal p-8 el-dialog__body"},je=se({props:{model:null},setup(a){const b=a,{t:m}=X(),w=[{key:"kooboo",value:"Kooboo"},{key:"custom",value:m("common.custom")}],y=[{key:"preview",value:m("common.preview")},{key:"code",value:m("common.code")}],n=F("preview"),v=F({subject:"",body:""}),c=Y();return _(()=>n.value,()=>N(this,null,function*(){n.value=="preview"&&(v.value=yield Q(b.model.mailTemplate))}),{immediate:!0}),_(()=>b.model.mailServerType,()=>{b.model.mailServerType=="kooboo"&&c.loadAddress("addresses")},{immediate:!0}),(s,l)=>{var U,g,I;const p=j,S=A,M=ae,x=me,B=J,$=te,L=re,u=A,C=ee,D=de,K=oe,G=le,H=z,O=j,P=W;return d(),i("div",ue,[f("div",ne,[o(K,{"label-position":"top",model:a.model},{default:r(()=>[o(S,{label:t(m)("common.name"),prop:"name",rules:[t(k)(t(m)("common.inputNameTips"))]},{default:r(()=>[o(p,{modelValue:a.model.name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.model.name=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),o(S,{label:t(m)("common.description")},{default:r(()=>[o(p,{modelValue:a.model.description,"onUpdate:modelValue":l[1]||(l[1]=e=>a.model.description=e),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"]),o(S,{label:t(m)("common.mailServer")},{default:r(()=>[o(x,{modelValue:a.model.mailServerType,"onUpdate:modelValue":l[2]||(l[2]=e=>a.model.mailServerType=e),class:"el-radio-group--rounded"},{default:r(()=>[(d(),i(V,null,T(w,e=>o(M,{key:e.key,label:e.key},{default:r(()=>[q(E(e.value),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a.model.mailServerType=="kooboo"?(d(),R(S,{key:0,label:t(m)("mail.from")},{label:r(()=>[f("div",ie,[f("div",null,E(t(m)("common.fromAddress")),1),o(B,{tip:t(m)("common.koobooEmailAddressTip"),"custom-class":"ml-4"},null,8,["tip"])])]),default:r(()=>[o(L,{modelValue:a.model.koobooEmailAddress,"onUpdate:modelValue":l[3]||(l[3]=e=>a.model.koobooEmailAddress=e),placeholder:t(m)("common.pleaseSelect"),class:"w-250px"},{default:r(()=>[(d(!0),i(V,null,T(t(c).addressList.filter(e=>e.addressType!=="Wildcard"),e=>(d(),R($,{key:e.id,value:e.address,label:e.address},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):(d(),i(V,{key:1},[o(u,{prop:"customMailServer.server",rules:[t(Z)(t(m)("common.serverUrlInvalid")),t(k)(t(m)("common.serverUrlRequiredTips"))]},{default:r(()=>[o(p,{modelValue:a.model.customMailServer.server,"onUpdate:modelValue":l[4]||(l[4]=e=>a.model.customMailServer.server=e),placeholder:"smtp.qq.com"},null,8,["modelValue"])]),_:1},8,["rules"]),o(u,{label:t(m)("common.port"),prop:"customMailServer.port",rules:[t(h)()]},{default:r(()=>[o(C,{modelValue:a.model.customMailServer.port,"onUpdate:modelValue":l[5]||(l[5]=e=>a.model.customMailServer.port=e),modelModifiers:{number:!0},placeholder:"587"},null,8,["modelValue"])]),_:1},8,["label","rules"]),o(u,{label:"SSL"},{default:r(()=>[o(D,{modelValue:a.model.customMailServer.ssl,"onUpdate:modelValue":l[6]||(l[6]=e=>a.model.customMailServer.ssl=e)},null,8,["modelValue"])]),_:1}),o(u,{label:t(m)("common.fromAddress")},{default:r(()=>[o(p,{modelValue:a.model.customMailServer.from,"onUpdate:modelValue":l[7]||(l[7]=e=>a.model.customMailServer.from=e),placeholder:"name@example.com"},null,8,["modelValue"])]),_:1},8,["label"]),o(u,{label:t(m)("common.account"),prop:"customMailServer.userName",rules:[t(k)(t(m)("common.inputAccountTips"))]},{default:r(()=>[o(p,{modelValue:a.model.customMailServer.userName,"onUpdate:modelValue":l[8]||(l[8]=e=>a.model.customMailServer.userName=e),placeholder:"xxx@qq.com"},null,8,["modelValue"])]),_:1},8,["label","rules"]),o(u,{label:t(m)("common.password"),prop:"customMailServer.password",rules:[t(k)(t(m)("common.inputPasswordTips"))]},{default:r(()=>[o(p,{modelValue:a.model.customMailServer.password,"onUpdate:modelValue":l[9]||(l[9]=e=>a.model.customMailServer.password=e),type:"password"},null,8,["modelValue"])]),_:1},8,["label","rules"])],64))]),_:1},8,["model"])]),f("div",ce,[o(x,{modelValue:n.value,"onUpdate:modelValue":l[10]||(l[10]=e=>n.value=e),class:"el-radio-group--rounded"},{default:r(()=>[(d(),i(V,null,T(y,e=>o(M,{key:e.key,label:e.key},{default:r(()=>[q(E(e.value),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"]),n.value=="preview"?(d(),i("div",pe,[f("h1",null,"Subject: "+E((U=v.value)==null?void 0:U.subject),1),o(G,{class:"my-12"}),o(H,{class:"h-300px",content:(I=(g=v.value)==null?void 0:g.body)!=null?I:""},null,8,["content"])])):(d(),i(V,{key:1},[o(u,{label:t(m)("common.subject"),prop:"subjectTemplate"},{default:r(()=>[o(O,{modelValue:a.model.mailTemplate.subject,"onUpdate:modelValue":l[11]||(l[11]=e=>a.model.mailTemplate.subject=e)},null,8,["modelValue"])]),_:1},8,["label"]),o(u,{label:t(m)("common.content"),prop:"bodyTemplate"},{default:r(()=>[o(P,{modelValue:a.model.mailTemplate.body,"onUpdate:modelValue":l[12]||(l[12]=e=>a.model.mailTemplate.body=e),class:"border border-999",language:"html","k-script":""},null,8,["modelValue"])]),_:1},8,["label"])],64))])])}}});export{je as _};
