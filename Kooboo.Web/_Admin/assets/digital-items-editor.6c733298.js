var C=(f,_,i)=>new Promise((a,p)=>{var r=c=>{try{v(i.next(c))}catch(E){p(E)}},u=c=>{try{v(i.throw(c))}catch(E){p(E)}},v=c=>c.done?a(c.value):Promise.resolve(c.value).then(r,u);v((i=i.apply(f,_)).next())});import{u as L,a as M}from"./product.c1a83798.js";import{g as j}from"./i18n.48bd28ac.js";import{k as q}from"./main.ea42d807.js";import{n as T}from"./guid.c1a40312.js";import{E as y}from"./index.2bc50276.js";import{E as J}from"./index.470f0e7e.js";import{E as K}from"./windi.a5b0b048.js";import{E as O,a as P,b as Q}from"./index.f5a869bb.js";import{E as W,a as X}from"./index.b494e80e.js";import{c as Y}from"./index.0d2684bf.js";import{E as Z}from"./index.379e80ad.js";import{E as h}from"./index.fc90f5ad.js";import{E as ee,a as le}from"./index.6855d037.js";import{E as te}from"./index.c4e9b529.js";import{d as oe,g as D,o as I,a as U,f as b,b as e,w as l,aH as d,t as s,u as o,r as ae,F as ne}from"./url.2e6a77c4.js";const me={class:"space-y-8"},ue={class:"flex items-center"},se=b("div",{class:"flex-1"},null,-1),ie=["title"],de=["title"],Te=oe({props:{items:null,id:null,deleteRemoteFile:{type:Boolean}},emits:["update:items"],setup(f,{emit:_}){const i=f,{t:a}=j(),p=D(!1),r=D(!1),u=D(),v=D();function c(n){return C(this,arguments,function*({raw:m}){const k=new FormData;k.append("file",m),k.append("variantId",i.id),yield L(k),_("update:items",[...i.items,{id:T(),type:"file",name:m.name,size:m.size,contentType:m.type,value:i.id}])})}function E(m){return C(this,null,function*(){m.type=="file"&&i.deleteRemoteFile&&M(m.value,m.name),_("update:items",i.items.filter(n=>n!=m))})}function z(m){switch(m){case"file":return a("common.file");case"text":return a("common.text");case"link":return a("common.link");default:return m}}function R(m){switch(m){case"file":v.value.click();break;case"text":u.value={id:T(),type:"text",name:"",value:""},p.value=!0;break;case"link":u.value={id:T(),type:"link",name:"",value:""},r.value=!0;break}}return(m,n)=>{const k=J,w=K,F=O,N=P,S=Q,V=W,A=Y,G=Z,H=X,x=h,g=ee,$=le,B=te;return I(),U("div",null,[b("div",me,[b("div",ue,[e(k,{class:"hidden",action:"","auto-upload":!1,"on-change":c,"show-file-list":!1},{default:l(()=>[b("div",{ref_key:"uploadRef",ref:v},null,512)]),_:1}),e(S,{trigger:"click",onCommand:R},{dropdown:l(()=>[e(N,null,{default:l(()=>[e(F,{command:"file"},{default:l(()=>[d(s(o(a)("common.file")),1)]),_:1}),e(F,{command:"link"},{default:l(()=>[d(s(o(a)("common.link")),1)]),_:1}),e(F,{command:"text"},{default:l(()=>[d(s(o(a)("common.text")),1)]),_:1})]),_:1})]),default:l(()=>[e(o(y),{type:"primary",round:""},{default:l(()=>[e(w,{class:"iconfont icon-a-addto"}),d(s(o(a)("common.add"))+" ",1),e(w,{class:"iconfont icon-pull-down text-12px ml-8 !mr-0"})]),_:1})]),_:1}),se,ae(m.$slots,"bar")]),e(H,{data:f.items},{default:l(()=>[e(V,{prop:"name",label:o(a)("common.name")},{default:l(({row:t})=>[b("div",{title:t.name,class:"truncate"},s(t.name),9,ie)]),_:1},8,["label"]),e(V,{label:o(a)("common.type")},{default:l(({row:t})=>[e(A,{round:"",type:"success"},{default:l(()=>[d(s(z(t.type)),1)]),_:2},1024)]),_:1},8,["label"]),e(V,{label:o(a)("common.detail")},{default:l(({row:t})=>[t.type=="file"?(I(),U(ne,{key:0},[d(s(o(q)(t.size)),1)],64)):(I(),U("div",{key:1,title:t.value,class:"truncate"},s(t.value),9,de))]),_:1},8,["label"]),e(V,{width:"40"},{default:l(({row:t})=>[e(G,{placement:"top",content:o(a)("common.delete")},{default:l(()=>[e(w,{class:"iconfont icon-delete hover:text-orange text-l",onClick:ce=>E(t)},null,8,["onClick"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"])]),e(B,{modelValue:p.value,"onUpdate:modelValue":n[4]||(n[4]=t=>p.value=t),title:o(a)("common.text")},{footer:l(()=>[e(o(y),{onClick:n[2]||(n[2]=t=>p.value=!1)},{default:l(()=>[d(s(o(a)("common.cancel")),1)]),_:1}),e(o(y),{type:"primary",onClick:n[3]||(n[3]=t=>{_("update:items",[...f.items,u.value]),p.value=!1})},{default:l(()=>[d(s(o(a)("common.ok")),1)]),_:1})]),default:l(()=>[e($,null,{default:l(()=>[e(g,{label:o(a)("common.name")},{default:l(()=>[e(x,{modelValue:u.value.name,"onUpdate:modelValue":n[0]||(n[0]=t=>u.value.name=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o(a)("common.text")},{default:l(()=>[e(x,{modelValue:u.value.value,"onUpdate:modelValue":n[1]||(n[1]=t=>u.value.value=t),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"]),e(B,{modelValue:r.value,"onUpdate:modelValue":n[9]||(n[9]=t=>r.value=t),title:o(a)("common.link")},{footer:l(()=>[e(o(y),{onClick:n[7]||(n[7]=t=>r.value=!1)},{default:l(()=>[d(s(o(a)("common.cancel")),1)]),_:1}),e(o(y),{type:"primary",onClick:n[8]||(n[8]=t=>{_("update:items",[...f.items,u.value]),r.value=!1})},{default:l(()=>[d(s(o(a)("common.ok")),1)]),_:1})]),default:l(()=>[e($,null,{default:l(()=>[e(g,{label:o(a)("common.name")},{default:l(()=>[e(x,{modelValue:u.value.name,"onUpdate:modelValue":n[5]||(n[5]=t=>u.value.name=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o(a)("common.link")},{default:l(()=>[e(x,{modelValue:u.value.value,"onUpdate:modelValue":n[6]||(n[6]=t=>u.value.value=t),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])])}}});export{Te as _};
