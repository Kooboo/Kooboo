var b=(h,a,m)=>new Promise((d,c)=>{var y=t=>{try{o(m.next(t))}catch(e){c(e)}},_=t=>{try{o(m.throw(t))}catch(e){c(e)}},o=t=>t.done?d(t.value):Promise.resolve(t.value).then(y,_);o((m=m.apply(h,a)).next())});import{_ as P}from"./icon-button.315b6443.js";import{g as $,a as F}from"./index.7633560d.js";import{_ as M}from"./k-table.7d05e82e.js";import{d as R,cd as S,g as x,aV as j,c as q,b7 as z,o as l,a as f,b as n,u as i,f as v,w as r,F as w,b6 as k,t as g,j as B,e as H,aH as C}from"./url.8f5ec20c.js";import{u as A}from"./replace-all.d441bf14.js";import{B as G}from"./breadcrumb.edaec300.js";import{g as J}from"./i18n.bcd18f8a.js";import{E as K}from"./windi.19264205.js";import{E as O}from"./index.aec72f69.js";import{E as Q,a as U,b as W}from"./index.8bc4b1d6.js";import{E as X}from"./index.b83a1079.js";import{c as Y}from"./index.6d22f937.js";import"./index.ec6ad7db.js";import"./focus-trap.eafcfd1f.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.05e21f33.js";import"./index.3a977dfb.js";import"./index.c80f5028.js";import"./main.582f9de6.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./sortable.esm.a99254e8.js";import"./index.564bc658.js";import"./isEqual.11d86bcc.js";import"./_baseIsEqual.547729d3.js";import"./index.5cbbc5d7.js";import"./event.776e7e11.js";import"./error.7e8331f1.js";import"./index.daafc4da.js";import"./index.59b1471f.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.79f78425.js";import"./dropdown.f6378640.js";import"./refs.d2253dd4.js";import"./debounce.730e1961.js";import"./toNumber.6efebd6a.js";import"./index.9a83ee01.js";import"./scroll.4888a9e9.js";import"./validator.b73911a9.js";const Z={class:"p-24"},tt={class:"flex items-center py-24 space-x-16"},ot={class:"flex items-center"},et={class:"p-4 dark:text-fff/86"},Kt=R({setup(h){const{t:a}=J(),m=S(),d=x([]),c=x([]);j(()=>b(this,null,function*(){const o=yield Promise.all([$(),F()]);d.value=o[0],c.value=o[1]}));const y=q(()=>{const o=[];for(const t of d.value){if(c.value.some(p=>p.name===t.name))continue;let e=o.find(p=>p.group===t.category);e?e.list.push(t.name):(e={group:t.category,list:[t.name]},o.push(e))}return o}),_=o=>{m.push(A({name:"frontevents-edit",query:{name:o}}))};return(o,t)=>{const e=K,p=O,D=Q,T=U,I=W,E=X,L=Y,V=P,N=z("hasPermission");return l(),f("div",Z,[n(G,{name:i(a)("common.frontEvents")},null,8,["name"]),v("div",tt,[n(I,{trigger:"click",onCommand:_},{dropdown:r(()=>[n(T,null,{default:r(()=>[(l(!0),f(w,null,k(i(y),s=>(l(),f(w,{key:s.group},[v("h3",et,g(s.group),1),(l(!0),f(w,null,k(s.list,u=>(l(),B(D,{key:u,command:u,"data-cy":u},{default:r(()=>[v("span",null,g(u),1)]),_:2},1032,["command","data-cy"]))),128))],64))),128))]),_:1})]),default:r(()=>[H((l(),B(p,{round:"","data-cy":"new-event"},{default:r(()=>[v("div",ot,[C(g(i(a)("common.newEvent"))+" ",1),n(e,{class:"iconfont icon-pull-down text-12px ml-8 !mr-0"})])]),_:1})),[[N,{feature:"frontEvents",action:"edit"}]])]),_:1})]),n(i(M),{data:c.value},{default:r(()=>[n(E,{label:i(a)("common.type"),prop:"name"},null,8,["label"]),n(E,{label:i(a)("common.rulesCount")},{default:r(({row:s})=>[n(L,{type:"success",size:"small",class:"rounded-full","data-cy":"rules-count"},{default:r(()=>[C(g(s.count),1)]),_:2},1024)]),_:1},8,["label"]),n(E,{width:"100px",align:"right"},{default:r(({row:s})=>[n(V,{icon:"icon-a-writein",tip:i(a)("common.edit"),"data-cy":"edit",onClick:u=>_(s.name)},null,8,["tip","onClick"])]),_:1})]),_:1},8,["data"])])}}});export{Kt as default};
