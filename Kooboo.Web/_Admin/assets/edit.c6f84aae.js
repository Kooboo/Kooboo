var x=(e,d,l)=>new Promise((t,a)=>{var n=s=>{try{u(l.next(s))}catch(i){a(i)}},o=s=>{try{u(l.throw(s))}catch(i){a(i)}},u=s=>s.done?t(s.value):Promise.resolve(s.value).then(n,o);u((l=l.apply(e,d)).next())});import{_ as T}from"./index.214551b7.js";import{_ as R}from"./index.50326354.js";import{_ as j}from"./dev-mode.d22f2f80.js";import{_ as C}from"./icon-button.0e134c9b.js";import{g as V,o as L}from"./i18n.25caaace.js";import{d as w,o as m,a as c,F as B,b6 as I,j as $,b as r,u as f,k as v,w as k,g as b,cd as M,x as Q,f as q}from"./url.8f5ec20c.js";import{u as z}from"./replace-all.b35629e7.js";import{a as A,u as G}from"./user-options.5095f900.js";import{E as H}from"./index.f571dfc9.js";import{E as P}from"./index.537a2de2.js";import{E as W}from"./index.db6dfc3c.js";import{E as X}from"./windi.a815125a.js";import{E as Y,a as Z}from"./index.94998415.js";import{E as ee}from"./index.a5d96e5a.js";import"./index.e9f8834a.js";import"./index.1e7e06b8.js";import"./main.1c3b59e3.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./guid.c1a40312.js";import"./index.20e420e8.js";import"./classCompletion.a22e38a6.js";import"./userWorker.b3a6730b.js";import"./editor.main.d2800f63.js";import"./vuedraggable.umd.5305b990.js";import"./index.158cdd11.js";import"./focus-trap.81e4fb05.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./cloneDeep.f12cadc0.js";import"./_baseClone.885c975f.js";import"./_baseIsEqual.0a4e01e5.js";import"./index.c6488b3c.js";import"./error.7e8331f1.js";import"./config.e9159c41.js";import"./dark.bb3c8a6e.js";import"./page.729fa09e.js";import"./validate.f3c0b03b.js";import"./index.878e2bbf.js";import"./index.adb17f32.js";import"./index.b065185c.js";import"./index.ab12ea9e.js";import"./index.b1b64a44.js";import"./style.1b77b3a2.js";import"./toNumber.6efebd6a.js";import"./index.60799c00.js";import"./index.1d16d007.js";import"./scroll.0cf77af8.js";import"./aria.75ec5909.js";import"./validator.9b0d789f.js";import"./index.f9c89813.js";import"./index.a0b57910.js";import"./dropdown.fed924b2.js";import"./refs.d2253dd4.js";import"./use-copy-text.dc8d5085.js";import"./index.7c7fa606.js";import"./toggleComment.5b29ca87.js";import"./use-save-tip.63213ba1.js";import"./confirm.629bcef4.js";import"./logo-transparent.1566007e.js";import"./index.5b499f72.js";import"./event.776e7e11.js";import"./index.960b9732.js";import"./isEqual.2e410d13.js";import"./debounce.730e1961.js";import"./index.c93fe8e7.js";import"./index.5d366322.js";import"./index.2e51d36e.js";import"./index.3be79fd5.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.925df86b.js";import"./index.378f5080.js";import"./index.64203830.js";import"./alert.8fe5500a.js";import"./index.84e4a218.js";/* empty css                                                               */import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.6e849230.js";/* empty css                                                          */import"./file.9f559d69.js";import"./use-date.55b953fa.js";import"./dayjs.min.2044f1dd.js";/* empty css                                                          *//* empty css                                                                 */import"./use-file-upload.beffa25f.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.e5d64b31.js";import"./image-editor.e294b472.js";import"./main.esm.8d4b9329.js";import"./index.1be51314.js";import"./index.0c2ced08.js";import"./index.e3f90979.js";function O(e){switch(e){case"string":return"";case"array":return[];case"boolean":return!1;case"number":return 0;case"object":return{}}}const te={class:"space-y-8"},oe=w({props:{schema:null,value:null},setup(e){const d=e,{t:l}=V();function t(n,o){n.push(O(o))}function a(n,o){d.value.splice(n,1,o)}return(n,o)=>{const u=C;return m(),c("div",te,[(m(!0),c(B,null,I(e.value,(s,i)=>(m(),$(S,{key:i,value:s,schema:{type:e.schema.arrayType,children:e.schema.children,display:e.schema.display,name:e.schema.name},deletable:!0,"onUpdate:modelValue":h=>a(i,h),onDelete:h=>e.value.splice(i,1)},null,8,["value","schema","onUpdate:modelValue","onDelete"]))),128)),r(u,{circle:"",class:"text-blue",icon:"icon-a-addto ",tip:f(l)("common.add"),onClick:o[0]||(o[0]=s=>t(e.value,e.schema.arrayType))},null,8,["tip"])])}}}),ae={key:0,class:"flex gap-4 w-full"},le={key:0},ne={key:1,class:"flex gap-4 w-full"},ie={key:0},me={key:2,class:"flex gap-4 w-full"},re={key:0},se={key:3,class:"px-24 py-12 border-l-2 border-blue/70 relative transition-all duration-300 hover:shadow-m-10 rounded-tr-normal rounded-br-normal"},ue={key:4,class:"flex items-center gap-4 w-full"},S=w({props:{schema:null,value:null,deletable:{type:Boolean}},emits:["update:model-value","delete"],setup(e){const{t:d}=V();return(l,t)=>{const a=H,n=C,o=P,u=W,s=X;return e.schema.type=="string"?(m(),c("div",ae,[r(a,{"model-value":e.value,"onUpdate:modelValue":t[0]||(t[0]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",le,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[1]||(t[1]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="boolean"?(m(),c("div",ne,[r(o,{"model-value":e.value,"onUpdate:modelValue":t[2]||(t[2]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",ie,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[3]||(t[3]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="number"?(m(),c("div",me,[r(u,{"model-value":e.value,"onUpdate:modelValue":t[4]||(t[4]=i=>l.$emit("update:model-value",i))},null,8,["model-value"]),e.deletable?(m(),c("div",re,[r(n,{circle:"",class:"hover:text-orange text-orange",icon:"icon-delete ",tip:f(d)("common.delete"),onClick:t[5]||(t[5]=i=>l.$emit("delete"))},null,8,["tip"])])):v("",!0)])):e.schema.type=="object"?(m(),c("div",se,[r(U,{schemas:e.schema.children,data:e.value,deletable:e.deletable},null,8,["schemas","data","deletable"]),e.deletable?(m(),$(s,{key:0,class:"iconfont icon-delete cursor-pointer text-orange absolute top-16 right-16",onClick:t[6]||(t[6]=i=>l.$emit("delete"))})):v("",!0)])):e.schema.type=="array"?(m(),c("div",ue,[r(oe,{schema:e.schema,value:e.value},null,8,["schema","value"])])):v("",!0)}}}),U=w({props:{schemas:null,data:null,deletable:{type:Boolean}},emits:["update:model-value","delete"],setup(e){function d(t,a,n){return t[a]||(t[a]=O(n)),t[a]}function l(t,a,n){t[a]=n}return(t,a)=>{const n=Y;return m(!0),c(B,null,I(e.schemas,o=>(m(),$(n,{key:o.name,label:o.display||o.name,class:"w-504px"},{default:k(()=>[(m(),$(S,{key:o.name,schema:o,value:d(e.data,o.name,o.type),"onUpdate:modelValue":u=>l(e.data,o.name,u)},null,8,["schema","value","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128)}}}),ce={class:"p-24 mb-64"},de={class:"rounded-normal bg-fff dark:bg-[#252526] mt-16 py-24 px-56px relative"},pe=["onKeydown"],Yt=w({setup(e){const{t:d}=V(),l=b([]),t=M(),a=b({}),n=Q("id"),o=b(!1),u=b("{}");A(n).then(y=>{l.value=JSON.parse(y.schema),a.value=y.data?JSON.parse(y.data):{}});function s(){t.goBackOrTo(z({name:"useroptions"}))}function i(){return x(this,null,function*(){yield G({id:n,setting:JSON.stringify(a.value)}),s()})}function h(){u.value=JSON.stringify(a.value,null,4),o.value=!0}function E(){a.value=JSON.parse(u.value),o.value=!1}return(y,p)=>{const _=C,N=Z,D=j,F=R,J=ee,K=T;return m(),c("div",ce,[r(N,{"label-position":"top"},{default:k(()=>[q("div",de,[r(_,{icon:"icon-code",tip:f(d)("common.editCode"),class:"absolute top-24 right-24",onClick:h},null,8,["tip"]),r(U,{schemas:l.value,data:a.value},null,8,["schemas","data"])])]),_:1}),r(J,{modelValue:o.value,"onUpdate:modelValue":p[2]||(p[2]=g=>o.value=g),width:"800px","close-on-click-modal":!1,title:f(d)("common.editCode")},{footer:k(()=>[r(F,{onConfirm:E,onCancel:p[1]||(p[1]=g=>o.value=!1)})]),default:k(()=>[o.value?(m(),c("div",{key:0,onKeydown:L(E,["enter"])},[r(D,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=g=>u.value=g),language:"json"},null,8,["modelValue"])],40,pe)):v("",!0)]),_:1},8,["modelValue","title"]),r(K,{permission:{feature:"userOptions",action:"edit"},onCancel:s,onSave:i})])}}});export{Yt as default};
