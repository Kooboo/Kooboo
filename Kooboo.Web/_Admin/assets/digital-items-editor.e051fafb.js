var C=(f,_,i)=>new Promise((o,p)=>{var r=c=>{try{v(i.next(c))}catch(E){p(E)}},u=c=>{try{v(i.throw(c))}catch(E){p(E)}},v=c=>c.done?o(c.value):Promise.resolve(c.value).then(r,u);v((i=i.apply(f,_)).next())});import{u as L,a as M}from"./product.b50cc736.js";import{g as j}from"./i18n.97105311.js";import{k as q}from"./main.52487121.js";import{n as T}from"./guid.c1a40312.js";import{E as J}from"./index.57372297.js";import{E as K}from"./windi.539ebeab.js";import{E as O}from"./index.b09a9f00.js";import{E as P,a as Q,b as W}from"./index.3fcd2f53.js";import{E as X,a as Y}from"./index.f3d28a97.js";import{c as Z}from"./index.afee24fe.js";import{E as h}from"./index.9589f7cf.js";import{E as ee}from"./index.4587e608.js";import{E as le,a as te}from"./index.317a7f30.js";import{E as oe}from"./index.4b289bae.js";import{d as ae,g as D,o as I,a as U,f as b,b as e,w as l,aH as d,t as s,u as n,r as ne,F as me}from"./url.2e6a77c4.js";const ue={class:"space-y-8"},se={class:"flex items-center"},ie=b("div",{class:"flex-1"},null,-1),de=["title"],ce=["title"],Ie=ae({props:{items:null,id:null,deleteRemoteFile:{type:Boolean}},emits:["update:items"],setup(f,{emit:_}){const i=f,{t:o}=j(),p=D(!1),r=D(!1),u=D(),v=D();function c(a){return C(this,arguments,function*({raw:m}){const k=new FormData;k.append("file",m),k.append("variantId",i.id),yield L(k),_("update:items",[...i.items,{id:T(),type:"file",name:m.name,size:m.size,contentType:m.type,value:i.id}])})}function E(m){return C(this,null,function*(){m.type=="file"&&i.deleteRemoteFile&&M(m.value,m.name),_("update:items",i.items.filter(a=>a!=m))})}function z(m){switch(m){case"file":return o("common.file");case"text":return o("common.text");case"link":return o("common.link");default:return m}}function R(m){switch(m){case"file":v.value.click();break;case"text":u.value={id:T(),type:"text",name:"",value:""},p.value=!0;break;case"link":u.value={id:T(),type:"link",name:"",value:""},r.value=!0;break}}return(m,a)=>{const k=J,w=K,y=O,F=P,N=Q,S=W,V=X,A=Z,G=h,H=Y,x=ee,g=le,B=te,$=oe;return I(),U("div",null,[b("div",ue,[b("div",se,[e(k,{class:"hidden",action:"","auto-upload":!1,"on-change":c,"show-file-list":!1},{default:l(()=>[b("div",{ref_key:"uploadRef",ref:v},null,512)]),_:1}),e(S,{trigger:"click",onCommand:R},{dropdown:l(()=>[e(N,null,{default:l(()=>[e(F,{command:"file"},{default:l(()=>[d(s(n(o)("common.file")),1)]),_:1}),e(F,{command:"link"},{default:l(()=>[d(s(n(o)("common.link")),1)]),_:1}),e(F,{command:"text"},{default:l(()=>[d(s(n(o)("common.text")),1)]),_:1})]),_:1})]),default:l(()=>[e(y,{type:"primary",round:""},{default:l(()=>[e(w,{class:"iconfont icon-a-addto"}),d(s(n(o)("common.add"))+" ",1),e(w,{class:"iconfont icon-pull-down text-12px ml-8 !mr-0"})]),_:1})]),_:1}),ie,ne(m.$slots,"bar")]),e(H,{data:f.items},{default:l(()=>[e(V,{prop:"name",label:n(o)("common.name")},{default:l(({row:t})=>[b("div",{title:t.name,class:"truncate"},s(t.name),9,de)]),_:1},8,["label"]),e(V,{label:n(o)("common.type")},{default:l(({row:t})=>[e(A,{round:"",type:"success"},{default:l(()=>[d(s(z(t.type)),1)]),_:2},1024)]),_:1},8,["label"]),e(V,{label:n(o)("common.detail")},{default:l(({row:t})=>[t.type=="file"?(I(),U(me,{key:0},[d(s(n(q)(t.size)),1)],64)):(I(),U("div",{key:1,title:t.value,class:"truncate"},s(t.value),9,ce))]),_:1},8,["label"]),e(V,{width:"40"},{default:l(({row:t})=>[e(G,{placement:"top",content:n(o)("common.delete")},{default:l(()=>[e(w,{class:"iconfont icon-delete hover:text-orange text-l",onClick:pe=>E(t)},null,8,["onClick"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"])]),e($,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=t=>p.value=t),title:n(o)("common.text")},{footer:l(()=>[e(y,{onClick:a[2]||(a[2]=t=>p.value=!1)},{default:l(()=>[d(s(n(o)("common.cancel")),1)]),_:1}),e(y,{type:"primary",onClick:a[3]||(a[3]=t=>{_("update:items",[...f.items,u.value]),p.value=!1})},{default:l(()=>[d(s(n(o)("common.ok")),1)]),_:1})]),default:l(()=>[e(B,null,{default:l(()=>[e(g,{label:n(o)("common.name")},{default:l(()=>[e(x,{modelValue:u.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value.name=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:n(o)("common.text")},{default:l(()=>[e(x,{modelValue:u.value.value,"onUpdate:modelValue":a[1]||(a[1]=t=>u.value.value=t),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"]),e($,{modelValue:r.value,"onUpdate:modelValue":a[9]||(a[9]=t=>r.value=t),title:n(o)("common.link")},{footer:l(()=>[e(y,{onClick:a[7]||(a[7]=t=>r.value=!1)},{default:l(()=>[d(s(n(o)("common.cancel")),1)]),_:1}),e(y,{type:"primary",onClick:a[8]||(a[8]=t=>{_("update:items",[...f.items,u.value]),r.value=!1})},{default:l(()=>[d(s(n(o)("common.ok")),1)]),_:1})]),default:l(()=>[e(B,null,{default:l(()=>[e(g,{label:n(o)("common.name")},{default:l(()=>[e(x,{modelValue:u.value.name,"onUpdate:modelValue":a[5]||(a[5]=t=>u.value.name=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:n(o)("common.link")},{default:l(()=>[e(x,{modelValue:u.value.value,"onUpdate:modelValue":a[6]||(a[6]=t=>u.value.value=t),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])])}}});export{Ie as _};
