var w=(x,t,s)=>new Promise((_,u)=>{var c=m=>{try{p(s.next(m))}catch(r){u(r)}},e=m=>{try{p(s.throw(m))}catch(r){u(r)}},p=m=>m.done?_(m.value):Promise.resolve(m.value).then(c,e);p((s=s.apply(x,t)).next())});import{g as I,o as B}from"./i18n.48bd28ac.js";import{a as T}from"./index.8b079f71.js";import{x as U,L as C,H as h}from"./main.ea42d807.js";import{a as N,r as V,m as K,d as H,i as L,s as $}from"./validate.efc4a5c0.js";import{d as j,g as d,cd as A,i as g,o as D,a as R,f as v,t as y,u as n,b as i,w as l,F as M,b6 as O,j as Q,aH as z,x as G}from"./url.2e6a77c4.js";import{E as J}from"./index.fc90f5ad.js";import{E as P,a as W}from"./index.6855d037.js";import{E as X,a as Y}from"./index.0d2684bf.js";import{E as Z}from"./index.2bc50276.js";import"./index.50c16ae5.js";import"./windi.a5b0b048.js";import"./preload-helper.13a99eb0.js";import"./replace-all.7cf5f327.js";import"./index.d75a71d9.js";import"./index.aba77680.js";import"./index.6d45a031.js";import"./index.31f26a0f.js";import"./index.60af85f4.js";import"./style.19d0c187.js";import"./toNumber.574be4f1.js";import"./_baseIsEqual.c0d7e77a.js";import"./event.776e7e11.js";import"./index.ff0264f3.js";import"./error.7e8331f1.js";import"./isNil.98bb3b88.js";import"./_baseClone.adbc92f5.js";import"./isEqual.f1ae9fb3.js";import"./index.379e80ad.js";import"./focus-trap.23f44899.js";import"./event.53b2ad83.js";import"./index.a439b087.js";import"./index.fcc3ea42.js";import"./scroll.f51de5d8.js";import"./debounce.61c67278.js";import"./index.064c7de9.js";import"./validator.e2869aba.js";const ee={class:"text-444 dark:text-fff/86"},oe={class:"text-3l mb-8"},te={class:"text-s"},ae={class:"border-t border-b border-line dark:border-[#555] border-solid my-24 py-24"},me={class:"flex items-center space-x-8"},Ae=j({setup(x){const{t}=I(),s=d(),_=A(),u=d(!1),c=d(!1),e=d({subDomain:"",rootDomain:"",siteName:""}),p={subDomain:[N(t("common.subDomainRequiredTips")),V(1,63),K,H(e.value)],rootDomain:N(t("common.rootDomainRequiredTips")),siteName:[V(1,50),N(t("common.nameRequiredTips")),L(U,t("common.siteNameExistsTips")),$()]},m=d();T().then(f=>{s.value=f,s.value.length&&(e.value.rootDomain=s.value[0].domainName)});const r=()=>w(this,null,function*(){yield m.value.validate();const f=yield C(e.value),o=G("currentFolder");o&&(yield h({siteIds:[f.id],folderName:o})),_.push({name:"home",query:{currentFolder:o}})});return g(()=>e.value.subDomain,()=>{u.value||(e.value.siteName=e.value.subDomain)}),g(()=>e.value.siteName,()=>{c.value||(e.value.subDomain=e.value.siteName)}),(f,o)=>{const E=J,b=P,k=X,q=Y,S=W,F=Z;return D(),R("div",ee,[v("p",oe,y(n(t)("common.createSite")),1),v("p",te,y(n(t)("common.createTips")),1),v("div",ae,[i(S,{ref_key:"form",ref:m,"label-position":"top",model:e.value,rules:n(p),onKeydown:B(r,["enter"])},{default:l(()=>[i(b,{label:n(t)("common.siteName"),prop:"siteName"},{default:l(()=>[i(E,{modelValue:e.value.siteName,"onUpdate:modelValue":o[0]||(o[0]=a=>e.value.siteName=a),modelModifiers:{trim:!0},class:"w-394px","data-cy":"siteName",onInput:o[1]||(o[1]=a=>u.value=!0)},null,8,["modelValue"])]),_:1},8,["label"]),v("div",me,[i(b,{label:n(t)("common.domain"),prop:"subDomain"},{default:l(()=>[i(E,{modelValue:e.value.subDomain,"onUpdate:modelValue":o[2]||(o[2]=a=>e.value.subDomain=a),class:"w-394px","data-cy":"subdomain",onInput:o[3]||(o[3]=a=>c.value=!0)},null,8,["modelValue"])]),_:1},8,["label"]),i(b,{prop:"rootDomain",class:"mt-30px"},{default:l(()=>[i(q,{modelValue:e.value.rootDomain,"onUpdate:modelValue":o[4]||(o[4]=a=>e.value.rootDomain=a),"data-cy":"root-domain"},{default:l(()=>[(D(!0),R(M,null,O(s.value,a=>(D(),Q(k,{key:a.domainName,value:a.domainName,label:"."+a.domainName,"data-cy":"root-domain-opt"},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["model","rules","onKeydown"])]),i(F,{round:"",type:"primary","data-cy":"start-create",onClick:r},{default:l(()=>[z(y(n(t)("common.startCreate")),1)]),_:1})])}}});export{Ae as default};
