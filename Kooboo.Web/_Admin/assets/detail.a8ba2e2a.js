var he=Object.defineProperty,ke=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var re=(u,p,y)=>p in u?he(u,p,{enumerable:!0,configurable:!0,writable:!0,value:y}):u[p]=y,q=(u,p)=>{for(var y in p||(p={}))Ce.call(p,y)&&re(u,y,p[y]);if(se)for(var y of se(p))Ve.call(p,y)&&re(u,y,p[y]);return u},H=(u,p)=>ke(u,xe(p));var K=(u,p,y)=>new Promise((o,b)=>{var c=d=>{try{E(y.next(d))}catch(I){b(I)}},v=d=>{try{E(y.throw(d))}catch(I){b(I)}},E=d=>d.done?o(d.value):Promise.resolve(d.value).then(c,v);E((y=y.apply(u,p)).next())});import{_ as $e}from"./index.f237f871.js";import{_ as Ee}from"./country.ee46f866.js";import{d as z,g as D,o as n,j as m,w as l,b as a,u as t,k as _,a as C,az as Ne,f as g,G as we,t as s,F as S,b6 as R,h as Ie,aH as r,x as Ae,cd as De,c as Be,c0 as Ue,cg as Se}from"./url.2e6a77c4.js";import{B as Te}from"./breadcrumb.80c136b8.js";import{g as L,w as Fe}from"./i18n.48bd28ac.js";import{u as Oe}from"./replace-all.7cf5f327.js";import{b as Me,e as Pe,p as Re,f as ze}from"./order.1bca6ba5.js";import{u as le}from"./use-date.01b82ce0.js";import{b as me}from"./product-variant.f9d76101.js";import{_ as j}from"./property-item.c8a41109.js";import{_ as de}from"./index.a731e53b.js";import{E as te}from"./index.fc90f5ad.js";import{E as oe,a as ae}from"./index.6855d037.js";import{E as Y}from"./index.c4e9b529.js";import{_ as Le}from"./image-cover.5aa60066.js";import{k as ce,u as Ke}from"./main.ea42d807.js";import{_ as je}from"./icon-button.3313e42d.js";import{_ as Qe}from"./digital-items-editor.6c733298.js";import{E as pe}from"./index.77edae39.js";import{g as Ge}from"./shipping.f7d1d018.js";import{_ as Je}from"./dropdown-input.1a28e074.js";import{E as qe}from"./index.8ef89ff6.js";import{E as X}from"./index.2bc50276.js";import{b as He,a as We}from"./index.695d0284.js";import{_ as Xe}from"./index.4a51c2b7.js";import{u as Ye}from"./useFields.2c414714.js";import{_ as M}from"./currency-amount.de4456dd.js";import{_ as Ze}from"./tooltip.28a451cc.js";import{c as ve}from"./index.0d2684bf.js";import{E as fe,a as _e}from"./index.3abc9b92.js";import{E as el}from"./index.968f79fd.js";import{E as ll,a as tl}from"./index.b494e80e.js";import{E as ol}from"./index.379e80ad.js";/* empty css                                                               */import"./plugin-vue_export-helper.21dcd24c.js";import"./windi.a5b0b048.js";import"./plugin-vue_export-helper.41ffa612.js";import"./index.a439b087.js";import"./error.7e8331f1.js";import"./date.99e830d5.js";import"./dayjs.min.0a66969b.js";import"./guid.c1a40312.js";import"./event.776e7e11.js";import"./index.ff0264f3.js";import"./isNil.98bb3b88.js";import"./_baseClone.adbc92f5.js";import"./_baseIsEqual.c0d7e77a.js";import"./isEqual.f1ae9fb3.js";import"./index.603c1365.js";import"./scroll.f51de5d8.js";import"./index.fcc3ea42.js";import"./focus-trap.23f44899.js";import"./refs.4001ce17.js";import"./media-dialog.00ce8f4f.js";import"./media.56507018.js";import"./media-list.vue_vue_type_style_index_0_scoped_true_lang.118b18f5.js";import"./index.4db7adae.js";/* empty css                                                          */import"./search-provider.68dc3c2c.js";import"./toNumber.574be4f1.js";import"./last.e7aa49db.js";import"./_baseIndexOf.4d7985be.js";import"./style.19d0c187.js";import"./_baseUniq.c69c2d82.js";import"./use-operation-dialog.f0f37a10.js";import"./file.b0d4cc6e.js";import"./validate.efc4a5c0.js";import"./index.d75a71d9.js";import"./index.aba77680.js";import"./index.6d45a031.js";import"./index.31f26a0f.js";import"./index.60af85f4.js";import"./folder.8308bb9d.js";import"./relations-tag.a09361ff.js";import"./page.831d1a45.js";import"./index.99c4f65d.js";import"./aria.75ec5909.js";import"./event.53b2ad83.js";import"./validator.e2869aba.js";import"./use-copy-text.a346ed23.js";import"./index.500e98ec.js";import"./browser.6147bf52.js";import"./throttle.041b2553.js";import"./debounce.61c67278.js";import"./index.7034978e.js";import"./search-input.67dfc984.js";/* empty css                                                                 *//* empty css                                                          */import"./layout.7d98e9c1.js";import"./index.d971d096.js";import"./position.c0f844a3.js";import"./utils.6985c8b2.js";import"./confirm.e2c924ff.js";import"./logo-transparent.1566007e.js";import"./index.0e262df3.js";import"./use-file-upload.82732353.js";import"./index.470f0e7e.js";import"./index.deca86b5.js";import"./index.a47bd154.js";import"./index.be352e91.js";import"./file.e38b2555.js";/* empty css                                                         */import"./image-editor.vue_vue_type_style_index_0_scoped_true_lang.f6d26366.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./index.8262f5ef.js";import"./product.c1a83798.js";import"./index.f5a869bb.js";import"./dropdown.0507a1c7.js";import"./_createCompounder.591d8488.js";import"./color-picker.770bc088.js";import"./index.ae716322.js";import"./index.064c7de9.js";import"./string.955a924b.js";import"./useLabels.456dfc28.js";import"./commerce.f8d3336c.js";import"./isEmpty.dc565ae5.js";const al=z({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue","reload"],setup(u,{emit:p}){const y=u,{t:o}=L(),b=D(!0),c=D({id:y.id,reason:""});function v(){return K(this,null,function*(){yield Me(c.value),p("reload"),b.value=!1})}return(E,d)=>{const I=te,e=oe,N=ae,U=de,F=Y;return n(),m(F,{"model-value":b.value,width:"600px",title:t(o)("commerce.cancelOrder"),"close-on-click-modal":!1,onClosed:d[2]||(d[2]=T=>p("update:modelValue",!1))},{footer:l(()=>[a(U,{onConfirm:v,onCancel:d[1]||(d[1]=T=>b.value=!1)})]),default:l(()=>[c.value?(n(),m(N,{key:0,"label-position":"top"},{default:l(()=>[a(e,{label:t(o)("common.cancelReason")},{default:l(()=>[a(I,{modelValue:c.value.reason,"onUpdate:modelValue":d[0]||(d[0]=T=>c.value.reason=T),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):_("",!0)]),_:1},8,["model-value","title"])}}}),nl=z({props:{line:null},emits:["update:modelValue"],setup(u,{emit:p}){const{t:y}=L(),o=D(!0);return(b,c)=>{const v=Y;return n(),C("div",null,[(n(),m(Ne,{to:"body"},[a(v,{"model-value":o.value,width:"600px",title:t(y)("common.digitalItems"),"close-on-click-modal":!1,onClosed:c[1]||(c[1]=E=>p("update:modelValue",!1))},{default:l(()=>[a(Qe,{id:u.line.id,items:u.line.digitalItems,"onUpdate:items":c[0]||(c[0]=E=>u.line.digitalItems=E)},null,8,["id","items"])]),_:1},8,["model-value","title"])]))])}}}),il={class:"bg-gray/50 rounded-normal"},sl={class:"p-8 flex"},rl={class:"flex-1 flex justify-between items-center"},ul={class:"text-s"},ml={key:0,class:"text-s p-8 flex items-center"},dl={key:0,class:"flex-1"},cl={class:"truncate"},pl={key:1,class:"flex-1"},vl={class:"flex-shrink-0 w-32"},ue=z({props:{line:null,showSelected:{type:Boolean},selected:{type:Boolean}},emits:["update:selected"],setup(u){const{t:p}=L(),y=D(!1);return(o,b)=>{const c=pe;return n(),C("div",il,[g("div",sl,[u.showSelected?(n(),m(c,{key:0,modelValue:u.selected,"onUpdate:modelValue":b[0]||(b[0]=v=>we(selected)?selected.value=v:null),class:"w-24",onClick:b[1]||(b[1]=Fe(v=>o.$emit("update:selected"),["stop","prevent"]))},null,8,["modelValue"])):_("",!0),g("div",rl,[a(Le,{"model-value":u.line.image,size:"small"},null,8,["model-value"]),g("div",null,[g("div",null,s(u.line.title),1),g("div",ul,s(t(me)(u.line.options)),1)]),g("div",null,"x"+s(u.line.totalQuantity),1)])]),u.line.isDigital?(n(),C("div",ml,[u.line.digitalItems.length?(n(),C("div",dl,[(n(!0),C(S,null,R(u.line.digitalItems,v=>(n(),C("div",{key:v.id},[g("p",cl,s(v.name)+" : "+s(v.type=="file"?t(ce)(v.size):v.value),1)]))),128))])):(n(),C("div",pl,"-")),g("div",vl,[a(je,{icon:"icon-a-writein",tip:t(p)("common.editDigitalItems"),onClick:b[2]||(b[2]=v=>y.value=!0)},null,8,["tip"])])])):_("",!0),y.value?(n(),m(nl,{key:1,modelValue:y.value,"onUpdate:modelValue":b[3]||(b[3]=v=>y.value=v),line:u.line},null,8,["modelValue","line"])):_("",!0)])}}}),fl={class:"grid grid-cols-2 gap-8"},_l={class:"space-y-4"},yl={class:"space-y-4"},gl={class:"flex"},bl=g("div",{class:"flex-1"},null,-1),hl=z({props:{modelValue:{type:Boolean},id:null,lines:null},emits:["update:modelValue","reload"],setup(u,{emit:p}){const y=u,{t:o}=L(),b=D(!0),c=D([]);Ie(()=>K(this,null,function*(){c.value=yield Ge()}));const v=D([]),E=D(!1),d=JSON.parse(JSON.stringify(y.lines.filter(w=>!w.delivered))),I=D(d.filter(w=>!w.isDigital)),e=D(d.filter(w=>w.isDigital)),N=D({id:y.id,shippingCarrier:"",trackingNumber:""});function U(){return K(this,null,function*(){const w={id:N.value.id,items:[]};for(const f of d)E.value&&!v.value.includes(f.id)||w.items.push({id:f.id,shippingCarrier:N.value.shippingCarrier,trackingNumber:N.value.trackingNumber,digitalItems:f.digitalItems});yield Pe(w),p("reload"),b.value=!1})}function F(w){v.value.includes(w)?v.value=v.value.filter(f=>f!=w):v.value.push(w)}function T(w){var f;for(const x of c.value){if(!x.trackingNumberMatching)return;new RegExp((f=x.trackingNumberMatching)==null?void 0:f.toLowerCase()).test(w==null?void 0:w.toLowerCase())&&(N.value.shippingCarrier=x.name)}}return(w,f)=>{const x=qe,V=te,h=oe,k=ae,B=pe,O=Y;return n(),m(O,{"model-value":b.value,width:"800px",title:t(o)("commerce.delivery"),"close-on-click-modal":!1,onClosed:f[4]||(f[4]=$=>p("update:modelValue",!1))},{footer:l(()=>[g("div",gl,[t(d).length>1?(n(),m(B,{key:0,modelValue:E.value,"onUpdate:modelValue":f[2]||(f[2]=$=>E.value=$),label:t(o)("commerce.partialDelivery")},null,8,["modelValue","label"])):_("",!0),bl,a(t(X),{onClick:f[3]||(f[3]=$=>b.value=!1)},{default:l(()=>[r(s(t(o)("common.cancel")),1)]),_:1}),a(t(X),{type:"primary",onClick:U},{default:l(()=>[r(s(t(o)("commerce.delivery")),1)]),_:1})])]),default:l(()=>[N.value?(n(),m(k,{key:0,"label-position":"top"},{default:l(()=>[I.value.length?(n(),C(S,{key:0},[e.value.length?(n(),m(x,{key:0,class:"mt-0"},{default:l(()=>[r(s(t(o)("common.physicalProduct")),1)]),_:1})):_("",!0),g("div",fl,[a(h,{label:t(o)("commerce.trackingNumber")},{default:l(()=>[a(V,{modelValue:N.value.trackingNumber,"onUpdate:modelValue":f[0]||(f[0]=$=>N.value.trackingNumber=$),onChange:T},null,8,["modelValue"])]),_:1},8,["label"]),a(h,{label:t(o)("commerce.shippingCarrier")},{default:l(()=>[a(Je,{modelValue:N.value.shippingCarrier,"onUpdate:modelValue":f[1]||(f[1]=$=>N.value.shippingCarrier=$),options:c.value.map($=>$.name)},null,8,["modelValue","options"])]),_:1},8,["label"])]),g("div",_l,[(n(!0),C(S,null,R(I.value,$=>(n(),m(ue,{key:$.id,line:$,"show-selected":E.value,selected:v.value.includes($.id),"onUpdate:selected":W=>F($.id)},null,8,["line","show-selected","selected","onUpdate:selected"]))),128))])],64)):_("",!0),e.value.length?(n(),C(S,{key:1},[a(x,null,{default:l(()=>[r(s(t(o)("common.digitalProduct")),1)]),_:1}),g("div",yl,[(n(!0),C(S,null,R(e.value,$=>(n(),m(ue,{key:$.id,line:$,"show-selected":E.value,selected:v.value.includes($.id),"onUpdate:selected":W=>F($.id)},null,8,["line","show-selected","selected","onUpdate:selected"]))),128))])],64)):_("",!0)]),_:1})):_("",!0)]),_:1},8,["model-value","title"])}}}),kl={class:"space-y-8"},xl=r("Cash"),Cl=r("Credit card"),Vl={class:"grid grid-cols-2 gap-8"},$l=z({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue","reload"],setup(u,{emit:p}){const y=u,{t:o}=L(),b=D(!0),c=D({orderId:y.id,method:"Cash",cardNumber:"",expirationDate:"",cvc:"",nameOnCard:""});function v(){return K(this,null,function*(){yield Re(c.value),p("reload"),b.value=!1})}return(E,d)=>{const I=He,e=We,N=te,U=oe,F=ae,T=de,w=Y;return n(),m(w,{"model-value":b.value,width:"600px",title:t(o)("common.pay"),"close-on-click-modal":!1,onClosed:d[6]||(d[6]=f=>p("update:modelValue",!1))},{footer:l(()=>[a(T,{"confirm-label":t(o)("common.pay"),onConfirm:v,onCancel:d[5]||(d[5]=f=>b.value=!1)},null,8,["confirm-label"])]),default:l(()=>[g("div",kl,[a(e,{modelValue:c.value.method,"onUpdate:modelValue":d[0]||(d[0]=f=>c.value.method=f)},{default:l(()=>[a(I,{label:"Cash"},{default:l(()=>[xl]),_:1}),a(I,{label:"CreditCard",disabled:""},{default:l(()=>[Cl]),_:1})]),_:1},8,["modelValue"]),c.value.method=="CreditCard"?(n(),m(F,{key:0,"label-position":"top"},{default:l(()=>[a(U,{label:t(o)("common.cardNumber")},{default:l(()=>[a(N,{modelValue:c.value.cardNumber,"onUpdate:modelValue":d[1]||(d[1]=f=>c.value.cardNumber=f)},null,8,["modelValue"])]),_:1},8,["label"]),g("div",Vl,[a(U,{label:t(o)("common.expirationDate")},{default:l(()=>[a(N,{modelValue:c.value.expirationDate,"onUpdate:modelValue":d[2]||(d[2]=f=>c.value.expirationDate=f)},null,8,["modelValue"])]),_:1},8,["label"]),a(U,{label:t(o)("common.cvc")},{default:l(()=>[a(N,{modelValue:c.value.cvc,"onUpdate:modelValue":d[3]||(d[3]=f=>c.value.cvc=f)},null,8,["modelValue"])]),_:1},8,["label"])]),a(U,{label:t(o)("common.nameOnCard")},{default:l(()=>[a(N,{modelValue:c.value.nameOnCard,"onUpdate:modelValue":d[4]||(d[4]=f=>c.value.nameOnCard=f)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):_("",!0)])]),_:1},8,["model-value","title"])}}}),El=z({props:{line:null},setup(u){const{t:p}=L();return(y,o)=>{const b=ve,c=Ze,v=fe,E=_e,d=el;return n(),C("div",null,[a(d,{placement:"left",width:"600",disabled:!u.line.delivered},{reference:l(()=>[u.line.delivered?(n(),m(b,{key:0,round:"",type:"success",class:"cursor-default"},{default:l(()=>[r(s(t(p)("commerce.shipped")),1)]),_:1})):u.line.errorMessage?(n(),m(b,{key:1,round:"",type:"danger"},{default:l(()=>[r(s(t(p)("common.failed"))+" ",1),a(c,{tip:u.line.errorMessage,"custom-class":"ml-4"},null,8,["tip"])]),_:1})):(n(),m(b,{key:2,round:"",type:"info"},{default:l(()=>[r(s(t(p)("commerce.unshipped")),1)]),_:1}))]),default:l(()=>[a(E,{title:t(p)("common.detail"),column:1,border:""},{default:l(()=>[u.line.isDigital?(n(!0),C(S,{key:0},R(u.line.digitalItems,I=>(n(),m(v,{key:I.id,label:I.name},{default:l(()=>[r(s(I.type=="file"?t(ce)(I.size):I.value),1)]),_:2},1032,["label"]))),128)):(n(),C(S,{key:1},[a(v,{label:t(p)("commerce.shippingCarrier")},{default:l(()=>[r(s(u.line.shippingCarrier),1)]),_:1},8,["label"]),a(v,{label:t(p)("commerce.trackingNumber")},{default:l(()=>[r(s(u.line.trackingNumber),1)]),_:1},8,["label"])],64))]),_:1},8,["title"])]),_:1},8,["disabled"])])}}}),Nl={key:0,class:"px-24 pt-0 pb-84px space-y-12"},wl={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal relative"},Il={key:0,class:"text-s inline-flex space-x-4 items-center"},Al=["title"],Dl={class:"text-s"},Bl={class:"inline-flex flex-wrap gap-4"},Ul={class:"text-s mt-12"},Sl={class:"relative flex"},Tl={class:"flex gap-4"},Fl={class:"absolute right-0 space-y-4"},Ol={key:0,class:"flex items-center gap-4 text-s justify-end"},Ml={class:"flex items-center gap-8"},Pl={key:0,class:"flex items-center gap-4"},Rl=r(" ( "),zl={key:0},Ll=r(" ) "),Kl={key:0,class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},jl={class:"bg-fff dark:bg-[#252526] px-24 py-16 rounded-normal"},Ql=g("div",null,null,-1),Gl={class:"text-m text-999"},aa=z({setup(u){const{getColumns:p}=Ye(),y=Ae("id"),{t:o}=L(),b=De(),c=D(!1),v=D(!1),E=D(!1),d=Ke(),I=p([{name:"featuredImage",prop:"image",attrs:{width:80,align:"center"}},{name:"title"},{name:"price",displayName:o("common.price")},{name:"totalQuantity",displayName:o("common.quantity"),attrs:{align:"center"}},{name:"totalAmount",displayName:o("common.totalAmount")},{name:"discounts",displayName:o("common.discount"),attrs:{align:"center"}}]),e=D();function N(){return K(this,null,function*(){e.value=yield ze(y)})}function U(x){var V,h,k,B,O;return`${x.clientInfo.os||""} ${((V=x.clientInfo)==null?void 0:V.platform)||""} ${((k=(h=x.clientInfo)==null?void 0:h.application)==null?void 0:k.name)||""} ${((O=(B=x.clientInfo)==null?void 0:B.application)==null?void 0:O.version)||""} ${(x==null?void 0:x.userAgent)||""}`}N();function F(){b.goBackOrTo(Oe({name:"orders"}))}const T=Be(()=>{var V;const x=[];if(!((V=e.value)!=null&&V.lines))return x;for(const h of e.value.lines)if(!h.groupName)x.push(H(q({},h),{rowKey:h.variantId+h.groupName}));else if(h.isMain){const k=e.value.lines.filter(B=>B.groupName==h.groupName&&!B.isMain).map(B=>H(q({},B),{rowKey:B.variantId+B.groupName,isChild:!0}));x.push(H(q({},h),{rowKey:h.variantId+h.groupName,children:k}))}else e.value.lines.find(B=>B.groupName==h.groupName&&B.isMain)||x.push(H(q({},h),{rowKey:h.variantId+h.groupName}));return x});function w({row:x}){if(!!x.isChild)return"text-999 text-s !bg-gray/20"}function f(x){if(!x.url)return;let V=Ue(d.site.baseUrl,x.url);Se(V)}return(x,V)=>{var ne,ie;const h=ve,k=fe,B=Ee,O=_e,$=ll,W=X,ye=tl,ge=ol,Z=X,be=$e;return n(),C(S,null,[a(Te,{class:"p-24","crumb-path":[{name:t(o)("common.orders"),route:{name:"orders"}},{name:t(o)("common.orderDetail")}]},null,8,["crumb-path"]),e.value?(n(),C("div",Nl,[g("div",wl,[a(O,{title:t(o)("common.basicInfo")},{default:l(()=>[a(k,{label:t(o)("commerce.orderNumber")},{default:l(()=>[r(s(e.value.id)+" ",1),e.value.canceled?(n(),m(h,{key:0,type:"danger",size:"small"},{default:l(()=>[r(s(t(o)("commerce.canceled")),1)]),_:1})):_("",!0)]),_:1},8,["label"]),a(k,{label:t(o)("common.createTime")},{default:l(()=>[r(s(t(le)(e.value.createdAt)),1)]),_:1},8,["label"]),a(k,{label:t(o)("common.lastModified")},{default:l(()=>[r(s(t(le)(e.value.updatedAt)),1)]),_:1},8,["label"]),a(k,{label:t(o)("common.contact")},{default:l(()=>[r(s(e.value.customer.firstName)+" "+s(e.value.customer.lastName),1)]),_:1},8,["label"]),a(k,{label:t(o)("common.email")},{default:l(()=>[r(s(e.value.customer.email),1)]),_:1},8,["label"]),a(k,{label:t(o)("common.phone")},{default:l(()=>[r(s(e.value.customer.phone),1)]),_:1},8,["label"]),a(k,{label:"IP"},{default:l(()=>[r(s(e.value.ip),1)]),_:1}),a(k,{label:t(o)("common.country")},{default:l(()=>[a(B,{"name-or-code":e.value.country},null,8,["name-or-code"])]),_:1},8,["label"]),e.value.source?(n(),m(k,{key:0,label:t(o)("common.source")},{default:l(()=>[r(s(e.value.source),1)]),_:1},8,["label"])):_("",!0),e.value.scheduledDeliveryTime?(n(),m(k,{key:1,label:t(o)("common.scheduledDeliveryTime")},{default:l(()=>[r(s(t(le)(e.value.scheduledDeliveryTime)),1)]),_:1},8,["label"])):_("",!0),a(k,{label:t(o)("common.clientInfo")},{default:l(()=>{var i,A;return[e.value.clientInfo?(n(),C("div",Il,[(A=(i=e.value.clientInfo)==null?void 0:i.application)!=null&&A.isWebBrowser?(n(),m(h,{key:0,round:"",size:"small"},{default:l(()=>[r(s(t(o)("common.webBrowser")),1)]),_:1})):_("",!0),g("div",{class:"ellipsis",title:U(e.value)},s(U(e.value)),9,Al)])):_("",!0)]}),_:1},8,["label"]),a(k,{label:t(o)("common.paymentMethod")},{default:l(()=>[e.value.paid?(n(),m(h,{key:0,round:"",type:"success"},{default:l(()=>[r(s(e.value.paymentMethod),1)]),_:1})):(n(),m(h,{key:1,round:"",type:"info"},{default:l(()=>[r(s(t(o)("common.notPaid")),1)]),_:1}))]),_:1},8,["label"]),a(k,{label:t(o)("commerce.shippingStatus")},{default:l(()=>[e.value.partialDelivered?(n(),m(h,{key:0,round:"",type:"warning"},{default:l(()=>[r(s(t(o)("commerce.partialShipped")),1)]),_:1})):e.value.delivered?(n(),m(h,{key:1,round:"",type:"success"},{default:l(()=>[r(s(t(o)("commerce.shipped")),1)]),_:1})):(n(),m(h,{key:2,round:"",type:"info"},{default:l(()=>[r(s(t(o)("commerce.unshipped")),1)]),_:1}))]),_:1},8,["label"])]),_:1},8,["title"]),a(ye,{data:t(T),"row-key":"rowKey",class:"el-table--gray","default-expand-all":"","row-class-name":w},{default:l(()=>[t(T).some(i=>{var A;return(A=i.children)==null?void 0:A.length})?(n(),m($,{key:0,width:"25"})):_("",!0),a(Xe,{columns:t(I)},{title:l(({row:i})=>[g("div",null,[g("div",null,s(i.title),1),g("div",Dl,s(t(me)(i.options)),1)])]),price:l(({row:i})=>[a(M,{currency:e.value.currency,original:i.originalPrice,amount:i.price},null,8,["currency","original","amount"])]),totalAmount:l(({row:i})=>[a(M,{currency:e.value.currency,amount:i.totalAmount,original:i.originalAmount},null,8,["currency","amount","original"])]),discounts:l(({row:i})=>[g("div",Bl,[(n(!0),C(S,null,R(i.discountAllocations,(A,P)=>(n(),m(h,{key:P},{default:l(()=>[r(s(A.title),1)]),_:2},1024))),128))])]),_:1},8,["columns"]),a($,{label:t(o)("commerce.deliveryStatus")},{default:l(({row:i})=>[a(El,{line:i},null,8,["line"])]),_:1},8,["label"]),a($,{align:"right"},{default:l(({row:i})=>[i.extensionButton?(n(),m(W,{key:0,type:"primary",size:"small",onClick:A=>f(i.extensionButton)},{default:l(()=>[r(s(i.extensionButton.text),1)]),_:2},1032,["onClick"])):_("",!0)]),_:1})]),_:1},8,["data"]),g("div",Ul,[g("div",Sl,[e.value.discountAllocations.length?(n(),m(j,{key:0,name:t(o)("common.discount")},{default:l(()=>[g("div",Tl,[(n(!0),C(S,null,R(e.value.discountAllocations,(i,A)=>(n(),m(h,{key:A},{default:l(()=>[r(s(i.title),1)]),_:2},1024))),128))])]),_:1},8,["name"])):_("",!0),g("div",Fl,[e.value.earnPoints>0?(n(),C("div",Ol,[g("span",null,s(t(o)("common.earn")),1),g("span",null,s(e.value.earnPoints),1),g("span",null,s(t(o)("commerce.points")),1)])):_("",!0)])]),a(j,{name:t(o)("commerce.subtotalAmount")},{default:l(()=>{var i;return[a(M,{amount:(i=e.value)==null?void 0:i.subtotalAmount,currency:e.value.currency,original:e.value.originalSubtotalAmount},null,8,["amount","currency","original"])]}),_:1},8,["name"]),(ne=e.value)!=null&&ne.insuranceAmount?(n(),m(j,{key:0,name:t(o)("commerce.insuranceAmount")},{default:l(()=>{var i;return[a(M,{amount:(i=e.value)==null?void 0:i.insuranceAmount,currency:e.value.currency},null,8,["amount","currency"])]}),_:1},8,["name"])):_("",!0),(ie=e.value)!=null&&ie.pointsDeductionAmount?(n(),m(j,{key:1,name:t(o)("commerce.points")},{default:l(()=>{var i;return[a(M,{amount:-((i=e.value)==null?void 0:i.pointsDeductionAmount)},null,8,["amount"]),r(" ("+s(e.value.redeemPoints)+" "+s(t(o)("commerce.points"))+") ",1)]}),_:1},8,["name"])):_("",!0),a(j,{name:t(o)("commerce.shippingAmount")},{default:l(()=>{var i,A,P,Q;return[g("div",Ml,[a(M,{amount:(i=e.value)==null?void 0:i.shippingAmount,currency:e.value.currency},null,8,["amount","currency"]),((Q=(P=(A=e.value)==null?void 0:A.shippingAllocations)==null?void 0:P.length)!=null?Q:0)>1?(n(),C("div",Pl,[Rl,(n(!0),C(S,null,R(e.value.shippingAllocations,(G,J)=>(n(),C("div",{key:J,class:"flex items-center gap-4"},[a(ge,{placement:"top",content:G.title},{default:l(()=>[a(M,{amount:G.cost,currency:e.value.currency},null,8,["amount","currency"])]),_:2},1032,["content"]),J!=e.value.shippingAllocations.length-1?(n(),C("span",zl,"+")):_("",!0)]))),128)),Ll])):_("",!0)])]}),_:1},8,["name"]),a(j,{name:t(o)("common.total")},{default:l(()=>[a(M,{currency:e.value.currency,amount:e.value.totalAmount,original:e.value.originalAmount},null,8,["currency","amount","original"])]),_:1},8,["name"])])]),e.value.shippingAddress?(n(),C("div",Kl,[a(O,{title:t(o)("commerce.shippingAddress")},{default:l(()=>[a(k,{label:t(o)("common.country")},{default:l(()=>{var i;return[r(s((i=e.value.shippingAddress)==null?void 0:i.country),1)]}),_:1},8,["label"]),a(k,{label:t(o)("common.contact")},{default:l(()=>{var i,A;return[r(s((i=e.value.shippingAddress)==null?void 0:i.firstName)+" "+s((A=e.value.shippingAddress)==null?void 0:A.lastName),1)]}),_:1},8,["label"]),a(k,{label:t(o)("common.phone")},{default:l(()=>{var i;return[r(s((i=e.value.shippingAddress)==null?void 0:i.phone),1)]}),_:1},8,["label"]),a(k,{label:t(o)("common.province")},{default:l(()=>{var i;return[r(s((i=e.value.shippingAddress)==null?void 0:i.province),1)]}),_:1},8,["label"]),a(k,{label:t(o)("common.city")},{default:l(()=>{var i;return[r(s((i=e.value.shippingAddress)==null?void 0:i.city),1)]}),_:1},8,["label"]),a(k,{label:t(o)("common.postalCode")},{default:l(()=>{var i;return[r(s((i=e.value.shippingAddress)==null?void 0:i.zip),1)]}),_:1},8,["label"]),a(k,{label:t(o)("common.address"),span:3},{default:l(()=>{var i;return[r(s((i=e.value.shippingAddress)==null?void 0:i.address1),1)]}),_:1},8,["label"])]),_:1},8,["title"])])):_("",!0),g("div",jl,[a(O,{title:t(o)("commerce.note")},{default:l(()=>[Ql]),_:1},8,["title"]),g("div",Gl,s(e.value.note),1)]),c.value?(n(),m(al,{key:1,id:e.value.id,modelValue:c.value,"onUpdate:modelValue":V[0]||(V[0]=i=>c.value=i),onReload:N},null,8,["id","modelValue"])):_("",!0),v.value?(n(),m(hl,{key:2,id:e.value.id,modelValue:v.value,"onUpdate:modelValue":V[1]||(V[1]=i=>v.value=i),lines:e.value.lines,onReload:N},null,8,["id","modelValue","lines"])):_("",!0),E.value?(n(),m($l,{key:3,id:e.value.id,modelValue:E.value,"onUpdate:modelValue":V[2]||(V[2]=i=>E.value=i),onReload:N},null,8,["id","modelValue"])):_("",!0)])):_("",!0),e.value?(n(),m(be,{key:1,permission:{feature:"orders",action:"edit"},back:"","hidden-confirm":"",onCancel:F},{"extra-buttons":l(()=>{var i,A,P,Q,G,J;return[e.value.extensionButton?(n(),m(W,{key:0,type:"primary",round:"",onClick:V[3]||(V[3]=ee=>f(e.value.extensionButton))},{default:l(()=>[r(s(e.value.extensionButton.text),1)]),_:1})):_("",!0),!((i=e.value)!=null&&i.paid)&&!((A=e.value)!=null&&A.canceled)?(n(),m(Z,{key:1,round:"",type:"primary",onClick:V[4]||(V[4]=ee=>E.value=!0)},{default:l(()=>[r(s(t(o)("common.pay")),1)]),_:1})):_("",!0),((P=e.value)==null?void 0:P.paid)&&!((Q=e.value)!=null&&Q.canceled)&&(!((G=e.value)!=null&&G.delivered)||e.value.partialDelivered)?(n(),m(Z,{key:2,round:"",type:"primary",onClick:V[5]||(V[5]=ee=>v.value=!0)},{default:l(()=>[r(s(t(o)("commerce.delivery")),1)]),_:1})):_("",!0),(J=e.value)!=null&&J.canceled?_("",!0):(n(),m(Z,{key:3,round:"",type:"danger",onClick:V[6]||(V[6]=ee=>c.value=!0)},{default:l(()=>[r(s(t(o)("common.cancel")),1)]),_:1}))]}),_:1})):_("",!0)],64)}}});export{aa as default};
