var C=(D,c,n)=>new Promise((o,l)=>{var i=_=>{try{s(n.next(_))}catch(e){l(e)}},b=_=>{try{s(n.throw(_))}catch(e){l(e)}},s=_=>_.done?o(_.value):Promise.resolve(_.value).then(i,b);s((n=n.apply(D,c)).next())});import{_ as B}from"./k-table.f75c31cc.js";import{a as O,_ as F,g as q,d as j,b as z,c as H}from"./add-users-dialog.345f8c45.js";import{g as A,o as G,w as J}from"./i18n.2d8b30eb.js";import{b as N}from"./main.d8c6ef59.js";import{s as M}from"./confirm.617d359f.js";import{_ as L}from"./index.ed88cf90.js";import{a as P}from"./validate.348f94d6.js";import{E as Q}from"./index.bb5499e2.js";import{E as W,a as X}from"./index.a141884f.js";import{E as R}from"./index.a4ff385c.js";import{d as T,g as v,o as k,j as x,w as a,b as r,u as t,f as m,t as y,k as U,n as Y,a as Z,aH as ee}from"./url.8f5ec20c.js";import{E as K}from"./windi.bf752d69.js";import{E as S}from"./index.96970839.js";import{E as I}from"./index.bc06171b.js";import{c as oe}from"./index.ab4ed870.js";import"./sortable.esm.a99254e8.js";import"./icon-button.e30c79ea.js";import"./index.ec785feb.js";import"./focus-trap.3f074800.js";import"./isNil.98bb3b88.js";import"./event.53b2ad83.js";import"./index.a595fe6d.js";import"./index.e87fdc52.js";import"./index.0535d5fe.js";import"./index.14993118.js";import"./isEqual.c3e9e9f4.js";import"./_baseIsEqual.2f38f7c3.js";import"./error.7e8331f1.js";import"./index.4c9af567.js";import"./event.776e7e11.js";import"./index.0a83bb10.js";import"./index.745dc8e0.js";import"./validator.1bcd6e6a.js";import"./index.50c16ae5.js";import"./preload-helper.13a99eb0.js";import"./replace-all.dd6016f2.js";import"./logo-transparent.1566007e.js";import"./index.80a4dc1a.js";import"./index.bf8ed8c6.js";import"./scroll.54c27fbd.js";import"./aria.75ec5909.js";import"./index.37979027.js";import"./index.3dc39d21.js";import"./index.832f2769.js";import"./index.b3e4ff8e.js";import"./index.5af167df.js";import"./style.ad574a57.js";import"./toNumber.6efebd6a.js";import"./_baseClone.29a8cd97.js";import"./refs.d2253dd4.js";import"./index.593106e3.js";import"./debounce.730e1961.js";import"./index.b68af8a1.js";const te=T({props:{modelValue:{type:Boolean}},emits:["update:modelValue","reload"],setup(D,{emit:c}){const{t:n}=A(),o=v(),l=v({name:""}),i=v(!0),b=v({name:[P(n("common.fieldRequiredTips"))]}),s=()=>C(this,null,function*(){yield o.value.validate(),yield O(l.value),i.value=!1,c("reload")});return(_,e)=>{const p=Q,d=W,$=X,E=L,w=R;return k(),x(w,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=V=>i.value=V),width:"400px",title:t(n)("common.addDepartment"),onClosed:e[4]||(e[4]=V=>c("update:modelValue",!1))},{footer:a(()=>[r(E,{"confirm-label":t(n)("common.add"),disabled:!l.value.name,onConfirm:s,onCancel:e[2]||(e[2]=V=>i.value=!1)},null,8,["confirm-label","disabled"])]),default:a(()=>[r($,{ref_key:"form",ref:o,modal:l.value,rules:b.value,"label-position":"top",model:l.value,onSubmit:e[1]||(e[1]=J(()=>{},["prevent"]))},{default:a(()=>[r(d,{prop:"name",label:t(n)("common.name")},{default:a(()=>[r(p,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=V=>l.value.name=V),onKeydown:G(s,["enter"])},null,8,["modelValue","onKeydown"])]),_:1},8,["label"])]),_:1},8,["modal","rules","model"])]),_:1},8,["modelValue","title"])}}}),le={class:"space-y-16"},ae={class:"flex items-center"},ne={class:"flex items-center"},se={class:"flex items-center"},me={class:"flex items-center"},re=T({props:{modelValue:{type:Boolean},id:null},emits:["update:modelValue","reload"],setup(D,{emit:c}){const n=D,{t:o}=A(),l=N(),i=v(!1),b=v([]),s=()=>C(this,null,function*(){b.value=yield q(n.id),c("reload")}),_=p=>C(this,null,function*(){yield M(o("common.removeMemberTips")),yield j(n.id,p.map(d=>d.userName)),s()});s();const e=v(!0);return(p,d)=>{const $=K,E=S,w=I,V=B,h=R;return k(),x(h,{modelValue:e.value,"onUpdate:modelValue":d[2]||(d[2]=g=>e.value=g),width:"800px",title:t(o)("common.departmentMembers"),onClosed:d[3]||(d[3]=g=>c("update:modelValue",!1))},{default:a(()=>{var g,f;return[m("div",le,[m("div",null,[(g=t(l).currentOrg)!=null&&g.isAdmin?(k(),x(E,{key:0,round:"",onClick:d[0]||(d[0]=u=>i.value=!0)},{default:a(()=>[r($,{class:"iconfont icon-a-addto"}),m("div",ae,y(t(o)("common.addUser")),1)]),_:1})):U("",!0)]),r(V,{data:b.value,"show-check":(f=t(l).currentOrg)==null?void 0:f.isAdmin,onDelete:_},{default:a(()=>[r(w,{label:t(o)("common.userName")},{default:a(({row:u})=>[m("div",ne,[m("span",null,y(u.userName),1)])]),_:1},8,["label"]),r(w,{label:t(o)("common.email")},{default:a(({row:u})=>[m("div",se,[m("span",null,y(u.emailAddress),1)])]),_:1},8,["label"]),r(w,{label:t(o)("common.function")},{default:a(({row:u})=>[m("div",me,[m("span",null,y(u.function),1)])]),_:1},8,["label"]),r(w,{label:t(o)("common.isManager"),width:"200",align:"center"},{default:a(({row:u})=>[m("span",{class:Y(u.isManager?"text-green":"")},y(u.isManager?t(o)("common.yes"):t(o)("common.no")),3)]),_:1},8,["label"])]),_:1},8,["data","show-check"]),i.value?(k(),x(F,{key:0,id:D.id,modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=u=>i.value=u),excludes:b.value.map(u=>u.id),onReload:s},null,8,["id","modelValue","excludes"])):U("",!0)])]}),_:1},8,["modelValue","title"])}}}),ie={class:"p-24 space-y-16"},de={class:"flex items-center"},ue={class:"flex items-center"},pe={class:"flex items-center"},_o=T({setup(D){const{t:c}=A(),n=N(),o=v(!1),l=v(!1),i=v(),b=v(),s=()=>C(this,null,function*(){i.value=yield z()}),_=e=>C(this,null,function*(){yield M(c("common.removeDepartmentTips")),yield H(e.map(p=>p.id)),s()});return s(),(e,p)=>{var h,g;const d=K,$=S,E=I,w=oe,V=B;return k(),Z("div",ie,[m("div",null,[(h=t(n).currentOrg)!=null&&h.isAdmin?(k(),x($,{key:0,round:"",onClick:p[0]||(p[0]=f=>o.value=!0)},{default:a(()=>[r(d,{class:"iconfont icon-a-addto"}),m("div",de,y(t(c)("common.addDepartment")),1)]),_:1})):U("",!0)]),r(V,{data:i.value,"show-check":(g=t(n).currentOrg)==null?void 0:g.isAdmin,onDelete:_},{default:a(()=>[r(E,{label:t(c)("common.name")},{default:a(({row:f})=>[m("div",ue,[m("span",null,y(f.name),1)])]),_:1},8,["label"]),r(E,{label:t(c)("common.members")},{default:a(({row:f})=>[m("div",pe,[r(w,{round:"",type:"success",class:"cursor-pointer",onClick:u=>{b.value=f,l.value=!0}},{default:a(()=>[ee(y(f.userCount),1)]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data","show-check"]),o.value?(k(),x(te,{key:0,modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=f=>o.value=f),onReload:s},null,8,["modelValue"])):U("",!0),l.value?(k(),x(re,{key:1,id:b.value.id,modelValue:l.value,"onUpdate:modelValue":p[2]||(p[2]=f=>l.value=f),onReload:s},null,8,["id","modelValue"])):U("",!0)])}}});export{_o as default};
